{
  "version": 3,
  "sources": ["../scripts/build/inject/react.mjs", "../src/utils/IpcEvents.ts", "../src/utils/Logger.ts", "../src/utils/proxyLazy.ts", "../src/debug/Tracer.ts", "../src/webpack/webpack.ts", "../src/webpack/common.tsx", "../src/webpack/index.ts", "../src/utils/misc.tsx", "../src/utils/types.ts", "../src/api/settings.ts", "git-hash:~git-hash", "git-remote:~git-remote", "../src/utils/constants.ts", "../src/plugins/BetterNotes.ts", "../src/api/DataStore/index.ts", "../src/plugins/HideAttachments.tsx", "../src/plugins/TimeBarAllActivities.ts", "../src/plugins/anonymiseFileNames.ts", "../src/components/Heart.tsx", "../src/components/DonateButton.tsx", "../src/components/ErrorCard.tsx", "../src/components/ErrorBoundary.tsx", "../src/components/Flex.tsx", "../src/utils/modal.tsx", "../src/plugins/apiBadges.tsx", "../src/plugins/apiCommands.ts", "../src/plugins/apiMenuItemDeobfuscator.ts", "../src/plugins/apiMessageAccessories.ts", "../src/plugins/apiMessageEvents.ts", "../src/plugins/apiNotices.ts", "../src/plugins/apiServerList.ts", "../src/api/Notices.ts", "../src/components/Link.tsx", "../src/plugins/arRPC.tsx", "../src/plugins/banger.ts", "../src/plugins/betterGifAltText.ts", "../src/plugins/betterRoleDot.ts", "../src/plugins/betterUploadButton.ts", "../src/plugins/callTimer.tsx", "../src/api/MessageEvents.ts", "../src/plugins/clearURLs/defaultRules.ts", "../src/plugins/clearURLs/index.ts", "../src/plugins/consoleShortcuts.ts", "../src/api/Commands/commandHelpers.ts", "../src/api/Commands/types.ts", "../src/api/Commands/index.ts", "../src/plugins/corruptMp4s.ts", "../src/plugins/dictionary.ts", "../src/components/CheckedTextInput.tsx", "../src/plugins/emoteCloner.tsx", "../src/plugins/experiments.tsx", "../src/utils/dependencies.ts", "../src/plugins/fakeNitro.ts", "../src/components/PluginSettings/components/SettingBooleanComponent.tsx", "../src/components/PluginSettings/components/SettingCustomComponent.tsx", "../src/components/PluginSettings/components/SettingNumericComponent.tsx", "../src/components/PluginSettings/components/SettingSelectComponent.tsx", "../src/components/PluginSettings/components/SettingSliderComponent.tsx", "../src/components/PluginSettings/components/SettingTextComponent.tsx", "../src/components/PluginSettings/components/index.ts", "../src/plugins/fart.ts", "../src/plugins/forceOwnerCrown.ts", "../src/plugins/friendInvites.ts", "../src/plugins/fxTwitter.ts", "../src/plugins/iLoveSpam.ts", "../src/plugins/ignoreActivities.ts", "../src/plugins/keepCurrentChannel.ts", "../src/plugins/lastfm.tsx", "../src/plugins/loadingQuotes.ts", "../src/plugins/messageActions.ts", "../src/plugins/messageLogger/index.tsx", "../src/plugins/messageTags.ts", "../src/plugins/moreCommands.ts", "../src/plugins/moreKaomoji.ts", "../src/plugins/moyai.ts", "../src/plugins/muteNewGuild.ts", "../src/plugins/noBlockedMessages.ts", "../src/plugins/noCanaryMessageLinks.ts", "../src/plugins/noDevtoolsWarning.ts", "../src/plugins/noF1.ts", "../src/plugins/noRPC.ts", "../src/plugins/noReplyMention.ts", "../src/plugins/noSystemBadge.ts", "../src/plugins/noTrack.ts", "../src/plugins/noUnblockToJump.ts", "../src/plugins/oneko.ts", "../src/plugins/petpet.ts", "../src/plugins/plainFolderIcon.ts", "../src/plugins/platformIndicators.tsx", "../src/plugins/pronoundb/components/PronounsAboutComponent.tsx", "../src/utils/debounce.ts", "../src/plugins/pronoundb/types.ts", "../src/plugins/pronoundb/pronoundbUtils.ts", "../src/plugins/pronoundb/components/PronounsChatComponent.tsx", "../src/plugins/pronoundb/components/PronounsProfileWrapper.tsx", "../src/plugins/pronoundb/index.ts", "../src/plugins/quickMention.tsx", "../src/plugins/quickReply.ts", "../src/api/ServerList.ts", "../src/plugins/readAllNotificationsButton.tsx", "../src/plugins/reverseImageSearch.tsx", "../src/plugins/reviewDB/Utils/Utils.tsx", "../src/plugins/reviewDB/Utils/ReviewDBAPI.ts", "../src/plugins/reviewDB/components/MessageButton.tsx", "../src/plugins/reviewDB/components/ReviewComponent.tsx", "../src/plugins/reviewDB/components/ReviewsView.tsx", "../src/plugins/reviewDB/index.tsx", "include-file:~fileContent/settingsStyles.css", "../src/utils/settingsSync.ts", "../src/components/VencordSettings/BackupRestoreTab.tsx", "../src/plugins/index.ts", "../src/utils/ChangeList.ts", "../src/utils/updater.ts", "../src/components/handleComponentFailed.ts", "../src/components/PluginSettings/PluginModal.tsx", "../src/components/PluginSettings/styles.ts", "../src/components/PluginSettings/index.tsx", "../src/components/VencordSettings/PluginsTab.tsx", "../src/components/VencordSettings/Updater.tsx", "../src/components/VencordSettings/VencordTab.tsx", "../src/components/VencordSettings/index.tsx", "../src/plugins/settings.tsx", "../src/plugins/showHiddenChannels.tsx", "../src/plugins/silentTyping.ts", "include-file:~fileContent/spotifyStyles.css", "../src/plugins/spotifyControls/SpotifyStore.ts", "../src/plugins/spotifyControls/PlayerComponent.tsx", "../src/plugins/spotifyControls/index.tsx", "../src/plugins/spotifyCrack.ts", "../src/plugins/spotifyShareCommands.ts", "../src/plugins/startupTimings/StartupTimingPage.tsx", "../src/plugins/startupTimings/index.tsx", "../src/plugins/unindent.ts", "../src/plugins/unminifyErrors.ts", "../src/plugins/uwuify.ts", "../src/plugins/vcDoubleClick.ts", "../src/plugins/viewIcons.tsx", "../src/plugins/volumeBooster.ts", "../src/plugins/webContextMenus.ts", "../src/plugins/webhookTags.ts", "../src/utils/Queue.ts", "../src/plugins/whoReacted.tsx", "import-plugins:~plugins", "../src/api/Badges.ts", "../src/api/MessageAccessories.ts", "../src/api/index.ts", "../src/utils/discord.ts", "../src/utils/onceDefined.ts", "../src/utils/index.ts", "../src/utils/quickCss.ts", "../src/webpack/patchWebpack.ts", "../src/components/PatchHelper.tsx", "../src/components/index.ts", "../src/Vencord.ts"],
  "sourcesContent": ["/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport const VencordFragment = Symbol.for(\"react.fragment\");\nexport let VencordCreateElement =\n    (...args) => (VencordCreateElement = Vencord.Webpack.Common.React.createElement)(...args);\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\ntype Enum<T extends Record<string, string>> = {\n    [k in keyof T]: T[k];\n} & { [v in keyof T as T[v]]: v; };\n\nfunction strEnum<T extends Record<string, string>>(obj: T): T {\n    const o = {} as T;\n    for (const key in obj) {\n        o[key] = obj[key] as any;\n        o[obj[key]] = key as any;\n    }\n    return Object.freeze(o);\n}\n\nexport default strEnum({\n    QUICK_CSS_UPDATE: \"VencordQuickCssUpdate\",\n    GET_QUICK_CSS: \"VencordGetQuickCss\",\n    SET_QUICK_CSS: \"VencordSetQuickCss\",\n    GET_SETTINGS_DIR: \"VencordGetSettingsDir\",\n    GET_SETTINGS: \"VencordGetSettings\",\n    SET_SETTINGS: \"VencordSetSettings\",\n    OPEN_EXTERNAL: \"VencordOpenExternal\",\n    OPEN_QUICKCSS: \"VencordOpenQuickCss\",\n    GET_UPDATES: \"VencordGetUpdates\",\n    GET_REPO: \"VencordGetRepo\",\n    GET_HASHES: \"VencordGetHashes\",\n    UPDATE: \"VencordUpdate\",\n    BUILD: \"VencordBuild\",\n    GET_DESKTOP_CAPTURE_SOURCES: \"VencordGetDesktopCaptureSources\",\n    OPEN_MONACO_EDITOR: \"VencordOpenMonacoEditor\"\n} as const);\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport default class Logger {\n    /**\n     * Returns the console format args for a title with the specified background colour and black text\n     * @param color Background colour\n     * @param title Text\n     * @returns Array. Destructure this into {@link Logger}.errorCustomFmt or console.log\n     *\n     * @example logger.errorCustomFmt(...Logger.makeTitleElements(\"white\", \"Hello\"), \"World\");\n     */\n    static makeTitle(color: string, title: string): [string, ...string[]] {\n        return [\"%c %c %s \", \"\", `background: ${color}; color: black; font-weight: bold; border-radius: 5px;`, title];\n    }\n\n    constructor(public name: string, public color: string = \"white\") { }\n\n    private _log(level: \"log\" | \"error\" | \"warn\" | \"info\" | \"debug\", levelColor: string, args: any[], customFmt = \"\") {\n        console[level](\n            `%c Vencord %c %c ${this.name} ${customFmt}`,\n            `background: ${levelColor}; color: black; font-weight: bold; border-radius: 5px;`,\n            \"\",\n            `background: ${this.color}; color: black; font-weight: bold; border-radius: 5px;`\n            , ...args\n        );\n    }\n\n    public log(...args: any[]) {\n        this._log(\"log\", \"#a6d189\", args);\n    }\n\n    public info(...args: any[]) {\n        this._log(\"info\", \"#a6d189\", args);\n    }\n\n    public error(...args: any[]) {\n        this._log(\"error\", \"#e78284\", args);\n    }\n\n    public errorCustomFmt(fmt: string, ...args: any[]) {\n        this._log(\"error\", \"#e78284\", args, fmt);\n    }\n\n    public warn(...args: any[]) {\n        this._log(\"warn\", \"#e5c890\", args);\n    }\n\n    public debug(...args: any[]) {\n        this._log(\"debug\", \"#eebebe\", args);\n    }\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// Proxies demand that these properties be unmodified, so proxyLazy\n// will always return the function default for them.\nconst unconfigurable = [\"arguments\", \"caller\", \"prototype\"];\n\nconst handler: ProxyHandler<any> = {};\n\nfor (const method of [\n    \"apply\",\n    \"construct\",\n    \"defineProperty\",\n    \"deleteProperty\",\n    \"get\",\n    \"getOwnPropertyDescriptor\",\n    \"getPrototypeOf\",\n    \"has\",\n    \"isExtensible\",\n    \"ownKeys\",\n    \"preventExtensions\",\n    \"set\",\n    \"setPrototypeOf\"\n]) {\n    handler[method] =\n        (target: any, ...args: any[]) => Reflect[method](target.get(), ...args);\n}\n\nhandler.ownKeys = target => {\n    const v = target.get();\n    const keys = Reflect.ownKeys(v);\n    for (const key of unconfigurable) {\n        if (!keys.includes(key)) keys.push(key);\n    }\n    return keys;\n};\n\nhandler.getOwnPropertyDescriptor = (target, p) => {\n    if (typeof p === \"string\" && unconfigurable.includes(p))\n        return Reflect.getOwnPropertyDescriptor(target, p);\n\n    return Reflect.getOwnPropertyDescriptor(target.get(), p);\n};\n\n/**\n * Wraps the result of {@see makeLazy} in a Proxy you can consume as if it wasn't lazy.\n * On first property access, the lazy is evaluated\n * @param factory lazy factory\n * @returns Proxy\n *\n * Note that the example below exists already as an api, see {@link lazyWebpack}\n * @example const mod = proxyLazy(() => findByProps(\"blah\")); console.log(mod.blah);\n */\nexport function proxyLazy<T>(factory: () => T): T {\n    const proxyDummy: { (): void; cachedValue?: T; get(): T; } = function () { };\n\n    proxyDummy.cachedValue = void 0;\n    proxyDummy.get = () => proxyDummy.cachedValue ??= factory();\n\n    return new Proxy(proxyDummy, handler) as any;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Logger from \"../utils/Logger\";\n\nif (IS_DEV) {\n    var traces = {} as Record<string, [number, any[]]>;\n    var logger = new Logger(\"Tracer\", \"#FFD166\");\n}\n\nconst noop = function () { };\n\nexport const beginTrace = !IS_DEV ? noop :\n    function beginTrace(name: string, ...args: any[]) {\n        if (name in traces)\n            throw new Error(`Trace ${name} already exists!`);\n\n        traces[name] = [performance.now(), args];\n    };\n\nexport const finishTrace = !IS_DEV ? noop : function finishTrace(name: string) {\n    const end = performance.now();\n\n    const [start, args] = traces[name];\n    delete traces[name];\n\n    logger.debug(`${name} took ${end - start}ms`, args);\n};\n\ntype Func = (...args: any[]) => any;\ntype TraceNameMapper<F extends Func> = (...args: Parameters<F>) => string;\n\nconst noopTracer =\n    <F extends Func>(name: string, f: F, mapper?: TraceNameMapper<F>) => f;\n\nexport const traceFunction = !IS_DEV\n    ? noopTracer\n    : function traceFunction<F extends Func>(name: string, f: F, mapper?: TraceNameMapper<F>): F {\n        return function (this: any, ...args: Parameters<F>) {\n            const traceName = mapper?.(...args) ?? name;\n\n            beginTrace(traceName, ...arguments);\n            try {\n                return f.apply(this, args);\n            } finally {\n                finishTrace(traceName);\n            }\n        } as F;\n    };\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport type { WebpackInstance } from \"discord-types/other\";\n\nimport { traceFunction } from \"../debug/Tracer\";\nimport Logger from \"../utils/Logger\";\nimport { proxyLazy } from \"../utils/proxyLazy\";\n\nconst logger = new Logger(\"Webpack\");\n\nexport let _resolveReady: () => void;\n/**\n * Fired once a gateway connection to Discord has been established.\n * This indicates that the core webpack modules have been initialised\n */\nexport const onceReady = new Promise<void>(r => _resolveReady = r);\n\nexport let wreq: WebpackInstance;\nexport let cache: WebpackInstance[\"c\"];\n\nexport type FilterFn = (mod: any) => boolean;\n\nexport const filters = {\n    byProps: (...props: string[]): FilterFn =>\n        props.length === 1\n            ? m => m[props[0]] !== void 0\n            : m => props.every(p => m[p] !== void 0),\n\n    byCode: (...code: string[]): FilterFn => m => {\n        if (typeof m !== \"function\") return false;\n        const s = Function.prototype.toString.call(m);\n        for (const c of code) {\n            if (!s.includes(c)) return false;\n        }\n        return true;\n    },\n};\n\nexport const subscriptions = new Map<FilterFn, CallbackFn>();\nexport const listeners = new Set<CallbackFn>();\n\nexport type CallbackFn = (mod: any) => void;\n\nexport function _initWebpack(instance: typeof window.webpackChunkdiscord_app) {\n    if (cache !== void 0) throw \"no.\";\n\n    wreq = instance.push([[Symbol(\"Vencord\")], {}, r => r]);\n    cache = wreq.c;\n    instance.pop();\n}\n\nif (IS_DEV && !IS_WEB) {\n    var devToolsOpen = false;\n    // At this point in time, DiscordNative has not been exposed yet, so setImmediate is needed\n    setTimeout(() => {\n        DiscordNative/* just to make sure */?.window.setDevtoolsCallbacks(() => devToolsOpen = true, () => devToolsOpen = false);\n    }, 0);\n}\n\n/**\n * Find the first module that matches the filter\n */\nexport const find = traceFunction(\"find\", function find(filter: FilterFn, getDefault = true, isWaitFor = false) {\n    if (typeof filter !== \"function\")\n        throw new Error(\"Invalid filter. Expected a function got \" + typeof filter);\n\n    for (const key in cache) {\n        const mod = cache[key];\n        if (!mod?.exports) continue;\n\n        if (filter(mod.exports))\n            return mod.exports;\n\n        if (typeof mod.exports !== \"object\") continue;\n\n        if (mod.exports.default && filter(mod.exports.default))\n            return getDefault ? mod.exports.default : mod.exports;\n\n        // the length check makes search about 20% faster\n        for (const nestedMod in mod.exports) if (nestedMod.length <= 3) {\n            const nested = mod.exports[nestedMod];\n            if (nested && filter(nested)) return nested;\n        }\n    }\n\n    if (!isWaitFor) {\n        const err = new Error(\"Didn't find module matching this filter\");\n        if (IS_DEV) {\n            if (!devToolsOpen)\n                // Strict behaviour in DevBuilds to fail early and make sure the issue is found\n                throw err;\n        } else {\n            logger.warn(err);\n        }\n    }\n\n    return null;\n});\n\nexport function findAll(filter: FilterFn, getDefault = true) {\n    if (typeof filter !== \"function\")\n        throw new Error(\"Invalid filter. Expected a function got \" + typeof filter);\n\n    const ret = [] as any[];\n    for (const key in cache) {\n        const mod = cache[key];\n        if (!mod?.exports) continue;\n\n        if (filter(mod.exports))\n            ret.push(mod.exports);\n        else if (typeof mod.exports !== \"object\")\n            continue;\n\n        if (mod.exports.default && filter(mod.exports.default))\n            ret.push(getDefault ? mod.exports.default : mod.exports);\n        else for (const nestedMod in mod.exports) if (nestedMod.length <= 3) {\n            const nested = mod.exports[nestedMod];\n            if (nested && filter(nested)) ret.push(nested);\n        }\n    }\n\n    return ret;\n}\n\n/**\n * Same as {@link find} but in bulk\n * @param filterFns Array of filters. Please note that this array will be modified in place, so if you still\n *                need it afterwards, pass a copy.\n * @returns Array of results in the same order as the passed filters\n */\nexport const findBulk = traceFunction(\"findBulk\", function findBulk(...filterFns: FilterFn[]) {\n    if (!Array.isArray(filterFns))\n        throw new Error(\"Invalid filters. Expected function[] got \" + typeof filterFns);\n\n    const { length } = filterFns;\n\n    if (length === 0)\n        throw new Error(\"Expected at least two filters.\");\n\n    if (length === 1) {\n        if (IS_DEV) {\n            throw new Error(\"bulk called with only one filter. Use find\");\n        }\n        return find(filterFns[0]);\n    }\n\n    const filters = filterFns as Array<FilterFn | undefined>;\n\n    let found = 0;\n    const results = Array(length);\n\n    outer:\n    for (const key in cache) {\n        const mod = cache[key];\n        if (!mod?.exports) continue;\n\n        for (let j = 0; j < length; j++) {\n            const filter = filters[j];\n            // Already done\n            if (filter === undefined) continue;\n\n            if (filter(mod.exports)) {\n                results[j] = mod.exports;\n                filters[j] = undefined;\n                if (++found === length) break outer;\n                break;\n            }\n\n            if (typeof mod.exports !== \"object\")\n                continue;\n\n            if (mod.exports.default && filter(mod.exports.default)) {\n                results[j] = mod.exports.default;\n                filters[j] = undefined;\n                if (++found === length) break outer;\n                break;\n            }\n\n            for (const nestedMod in mod.exports)\n                if (nestedMod.length <= 3) {\n                    const nested = mod.exports[nestedMod];\n                    if (nested && filter(nested)) {\n                        results[j] = nested;\n                        filters[j] = undefined;\n                        if (++found === length) break outer;\n                        continue outer;\n                    }\n                }\n        }\n    }\n\n    if (found !== length) {\n        const err = new Error(`Got ${length} filters, but only found ${found} modules!`);\n        if (IS_DEV) {\n            if (!devToolsOpen)\n                // Strict behaviour in DevBuilds to fail early and make sure the issue is found\n                throw err;\n        } else {\n            logger.warn(err);\n        }\n    }\n\n    return results;\n});\n\n/**\n * Find the id of a module by its code\n * @param code Code\n * @returns number or null\n */\nexport const findModuleId = traceFunction(\"findModuleId\", function findModuleId(code: string) {\n    for (const id in wreq.m) {\n        if (wreq.m[id].toString().includes(code)) {\n            return Number(id);\n        }\n    }\n\n    const err = new Error(\"Didn't find module with code:\\n\" + code);\n    if (IS_DEV) {\n        if (!devToolsOpen)\n            // Strict behaviour in DevBuilds to fail early and make sure the issue is found\n            throw err;\n    } else {\n        logger.warn(err);\n    }\n\n    return null;\n});\n\n/**\n * Finds a mangled module by the provided code \"code\" (must be unique and can be anywhere in the module)\n * then maps it into an easily usable module via the specified mappers\n * @param code Code snippet\n * @param mappers Mappers to create the non mangled exports\n * @returns Unmangled exports as specified in mappers\n *\n * @example mapMangledModule(\"headerIdIsManaged:\", {\n *             openModal: filters.byCode(\"headerIdIsManaged:\"),\n *             closeModal: filters.byCode(\"key==\")\n *          })\n */\nexport const mapMangledModule = traceFunction(\"mapMangledModule\", function mapMangledModule<S extends string>(code: string, mappers: Record<S, FilterFn>): Record<S, any> {\n    const exports = {} as Record<S, any>;\n\n    const id = findModuleId(code);\n    if (id === null)\n        return exports;\n\n    const mod = wreq(id);\n    outer:\n    for (const key in mod) {\n        const member = mod[key];\n        for (const newName in mappers) {\n            // if the current mapper matches this module\n            if (mappers[newName](member)) {\n                exports[newName] = member;\n                continue outer;\n            }\n        }\n    }\n    return exports;\n});\n\n/**\n * Same as {@link mapMangledModule} but lazy\n */\nexport function mapMangledModuleLazy<S extends string>(code: string, mappers: Record<S, FilterFn>): Record<S, any> {\n    return proxyLazy(() => mapMangledModule(code, mappers));\n}\n\n/**\n * Find the first module that has the specified properties\n */\nexport function findByProps(...props: string[]) {\n    return find(filters.byProps(...props));\n}\n\n/**\n * Find all modules that have the specified properties\n */\nexport function findAllByProps(...props: string[]) {\n    return findAll(filters.byProps(...props));\n}\n\n/**\n * Find a function by its code\n */\nexport function findByCode(...code: string[]) {\n    return find(filters.byCode(...code));\n}\n\n/**\n * Wait for a module that matches the provided filter to be registered,\n * then call the callback with the module as the first argument\n */\nexport function waitFor(filter: string | string[] | FilterFn, callback: CallbackFn) {\n    if (typeof filter === \"string\")\n        filter = filters.byProps(filter);\n    else if (Array.isArray(filter))\n        filter = filters.byProps(...filter);\n    else if (typeof filter !== \"function\")\n        throw new Error(\"filter must be a string, string[] or function, got \" + typeof filter);\n\n    const existing = find(filter!, true, true);\n    if (existing) return void callback(existing);\n\n    subscriptions.set(filter, callback);\n}\n\nexport function addListener(callback: CallbackFn) {\n    listeners.add(callback);\n}\n\nexport function removeListener(callback: CallbackFn) {\n    listeners.delete(callback);\n}\n\n/**\n * Search modules by keyword. This searches the factory methods,\n * meaning you can search all sorts of things, displayName, methodName, strings somewhere in the code, etc\n * @param filters One or more strings or regexes\n * @returns Mapping of found modules\n */\nexport function search(...filters: Array<string | RegExp>) {\n    const results = {} as Record<number, Function>;\n    const factories = wreq.m;\n    outer:\n    for (const id in factories) {\n        const factory = factories[id].original ?? factories[id];\n        const str: string = factory.toString();\n        for (const filter of filters) {\n            if (typeof filter === \"string\" && !str.includes(filter)) continue outer;\n            if (filter instanceof RegExp && !filter.test(str)) continue outer;\n        }\n        results[id] = factory;\n    }\n\n    return results;\n}\n\n/**\n * Extract a specific module by id into its own Source File. This has no effect on\n * the code, it is only useful to be able to look at a specific module without having\n * to view a massive file. extract then returns the extracted module so you can jump to it.\n * As mentioned above, note that this extracted module is not actually used,\n * so putting breakpoints or similar will have no effect.\n * @param id The id of the module to extract\n */\nexport function extract(id: number) {\n    const mod = wreq.m[id] as Function;\n    if (!mod) return null;\n\n    const code = `\n// [EXTRACTED] WebpackModule${id}\n// WARNING: This module was extracted to be more easily readable.\n//          This module is NOT ACTUALLY USED! This means putting breakpoints will have NO EFFECT!!\n\n${mod.toString()}\n//# sourceURL=ExtractedWebpackModule${id}\n`;\n    const extracted = (0, eval)(code);\n    return extracted as Function;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport type Components from \"discord-types/components\";\nimport { User } from \"discord-types/general\";\nimport type Other from \"discord-types/other\";\nimport type Stores from \"discord-types/stores\";\n\nimport { LazyComponent, lazyWebpack } from \"../utils/misc\";\nimport { proxyLazy } from \"../utils/proxyLazy\";\nimport { _resolveReady, filters, findByCode, mapMangledModule, mapMangledModuleLazy, waitFor } from \"./webpack\";\n\nexport const Margins = lazyWebpack(filters.byProps(\"marginTop20\"));\n\nexport let FluxDispatcher: Other.FluxDispatcher;\nexport const Flux = lazyWebpack(filters.byProps(\"connectStores\"));\nexport let React: typeof import(\"react\");\nexport const ReactDOM: typeof import(\"react-dom\") = lazyWebpack(filters.byProps(\"createPortal\", \"render\"));\n\nexport const RestAPI = lazyWebpack(filters.byProps(\"getAPIBaseURL\", \"get\"));\nexport const moment: typeof import(\"moment\") = lazyWebpack(filters.byProps(\"parseTwoDigitYear\"));\n\nexport const MessageStore = lazyWebpack(filters.byProps(\"getRawMessages\")) as Omit<Stores.MessageStore, \"getMessages\"> & { getMessages(chanId: string): any; };\nexport const PermissionStore = lazyWebpack(filters.byProps(\"can\", \"getGuildPermissions\"));\nexport const PrivateChannelsStore = lazyWebpack(filters.byProps(\"openPrivateChannel\"));\nexport const GuildChannelStore = lazyWebpack(filters.byProps(\"getChannels\"));\nexport const ReadStateStore = lazyWebpack(filters.byProps(\"lastMessageId\"));\nexport const PresenceStore = lazyWebpack(filters.byProps(\"setCurrentUserOnConnectionOpen\"));\nexport let GuildStore: Stores.GuildStore;\nexport let UserStore: Stores.UserStore;\nexport let SelectedChannelStore: Stores.SelectedChannelStore;\nexport let SelectedGuildStore: any;\nexport let ChannelStore: Stores.ChannelStore;\n\nexport const Forms = {} as {\n    FormTitle: Components.FormTitle;\n    FormSection: any;\n    FormDivider: any;\n    FormText: Components.FormText;\n};\nexport let Card: Components.Card;\nexport let Button: any;\nexport let Switch: any;\nexport let Tooltip: Components.Tooltip;\nexport let Router: any;\nexport let TextInput: any;\nexport let Text: (props: TextProps) => JSX.Element;\n\nexport const Select = LazyComponent(() => findByCode(\"optionClassName\", \"popoutPosition\", \"autoFocus\", \"maxVisibleItems\"));\nexport const Slider = LazyComponent(() => findByCode(\"closestMarkerIndex\", \"stickToMarkers\"));\n\nexport let Parser: any;\nexport let Alerts: {\n    show(alert: {\n        title: any;\n        body: React.ReactNode;\n        className?: string;\n        confirmColor?: string;\n        cancelText?: string;\n        confirmText?: string;\n        secondaryConfirmText?: string;\n        onCancel?(): void;\n        onConfirm?(): void;\n        onConfirmSecondary?(): void;\n    }): void;\n    /** This is a noop, it does nothing. */\n    close(): void;\n};\nconst ToastType = {\n    MESSAGE: 0,\n    SUCCESS: 1,\n    FAILURE: 2,\n    CUSTOM: 3\n};\nconst ToastPosition = {\n    TOP: 0,\n    BOTTOM: 1\n};\n\nexport const Toasts = {\n    Type: ToastType,\n    Position: ToastPosition,\n    // what's less likely than getting 0 from Math.random()? Getting it twice in a row\n    genId: () => (Math.random() || Math.random()).toString(36).slice(2),\n\n    // hack to merge with the following interface, dunno if there's a better way\n    ...{} as {\n        show(data: {\n            message: string,\n            id: string,\n            /**\n             * Toasts.Type\n             */\n            type: number,\n            options?: {\n                /**\n                 * Toasts.Position\n                 */\n                position?: number;\n                component?: React.ReactNode,\n                duration?: number;\n            };\n        }): void;\n        pop(): void;\n    }\n};\n\nexport const UserUtils = {\n    fetchUser: lazyWebpack(filters.byCode(\".USER(\", \"getUser\")) as (id: string) => Promise<User>,\n};\n\nexport const Clipboard = mapMangledModuleLazy('document.queryCommandEnabled(\"copy\")||document.queryCommandSupported(\"copy\")', {\n    copy: filters.byCode(\".default.copy(\"),\n    SUPPORTS_COPY: x => typeof x === \"boolean\",\n});\n\nexport const NavigationRouter = mapMangledModuleLazy(\"Transitioning to external path\", {\n    transitionTo: filters.byCode(\"Transitioning to external path\"),\n    transitionToGuild: filters.byCode(\"transitionToGuild\"),\n    goBack: filters.byCode(\"goBack()\"),\n    goForward: filters.byCode(\"goForward()\"),\n});\n\nwaitFor(\"useState\", m => React = m);\n\nwaitFor([\"dispatch\", \"subscribe\"], m => {\n    FluxDispatcher = m;\n    const cb = () => {\n        m.unsubscribe(\"CONNECTION_OPEN\", cb);\n        _resolveReady();\n    };\n    m.subscribe(\"CONNECTION_OPEN\", cb);\n});\n\nwaitFor([\"getCurrentUser\", \"initialize\"], m => UserStore = m);\nwaitFor(\"getSortedPrivateChannels\", m => ChannelStore = m);\nwaitFor(\"getCurrentlySelectedChannelId\", m => SelectedChannelStore = m);\nwaitFor(\"getLastSelectedGuildId\", m => SelectedGuildStore = m);\nwaitFor(\"getGuildCount\", m => GuildStore = m);\n\nwaitFor([\"Hovers\", \"Looks\", \"Sizes\"], m => Button = m);\nwaitFor(filters.byCode(\"helpdeskArticleId\"), m => Switch = m);\nwaitFor([\"Positions\", \"Colors\"], m => Tooltip = m);\nwaitFor(m => m.Types?.PRIMARY === \"cardPrimary\", m => Card = m);\n\nwaitFor(filters.byCode(\"errorSeparator\"), m => Forms.FormTitle = m);\nwaitFor(filters.byCode(\"titleClassName\", \"sectionTitle\"), m => Forms.FormSection = m);\nwaitFor(m => m.Types?.INPUT_PLACEHOLDER, m => Forms.FormText = m);\n\nwaitFor(m => {\n    if (typeof m !== \"function\") return false;\n    const s = m.toString();\n    return s.length < 200 && s.includes(\"().divider\");\n}, m => Forms.FormDivider = m);\n\n// This is the same module but this is easier\nwaitFor(filters.byCode(\"currentToast?\"), m => Toasts.show = m);\nwaitFor(filters.byCode(\"currentToast:null\"), m => Toasts.pop = m);\n\nwaitFor([\"show\", \"close\"], m => Alerts = m);\nwaitFor(\"parseTopic\", m => Parser = m);\n\nwaitFor([\"open\", \"saveAccountChanges\"], m => Router = m);\nwaitFor([\"defaultProps\", \"Sizes\", \"contextType\"], m => TextInput = m);\n\nwaitFor(m => {\n    if (typeof m !== \"function\") return false;\n    const s = m.toString();\n    return (s.length < 1500 && s.includes(\"data-text-variant\") && s.includes(\"always-white\"));\n}, m => Text = m);\n\nexport type TextProps = React.PropsWithChildren & {\n    variant: TextVariant;\n    style?: React.CSSProperties;\n    color?: string;\n    tag?: \"div\" | \"span\" | \"p\" | \"strong\" | `h${1 | 2 | 3 | 4 | 5 | 6}`;\n    selectable?: boolean;\n    lineClamp?: number;\n    id?: string;\n    className?: string;\n};\n\nexport type TextVariant = \"heading-sm/normal\" | \"heading-sm/medium\" | \"heading-sm/bold\" | \"heading-md/normal\" | \"heading-md/medium\" | \"heading-md/bold\" | \"heading-lg/normal\" | \"heading-lg/medium\" | \"heading-lg/bold\" | \"heading-xl/normal\" | \"heading-xl/medium\" | \"heading-xl/bold\" | \"heading-xxl/normal\" | \"heading-xxl/medium\" | \"heading-xxl/bold\" | \"eyebrow\" | \"heading-deprecated-14/normal\" | \"heading-deprecated-14/medium\" | \"heading-deprecated-14/bold\" | \"text-xxs/normal\" | \"text-xxs/medium\" | \"text-xxs/semibold\" | \"text-xxs/bold\" | \"text-xs/normal\" | \"text-xs/medium\" | \"text-xs/semibold\" | \"text-xs/bold\" | \"text-sm/normal\" | \"text-sm/medium\" | \"text-sm/semibold\" | \"text-sm/bold\" | \"text-md/normal\" | \"text-md/medium\" | \"text-md/semibold\" | \"text-md/bold\" | \"text-lg/normal\" | \"text-lg/medium\" | \"text-lg/semibold\" | \"text-lg/bold\" | \"display-sm\" | \"display-md\" | \"display-lg\" | \"code\";\n\ntype RC<C> = React.ComponentType<React.PropsWithChildren<C & Record<string, any>>>;\ninterface Menu {\n    ContextMenu: RC<{\n        navId: string;\n        onClose(): void;\n        className?: string;\n        style?: React.CSSProperties;\n        hideScroller?: boolean;\n        onSelect?(): void;\n    }>;\n    MenuSeparator: React.ComponentType;\n    MenuGroup: RC<any>;\n    MenuItem: RC<{\n        id: string;\n        label: string;\n        render?: React.ComponentType;\n        onChildrenScroll?: Function;\n        childRowHeight?: number;\n        listClassName?: string;\n    }>;\n    MenuCheckboxItem: RC<{\n        id: string;\n    }>;\n    MenuRadioItem: RC<{\n        id: string;\n    }>;\n    MenuControlItem: RC<{\n        id: string;\n        interactive?: boolean;\n    }>;\n}\n\n/**\n * Discord's Context menu items.\n * To use anything but Menu.ContextMenu, your plugin HAS TO\n * depend on MenuItemDeobfuscatorAPI. Otherwise they will throw\n */\nexport const Menu = proxyLazy(() => {\n    const hasDeobfuscator = Vencord.Settings.plugins.MenuItemDeobfuscatorAPI.enabled;\n    const menuItems = [\"MenuSeparator\", \"MenuGroup\", \"MenuItem\", \"MenuCheckboxItem\", \"MenuRadioItem\", \"MenuControlItem\"];\n\n    const map = mapMangledModule(\"\u266B \u2282(\uFF61\u25D5\u203F\u203F\u25D5\uFF61\u2282) \u266A\", {\n        ContextMenu: filters.byCode(\"getContainerProps\"),\n        ...Object.fromEntries((hasDeobfuscator ? menuItems : []).map(s => [s, (m: any) => m.name === s]))\n    }) as Menu;\n\n    if (!hasDeobfuscator) {\n        for (const m of menuItems)\n            Object.defineProperty(map, m, {\n                get() {\n                    throw new Error(\"MenuItemDeobfuscator must be enabled to use this.\");\n                }\n            });\n    }\n\n    return map;\n});\n\nexport const ContextMenu = mapMangledModuleLazy('type:\"CONTEXT_MENU_OPEN\"', {\n    open: filters.byCode(\"stopPropagation\"),\n    openLazy: m => m.toString().length < 50,\n    close: filters.byCode(\"CONTEXT_MENU_CLOSE\")\n}) as {\n    close(): void;\n    open(\n        event: React.UIEvent,\n        render?: Menu[\"ContextMenu\"],\n        options?: { enableSpellCheck?: boolean; },\n        renderLazy?: () => Promise<Menu[\"ContextMenu\"]>\n    ): void;\n    openLazy(\n        event: React.UIEvent,\n        renderLazy?: () => Promise<Menu[\"ContextMenu\"]>,\n        options?: { enableSpellCheck?: boolean; }\n    ): void;\n};\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport * as Common from \"./common\";\nexport * from \"./webpack\";\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { FilterFn, find } from \"../webpack\";\nimport { React } from \"../webpack/common\";\nimport { proxyLazy } from \"./proxyLazy\";\n\n/**\n * Makes a lazy function. On first call, the value is computed.\n * On subsequent calls, the same computed value will be returned\n * @param factory Factory function\n */\nexport function makeLazy<T>(factory: () => T): () => T {\n    let cache: T;\n    return () => cache ?? (cache = factory());\n}\nexport const lazy = makeLazy;\n\n/**\n * Do a lazy webpack search. Searches the module on first property access\n * @param filter Filter function\n * @returns A proxy to the webpack module. Not all traps are implemented, may produce unexpected results.\n */\nexport function lazyWebpack<T = any>(filter: FilterFn): T {\n    return proxyLazy(() => find(filter));\n}\n\ntype AwaiterRes<T> = [T, any, boolean, () => void];\n/**\n * Await a promise\n * @param factory Factory\n * @param fallbackValue The fallback value that will be used until the promise resolved\n * @returns [value, error, isPending]\n */\nexport function useAwaiter<T>(factory: () => Promise<T>): AwaiterRes<T | null>;\nexport function useAwaiter<T>(factory: () => Promise<T>, fallbackValue: T): AwaiterRes<T>;\nexport function useAwaiter<T>(factory: () => Promise<T>, fallbackValue: null, onError: (e: unknown) => unknown): AwaiterRes<T>;\nexport function useAwaiter<T>(factory: () => Promise<T>, fallbackValue: T | null = null, onError?: (e: unknown) => unknown): AwaiterRes<T | null> {\n    const [state, setState] = React.useState({\n        value: fallbackValue,\n        error: null,\n        pending: true\n    });\n    const [signal, setSignal] = React.useState(0);\n\n    React.useEffect(() => {\n        let isAlive = true;\n        factory()\n            .then(value => isAlive && setState({ value, error: null, pending: false }))\n            .catch(error => isAlive && (setState({ value: null, error, pending: false }), onError?.(error)));\n\n        return () => void (isAlive = false);\n    }, [signal]);\n\n    return [state.value, state.error, state.pending, () => setSignal(signal + 1)];\n}\n\n/**\n * Returns a function that can be used to force rerender react components\n */\nexport function useForceUpdater() {\n    const [, set] = React.useState(0);\n    return () => set(s => s + 1);\n}\n\n/**\n * A lazy component. The factory method is called on first render. For example useful\n * for const Component = LazyComponent(() => findByDisplayName(\"...\").default)\n * @param factory Function returning a Component\n * @returns Result of factory function\n */\nexport function LazyComponent<T = any>(factory: () => React.ComponentType<T>) {\n    const get = makeLazy(factory);\n    return (props: T & JSX.IntrinsicAttributes) => {\n        const Component = get();\n        return <Component {...props} />;\n    };\n}\n\n/**\n * Recursively merges defaults into an object and returns the same object\n * @param obj Object\n * @param defaults Defaults\n * @returns obj\n */\nexport function mergeDefaults<T>(obj: T, defaults: T): T {\n    for (const key in defaults) {\n        const v = defaults[key];\n        if (typeof v === \"object\" && !Array.isArray(v)) {\n            obj[key] ??= {} as any;\n            mergeDefaults(obj[key], v);\n        } else {\n            obj[key] ??= v;\n        }\n    }\n    return obj;\n}\n\n\n/**\n * Join an array of strings in a human readable way (1, 2 and 3)\n * @param elements Elements\n */\nexport function humanFriendlyJoin(elements: string[]): string;\n/**\n * Join an array of strings in a human readable way (1, 2 and 3)\n * @param elements Elements\n * @param mapper Function that converts elements to a string\n */\nexport function humanFriendlyJoin<T>(elements: T[], mapper: (e: T) => string): string;\nexport function humanFriendlyJoin(elements: any[], mapper: (e: any) => string = s => s): string {\n    const { length } = elements;\n    if (length === 0) return \"\";\n    if (length === 1) return mapper(elements[0]);\n\n    let s = \"\";\n\n    for (let i = 0; i < length; i++) {\n        s += mapper(elements[i]);\n        if (length - i > 2) s += \", \";\n        else if (length - i > 1) s += \" and \";\n    }\n\n    return s;\n}\n\n/**\n * Calls .join(\" \") on the arguments\n * classes(\"one\", \"two\") => \"one two\"\n */\nexport function classes(...classes: string[]) {\n    return classes.join(\" \");\n}\n\n/**\n * Returns a promise that resolves after the specified amount of time\n */\nexport function sleep(ms: number): Promise<void> {\n    return new Promise(r => setTimeout(r, ms));\n}\n\n/**\n * Wraps a Function into a try catch block and logs any errors caught\n * Due to the nature of this function, not all paths return a result.\n * Thus, for consistency, the returned functions will always return void or Promise<void>\n *\n * @param name Name identifying the wrapped function. This will appear in the logged errors\n * @param func Function (async or sync both work)\n * @param thisObject Optional thisObject\n * @returns Wrapped Function\n */\nexport function suppressErrors<F extends Function>(name: string, func: F, thisObject?: any): F {\n    return (func.constructor.name === \"AsyncFunction\"\n        ? async function (this: any) {\n            try {\n                await func.apply(thisObject ?? this, arguments);\n            } catch (e) {\n                console.error(`Caught an Error in ${name || \"anonymous\"}\\n`, e);\n            }\n        }\n        : function (this: any) {\n            try {\n                func.apply(thisObject ?? this, arguments);\n            } catch (e) {\n                console.error(`Caught an Error in ${name || \"anonymous\"}\\n`, e);\n            }\n        }) as any as F;\n}\n\n/**\n * Wrap the text in ``` with an optional language\n */\nexport function makeCodeblock(text: string, language?: string) {\n    const chars = \"```\";\n    return `${chars}${language || \"\"}\\n${text}\\n${chars}`;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Promisable } from \"type-fest\";\n\nimport { Command } from \"../api/Commands\";\n\n// exists to export default definePlugin({...})\nexport default function definePlugin<P extends PluginDef>(p: P & Record<string, any>) {\n    return p;\n}\n\nexport interface PatchReplacement {\n    match: string | RegExp;\n    replace: string | ((match: string, ...groups: string[]) => string);\n}\n\nexport interface Patch {\n    plugin: string;\n    find: string;\n    replacement: PatchReplacement | PatchReplacement[];\n    /** Whether this patch should apply to multiple modules */\n    all?: boolean;\n    /** Do not warn if this patch did no changes */\n    noWarn?: boolean;\n    predicate?(): boolean;\n}\n\nexport interface PluginAuthor {\n    name: string;\n    id: BigInt;\n}\n\nexport interface Plugin extends PluginDef {\n    patches?: Patch[];\n    started: boolean;\n    isDependency?: boolean;\n}\n\nexport interface PluginDef {\n    name: string;\n    description: string;\n    authors: PluginAuthor[];\n    start?(): void;\n    stop?(): void;\n    patches?: Omit<Patch, \"plugin\">[];\n    /**\n     * List of commands. If you specify these, you must add CommandsAPI to dependencies\n     */\n    commands?: Command[];\n    /**\n     * A list of other plugins that your plugin depends on.\n     * These will automatically be enabled and loaded before your plugin\n     * Common examples are CommandsAPI, MessageEventsAPI...\n     */\n    dependencies?: string[],\n    /**\n     * Whether this plugin is required and forcefully enabled\n     */\n    required?: boolean;\n    /**\n     * Set this if your plugin only works on Browser or Desktop, not both\n     */\n    target?: \"WEB\" | \"DESKTOP\" | \"BOTH\";\n    /**\n     * Optionally provide settings that the user can configure in the Plugins tab of settings.\n     */\n    options?: Record<string, PluginOptionsItem>;\n    /**\n     * Check that this returns true before allowing a save to complete.\n     * If a string is returned, show the error to the user.\n     */\n    beforeSave?(options: Record<string, any>): Promisable<true | string>;\n    /**\n     * Allows you to specify a custom Component that will be rendered in your\n     * plugin's settings page\n     */\n    settingsAboutComponent?: React.ComponentType;\n}\n\nexport enum OptionType {\n    STRING,\n    NUMBER,\n    BIGINT,\n    BOOLEAN,\n    SELECT,\n    SLIDER,\n    COMPONENT,\n}\n\nexport type PluginOptionsItem =\n    | PluginOptionString\n    | PluginOptionNumber\n    | PluginOptionBoolean\n    | PluginOptionSelect\n    | PluginOptionSlider\n    | PluginOptionComponent;\n\nexport interface PluginOptionBase {\n    description: string;\n    placeholder?: string;\n    onChange?(newValue: any): void;\n    disabled?(): boolean;\n    restartNeeded?: boolean;\n    componentProps?: Record<string, any>;\n    /**\n     * Set this if the setting only works on Browser or Desktop, not both\n     */\n    target?: \"WEB\" | \"DESKTOP\" | \"BOTH\";\n}\n\nexport interface PluginOptionString extends PluginOptionBase {\n    type: OptionType.STRING;\n    /**\n     * Prevents the user from saving settings if this is false or a string\n     */\n    isValid?(value: string): boolean | string;\n    default?: string;\n}\n\nexport interface PluginOptionNumber extends PluginOptionBase {\n    type: OptionType.NUMBER | OptionType.BIGINT;\n    /**\n     * Prevents the user from saving settings if this is false or a string\n     */\n    isValid?(value: number | BigInt): boolean | string;\n    default?: number;\n}\n\nexport interface PluginOptionBoolean extends PluginOptionBase {\n    type: OptionType.BOOLEAN;\n    /**\n     * Prevents the user from saving settings if this is false or a string\n     */\n    isValid?(value: boolean): boolean | string;\n    default?: boolean;\n}\n\nexport interface PluginOptionSelect extends PluginOptionBase {\n    type: OptionType.SELECT;\n    /**\n     * Prevents the user from saving settings if this is false or a string\n     */\n    isValid?(value: PluginOptionSelectOption): boolean | string;\n    options: PluginOptionSelectOption[];\n}\nexport interface PluginOptionSelectOption {\n    label: string;\n    value: string | number | boolean;\n    default?: boolean;\n}\n\nexport interface PluginOptionSlider extends PluginOptionBase {\n    type: OptionType.SLIDER;\n    /**\n     * All the possible values in the slider. Needs at least two values.\n     */\n    markers: number[];\n    /**\n     * Default value to use\n     */\n    default: number;\n    /**\n     * If false, allow users to select values in-between your markers.\n     */\n    stickToMarkers?: boolean;\n    /**\n     * Prevents the user from saving settings if this is false or a string\n     */\n    isValid?(value: number): boolean | string;\n}\n\ninterface IPluginOptionComponentProps {\n    /**\n     * Run this when the value changes.\n     *\n     * NOTE: The user will still need to click save to apply these changes.\n     */\n    setValue(newValue: any): void;\n    /**\n     * Set to true to prevent the user from saving.\n     *\n     * NOTE: This will not show the error to the user. It will only stop them saving.\n     * Make sure to show the error in your component.\n     */\n    setError(error: boolean): void;\n    /**\n     * The options object\n     */\n    option: PluginOptionComponent;\n}\n\nexport interface PluginOptionComponent extends PluginOptionBase {\n    type: OptionType.COMPONENT;\n    component: (props: IPluginOptionComponentProps) => JSX.Element;\n}\n\nexport type IpcRes<V = any> = { ok: true; value: V; } | { ok: false, error: any; };\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport plugins from \"~plugins\";\n\nimport IpcEvents from \"../utils/IpcEvents\";\nimport Logger from \"../utils/Logger\";\nimport { mergeDefaults } from \"../utils/misc\";\nimport { OptionType } from \"../utils/types\";\nimport { React } from \"../webpack/common\";\n\nconst logger = new Logger(\"Settings\");\nexport interface Settings {\n    notifyAboutUpdates: boolean;\n    useQuickCss: boolean;\n    enableReactDevtools: boolean;\n    plugins: {\n        [plugin: string]: {\n            enabled: boolean;\n            [setting: string]: any;\n        };\n    };\n}\n\nconst DefaultSettings: Settings = {\n    notifyAboutUpdates: true,\n    useQuickCss: true,\n    enableReactDevtools: false,\n    plugins: {}\n};\n\ntry {\n    var settings = JSON.parse(VencordNative.ipc.sendSync(IpcEvents.GET_SETTINGS)) as Settings;\n    mergeDefaults(settings, DefaultSettings);\n} catch (err) {\n    console.error(\"Corrupt settings file. \", err);\n    var settings = mergeDefaults({} as Settings, DefaultSettings);\n}\n\ntype SubscriptionCallback = ((newValue: any, path: string) => void) & { _path?: string; };\nconst subscriptions = new Set<SubscriptionCallback>();\n\n// Wraps the passed settings object in a Proxy to nicely handle change listeners and default values\nfunction makeProxy(settings: any, root = settings, path = \"\"): Settings {\n    return new Proxy(settings, {\n        get(target, p: string) {\n            const v = target[p];\n\n            // using \"in\" is important in the following cases to properly handle falsy or nullish values\n            if (!(p in target)) {\n                // Return empty for plugins with no settings\n                if (path === \"plugins\" && p in plugins)\n                    return target[p] = makeProxy({\n                        enabled: plugins[p].required ?? false\n                    }, root, `plugins/${p}`);\n\n                // Since the property is not set, check if this is a plugin's setting and if so, try to resolve\n                // the default value.\n                if (path.startsWith(\"plugins.\")) {\n                    const plugin = path.slice(\"plugins.\".length);\n                    if (plugin in plugins) {\n                        const setting = plugins[plugin].options?.[p];\n                        if (!setting) return v;\n                        if (\"default\" in setting)\n                            // normal setting with a default value\n                            return (target[p] = setting.default);\n                        if (setting.type === OptionType.SELECT) {\n                            const def = setting.options.find(o => o.default);\n                            if (def)\n                                target[p] = def.value;\n                            return def?.value;\n                        }\n                    }\n                }\n                return v;\n            }\n\n            // Recursively proxy Objects with the updated property path\n            if (typeof v === \"object\" && !Array.isArray(v) && v !== null)\n                return makeProxy(v, root, `${path}${path && \".\"}${p}`);\n\n            // primitive or similar, no need to proxy further\n            return v;\n        },\n\n        set(target, p: string, v) {\n            // avoid unnecessary updates to React Components and other listeners\n            if (target[p] === v) return true;\n\n            target[p] = v;\n            // Call any listeners that are listening to a setting of this path\n            const setPath = `${path}${path && \".\"}${p}`;\n            for (const subscription of subscriptions) {\n                if (!subscription._path || subscription._path === setPath) {\n                    subscription(v, setPath);\n                }\n            }\n            // And don't forget to persist the settings!\n            VencordNative.ipc.invoke(IpcEvents.SET_SETTINGS, JSON.stringify(root, null, 4));\n            return true;\n        }\n    });\n}\n\n/**\n * Same as {@link Settings} but unproxied. You should treat this as readonly,\n * as modifying properties on this will not save to disk or call settings\n * listeners.\n * WARNING: default values specified in plugin.options will not be ensured here. In other words,\n * settings for which you specified a default value may be uninitialised. If you need proper\n * handling for default values, use {@link Settings}\n */\nexport const PlainSettings = settings;\n/**\n * A smart settings object. Altering props automagically saves\n * the updated settings to disk.\n * This recursively proxies objects. If you need the object non proxied, use {@link PlainSettings}\n */\nexport const Settings = makeProxy(settings);\n\n/**\n * Settings hook for React components. Returns a smart settings\n * object that automagically triggers a rerender if any properties\n * are altered\n * @returns Settings\n */\nexport function useSettings() {\n    const [, forceUpdate] = React.useReducer(() => ({}), {});\n\n    React.useEffect(() => {\n        subscriptions.add(forceUpdate);\n        return () => void subscriptions.delete(forceUpdate);\n    }, []);\n\n    return Settings;\n}\n\n// Resolves a possibly nested prop in the form of \"some.nested.prop\" to type of T.some.nested.prop\ntype ResolvePropDeep<T, P> = P extends \"\" ? T :\n    P extends `${infer Pre}.${infer Suf}` ?\n    Pre extends keyof T ? ResolvePropDeep<T[Pre], Suf> : never : P extends keyof T ? T[P] : never;\n\n/**\n * Add a settings listener that will be invoked whenever the desired setting is updated\n * @param path Path to the setting that you want to watch, for example \"plugins.Unindent.enabled\" will fire your callback\n *             whenever Unindent is toggled. Pass an empty string to get notified for all changes\n * @param onUpdate Callback function whenever a setting matching path is updated. It gets passed the new value and the path\n *                 to the updated setting. This path will be the same as your path argument, unless it was an empty string.\n *\n * @example addSettingsListener(\"\", (newValue, path) => console.log(`${path} is now ${newValue}`))\n *          addSettingsListener(\"plugins.Unindent.enabled\", v => console.log(\"Unindent is now\", v ? \"enabled\" : \"disabled\"))\n */\nexport function addSettingsListener<Path extends keyof Settings>(path: Path, onUpdate: (newValue: Settings[Path], path: Path) => void): void;\nexport function addSettingsListener<Path extends string>(path: Path, onUpdate: (newValue: Path extends \"\" ? any : ResolvePropDeep<Settings, Path>, path: Path extends \"\" ? string : Path) => void): void;\nexport function addSettingsListener(path: string, onUpdate: (newValue: any, path: string) => void) {\n    (onUpdate as SubscriptionCallback)._path = path;\n    subscriptions.add(onUpdate);\n}\n\nexport function migratePluginSettings(name: string, ...oldNames: string[]) {\n    const { plugins } = settings;\n    if (name in plugins) return;\n\n    for (const oldName of oldNames) {\n        if (oldName in plugins) {\n            logger.info(`Migrating settings from old name ${oldName} to ${name}`);\n            plugins[name] = plugins[oldName];\n            delete plugins[oldName];\n            VencordNative.ipc.invoke(\n                IpcEvents.SET_SETTINGS,\n                JSON.stringify(settings, null, 4)\n            );\n            break;\n        }\n    }\n}\n", "export default \"5a94201\"", "export default \"Vendicated/Vencord\"", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport gitHash from \"~git-hash\";\nimport gitRemote from \"~git-remote\";\n\nexport const WEBPACK_CHUNK = \"webpackChunkdiscord_app\";\nexport const REACT_GLOBAL = \"Vencord.Webpack.Common.React\";\nexport const VENCORD_USER_AGENT = `Vencord/${gitHash}${gitRemote ? ` (https://github.com/${gitRemote})` : \"\"}`;\n\n// Add yourself here if you made a plugin\nexport const Devs = Object.freeze({\n    Ven: {\n        name: \"Vendicated\",\n        id: 343383572805058560n\n    },\n    Arjix: {\n        name: \"ArjixWasTaken\",\n        id: 674710789138939916n\n    },\n    Cyn: {\n        name: \"Cynosphere\",\n        id: 150745989836308480n\n    },\n    Megu: {\n        name: \"Megumin\",\n        id: 545581357812678656n\n    },\n    botato: {\n        name: \"botato\",\n        id: 440990343899643943n\n    },\n    obscurity: {\n        name: \"obscurity\",\n        id: 336678828233588736n,\n    },\n    rushii: {\n        name: \"rushii\",\n        id: 295190422244950017n\n    },\n    Glitch: {\n        name: \"Glitchy\",\n        id: 269567451199569920n\n    },\n    Samu: {\n        name: \"Samu\",\n        id: 702973430449832038n,\n    },\n    Animal: {\n        name: \"Animal\",\n        id: 118437263754395652n\n    },\n    MaiKokain: {\n        name: \"Mai\",\n        id: 722647978577363026n\n    },\n    echo: {\n        name: \"ECHO\",\n        id: 712639419785412668n\n    },\n    katlyn: {\n        name: \"katlyn\",\n        id: 250322741406859265n\n    },\n    nea: {\n        name: \"nea\",\n        id: 310702108997320705n,\n    },\n    Nuckyz: {\n        name: \"Nuckyz\",\n        id: 235834946571337729n\n    },\n    D3SOX: {\n        name: \"D3SOX\",\n        id: 201052085641281538n\n    },\n    Nickyux: {\n        name: \"Nickyux\",\n        id: 427146305651998721n\n    },\n    mantikafasi: {\n        name: \"mantikafasi\",\n        id: 287555395151593473n\n    },\n    Xinto: {\n        name: \"Xinto\",\n        id: 423915768191647755n\n    },\n    JacobTm: {\n        name: \"Jacob.Tm\",\n        id: 302872992097107991n\n    },\n    DustyAngel47: {\n        name: \"DustyAngel47\",\n        id: 714583473804935238n\n    },\n    BanTheNons: {\n        name: \"BanTheNons\",\n        id: 460478012794863637n\n    },\n    BigDuck: {\n        name: \"BigDuck\",\n        id: 1024588272623681609n\n    },\n    AverageReactEnjoyer: {\n        name: \"Average React Enjoyer\",\n        id: 1004904120056029256n\n    },\n    adryd: {\n        name: \"adryd\",\n        id: 0n\n    },\n    Tyman: {\n        name: \"Tyman\",\n        id: 487443883127472129n\n    },\n    afn: {\n        name: \"afn\",\n        id: 420043923822608384n\n    },\n    KraXen72: {\n        name: \"KraXen72\",\n        id: 379304073515499530n\n    },\n    kemo: {\n        name: \"kemo\",\n        id: 299693897859465228n\n    },\n    dzshn: {\n        name: \"dzshn\",\n        id: 310449948011528192n\n    },\n    Ducko: {\n        name: \"Ducko\",\n        id: 506482395269169153n\n    },\n    jewdev: {\n        name: \"jewdev\",\n        id: 222369866529636353n\n    },\n    Luna: {\n        name: \"Luny\",\n        id: 821472922140803112n\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Settings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport { makeLazy } from \"../utils/misc\";\nimport definePlugin, { OptionType } from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"BetterNotesBox\",\n    description: \"Hide notes or disable spellcheck (Configure in settings!!)\",\n    authors: [Devs.Ven],\n\n    patches: [\n        {\n            find: \"hideNote:\",\n            all: true,\n            predicate: makeLazy(() => Vencord.Settings.plugins.BetterNotesBox.hide),\n            replacement: {\n                match: /hideNote:.+?(?=[,}])/g,\n                replace: \"hideNote:true\",\n            }\n        }, {\n            find: \"Messages.NOTE_PLACEHOLDER\",\n            replacement: {\n                match: /\\.NOTE_PLACEHOLDER,/,\n                replace: \"$&spellCheck:!Vencord.Settings.plugins.BetterNotesBox.noSpellCheck,\"\n            }\n        }\n    ],\n\n    options: {\n        hide: {\n            type: OptionType.BOOLEAN,\n            description: \"Hide notes\",\n            default: false,\n            restartNeeded: true\n        },\n        noSpellCheck: {\n            type: OptionType.BOOLEAN,\n            description: \"Disable spellcheck in notes\",\n            disabled: () => Settings.plugins.BetterNotesBox.hide,\n            default: false\n        }\n    }\n});\n", "/* eslint-disable header/header */\n\n/*!\n * idb-keyval v6.2.0\n * Copyright 2016, Jake Archibald\n * Copyright 2022, Vendicated\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function promisifyRequest<T = undefined>(\n    request: IDBRequest<T> | IDBTransaction,\n): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\n\nexport function createStore(dbName: string, storeName: string): UseStore {\n    const request = indexedDB.open(dbName);\n    request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n    const dbp = promisifyRequest(request);\n\n    return (txMode, callback) =>\n        dbp.then(db =>\n            callback(db.transaction(storeName, txMode).objectStore(storeName)),\n        );\n}\n\nexport type UseStore = <T>(\n    txMode: IDBTransactionMode,\n    callback: (store: IDBObjectStore) => T | PromiseLike<T>,\n) => Promise<T>;\n\nlet defaultGetStoreFunc: UseStore | undefined;\n\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore(\"VencordData\", \"VencordStore\");\n    }\n    return defaultGetStoreFunc;\n}\n\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nexport function get<T = any>(\n    key: IDBValidKey,\n    customStore = defaultGetStore(),\n): Promise<T | undefined> {\n    return customStore(\"readonly\", store => promisifyRequest(store.get(key)));\n}\n\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nexport function set(\n    key: IDBValidKey,\n    value: any,\n    customStore = defaultGetStore(),\n): Promise<void> {\n    return customStore(\"readwrite\", store => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic \u2013 if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nexport function setMany(\n    entries: [IDBValidKey, any][],\n    customStore = defaultGetStore(),\n): Promise<void> {\n    return customStore(\"readwrite\", store => {\n        entries.forEach(entry => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nexport function getMany<T = any>(\n    keys: IDBValidKey[],\n    customStore = defaultGetStore(),\n): Promise<T[]> {\n    return customStore(\"readonly\", store =>\n        Promise.all(keys.map(key => promisifyRequest(store.get(key)))),\n    );\n}\n\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nexport function update<T = any>(\n    key: IDBValidKey,\n    updater: (oldValue: T | undefined) => T,\n    customStore = defaultGetStore(),\n): Promise<void> {\n    return customStore(\n        \"readwrite\",\n        store =>\n            // Need to create the promise manually.\n            // If I try to chain promises, the transaction closes in browsers\n            // that use a promise polyfill (IE10/11).\n            new Promise((resolve, reject) => {\n                store.get(key).onsuccess = function () {\n                    try {\n                        store.put(updater(this.result), key);\n                        resolve(promisifyRequest(store.transaction));\n                    } catch (err) {\n                        reject(err);\n                    }\n                };\n            }),\n    );\n}\n\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nexport function del(\n    key: IDBValidKey,\n    customStore = defaultGetStore(),\n): Promise<void> {\n    return customStore(\"readwrite\", store => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nexport function delMany(\n    keys: IDBValidKey[],\n    customStore = defaultGetStore(),\n): Promise<void> {\n    return customStore(\"readwrite\", (store: IDBObjectStore) => {\n        keys.forEach((key: IDBValidKey) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nexport function clear(customStore = defaultGetStore()): Promise<void> {\n    return customStore(\"readwrite\", store => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\n\nfunction eachCursor(\n    store: IDBObjectStore,\n    callback: (cursor: IDBCursorWithValue) => void,\n): Promise<void> {\n    store.openCursor().onsuccess = function () {\n        if (!this.result) return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nexport function keys<KeyType extends IDBValidKey>(\n    customStore = defaultGetStore(),\n): Promise<KeyType[]> {\n    return customStore(\"readonly\", store => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(\n                store.getAllKeys() as unknown as IDBRequest<KeyType[]>,\n            );\n        }\n\n        const items: KeyType[] = [];\n\n        return eachCursor(store, cursor =>\n            items.push(cursor.key as KeyType),\n        ).then(() => items);\n    });\n}\n\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nexport function values<T = any>(customStore = defaultGetStore()): Promise<T[]> {\n    return customStore(\"readonly\", store => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll() as IDBRequest<T[]>);\n        }\n\n        const items: T[] = [];\n\n        return eachCursor(store, cursor => items.push(cursor.value as T)).then(\n            () => items,\n        );\n    });\n}\n\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nexport function entries<KeyType extends IDBValidKey, ValueType = any>(\n    customStore = defaultGetStore(),\n): Promise<[KeyType, ValueType][]> {\n    return customStore(\"readonly\", store => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(\n                    store.getAllKeys() as unknown as IDBRequest<KeyType[]>,\n                ),\n                promisifyRequest(store.getAll() as IDBRequest<ValueType[]>),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n\n        const items: [KeyType, ValueType][] = [];\n\n        return customStore(\"readonly\", store =>\n            eachCursor(store, cursor =>\n                items.push([cursor.key as KeyType, cursor.value]),\n            ).then(() => items),\n        );\n    });\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Message } from \"discord-types/general\";\n\nimport { get, set } from \"../api/DataStore\";\nimport { Devs } from \"../utils/constants\";\nimport Logger from \"../utils/Logger\";\nimport definePlugin from \"../utils/types\";\nimport { ChannelStore, FluxDispatcher } from \"../webpack/common\";\n\nlet style: HTMLStyleElement;\n\nconst KEY = \"HideAttachments_HiddenIds\";\n\nconst ImageVisible = () => (\n    <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\">\n        <path d=\"M5 21q-.825 0-1.413-.587Q3 19.825 3 19V5q0-.825.587-1.413Q4.175 3 5 3h14q.825 0 1.413.587Q21 4.175 21 5v14q0 .825-.587 1.413Q19.825 21 19 21Zm0-2h14V5H5v14Zm1-2h12l-3.75-5-3 4L9 13Zm-1 2V5v14Z\" />\n    </svg>\n);\nconst ImageInvisible = () => (\n    <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\">\n        <path d=\"m21 18.15-2-2V5H7.85l-2-2H19q.825 0 1.413.587Q21 4.175 21 5Zm-1.2 4.45L18.2 21H5q-.825 0-1.413-.587Q3 19.825 3 19V5.8L1.4 4.2l1.4-1.4 18.4 18.4ZM6 17l3-4 2.25 3 .825-1.1L5 7.825V19h11.175l-2-2Zm7.425-6.425ZM10.6 13.4Z\" />\n    </svg>\n);\n\nlet hiddenMessages: Set<string> = new Set();\nconst getHiddenMessages = () => get(KEY).then(set => {\n    hiddenMessages = set ?? new Set<string>();\n    return hiddenMessages;\n});\nconst saveHiddenMessages = (ids: Set<string>) => set(KEY, ids);\n\nexport default definePlugin({\n    name: \"HideAttachments\",\n    description: \"Hide attachments and Embeds for individual messages via hover button\",\n    authors: [Devs.Ven],\n    patches: [{\n        find: \"Messages.MESSAGE_UTILITIES_A11Y_LABEL\",\n        replacement: {\n            match: /(message:(.).{0,100}Fragment,\\{children:\\[)(.{0,40}renderPopout:.{0,200}message_reaction_emoji_picker.+?return (.{1,3})\\(.{0,30}\"add-reaction\")/,\n            replace: \"$1Vencord.Plugins.plugins.HideAttachments.renderButton($2, $4),$3\"\n        }\n    }],\n\n    async start() {\n        style = document.createElement(\"style\");\n        style.id = \"VencordHideAttachments\";\n        document.head.appendChild(style);\n\n        await getHiddenMessages();\n        await this.buildCss();\n    },\n\n    stop() {\n        style.remove();\n        hiddenMessages.clear();\n    },\n\n    async buildCss() {\n        const elements = [...hiddenMessages].map(id => `#message-accessories-${id}`).join(\",\");\n        style.textContent = `\n        :is(${elements}) [class*=\"embedWrapper\"] {\n            /* important is not necessary, but add it to make sure bad themes won't break it */\n            display: none !important;\n        }\n        :is(${elements})::after {\n            content: \"Attachments hidden\";\n            color: var(--text-muted);\n            font-size: 80%;\n        }\n        `;\n    },\n\n    renderButton(msg: Message, makeItem: (data: any) => React.ComponentType) {\n        try {\n            if (!msg.attachments.length && !msg.embeds.length) return null;\n\n            const isHidden = hiddenMessages.has(msg.id);\n\n            return makeItem({\n                key: \"HideAttachments\",\n                label: isHidden ? \"Show Attachments\" : \"Hide Attachments\",\n                icon: isHidden ? ImageVisible : ImageInvisible,\n                message: msg,\n                channel: ChannelStore.getChannel(msg.channel_id),\n                onClick: () => this.toggleHide(msg.id)\n            });\n        } catch (err) {\n            new Logger(\"HideAttachments\").error(err);\n            return null;\n        }\n    },\n\n    async toggleHide(id: string) {\n        const ids = await getHiddenMessages();\n        if (!ids.delete(id))\n            ids.add(id);\n\n        await saveHiddenMessages(ids);\n        await this.buildCss();\n\n        // update is necessary to rerender the PopOver\n        FluxDispatcher.dispatch({\n            type: \"MESSAGE_UPDATE\",\n            message: { id }\n        });\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"TimeBarAllActivities\",\n    description: \"Adds the Spotify time bar to all activities if they have start and end timestamps\",\n    authors: [Devs.obscurity],\n    patches: [\n        {\n            find: \"renderTimeBar=function\",\n            replacement: {\n                match: /renderTimeBar=function\\((.{1,3})\\){.{0,50}?var/,\n                replace: \"renderTimeBar=function($1){var\"\n            }\n        }\n    ],\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { Settings } from \"../Vencord\";\n\nenum Methods {\n    Random,\n    Consistent,\n    Timestamp,\n}\n\nexport default definePlugin({\n    name: \"AnonymiseFileNames\",\n    authors: [Devs.obscurity],\n    description: \"Anonymise uploaded file names\",\n    patches: [\n        {\n            find: \"instantBatchUpload:function\",\n            replacement: {\n                match: /uploadFiles:(.{1,2}),/,\n                replace:\n                    \"uploadFiles:(...args)=>(args[0].uploads.forEach(f=>f.filename=Vencord.Plugins.plugins.AnonymiseFileNames.anonymise(f.filename)),$1(...args)),\",\n            },\n        },\n    ],\n\n    options: {\n        method: {\n            description: \"Anonymising method\",\n            type: OptionType.SELECT,\n            options: [\n                { label: \"Random Characters\", value: Methods.Random, default: true },\n                { label: \"Consistent\", value: Methods.Consistent },\n                { label: \"Timestamp (4chan-like)\", value: Methods.Timestamp },\n            ],\n        },\n        randomisedLength: {\n            description: \"Random characters length\",\n            type: OptionType.NUMBER,\n            default: 7,\n            disabled: () => Settings.plugins.AnonymiseFileNames.method !== Methods.Random,\n        },\n        consistent: {\n            description: \"Consistent filename\",\n            type: OptionType.STRING,\n            default: \"image\",\n            disabled: () => Settings.plugins.AnonymiseFileNames.method !== Methods.Consistent,\n        },\n    },\n\n    anonymise(file: string) {\n        let name = \"image\";\n        const extIdx = file.lastIndexOf(\".\");\n        const ext = extIdx !== -1 ? file.slice(extIdx) : \"\";\n\n        switch (Settings.plugins.AnonymiseFileNames.method) {\n            case Methods.Random:\n                const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n                name = Array.from(\n                    { length: Settings.plugins.AnonymiseFileNames.randomisedLength },\n                    () => chars[Math.floor(Math.random() * chars.length)]\n                ).join(\"\");\n                break;\n            case Methods.Consistent:\n                name = Settings.plugins.AnonymiseFileNames.consistent;\n                break;\n            case Methods.Timestamp:\n                // UNIX timestamp in nanos, i could not find a better dependency-less way\n                name = `${Math.floor(Date.now() / 1000)}${Math.floor(window.performance.now())}`;\n                break;\n        }\n        return name + ext;\n    },\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport function Heart() {\n    return (\n        <svg\n            aria-hidden=\"true\"\n            height=\"16\"\n            viewBox=\"0 0 16 16\"\n            width=\"16\"\n            style={{ marginRight: \"0.5em\", transform: \"translateY(2px)\" }}\n        >\n            <path\n                fill=\"#db61a2\"\n                fill-rule=\"evenodd\"\n                d=\"M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.75.75 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5zM8 14.25l-.345.666-.002-.001-.006-.003-.018-.01a7.643 7.643 0 01-.31-.17 22.075 22.075 0 01-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.08 22.08 0 01-3.744 2.584l-.018.01-.006.003h-.002L8 14.25zm0 0l.345.666a.752.752 0 01-.69 0L8 14.25z\"\n            />\n        </svg>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport IpcEvents from \"../utils/IpcEvents\";\nimport { Button } from \"../webpack/common\";\nimport { Heart } from \"./Heart\";\n\nexport default function DonateButton(props: any) {\n    return (\n        <Button\n            {...props}\n            look={Button.Looks.LINK}\n            color={Button.Colors.TRANSPARENT}\n            onClick={() =>\n                VencordNative.ipc.invoke(IpcEvents.OPEN_EXTERNAL, \"https://github.com/sponsors/Vendicated\")\n            }\n        >\n            <Heart />\n            Donate\n        </Button>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Card } from \"../webpack/common\";\n\ninterface Props {\n    style?: React.CSSProperties;\n    className?: string;\n}\nexport function ErrorCard(props: React.PropsWithChildren<Props>) {\n    return (\n        <Card className={props.className} style={\n            {\n                padding: \"2em\",\n                backgroundColor: \"#e7828430\",\n                borderColor: \"#e78284\",\n                color: \"var(--text-normal)\",\n                ...props.style\n            }\n        }>\n            {props.children}\n        </Card>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Logger from \"../utils/Logger\";\nimport { LazyComponent } from \"../utils/misc\";\nimport { Margins, React } from \"../webpack/common\";\nimport { ErrorCard } from \"./ErrorCard\";\n\ninterface Props {\n    /** Render nothing if an error occurs */\n    noop?: boolean;\n    /** Fallback component to render if an error occurs */\n    fallback?: React.ComponentType<React.PropsWithChildren<{ error: any; message: string; stack: string; }>>;\n    /** called when an error occurs */\n    onError?(error: Error, errorInfo: React.ErrorInfo): void;\n    /** Custom error message */\n    message?: string;\n}\n\nconst color = \"#e78284\";\n\nconst logger = new Logger(\"React ErrorBoundary\", color);\n\nconst NO_ERROR = {};\n\n// We might want to import this in a place where React isn't ready yet.\n// Thus, wrap in a LazyComponent\nconst ErrorBoundary = LazyComponent(() => {\n    return class ErrorBoundary extends React.PureComponent<React.PropsWithChildren<Props>> {\n        state = {\n            error: NO_ERROR as any,\n            stack: \"\",\n            message: \"\"\n        };\n\n        static getDerivedStateFromError(error: any) {\n            let stack = error?.stack ?? \"\";\n            let message = error?.message || String(error);\n\n            if (error instanceof Error && stack) {\n                const eolIdx = stack.indexOf(\"\\n\");\n                if (eolIdx !== -1) {\n                    message = stack.slice(0, eolIdx);\n                    stack = stack.slice(eolIdx + 1).replace(/https:\\/\\/\\S+\\/assets\\//g, \"\");\n                }\n            }\n\n            return { error, stack, message };\n        }\n\n        componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n            this.props.onError?.(error, errorInfo);\n            logger.error(\"A component threw an Error\\n\", error);\n            logger.error(\"Component Stack\", errorInfo.componentStack);\n        }\n\n        render() {\n            if (this.state.error === NO_ERROR) return this.props.children;\n\n            if (this.props.noop) return null;\n\n            if (this.props.fallback)\n                return <this.props.fallback\n                    children={this.props.children}\n                    {...this.state}\n                />;\n\n            const msg = this.props.message || \"An error occurred while rendering this Component. More info can be found below and in your console.\";\n\n            return (\n                <ErrorCard style={{\n                    overflow: \"hidden\",\n                }}>\n                    <h1>Oh no!</h1>\n                    <p>{msg}</p>\n                    <code>\n                        {this.state.message}\n                        {!!this.state.stack && (\n                            <pre className={Margins.marginTop8}>\n                                {this.state.stack}\n                            </pre>\n                        )}\n                    </code>\n                </ErrorCard>\n            );\n        }\n    };\n}) as\n    React.ComponentType<React.PropsWithChildren<Props>> & {\n        wrap<T extends JSX.IntrinsicAttributes = any>(Component: React.ComponentType<T>, errorBoundaryProps?: Props): React.ComponentType<T>;\n    };\n\nErrorBoundary.wrap = (Component, errorBoundaryProps) => props => (\n    <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n    </ErrorBoundary>\n);\n\nexport default ErrorBoundary;\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport type { React } from \"../webpack/common\";\n\nexport function Flex(props: React.PropsWithChildren<{\n    flexDirection?: React.CSSProperties[\"flexDirection\"];\n    style?: React.CSSProperties;\n    className?: string;\n} & React.HTMLProps<HTMLDivElement>>) {\n    props.style ??= {};\n    props.style.display = \"flex\";\n    // TODO(ven): Remove me, what was I thinking??\n    props.style.gap ??= \"1em\";\n    props.style.flexDirection ||= props.flexDirection;\n    delete props.flexDirection;\n    return (\n        <div {...props}>\n            {props.children}\n        </div>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { filters } from \"../webpack\";\nimport { mapMangledModuleLazy } from \"../webpack/webpack\";\n\nexport enum ModalSize {\n    SMALL = \"small\",\n    MEDIUM = \"medium\",\n    LARGE = \"large\",\n    DYNAMIC = \"dynamic\",\n}\n\nenum ModalTransitionState {\n    ENTERING,\n    ENTERED,\n    EXITING,\n    EXITED,\n    HIDDEN,\n}\n\nexport interface ModalProps {\n    transitionState: ModalTransitionState;\n    onClose(): Promise<void>;\n}\n\nexport interface ModalOptions {\n    modalKey?: string;\n    onCloseRequest?: (() => void);\n    onCloseCallback?: (() => void);\n}\n\ninterface ModalRootProps {\n    transitionState: ModalTransitionState;\n    children: React.ReactNode;\n    size?: ModalSize;\n    role?: \"alertdialog\" | \"dialog\";\n    className?: string;\n    onAnimationEnd?(): string;\n}\n\ntype RenderFunction = (props: ModalProps) => React.ReactNode;\n\nexport const Modals = mapMangledModuleLazy(\"().closeWithCircleBackground\", {\n    ModalRoot: filters.byCode(\"().root\"),\n    ModalHeader: filters.byCode(\"().header\"),\n    ModalContent: filters.byCode(\"().content\"),\n    ModalFooter: filters.byCode(\"().footerSeparator\"),\n    ModalCloseButton: filters.byCode(\"().closeWithCircleBackground\"),\n});\n\nexport const ModalRoot = (props: ModalRootProps) => <Modals.ModalRoot {...props} />;\nexport const ModalHeader = (props: any) => <Modals.ModalHeader {...props} />;\nexport const ModalContent = (props: any) => <Modals.ModalContent {...props} />;\nexport const ModalFooter = (props: any) => <Modals.ModalFooter {...props} />;\nexport const ModalCloseButton = (props: any) => <Modals.ModalCloseButton {...props} />;\n\nconst ModalAPI = mapMangledModuleLazy(\"onCloseRequest:null!=\", {\n    openModal: filters.byCode(\"onCloseRequest:null!=\"),\n    closeModal: filters.byCode(\"onCloseCallback&&\"),\n    openModalLazy: m => m?.length === 1 && filters.byCode(\".apply(this,arguments)\")(m),\n});\n\n/**\n * Wait for the render promise to resolve, then open a modal with it.\n * This is equivalent to render().then(openModal)\n * You should use the Modal components exported by this file\n */\nexport function openModalLazy(render: () => Promise<RenderFunction>, options?: ModalOptions & { contextKey?: string; }): Promise<string> {\n    return ModalAPI.openModalLazy(render, options);\n}\n\n/**\n * Open a Modal with the given render function.\n * You should use the Modal components exported by this file\n */\nexport function openModal(render: RenderFunction, options?: ModalOptions, contextKey?: string): string {\n    return ModalAPI.openModal(render, options, contextKey);\n}\n\n/**\n * Close a modal by its key\n */\nexport function closeModal(modalKey: string, contextKey?: string): void {\n    return ModalAPI.closeModal(modalKey, contextKey);\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { BadgePosition, ProfileBadge } from \"../api/Badges\";\nimport DonateButton from \"../components/DonateButton\";\nimport ErrorBoundary from \"../components/ErrorBoundary\";\nimport { Flex } from \"../components/Flex\";\nimport { Heart } from \"../components/Heart\";\nimport { Devs } from \"../utils/constants\";\nimport IpcEvents from \"../utils/IpcEvents\";\nimport Logger from \"../utils/Logger\";\nimport { closeModal, Modals, openModal } from \"../utils/modal\";\nimport definePlugin from \"../utils/types\";\nimport { Forms, Margins } from \"../webpack/common\";\n\nconst CONTRIBUTOR_BADGE = \"https://media.discordapp.net/stickers/1026517526106087454.webp\";\n\n/** List of vencord contributor IDs */\nconst contributorIds: string[] = Object.values(Devs).map(d => d.id.toString());\n\nconst ContributorBadge: ProfileBadge = {\n    tooltip: \"Vencord Contributor\",\n    image: CONTRIBUTOR_BADGE,\n    position: BadgePosition.START,\n    props: {\n        style: {\n            borderRadius: \"50%\",\n            transform: \"scale(0.9)\" // The image is a bit too big compared to default badges\n        }\n    },\n    shouldShow: ({ user }) => contributorIds.includes(user.id),\n    onClick: () => VencordNative.ipc.invoke(IpcEvents.OPEN_EXTERNAL, \"https://github.com/Vendicated/Vencord\")\n};\n\nconst DonorBadges = {} as Record<string, Pick<ProfileBadge, \"image\" | \"tooltip\">>;\n\nexport default definePlugin({\n    name: \"BadgeAPI\",\n    description: \"API to add badges to users.\",\n    authors: [Devs.Megu],\n    required: true,\n    patches: [\n        /* Patch the badges array */\n        {\n            find: \"PREMIUM_GUILD_SUBSCRIPTION_TOOLTIP.format({date:\",\n            replacement: {\n                match: /&&((\\w{1,3})\\.push\\({tooltip:\\w{1,3}\\.\\w{1,3}\\.Messages\\.PREMIUM_GUILD_SUBSCRIPTION_TOOLTIP\\.format.+?;)(?:return\\s\\w{1,3};?})/,\n                replace: (_, m, badgeArray) => `&&${m} return Vencord.Api.Badges.inject(${badgeArray}, arguments[0]);}`,\n            }\n        },\n        /* Patch the badge list component on user profiles */\n        {\n            find: \"Messages.PROFILE_USER_BADGES,role:\",\n            replacement: {\n                match: /src:(\\w{1,3})\\[(\\w{1,3})\\.key\\],/,\n                // <img src={badge.image ?? imageMap[badge.key]} {...badge.props} />\n                replace: (_, imageMap, badge) => `src: ${badge}.image ?? ${imageMap}[${badge}.key], ...${badge}.props,`\n            }\n        }\n    ],\n\n    async start() {\n        Vencord.Api.Badges.addBadge(ContributorBadge);\n        const badges = await fetch(\"https://gist.githubusercontent.com/Vendicated/51a3dd775f6920429ec6e9b735ca7f01/raw/badges.csv\").then(r => r.text());\n        const lines = badges.trim().split(\"\\n\");\n        if (lines.shift() !== \"id,tooltip,image\") {\n            new Logger(\"BadgeAPI\").error(\"Invalid badges.csv file!\");\n            return;\n        }\n        for (const line of lines) {\n            const [id, tooltip, image] = line.split(\",\");\n            DonorBadges[id] = { image, tooltip };\n        }\n    },\n\n    addDonorBadge(badges: ProfileBadge[], userId: string) {\n        const badge = DonorBadges[userId];\n        if (badge) {\n            badges.unshift({\n                ...badge,\n                position: BadgePosition.START,\n                props: {\n                    style: {\n                        borderRadius: \"50%\",\n                        transform: \"scale(0.9)\" // The image is a bit too big compared to default badges\n                    }\n                },\n                onClick() {\n                    const modalKey = openModal(props => (\n                        <ErrorBoundary noop onError={() => {\n                            closeModal(modalKey);\n                            VencordNative.ipc.invoke(IpcEvents.OPEN_EXTERNAL, \"https://github.com/sponsors/Vendicated\");\n                        }}>\n                            <Modals.ModalRoot {...props}>\n                                <Modals.ModalHeader>\n                                    <Flex style={{ width: \"100%\", justifyContent: \"center\" }}>\n                                        <Forms.FormTitle\n                                            tag=\"h2\"\n                                            style={{\n                                                width: \"100%\",\n                                                textAlign: \"center\",\n                                                margin: 0\n                                            }}\n                                        >\n                                            <Heart />\n                                            Vencord Donor\n                                        </Forms.FormTitle>\n                                    </Flex>\n                                </Modals.ModalHeader>\n                                <Modals.ModalContent>\n                                    <Flex>\n                                        <img\n                                            role=\"presentation\"\n                                            src=\"https://cdn.discordapp.com/emojis/1026533070955872337.png\"\n                                            alt=\"\"\n                                            style={{ margin: \"auto\" }}\n                                        />\n                                        <img\n                                            role=\"presentation\"\n                                            src=\"https://cdn.discordapp.com/emojis/1026533090627174460.png\"\n                                            alt=\"\"\n                                            style={{ margin: \"auto\" }}\n                                        />\n                                    </Flex>\n                                    <div style={{ padding: \"1em\" }}>\n                                        <Forms.FormText>\n                                            This Badge is a special perk for Vencord Donors\n                                        </Forms.FormText>\n                                        <Forms.FormText className={Margins.marginTop20}>\n                                            Please consider supporting the development of Vencord by becoming a donor. It would mean a lot!!\n                                        </Forms.FormText>\n                                    </div>\n                                </Modals.ModalContent>\n                                <Modals.ModalFooter>\n                                    <Flex style={{ width: \"100%\", justifyContent: \"center\" }}>\n                                        <DonateButton />\n                                    </Flex>\n                                </Modals.ModalFooter>\n                            </Modals.ModalRoot>\n                        </ErrorBoundary>\n                    ));\n                },\n            });\n        }\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"CommandsAPI\",\n    authors: [Devs.Arjix],\n    description: \"Api required by anything that uses commands\",\n    patches: [\n        // obtain BUILT_IN_COMMANDS instance\n        {\n            find: '\"giphy\",\"tenor\"',\n            replacement: [\n                {\n                    // Matches BUILT_IN_COMMANDS. This is not exported so this is\n                    // the only way. _init() just returns the same object to make the\n                    // patch simpler\n\n                    // textCommands = builtInCommands.filter(...)\n                    match: /(?<=\\w=)(\\w)(\\.filter\\(.{0,30}giphy)/,\n                    replace: \"Vencord.Api.Commands._init($1)$2\",\n                }\n            ],\n        },\n        // command error handling\n        {\n            find: \"Unexpected value for option\",\n            replacement: {\n                // return [2, cmd.execute(args, ctx)]\n                match: /,(.{1,2})\\.execute\\((.{1,2}),(.{1,2})\\)]/,\n                replace: (_, cmd, args, ctx) => `,Vencord.Api.Commands._handleCommand(${cmd}, ${args}, ${ctx})]`\n            }\n        },\n        // Show plugin name instead of \"Built-In\"\n        {\n            find: \"().source,children\",\n            replacement: {\n                // ...children: p?.name\n                match: /(?<=:(.{1,3})\\.displayDescription\\}.{0,200}\\(\\)\\.source,children:)[^}]+/,\n                replace: \"$1.plugin||($&)\"\n            }\n        }\n    ],\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { migratePluginSettings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\n// duplicate values have multiple branches with different types. Just include all to be safe\nconst nameMap = {\n    radio: \"MenuRadioItem\",\n    separator: \"MenuSeparator\",\n    checkbox: \"MenuCheckboxItem\",\n    groupstart: \"MenuGroup\",\n\n    control: \"MenuControlItem\",\n    compositecontrol: \"MenuControlItem\",\n\n    item: \"MenuItem\",\n    customitem: \"MenuItem\",\n};\n\nmigratePluginSettings(\"MenuItemDeobfuscatorAPI\", \"MenuItemDeobfuscatorApi\");\nexport default definePlugin({\n    name: \"MenuItemDeobfuscatorAPI\",\n    description: \"Deobfuscates Discord's Menu Item module\",\n    authors: [Devs.Ven],\n    patches: [\n        {\n            find: '\"Menu API',\n            replacement: {\n                match: /function.{0,80}type===(.{1,3})\\..{1,3}\\).{0,50}navigable:.+?Menu API/s,\n                replace: (m, mod) => {\n                    let nicenNames = \"\";\n                    const redefines = [] as string[];\n                    // if (t.type === m.MenuItem)\n                    const typeCheckRe = /\\(.{1,3}\\.type===(.{1,5})\\)/g;\n                    // push({type:\"item\"})\n                    const pushTypeRe = /type:\"(\\w+)\"/g;\n\n                    let typeMatch: RegExpExecArray | null;\n                    // for each if (t.type === ...)\n                    while ((typeMatch = typeCheckRe.exec(m)) !== null) {\n                        // extract the current menu item\n                        const item = typeMatch[1];\n                        // Set the starting index of the second regex to that of the first to start\n                        // matching from after the if\n                        pushTypeRe.lastIndex = typeCheckRe.lastIndex;\n                        // extract the first type: \"...\"\n                        const type = pushTypeRe.exec(m)?.[1];\n                        if (type && type in nameMap) {\n                            const name = nameMap[type];\n                            nicenNames += `Object.defineProperty(${item},\"name\",{value:\"${name}\"});`;\n                            redefines.push(`${name}:${item}`);\n                        }\n                    }\n                    if (redefines.length < 6) {\n                        console.warn(\"[ApiMenuItemDeobfuscator] Expected to at least remap 6 items, only remapped\", redefines.length);\n                    }\n\n                    // Merge all our redefines with the actual module\n                    return `${nicenNames}Object.assign(${mod},{${redefines.join(\",\")}});${m}`;\n                },\n            },\n        },\n    ],\n});\n\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"MessageAccessoriesAPI\",\n    description: \"API to add message accessories.\",\n    authors: [Devs.Cyn],\n    patches: [\n        {\n            find: \"_messageAttachmentToEmbedMedia\",\n            replacement: {\n                match: /(\\(\\)\\.container\\)?,children:)(\\[[^\\]]+\\])(}\\)\\};return)/,\n                replace: (_, pre, accessories, post) =>\n                    `${pre}Vencord.Api.MessageAccessories._modifyAccessories(${accessories},this.props)${post}`,\n            },\n        },\n    ],\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"MessageEventsAPI\",\n    description: \"Api required by anything using message events.\",\n    authors: [Devs.Arjix],\n    patches: [\n        {\n            find: \"sendMessage:function\",\n            replacement: [{\n                match: /(?<=_sendMessage:function\\([^)]+\\)){/,\n                replace: \"{if(Vencord.Api.MessageEvents._handlePreSend(...arguments)){return;};\"\n            }, {\n                match: /(?<=\\beditMessage:function\\([^)]+\\)){/,\n                replace: \"{Vencord.Api.MessageEvents._handlePreEdit(...arguments);\"\n            }]\n        },\n        {\n            find: '(\"interactionUsernameProfile',\n            replacement: {\n                match: /var \\w=(\\w)\\.id,\\w=(\\w)\\.id;return .{1,2}\\.useCallback\\(\\(?function\\((.{1,2})\\){/,\n                replace: (m, message, channel, event) =>\n                    // the message param is shadowed by the event param, so need to alias them\n                    `var _msg=${message},_chan=${channel};${m}Vencord.Api.MessageEvents._handleClick(_msg, _chan, ${event});`\n            }\n        }\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { migratePluginSettings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nmigratePluginSettings(\"NoticesAPI\", \"NoticesApi\");\n\nexport default definePlugin({\n    name: \"NoticesAPI\",\n    description: \"Fixes notices being automatically dismissed\",\n    authors: [Devs.Ven],\n    required: true,\n    patches: [\n        {\n            find: \"updateNotice:\",\n            replacement: [\n                {\n                    match: /;(.{1,2}=null;)(?=.{0,50}updateNotice)/g,\n                    replace:\n                        \";if(Vencord.Api.Notices.currentNotice)return !1;$1\"\n                },\n                {\n                    match: /(?<=NOTICE_DISMISS:function.+?){(?=if\\(null==(.+?)\\))/,\n                    replace: '{if($1?.id==\"VencordNotice\")return ($1=null,Vencord.Api.Notices.nextNotice(),true);'\n                }\n            ]\n        }\n    ],\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"ServerListAPI\",\n    authors: [Devs.kemo],\n    description: \"Api required for plugins that modify the server list\",\n    patches: [\n        {\n            find: \"Messages.DISCODO_DISABLED\",\n            replacement: {\n                match: /(Messages\\.DISCODO_DISABLED\\);return)(.*?homeIcon.*?)(\\}function)/,\n                replace: \"$1[$2].concat(Vencord.Api.ServerList.renderAll(Vencord.Api.ServerList.ServerListRenderPosition.Above))$3\"\n            }\n        },\n        {\n            find: \"Messages.SERVERS\",\n            replacement: {\n                match: /(Messages\\.SERVERS,children:)(.+?default:return null\\}\\}\\)\\))/,\n                replace: \"$1Vencord.Api.ServerList.renderAll(Vencord.Api.ServerList.ServerListRenderPosition.In).concat($2)\"\n            }\n        }\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { waitFor } from \"../webpack\";\n\nlet NoticesModule: any;\nwaitFor(m => m.show && m.dismiss && !m.suppressAll, m => NoticesModule = m);\n\nexport const noticesQueue = [] as any[];\nexport let currentNotice: any = null;\n\nexport function popNotice() {\n    NoticesModule.dismiss();\n}\n\nexport function nextNotice() {\n    currentNotice = noticesQueue.shift();\n\n    if (currentNotice) {\n        NoticesModule.show(...currentNotice, \"VencordNotice\");\n    }\n}\n\nexport function showNotice(message: string, buttonText: string, onOkClick: () => void) {\n    noticesQueue.push([\"GENERIC\", message, buttonText, onOkClick]);\n    if (!currentNotice) nextNotice();\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { React } from \"../webpack/common\";\n\ninterface Props extends React.DetailedHTMLProps<React.AnchorHTMLAttributes<HTMLAnchorElement>, HTMLAnchorElement> {\n    disabled?: boolean;\n}\n\nexport function Link(props: React.PropsWithChildren<Props>) {\n    if (props.disabled) {\n        props.style ??= {};\n        props.style.pointerEvents = \"none\";\n        props[\"aria-disabled\"] = true;\n    }\n    return (\n        <a role=\"link\" target=\"_blank\" {...props}>\n            {props.children}\n        </a>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 OpenAsar\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { popNotice, showNotice } from \"../api/Notices\";\nimport { Link } from \"../components/Link\";\nimport { Devs } from \"../utils/constants\";\nimport { lazyWebpack } from \"../utils/misc\";\nimport definePlugin from \"../utils/types\";\nimport { filters, mapMangledModuleLazy } from \"../webpack\";\nimport { FluxDispatcher, Forms, Toasts } from \"../webpack/common\";\n\nconst assetManager = mapMangledModuleLazy(\n    \"getAssetImage: size must === [number, number] for Twitch\",\n    {\n        getAsset: filters.byCode(\"apply(\"),\n    }\n);\n\nconst rpcManager = lazyWebpack(filters.byCode(\".APPLICATION_RPC(\"));\n\nasync function lookupAsset(applicationId: string, key: string): Promise<string> {\n    return (await assetManager.getAsset(applicationId, [key, undefined]))[0];\n}\n\nconst apps: any = {};\nasync function lookupApp(applicationId: string): Promise<string> {\n    const socket: any = {};\n    await rpcManager.lookupApp(socket, applicationId);\n    return socket.application;\n}\n\nlet ws: WebSocket;\nexport default definePlugin({\n    name: \"WebRichPresence (arRPC)\",\n    description: \"Client plugin for arRPC to enable RPC on Discord Web (experimental)\",\n    authors: [Devs.Ducko],\n    target: \"WEB\",\n\n    settingsAboutComponent: () => (\n        <>\n            <Forms.FormTitle tag=\"h3\">How to use arRPC</Forms.FormTitle>\n            <Forms.FormText>\n                <Link href=\"https://github.com/OpenAsar/arrpc/tree/main#server\">Follow the instructions in the GitHub repo</Link> to get the server running, and then enable the plugin.\n            </Forms.FormText>\n        </>\n    ),\n\n    async start() {\n        if (ws) ws.close();\n        ws = new WebSocket(\"ws://127.0.0.1:1337\"); // try to open WebSocket\n\n        ws.onmessage = async e => { // on message, set status to data\n            const data = JSON.parse(e.data);\n\n            if (data.activity?.assets?.large_image) data.activity.assets.large_image = await lookupAsset(data.activity.application_id, data.activity.assets.large_image);\n            if (data.activity?.assets?.small_image) data.activity.assets.small_image = await lookupAsset(data.activity.application_id, data.activity.assets.small_image);\n\n            if (data.activity) {\n                const appId = data.activity.application_id;\n                apps[appId] ||= await lookupApp(appId);\n\n                const app = apps[appId];\n                data.activity.name ||= app.name;\n            }\n\n            FluxDispatcher.dispatch({ type: \"LOCAL_ACTIVITY_UPDATE\", ...data });\n        };\n\n        const connectionSuccessful = await new Promise(res => setTimeout(() => res(ws.readyState === WebSocket.OPEN), 1000)); // check if open after 1s\n        if (!connectionSuccessful) {\n            showNotice(\"Failed to connect to arRPC, is it running?\", \"Retry\", () => { // show notice about failure to connect, with retry/ignore\n                popNotice();\n                this.start();\n            });\n            return;\n        }\n\n        Toasts.show({ // show toast on success\n            message: \"Connected to arRPC\",\n            type: Toasts.Type.SUCCESS,\n            id: Toasts.genId(),\n            options: {\n                duration: 1000,\n                position: Toasts.Position.BOTTOM\n            }\n        });\n    },\n\n    stop() {\n        FluxDispatcher.dispatch({ type: \"LOCAL_ACTIVITY_UPDATE\", activity: null }); // clear status\n        ws.close(); // close WebSocket\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin, { OptionType } from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"BANger\",\n    description: \"Replaces the GIF in the ban dialogue with a custom one.\",\n    authors: [Devs.Xinto, Devs.Glitch],\n    patches: [\n        {\n            find: \"BAN_CONFIRM_TITLE.\",\n            replacement: {\n                match: /src:\\w\\(\\d+\\)/g,\n                replace: \"src: Vencord.Settings.plugins.BANger.source\"\n            }\n        }\n    ],\n    options: {\n        source: {\n            description: \"Source to replace ban GIF with (Video or Gif)\",\n            type: OptionType.STRING,\n            default: \"https://i.imgur.com/wp5q52C.mp4\",\n            restartNeeded: true,\n        }\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"BetterGifAltText\",\n    authors: [Devs.Ven],\n    description:\n        \"Change GIF alt text from simply being 'GIF' to containing the gif tags / filename\",\n    patches: [\n        {\n            find: \"onCloseImage=\",\n            replacement: {\n                match: /(return.{0,10}\\.jsx.{0,50}isWindowFocused)/,\n                replace:\n                    \"Vencord.Plugins.plugins.BetterGifAltText.altify(e);$1\",\n            },\n        },\n        {\n            find: 'preload:\"none\",\"aria',\n            replacement: {\n                match: /(?<==(.{1,3})\\.alt.{0,20})\\?.{0,5}\\.Messages\\.GIF/,\n                replace:\n                    \"?($1.alt='GIF',Vencord.Plugins.plugins.BetterGifAltText.altify($1))\",\n            },\n        },\n    ],\n\n    altify(props: any) {\n        if (props.alt !== \"GIF\") return props.alt;\n\n        let url: string = props.original || props.src;\n        try {\n            url = decodeURI(url);\n        } catch { }\n\n        let name = url\n            .slice(url.lastIndexOf(\"/\") + 1)\n            .replace(/\\d/g, \"\") // strip numbers\n            .replace(/.gif$/, \"\") // strip extension\n            .split(/[,\\-_ ]+/g)\n            .slice(0, 20)\n            .join(\" \");\n        if (name.length > 300) {\n            name = name.slice(0, 300) + \"...\";\n        }\n\n        if (name) props.alt += ` - ${name}`;\n\n        return props.alt;\n    },\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { migratePluginSettings, Settings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { Clipboard, Toasts } from \"../webpack/common\";\n\nmigratePluginSettings(\"BetterRoleDot\", \"ClickableRoleDot\");\nexport default definePlugin({\n    name: \"BetterRoleDot\",\n    authors: [Devs.Ven],\n    description:\n        \"Copy role colour on RoleDot (accessibility setting) click. Also allows using both RoleDot and coloured names simultaneously\",\n\n    patches: [\n        {\n            find: \"M0 4C0 1.79086 1.79086 0 4 0H16C18.2091 0 20 1.79086 20 4V16C20 18.2091 18.2091 20 16 20H4C1.79086 20 0 18.2091 0 16V4Z\",\n            replacement: {\n                match: /viewBox:\"0 0 20 20\"/,\n                replace: \"$&,onClick:()=>Vencord.Plugins.plugins.BetterRoleDot.copyToClipBoard(e.color),style:{cursor:'pointer'}\",\n            },\n        },\n        {\n            find: '\"username\"===',\n            all: true,\n            predicate: () => Settings.plugins.BetterRoleDot.bothStyles,\n            replacement: {\n                match: /\"(?:username|dot)\"===\\w\\b/g,\n                replace: \"true\",\n            },\n        },\n    ],\n\n    options: {\n        bothStyles: {\n            type: OptionType.BOOLEAN,\n            description: \"Show both role dot and coloured names\",\n            default: false,\n        }\n    },\n\n    copyToClipBoard(color: string) {\n        Clipboard.copy(color);\n        Toasts.show({\n            message: \"Copied to Clipboard!\",\n            type: Toasts.Type.SUCCESS,\n            id: Toasts.genId(),\n            options: {\n                duration: 1000,\n                position: Toasts.Position.BOTTOM\n            }\n        });\n    },\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"BetterUploadButton\",\n    authors: [Devs.obscurity, Devs.Ven],\n    description: \"Upload with a single click, open menu with right click\",\n    patches: [\n        {\n            find: \"Messages.CHAT_ATTACH_UPLOAD_OR_INVITE\",\n            replacement: {\n                // Discord merges multiple props here with Object.assign()\n                // This patch passes a third object to it with which we override onClick and onContextMenu\n                match: /CHAT_ATTACH_UPLOAD_OR_INVITE,onDoubleClick:(.+?:void 0)\\},(.{1,3})\\)/,\n                replace: (m, onDblClick, otherProps) =>\n                    `${m.slice(0, -1)},{onClick:${onDblClick},onContextMenu:${otherProps}.onClick})`,\n            },\n        },\n    ],\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Settings } from \"../api/settings\";\nimport ErrorBoundary from \"../components/ErrorBoundary\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { React } from \"../webpack/common\";\n\nfunction formatDuration(ms: number) {\n    // here be dragons (moment fucking sucks)\n    const human = Settings.plugins.CallTimer.format === \"human\";\n\n    const format = (n: number) => human ? n : n.toString().padStart(2, \"0\");\n    const unit = (s: string) => human ? s : \"\";\n    const delim = human ? \" \" : \":\";\n\n    // thx copilot\n    const d = Math.floor(ms / 86400000);\n    const h = Math.floor((ms % 86400000) / 3600000);\n    const m = Math.floor(((ms % 86400000) % 3600000) / 60000);\n    const s = Math.floor((((ms % 86400000) % 3600000) % 60000) / 1000);\n\n    let res = \"\";\n    if (d) res += `${d}d `;\n    if (h || res) res += `${format(h)}${unit(\"h\")}${delim}`;\n    if (m || res || !human) res += `${format(m)}${unit(\"m\")}${delim}`;\n    res += `${format(s)}${unit(\"s\")}`;\n\n    return res;\n}\n\nexport default definePlugin({\n    name: \"CallTimer\",\n    description: \"Adds a timer to vcs\",\n    authors: [Devs.Ven],\n\n    startTime: 0,\n    interval: void 0 as NodeJS.Timeout | undefined,\n\n    options: {\n        format: {\n            type: OptionType.SELECT,\n            description: \"The timer format. This can be any valid moment.js format\",\n            options: [\n                {\n                    label: \"30d 23:00:42\",\n                    value: \"stopwatch\",\n                    default: true\n                },\n                {\n                    label: \"30d 23h 00m 42s\",\n                    value: \"human\"\n                }\n            ]\n        }\n    },\n\n    patches: [{\n        find: \".renderConnectionStatus=\",\n        replacement: {\n            match: /(?<=renderConnectionStatus=.+\\(\\)\\.channel,children:)\\w/,\n            replace: \"[$&, Vencord.Plugins.plugins.CallTimer.renderTimer(this.props.channel.id)]\"\n        }\n    }],\n    renderTimer(channelId: string) {\n        return <ErrorBoundary noop>\n            <this.Timer channelId={channelId} />\n        </ErrorBoundary>;\n    },\n\n    Timer({ channelId }: { channelId: string; }) {\n        const [time, setTime] = React.useState(0);\n        const startTime = React.useMemo(() => Date.now(), [channelId]);\n\n        React.useEffect(() => {\n            const interval = setInterval(() => setTime(Date.now() - startTime), 1000);\n            return () => {\n                clearInterval(interval);\n                setTime(0);\n            };\n        }, [channelId]);\n\n        return <p style={{ margin: 0 }}>Connected for {formatDuration(time)}</p>;\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport type { Channel, Message } from \"discord-types/general\";\n\nimport Logger from \"../utils/Logger\";\nimport { MessageStore } from \"../webpack/common\";\n\nconst MessageEventsLogger = new Logger(\"MessageEvents\", \"#e5c890\");\n\nexport interface Emoji {\n    require_colons: boolean,\n    originalName: string,\n    animated: boolean;\n    guildId: string,\n    name: string,\n    url: string,\n    id: string,\n}\n\nexport interface MessageObject {\n    content: string,\n    validNonShortcutEmojis: Emoji[];\n}\n\nexport interface MessageExtra {\n    stickerIds?: string[];\n}\n\nexport type SendListener = (channelId: string, messageObj: MessageObject, extra: MessageExtra) => void | { cancel: boolean; };\nexport type EditListener = (channelId: string, messageId: string, messageObj: MessageObject) => void;\n\nconst sendListeners = new Set<SendListener>();\nconst editListeners = new Set<EditListener>();\n\nexport function _handlePreSend(channelId: string, messageObj: MessageObject, extra: MessageExtra) {\n    for (const listener of sendListeners) {\n        try {\n            const result = listener(channelId, messageObj, extra);\n            if (result && result.cancel === true) {\n                return true;\n            }\n        } catch (e) {\n            MessageEventsLogger.error(\"MessageSendHandler: Listener encountered an unknown error\\n\", e);\n        }\n    }\n    return false;\n}\n\nexport function _handlePreEdit(channelId: string, messageId: string, messageObj: MessageObject) {\n    for (const listener of editListeners) {\n        try {\n            listener(channelId, messageId, messageObj);\n        } catch (e) {\n            MessageEventsLogger.error(\"MessageEditHandler: Listener encountered an unknown error\\n\", e);\n        }\n    }\n}\n\n/**\n * Note: This event fires off before a message is sent, allowing you to edit the message.\n */\nexport function addPreSendListener(listener: SendListener) {\n    sendListeners.add(listener);\n    return listener;\n}\n/**\n * Note: This event fires off before a message's edit is applied, allowing you to further edit the message.\n */\nexport function addPreEditListener(listener: EditListener) {\n    editListeners.add(listener);\n    return listener;\n}\nexport function removePreSendListener(listener: SendListener) {\n    return sendListeners.delete(listener);\n}\nexport function removePreEditListener(listener: EditListener) {\n    return editListeners.delete(listener);\n}\n\n\n// Message clicks\ntype ClickListener = (message: Message, channel: Channel, event: MouseEvent) => void;\n\nconst listeners = new Set<ClickListener>();\n\nexport function _handleClick(message: Message, channel: Channel, event: MouseEvent) {\n    // message object may be outdated, so (try to) fetch latest one\n    message = MessageStore.getMessage(channel.id, message.id) ?? message;\n    for (const listener of listeners) {\n        try {\n            listener(message, channel, event);\n        } catch (e) {\n            MessageEventsLogger.error(\"MessageClickHandler: Listener encountered an unknown error\\n\", e);\n        }\n    }\n}\n\nexport function addClickListener(listener: ClickListener) {\n    listeners.add(listener);\n    return listener;\n}\n\nexport function removeClickListener(listener: ClickListener) {\n    return listeners.delete(listener);\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\nexport const defaultRules = [\n    \"action_object_map\",\n    \"action_type_map\",\n    \"action_ref_map\",\n    \"spm@*.aliexpress.com\",\n    \"scm@*.aliexpress.com\",\n    \"aff_platform\",\n    \"aff_trace_key\",\n    \"algo_expid@*.aliexpress.*\",\n    \"algo_pvid@*.aliexpress.*\",\n    \"btsid\",\n    \"ws_ab_test\",\n    \"pd_rd_*@amazon.*\",\n    \"_encoding@amazon.*\",\n    \"psc@amazon.*\",\n    \"tag@amazon.*\",\n    \"ref_@amazon.*\",\n    \"pf_rd_*@amazon.*\",\n    \"pf@amazon.*\",\n    \"crid@amazon.*\",\n    \"keywords@amazon.*\",\n    \"sprefix@amazon.*\",\n    \"sr@amazon.*\",\n    \"ie@amazon.*\",\n    \"node@amazon.*\",\n    \"qid@amazon.*\",\n    \"callback@bilibili.com\",\n    \"cvid@bing.com\",\n    \"form@bing.com\",\n    \"sk@bing.com\",\n    \"sp@bing.com\",\n    \"sc@bing.com\",\n    \"qs@bing.com\",\n    \"pq@bing.com\",\n    \"sc_cid\",\n    \"mkt_tok\",\n    \"trk\",\n    \"trkCampaign\",\n    \"ga_*\",\n    \"gclid\",\n    \"gclsrc\",\n    \"hmb_campaign\",\n    \"hmb_medium\",\n    \"hmb_source\",\n    \"spReportId\",\n    \"spJobID\",\n    \"spUserID\",\n    \"spMailingID\",\n    \"itm_*\",\n    \"s_cid\",\n    \"elqTrackId\",\n    \"elqTrack\",\n    \"assetType\",\n    \"assetId\",\n    \"recipientId\",\n    \"campaignId\",\n    \"siteId\",\n    \"mc_cid\",\n    \"mc_eid\",\n    \"pk_*\",\n    \"sc_campaign\",\n    \"sc_channel\",\n    \"sc_content\",\n    \"sc_medium\",\n    \"sc_outcome\",\n    \"sc_geo\",\n    \"sc_country\",\n    \"nr_email_referer\",\n    \"vero_conv\",\n    \"vero_id\",\n    \"yclid\",\n    \"_openstat\",\n    \"mbid\",\n    \"cmpid\",\n    \"cid\",\n    \"c_id\",\n    \"campaign_id\",\n    \"Campaign\",\n    \"hash@ebay.*\",\n    \"fb_action_ids\",\n    \"fb_action_types\",\n    \"fb_ref\",\n    \"fb_source\",\n    \"fbclid\",\n    \"refsrc@facebook.com\",\n    \"hrc@facebook.com\",\n    \"gs_l\",\n    \"gs_lcp@google.*\",\n    \"ved@google.*\",\n    \"ei@google.*\",\n    \"sei@google.*\",\n    \"gws_rd@google.*\",\n    \"gs_gbg@google.*\",\n    \"gs_mss@google.*\",\n    \"gs_rn@google.*\",\n    \"_hsenc\",\n    \"_hsmi\",\n    \"__hssc\",\n    \"__hstc\",\n    \"hsCtaTracking\",\n    \"source@sourceforge.net\",\n    \"position@sourceforge.net\",\n    \"t@*.twitter.com\",\n    \"s@*.twitter.com\",\n    \"ref_*@*.twitter.com\",\n    \"tt_medium\",\n    \"tt_content\",\n    \"lr@yandex.*\",\n    \"redircnt@yandex.*\",\n    \"feature@youtube.com\",\n    \"kw@youtube.com\",\n    \"wt_zmc\",\n    \"utm_source\",\n    \"utm_content\",\n    \"utm_medium\",\n    \"utm_campaign\",\n    \"utm_term\",\n    \"si@open.spotify.com\",\n];\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport {\n    addPreEditListener,\n    addPreSendListener,\n    MessageObject,\n    removePreEditListener,\n    removePreSendListener\n} from \"../../api/MessageEvents\";\nimport { migratePluginSettings } from \"../../api/settings\";\nimport { Devs } from \"../../utils/constants\";\nimport definePlugin from \"../../utils/types\";\nimport { defaultRules } from \"./defaultRules\";\n\n// From lodash\nconst reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\nconst reHasRegExpChar = RegExp(reRegExpChar.source);\n\nmigratePluginSettings(\"ClearURLs\", \"clearURLs\");\nexport default definePlugin({\n    name: \"ClearURLs\",\n    description: \"Removes tracking garbage from URLs\",\n    authors: [Devs.adryd],\n    dependencies: [\"MessageEventsAPI\"],\n\n    escapeRegExp(str: string) {\n        return (str && reHasRegExpChar.test(str))\n            ? str.replace(reRegExpChar, \"\\\\$&\")\n            : (str || \"\");\n    },\n\n    createRules() {\n        // Can be extended upon once user configs are available\n        // Eg. (useDefaultRules: boolean, customRules: Array[string])\n        const rules = defaultRules;\n\n        this.universalRules = new Set();\n        this.rulesByHost = new Map();\n        this.hostRules = new Map();\n\n        for (const rule of rules) {\n            const splitRule = rule.split(\"@\");\n            const paramRule = new RegExp(\n                \"^\" +\n                this.escapeRegExp(splitRule[0]).replace(/\\\\\\*/, \".+?\") +\n                \"$\"\n            );\n\n            if (!splitRule[1]) {\n                this.universalRules.add(paramRule);\n                continue;\n            }\n            const hostRule = new RegExp(\n                \"^(www\\\\.)?\" +\n                this.escapeRegExp(splitRule[1])\n                    .replace(/\\\\\\./, \"\\\\.\")\n                    .replace(/^\\\\\\*\\\\\\./, \"(.+?\\\\.)?\")\n                    .replace(/\\\\\\*/, \".+?\") +\n                \"$\"\n            );\n            const hostRuleIndex = hostRule.toString();\n\n            this.hostRules.set(hostRuleIndex, hostRule);\n            if (this.rulesByHost.get(hostRuleIndex) == null) {\n                this.rulesByHost.set(hostRuleIndex, new Set());\n            }\n            this.rulesByHost.get(hostRuleIndex).add(paramRule);\n        }\n    },\n\n    removeParam(rule: string | RegExp, param: string, parent: URLSearchParams) {\n        if (param === rule || rule instanceof RegExp && rule.test(param)) {\n            parent.delete(param);\n        }\n    },\n\n    replacer(match: string) {\n        // Parse URL without throwing errors\n        try {\n            var url = new URL(match);\n        } catch (error) {\n            // Don't modify anything if we can't parse the URL\n            return match;\n        }\n\n        // Cheap way to check if there are any search params\n        if (url.searchParams.entries().next().done) {\n            // If there are none, we don't need to modify anything\n            return match;\n        }\n\n        // Check all universal rules\n        this.universalRules.forEach(rule => {\n            url.searchParams.forEach((_value, param, parent) => {\n                this.removeParam(rule, param, parent);\n            });\n        });\n\n        // Check rules for each hosts that match\n        this.hostRules.forEach((regex, hostRuleName) => {\n            if (!regex.test(url.hostname)) return;\n            this.rulesByHost.get(hostRuleName).forEach(rule => {\n                url.searchParams.forEach((_value, param, parent) => {\n                    this.removeParam(rule, param, parent);\n                });\n            });\n        });\n\n        return url.toString();\n    },\n\n    onSend(msg: MessageObject) {\n        // Only run on messages that contain URLs\n        if (msg.content.match(/http(s)?:\\/\\//)) {\n            msg.content = msg.content.replace(\n                /(https?:\\/\\/[^\\s<]+[^<.,:;\"'>)|\\]\\s])/g,\n                match => this.replacer(match)\n            );\n        }\n    },\n\n    start() {\n        this.createRules();\n        this.preSend = addPreSendListener((_, msg) => this.onSend(msg));\n        this.preEdit = addPreEditListener((_cid, _mid, msg) =>\n            this.onSend(msg)\n        );\n    },\n\n    stop() {\n        removePreSendListener(this.preSend);\n        removePreEditListener(this.preEdit);\n    },\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nconst WEB_ONLY = (f: string) => () => {\n    throw new Error(`'${f}' is Discord Desktop only.`);\n};\n\nexport default definePlugin({\n    name: \"ConsoleShortcuts\",\n    description: \"Adds shorter Aliases for many things on the window. Run `shortcutList` for a list.\",\n    authors: [Devs.Ven],\n\n    getShortcuts() {\n        return {\n            toClip: IS_WEB ? WEB_ONLY(\"toClip\") : window.DiscordNative.clipboard.copy,\n            fromClip: IS_WEB ? WEB_ONLY(\"fromClip\") : window.DiscordNative.clipboard.read,\n            wp: Vencord.Webpack,\n            wpc: Vencord.Webpack.wreq.c,\n            wreq: Vencord.Webpack.wreq,\n            wpsearch: Vencord.Webpack.search,\n            wpex: Vencord.Webpack.extract,\n            wpexs: (code: string) => Vencord.Webpack.extract(Vencord.Webpack.findModuleId(code)!),\n            findByProps: Vencord.Webpack.findByProps,\n            find: Vencord.Webpack.find,\n            Plugins: Vencord.Plugins,\n            React: Vencord.Webpack.Common.React,\n            Settings: Vencord.Settings,\n            Api: Vencord.Api,\n            reload: () => location.reload(),\n            restart: IS_WEB ? WEB_ONLY(\"restart\") : window.DiscordNative.app.relaunch\n        };\n    },\n\n    start() {\n        const shortcuts = this.getShortcuts();\n        window.shortcutList = shortcuts;\n        for (const [key, val] of Object.entries(shortcuts))\n            window[key] = val;\n    },\n\n    stop() {\n        delete window.shortcutList;\n        for (const key in this.getShortcuts())\n            delete window[key];\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Message } from \"discord-types/general\";\nimport type { PartialDeep } from \"type-fest\";\n\nimport { lazyWebpack, mergeDefaults } from \"../../utils/misc\";\nimport { filters, waitFor } from \"../../webpack\";\nimport { Argument } from \"./types\";\n\nconst createBotMessage = lazyWebpack(filters.byCode('username:\"Clyde\"'));\nconst MessageSender = lazyWebpack(filters.byProps(\"receiveMessage\"));\n\nlet SnowflakeUtils: any;\nwaitFor(\"fromTimestamp\", m => SnowflakeUtils = m);\n\nexport function generateId() {\n    return `-${SnowflakeUtils.fromTimestamp(Date.now())}`;\n}\n\n/**\n * Send a message as Clyde\n * @param {string} channelId ID of channel to send message to\n * @param {Message} message Message to send\n * @returns {Message}\n */\nexport function sendBotMessage(channelId: string, message: PartialDeep<Message>): Message {\n    const botMessage = createBotMessage({ channelId, content: \"\", embeds: [] });\n\n    MessageSender.receiveMessage(channelId, mergeDefaults(message, botMessage));\n\n    return message as Message;\n}\n\n/**\n * Get the value of an option by name\n * @param args Arguments array (first argument passed to execute)\n * @param name Name of the argument\n * @param fallbackValue Fallback value in case this option wasn't passed\n * @returns Value\n */\nexport function findOption<T>(args: Argument[], name: string): T & {} | undefined;\nexport function findOption<T>(args: Argument[], name: string, fallbackValue: T): T & {};\nexport function findOption(args: Argument[], name: string, fallbackValue?: any) {\n    return (args.find(a => a.name === name)?.value || fallbackValue) as any;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Channel, Guild } from \"discord-types/general\";\nimport { Promisable } from \"type-fest\";\n\nexport interface CommandContext {\n    channel: Channel;\n    guild?: Guild;\n}\n\nexport enum ApplicationCommandOptionType {\n    SUB_COMMAND = 1,\n    SUB_COMMAND_GROUP = 2,\n    STRING = 3,\n    INTEGER = 4,\n    BOOLEAN = 5,\n    USER = 6,\n    CHANNEL = 7,\n    ROLE = 8,\n    MENTIONABLE = 9,\n    NUMBER = 10,\n    ATTACHMENT = 11,\n}\n\nexport enum ApplicationCommandInputType {\n    BUILT_IN = 0,\n    BUILT_IN_TEXT = 1,\n    BUILT_IN_INTEGRATION = 2,\n    BOT = 3,\n    PLACEHOLDER = 4,\n}\n\nexport interface Option {\n    name: string;\n    displayName?: string;\n    type: ApplicationCommandOptionType;\n    description: string;\n    displayDescription?: string;\n    required?: boolean;\n    options?: Option[];\n    choices?: Array<ChoicesOption>;\n}\n\nexport interface ChoicesOption {\n    label: string;\n    value: string;\n    name: string;\n    displayName?: string;\n}\n\nexport enum ApplicationCommandType {\n    CHAT_INPUT = 1,\n    USER = 2,\n    MESSAGE = 3,\n}\n\nexport interface CommandReturnValue {\n    content: string;\n    /** TODO: implement */\n    cancel?: boolean;\n}\n\nexport interface Argument {\n    type: ApplicationCommandOptionType;\n    name: string;\n    value: string;\n    focused: undefined;\n    options: Argument[];\n}\n\nexport interface Command {\n    id?: string;\n    applicationId?: string;\n    type?: ApplicationCommandType;\n    inputType?: ApplicationCommandInputType;\n    plugin?: string;\n    isVencordCommand?: boolean;\n\n    name: string;\n    displayName?: string;\n    description: string;\n    displayDescription?: string;\n\n    options?: Option[];\n    predicate?(ctx: CommandContext): boolean;\n\n    execute(args: Argument[], ctx: CommandContext): Promisable<void | CommandReturnValue>;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { makeCodeblock } from \"../../utils/misc\";\nimport { sendBotMessage } from \"./commandHelpers\";\nimport { ApplicationCommandInputType, ApplicationCommandOptionType, ApplicationCommandType, Argument, Command, CommandContext, Option } from \"./types\";\n\nexport * from \"./commandHelpers\";\nexport * from \"./types\";\n\nexport let BUILT_IN: Command[];\nexport const commands = {} as Record<string, Command>;\n\n// hack for plugins being evaluated before we can grab these from webpack\nconst OptPlaceholder = Symbol(\"OptionalMessageOption\") as any as Option;\nconst ReqPlaceholder = Symbol(\"RequiredMessageOption\") as any as Option;\n/**\n * Optional message option named \"message\" you can use in commands.\n * Used in \"tableflip\" or \"shrug\"\n * @see {@link RequiredMessageOption}\n */\nexport let OptionalMessageOption: Option = OptPlaceholder;\n/**\n * Required message option named \"message\" you can use in commands.\n * Used in \"me\"\n * @see {@link OptionalMessageOption}\n */\nexport let RequiredMessageOption: Option = ReqPlaceholder;\n\nexport const _init = function (cmds: Command[]) {\n    try {\n        BUILT_IN = cmds;\n        OptionalMessageOption = cmds.find(c => c.name === \"shrug\")!.options![0];\n        RequiredMessageOption = cmds.find(c => c.name === \"me\")!.options![0];\n    } catch (e) {\n        console.error(\"Failed to load CommandsApi\");\n    }\n    return cmds;\n} as never;\n\nexport const _handleCommand = function (cmd: Command, args: Argument[], ctx: CommandContext) {\n    if (!cmd.isVencordCommand)\n        return cmd.execute(args, ctx);\n\n    const handleError = (err: any) => {\n        // TODO: cancel send if cmd.inputType === BUILT_IN_TEXT\n        const msg = `An Error occurred while executing command \"${cmd.name}\"`;\n        const reason = err instanceof Error ? err.stack || err.message : String(err);\n\n        console.error(msg, err);\n        sendBotMessage(ctx.channel.id, {\n            content: `${msg}:\\n${makeCodeblock(reason)}`,\n            author: {\n                username: \"Vencord\"\n            }\n        });\n    };\n\n    try {\n        const res = cmd.execute(args, ctx);\n        return res instanceof Promise ? res.catch(handleError) : res;\n    } catch (err) {\n        return handleError(err);\n    }\n} as never;\n\n\n/**\n * Prepare a Command Option for Discord by filling missing fields\n * @param opt\n */\nexport function prepareOption<O extends Option | Command>(opt: O): O {\n    opt.displayName ||= opt.name;\n    opt.displayDescription ||= opt.description;\n    opt.options?.forEach((opt, i, opts) => {\n        // See comment above Placeholders\n        if (opt === OptPlaceholder) opts[i] = OptionalMessageOption;\n        else if (opt === ReqPlaceholder) opts[i] = RequiredMessageOption;\n        opt.choices?.forEach(x => x.displayName ||= x.name);\n\n        prepareOption(opts[i]);\n    });\n    return opt;\n}\n\n// Yes, Discord registers individual commands for each subcommand\n// TODO: This probably doesn't support nested subcommands. If that is ever needed,\n// investigate\nfunction registerSubCommands(cmd: Command, plugin: string) {\n    cmd.options?.forEach(o => {\n        if (o.type !== ApplicationCommandOptionType.SUB_COMMAND)\n            throw new Error(\"When specifying sub-command options, all options must be sub-commands.\");\n        const subCmd = {\n            ...cmd,\n            ...o,\n            type: ApplicationCommandType.CHAT_INPUT,\n            name: `${cmd.name} ${o.name}`,\n            displayName: `${cmd.name} ${o.name}`,\n            subCommandPath: [{\n                name: o.name,\n                type: o.type,\n                displayName: o.name\n            }],\n            rootCommand: cmd\n        };\n        registerCommand(subCmd as any, plugin);\n    });\n}\n\nexport function registerCommand<C extends Command>(command: C, plugin: string) {\n    if (!BUILT_IN) {\n        console.warn(\n            \"[CommandsAPI]\",\n            `Not registering ${command.name} as the CommandsAPI hasn't been initialised.`,\n            \"Please restart to use commands\"\n        );\n        return;\n    }\n\n    if (BUILT_IN.some(c => c.name === command.name))\n        throw new Error(`Command '${command.name}' already exists.`);\n\n    command.isVencordCommand = true;\n    command.id ??= `-${BUILT_IN.length + 1}`;\n    command.applicationId ??= \"-1\"; // BUILT_IN;\n    command.type ??= ApplicationCommandType.CHAT_INPUT;\n    command.inputType ??= ApplicationCommandInputType.BUILT_IN_TEXT;\n    command.plugin ||= plugin;\n\n    prepareOption(command);\n\n    if (command.options?.[0]?.type === ApplicationCommandOptionType.SUB_COMMAND) {\n        registerSubCommands(command, plugin);\n        return;\n    }\n\n    commands[command.name] = command;\n    BUILT_IN.push(command);\n}\n\nexport function unregisterCommand(name: string) {\n    const idx = BUILT_IN.findIndex(c => c.name === name);\n    if (idx === -1)\n        return false;\n\n    BUILT_IN.splice(idx, 1);\n    delete commands[name];\n\n    return true;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ApplicationCommandOptionType, sendBotMessage } from \"../api/Commands\";\nimport { findOption } from \"../api/Commands/commandHelpers\";\nimport { ApplicationCommandInputType } from \"../api/Commands/types\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\nimport { findByCode, findByProps } from \"../webpack\";\n\nconst DRAFT_TYPE = 0;\n\nexport default definePlugin({\n    name: \"CorruptMp4s\",\n    description: \"Create corrupt mp4s with extremely high or negative duration\",\n    authors: [Devs.Ven],\n    dependencies: [\"CommandsAPI\"],\n    commands: [{\n        name: \"corrupt\",\n        description: \"Create a corrupt mp4 with extremely high or negative duration\",\n        inputType: ApplicationCommandInputType.BUILT_IN,\n        options: [\n            {\n                name: \"mp4\",\n                description: \"the video to corrupt\",\n                type: ApplicationCommandOptionType.ATTACHMENT,\n                required: true\n            },\n            {\n                name: \"kind\",\n                description: \"the kind of corruption\",\n                type: ApplicationCommandOptionType.STRING,\n                choices: [\n                    {\n                        name: \"infinite\",\n                        value: \"infinite\",\n                        label: \"Very high duration\"\n                    },\n                    {\n                        name: \"negative\",\n                        value: \"negative\",\n                        label: \"Negative duration\"\n                    }\n                ]\n            }\n        ],\n        execute: async (args, ctx) => {\n            const UploadStore = findByProps(\"getUploads\");\n            const upload = UploadStore.getUploads(ctx.channel.id, DRAFT_TYPE)[0];\n\n            const video = upload?.item?.file as File | undefined;\n\n            if (video?.type !== \"video/mp4\")\n                return void sendBotMessage(ctx.channel.id, {\n                    content: \"Please upload a mp4 file\"\n                });\n\n            const corruption = findOption<string>(args, \"kind\", \"infinite\");\n\n            const buf = new Uint8Array(await video.arrayBuffer());\n            let found = false;\n\n            // adapted from https://github.com/GeopJr/exorcism/blob/c9a12d77ccbcb49c987b385eafae250906efc297/src/App.svelte#L41-L48\n            for (let i = 0; i < buf.length; i++) {\n                if (buf[i] === 0x6d && buf[i + 1] === 0x76 && buf[i + 2] === 0x68 && buf[i + 3] === 0x64) {\n                    let start = i + 18;\n                    buf[start++] = 0x00;\n                    buf[start++] = 0x01;\n                    buf[start++] = corruption === \"negative\" ? 0xff : 0x7f;\n                    buf[start++] = 0xff;\n                    buf[start++] = 0xff;\n                    buf[start++] = corruption === \"negative\" ? 0xf0 : 0xff;\n                    found = true;\n                    break;\n                }\n            }\n\n            if (!found) {\n                return void sendBotMessage(ctx.channel.id, {\n                    content: \"Could not find signature. Is this even a mp4?\"\n                });\n            }\n\n            const newName = video.name.replace(/\\.mp4$/i, \".corrupt.mp4\");\n            const promptToUpload = findByCode(\"UPLOAD_FILE_LIMIT_ERROR\");\n            const file = new File([buf], newName, { type: \"video/mp4\" });\n            setImmediate(() => promptToUpload([file], ctx.channel, DRAFT_TYPE));\n        }\n    }]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ApplicationCommandOptionType, sendBotMessage } from \"../api/Commands\";\nimport { ApplicationCommandInputType } from \"../api/Commands/types\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"UrbanDictionary\",\n    description: \"Searches for a word on Urban Dictionary\",\n    authors: [Devs.jewdev],\n    dependencies: [\"CommandsAPI\"],\n    commands: [\n        {\n            name: \"urban\",\n            description: \"Returns the definition of a word from Urban Dictionary\",\n            inputType: ApplicationCommandInputType.BUILT_IN,\n            options: [\n                {\n                    type: ApplicationCommandOptionType.STRING,\n                    name: \"word\",\n                    description: \"The word to search for on Urban Dictionary\",\n                    required: true\n                }\n            ],\n            execute: async (args, ctx) => {\n                try {\n                    const { list: [definition] } = await (await fetch(`https://api.urbandictionary.com/v0/define?term=${args[0].value}`)).json();\n\n                    if (!definition)\n                        return void sendBotMessage(ctx.channel.id, { content: \"No results found.\" });\n\n                    const linkify = text => text.replace(/\\[(.+?)\\]/g, (_, word) => `[${word}](https://www.urbandictionary.com/define.php?term=${encodeURIComponent(word)})`);\n\n                    return void sendBotMessage(ctx.channel.id, {\n                        embeds: [\n                            {\n                                type: \"rich\",\n                                author: {\n                                    name: `Definition of ${definition.word}`,\n                                    url: definition.permalink\n                                },\n                                description: linkify(definition.definition),\n                                fields: [\n                                    {\n                                        name: \"Example\",\n                                        value: linkify(definition.example)\n                                    }\n                                ],\n                                color: 0xFF9900,\n                                footer: { text: `\uD83D\uDC4D ${definition.thumbs_up.toString()} | \uD83D\uDC4E ${definition.thumbs_down.toString()} | Uploaded by ${definition.author}`, icon_url: \"https://www.urbandictionary.com/favicon.ico\" },\n                                timestamp: new Date(definition.written_on).toISOString()\n                            }\n                        ] as any\n                    });\n                } catch (error) {\n                    return void sendBotMessage(ctx.channel.id, {\n                        content: `Something went wrong: \\`${error}\\``\n                    });\n                }\n            }\n        }\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { React, TextInput } from \"../webpack/common\";\n\n// TODO: Refactor settings to use this as well\ninterface TextInputProps {\n    /**\n     * WARNING: Changing this between renders will have no effect!\n     */\n    value: string;\n    /**\n     * This will only be called if the new value passed validate()\n     */\n    onChange(newValue: string): void;\n    /**\n     * Optionally validate the user input\n     * Return true if the input is valid\n     * Otherwise, return a string containing the reason for this input being invalid\n     */\n    validate(v: string): true | string;\n}\n\n/**\n * A very simple wrapper around Discord's TextInput that validates input and shows\n * the user an error message and only calls your onChange when the input is valid\n */\nexport function CheckedTextInput({ value: initialValue, onChange, validate }: TextInputProps) {\n    const [value, setValue] = React.useState(initialValue);\n    const [error, setError] = React.useState<string>();\n\n    function handleChange(v: string) {\n        setValue(v);\n        const res = validate(v);\n        if (res === true) {\n            setError(void 0);\n            onChange(v);\n        } else {\n            setError(res);\n        }\n    }\n\n    return (\n        <>\n            <TextInput\n                type=\"text\"\n                value={value}\n                onChange={handleChange}\n                error={error}\n            />\n        </>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { migratePluginSettings, Settings } from \"../api/settings\";\nimport { CheckedTextInput } from \"../components/CheckedTextInput\";\nimport { Devs } from \"../utils/constants\";\nimport Logger from \"../utils/Logger\";\nimport { lazyWebpack, makeLazy } from \"../utils/misc\";\nimport { ModalContent, ModalHeader, ModalRoot, openModal } from \"../utils/modal\";\nimport definePlugin from \"../utils/types\";\nimport { filters } from \"../webpack\";\nimport { Forms, GuildStore, Margins, Menu, PermissionStore, React, Toasts, Tooltip, UserStore } from \"../webpack/common\";\n\nconst MANAGE_EMOJIS_AND_STICKERS = 1n << 30n;\n\nconst GuildEmojiStore = lazyWebpack(filters.byProps(\"getGuilds\", \"getGuildEmoji\"));\nconst uploadEmoji = lazyWebpack(filters.byCode('\"EMOJI_UPLOAD_START\"', \"GUILD_EMOJIS(\"));\n\nfunction getGuildCandidates(isAnimated: boolean) {\n    const meId = UserStore.getCurrentUser().id;\n\n    return Object.values(GuildStore.getGuilds()).filter(g => {\n        const canCreate = g.ownerId === meId ||\n            BigInt(PermissionStore.getGuildPermissions({ id: g.id }) & MANAGE_EMOJIS_AND_STICKERS) === MANAGE_EMOJIS_AND_STICKERS;\n        if (!canCreate) return false;\n\n        const emojiSlots = g.getMaxEmojiSlots();\n        const { emojis } = GuildEmojiStore.getGuilds()[g.id];\n\n        let count = 0;\n        for (const emoji of emojis)\n            if (emoji.animated === isAnimated) count++;\n        return count < emojiSlots;\n    }).sort((a, b) => a.name.localeCompare(b.name));\n}\n\nasync function doClone(guildId: string, id: string, name: string, isAnimated: boolean) {\n    const data = await fetch(`https://cdn.discordapp.com/emojis/${id}.${isAnimated ? \"gif\" : \"png\"}`)\n        .then(r => r.blob());\n    const reader = new FileReader();\n\n    reader.onload = () => {\n        uploadEmoji({\n            guildId,\n            name,\n            image: reader.result\n        }).then(() => {\n            Toasts.show({\n                message: `Successfully cloned ${name}!`,\n                type: Toasts.Type.SUCCESS,\n                id: Toasts.genId()\n            });\n        }).catch((e: any) => {\n            new Logger(\"EmoteCloner\").error(\"Failed to upload emoji\", e);\n            Toasts.show({\n                message: \"Oopsie something went wrong :( Check console!!!\",\n                type: Toasts.Type.FAILURE,\n                id: Toasts.genId()\n            });\n        });\n    };\n\n    reader.readAsDataURL(data);\n}\n\nconst getFontSize = (s: string) => {\n    // [18, 18, 16, 16, 14, 12, 10]\n    const sizes = [20, 20, 18, 18, 16, 14, 12];\n    return sizes[s.length] ?? 4;\n};\n\nconst nameValidator = /^\\w+$/i;\n\nfunction CloneModal({ id, name: emojiName, isAnimated }: { id: string; name: string; isAnimated: boolean; }) {\n    const [isCloning, setIsCloning] = React.useState(false);\n    const [name, setName] = React.useState(emojiName);\n\n    const [x, invalidateMemo] = React.useReducer(x => x + 1, 0);\n\n    const guilds = React.useMemo(() => getGuildCandidates(isAnimated), [isAnimated, x]);\n\n    return (\n        <>\n            <Forms.FormTitle className={Margins.marginTop20}>Custom Name</Forms.FormTitle>\n            <CheckedTextInput\n                value={name}\n                onChange={setName}\n                validate={v =>\n                    (v.length > 1 && v.length < 32 && nameValidator.test(v))\n                    || \"Name must be between 2 and 32 characters and only contain alphanumeric characters\"\n                }\n            />\n            <div style={{\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                gap: \"1em\",\n                padding: \"1em 0.5em\",\n                justifyContent: \"center\",\n                alignItems: \"center\"\n            }}>\n                {guilds.map(g => (\n                    <Tooltip text={g.name}>\n                        {({ onMouseLeave, onMouseEnter }) => (\n                            <div\n                                onMouseLeave={onMouseLeave}\n                                onMouseEnter={onMouseEnter}\n                                role=\"button\"\n                                aria-label={\"Clone to \" + g.name}\n                                aria-disabled={isCloning}\n                                style={{\n                                    borderRadius: \"50%\",\n                                    backgroundColor: \"var(--background-secondary)\",\n                                    display: \"inline-flex\",\n                                    justifyContent: \"center\",\n                                    alignItems: \"center\",\n                                    width: \"4em\",\n                                    height: \"4em\",\n                                    cursor: isCloning ? \"not-allowed\" : \"pointer\",\n                                    filter: isCloning ? \"brightness(50%)\" : \"none\"\n                                }}\n                                onClick={isCloning ? void 0 : async () => {\n                                    setIsCloning(true);\n                                    doClone(g.id, id, name, isAnimated).finally(() => {\n                                        invalidateMemo();\n                                        setIsCloning(false);\n                                    });\n                                }}\n                            >\n                                {g.icon ? (\n                                    <img\n                                        aria-hidden\n                                        style={{\n                                            borderRadius: \"50%\",\n                                            width: \"100%\",\n                                            height: \"100%\",\n                                        }}\n                                        src={g.getIconURL(512, true)}\n                                        alt={g.name}\n                                    />\n                                ) : (\n                                    <Forms.FormText\n                                        style={{\n                                            fontSize: getFontSize(g.acronym),\n                                            width: \"100%\",\n                                            overflow: \"hidden\",\n                                            whiteSpace: \"nowrap\",\n                                            textAlign: \"center\",\n                                            cursor: isCloning ? \"not-allowed\" : \"pointer\",\n                                        }}\n                                    >\n                                        {g.acronym}\n                                    </Forms.FormText>\n                                )}\n                            </div>\n                        )}\n                    </Tooltip>\n                ))}\n            </div>\n        </>\n    );\n}\n\nmigratePluginSettings(\"EmoteCloner\", \"EmoteYoink\");\nexport default definePlugin({\n    name: \"EmoteCloner\",\n    description: \"Adds a Clone context menu item to emotes to clone them your own server\",\n    authors: [Devs.Ven],\n    dependencies: [\"MenuItemDeobfuscatorAPI\"],\n\n    patches: [{\n        // Literally copy pasted from ReverseImageSearch lol\n        find: \"open-native-link\",\n        replacement: {\n            match: /id:\"open-native-link\".{0,200}\\(\\{href:(.{0,3}),.{0,200}\\},\"open-native-link\"\\)/,\n            replace: \"$&,Vencord.Plugins.plugins.EmoteCloner.makeMenu(arguments[2])\"\n        },\n\n    },\n    // Also copy pasted from Reverse Image Search\n    {\n        // pass the target to the open link menu so we can grab its data\n        find: \"REMOVE_ALL_REACTIONS_CONFIRM_BODY,\",\n        predicate: makeLazy(() => !Settings.plugins.ReverseImageSearch.enabled),\n        noWarn: true,\n        replacement: {\n            match: /(?<props>.).onHeightUpdate.{0,200}(.)=(.)=.\\.url;.+?\\(null!=\\3\\?\\3:\\2[^)]+/,\n            replace: \"$&,$<props>.target\"\n        }\n    }],\n\n    makeMenu(htmlElement: HTMLImageElement) {\n        if (htmlElement?.dataset.type !== \"emoji\")\n            return null;\n\n        const { id } = htmlElement.dataset;\n        const name = htmlElement.alt.match(/:(.*)(?:~\\d+)?:/)?.[1];\n\n        if (!name || !id)\n            return null;\n\n        const isAnimated = new URL(htmlElement.src).pathname.endsWith(\".gif\");\n\n        return <Menu.MenuItem\n            id=\"emote-cloner\"\n            key=\"emote-cloner\"\n            label=\"Clone\"\n            action={() =>\n                openModal(modalProps => (\n                    <ModalRoot {...modalProps}>\n                        <ModalHeader>\n                            <img\n                                role=\"presentation\"\n                                aria-hidden\n                                src={`https://cdn.discordapp.com/emojis/${id}.${isAnimated ? \"gif\" : \"png\"}`}\n                                alt=\"\"\n                                height={24}\n                                width={24}\n                                style={{ marginRight: \"0.5em\" }}\n                            />\n                            <Forms.FormText>Clone {name}</Forms.FormText>\n                        </ModalHeader>\n                        <ModalContent>\n                            <CloneModal id={id} name={name} isAnimated={isAnimated} />\n                        </ModalContent>\n                    </ModalRoot>\n                ))\n            }\n        >\n        </Menu.MenuItem>;\n    },\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport { lazyWebpack } from \"../utils/misc\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { Settings } from \"../Vencord\";\nimport { filters } from \"../webpack\";\nimport { Forms, React } from \"../webpack/common\";\n\nconst KbdStyles = lazyWebpack(filters.byProps(\"key\", \"removeBuildOverride\"));\n\nexport default definePlugin({\n    name: \"Experiments\",\n    authors: [\n        Devs.Megu,\n        Devs.Ven,\n        Devs.Nickyux,\n        Devs.BanTheNons\n    ],\n    description: \"Enable Access to Experiments in Discord!\",\n    patches: [{\n        find: \"Object.defineProperties(this,{isDeveloper\",\n        replacement: {\n            match: /(?<={isDeveloper:\\{[^}]+,get:function\\(\\)\\{return )\\w/,\n            replace: \"true\"\n        },\n    }, {\n        find: 'type:\"user\",revision',\n        replacement: {\n            match: /(\\w)\\|\\|\"CONNECTION_OPEN\".+?;/g,\n            replace: \"$1=!0;\"\n        },\n    }, {\n        find: \".isStaff=function(){\",\n        predicate: () => Settings.plugins.Experiments.enableIsStaff === true,\n        replacement: [\n            {\n                match: /return\\s*(\\w+)\\.hasFlag\\((.+?)\\.STAFF\\)}/,\n                replace: \"return Vencord.Webpack.Common.UserStore.getCurrentUser().id===$1.id||$1.hasFlag($2.STAFF)}\"\n            },\n            {\n                match: /hasFreePremium=function\\(\\){return this.isStaff\\(\\)\\s*\\|\\|/,\n                replace: \"hasFreePremium=function(){return \",\n            },\n        ],\n    }],\n    options: {\n        enableIsStaff: {\n            description: \"Enable isStaff (requires restart)\",\n            type: OptionType.BOOLEAN,\n            default: false,\n            restartNeeded: true,\n        }\n    },\n\n    settingsAboutComponent: () => {\n        const isMacOS = navigator.platform.includes(\"Mac\");\n        const modKey = isMacOS ? \"cmd\" : \"ctrl\";\n        const altKey = isMacOS ? \"opt\" : \"alt\";\n        return (\n            <React.Fragment>\n                <Forms.FormTitle tag=\"h3\">More Information</Forms.FormTitle>\n                <Forms.FormText variant=\"text-md/normal\">\n                    You can enable client DevTools{\" \"}\n                    <kbd className={KbdStyles.key}>{modKey}</kbd> +{\" \"}\n                    <kbd className={KbdStyles.key}>{altKey}</kbd> +{\" \"}\n                    <kbd className={KbdStyles.key}>O</kbd>{\" \"}\n                    after enabling <code>isStaff</code> below\n                </Forms.FormText>\n                <Forms.FormText>\n                    and then toggling <code>Enable DevTools</code> in the <code>Developer Options</code> tab in settings.\n                </Forms.FormText>\n            </React.Fragment>\n        );\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { makeLazy } from \"./misc\";\n\n/*\n    Add dynamically loaded dependencies for plugins here.\n */\n\n// https://github.com/mattdesl/gifenc\n// this lib is way better than gif.js and all other libs, they're all so terrible but this one is nice\n// @ts-ignore ts mad\nexport const getGifEncoder = makeLazy(() => import(\"https://unpkg.com/gifenc@1.0.3/dist/gifenc.esm.js\"));\n\n// needed to parse APNGs in the nitroBypass plugin\nexport const importApngJs = makeLazy(async () => {\n    const exports = {};\n    const winProxy = new Proxy(window, { set: (_, k, v) => exports[k] = v });\n    Function(\"self\", await fetch(\"https://cdnjs.cloudflare.com/ajax/libs/apng-canvas/2.1.1/apng-canvas.min.js\").then(r => r.text()))(winProxy);\n    // @ts-ignore\n    return exports.APNG as { parseURL(url: string): Promise<ApngFrameData>; };\n});\n\n// https://wiki.mozilla.org/APNG_Specification#.60fcTL.60:_The_Frame_Control_Chunk\nexport enum ApngDisposeOp {\n    /**\n     * no disposal is done on this frame before rendering the next; the contents of the output buffer are left as is.\n     */\n    NONE,\n    /**\n     * the frame's region of the output buffer is to be cleared to fully transparent black before rendering the next frame.\n     */\n    BACKGROUND,\n    /**\n     * the frame's region of the output buffer is to be reverted to the previous contents before rendering the next frame.\n     */\n    PREVIOUS\n}\n\n// TODO: Might need to somehow implement this\nexport enum ApngBlendOp {\n    SOURCE,\n    OVER\n}\nexport interface ApngFrame {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n    img: HTMLImageElement;\n    delay: number;\n    blendOp: ApngBlendOp;\n    disposeOp: ApngDisposeOp;\n}\n\nexport interface ApngFrameData {\n    width: number;\n    height: number;\n    frames: ApngFrame[];\n    playTime: number;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { addPreEditListener, addPreSendListener, removePreEditListener, removePreSendListener } from \"../api/MessageEvents\";\nimport { migratePluginSettings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport { ApngDisposeOp, getGifEncoder, importApngJs } from \"../utils/dependencies\";\nimport { lazyWebpack } from \"../utils/misc\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { Settings } from \"../Vencord\";\nimport { filters } from \"../webpack\";\nimport { ChannelStore, UserStore } from \"../webpack/common\";\n\nconst DRAFT_TYPE = 0;\nconst promptToUpload = lazyWebpack(filters.byCode(\"UPLOAD_FILE_LIMIT_ERROR\"));\n\ninterface BaseSticker {\n    available: boolean;\n    description: string;\n    format_type: number;\n    id: string;\n    name: string;\n    tags: string;\n    type: number;\n}\ninterface GuildSticker extends BaseSticker {\n    guild_id: string;\n}\ninterface DiscordSticker extends BaseSticker {\n    pack_id: string;\n}\ntype Sticker = GuildSticker | DiscordSticker;\n\ninterface StickerPack {\n    id: string;\n    name: string;\n    sku_id: string;\n    description: string;\n    cover_sticker_id: string;\n    banner_asset_id: string;\n    stickers: Sticker[];\n}\n\nmigratePluginSettings(\"FakeNitro\", \"NitroBypass\");\n\nexport default definePlugin({\n    name: \"FakeNitro\",\n    authors: [Devs.Arjix, Devs.D3SOX, Devs.Ven, Devs.obscurity],\n    description: \"Allows you to stream in nitro quality and send fake emojis/stickers.\",\n    dependencies: [\"MessageEventsAPI\"],\n\n    patches: [\n        {\n            find: \"canUseAnimatedEmojis:function\",\n            predicate: () => Settings.plugins.FakeNitro.enableEmojiBypass === true,\n            replacement: [\n                \"canUseAnimatedEmojis\",\n                \"canUseEmojisEverywhere\"\n            ].map(func => {\n                return {\n                    match: new RegExp(`${func}:function\\\\(.+?}`),\n                    replace: `${func}:function(e){return true;}`\n                };\n            })\n        },\n        {\n            find: \"canUseAnimatedEmojis:function\",\n            predicate: () => Settings.plugins.FakeNitro.enableStickerBypass === true,\n            replacement: {\n                match: /canUseStickersEverywhere:function\\(.+?}/,\n                replace: \"canUseStickersEverywhere:function(e){return true;}\"\n            },\n        },\n        {\n            find: \"\\\"SENDABLE\\\"\",\n            predicate: () => Settings.plugins.FakeNitro.enableStickerBypass === true,\n            replacement: {\n                match: /(\\w+)\\.available\\?/,\n                replace: \"true?\"\n            }\n        },\n        {\n            find: \"canUseAnimatedEmojis:function\",\n            predicate: () => Settings.plugins.FakeNitro.enableStreamQualityBypass === true,\n            replacement: [\n                \"canUseHighVideoUploadQuality\",\n                \"canStreamHighQuality\",\n                \"canStreamMidQuality\"\n            ].map(func => {\n                return {\n                    match: new RegExp(`${func}:function\\\\(.+?}`),\n                    replace: `${func}:function(e){return true;}`\n                };\n            })\n        },\n        {\n            find: \"STREAM_FPS_OPTION.format\",\n            predicate: () => Settings.plugins.FakeNitro.enableStreamQualityBypass === true,\n            replacement: {\n                match: /(userPremiumType|guildPremiumTier):.{0,10}TIER_\\d,?/g,\n                replace: \"\"\n            }\n        },\n    ],\n\n    options: {\n        enableEmojiBypass: {\n            description: \"Allow sending fake emojis\",\n            type: OptionType.BOOLEAN,\n            default: true,\n            restartNeeded: true,\n        },\n        emojiSize: {\n            description: \"Size of the emojis when sending\",\n            type: OptionType.SLIDER,\n            default: 48,\n            markers: [32, 48, 64, 128, 160, 256, 512],\n        },\n        enableStickerBypass: {\n            description: \"Allow sending fake stickers\",\n            type: OptionType.BOOLEAN,\n            default: true,\n            restartNeeded: true,\n        },\n        stickerSize: {\n            description: \"Size of the stickers when sending\",\n            type: OptionType.SLIDER,\n            default: 160,\n            markers: [32, 64, 128, 160, 256, 512],\n        },\n        enableStreamQualityBypass: {\n            description: \"Allow streaming in nitro quality\",\n            type: OptionType.BOOLEAN,\n            default: true,\n            restartNeeded: true,\n        }\n    },\n\n    get guildId() {\n        return window.location.href.split(\"channels/\")[1].split(\"/\")[0];\n    },\n\n    get canUseEmotes() {\n        return (UserStore.getCurrentUser().premiumType ?? 0) > 0;\n    },\n\n    get canUseStickers() {\n        return (UserStore.getCurrentUser().premiumType ?? 0) > 1;\n    },\n\n    getStickerLink(stickerId: string) {\n        return `https://media.discordapp.net/stickers/${stickerId}.png?size=${Settings.plugins.FakeNitro.stickerSize}`;\n    },\n\n    async sendAnimatedSticker(stickerLink: string, stickerId: string, channelId: string) {\n        const [{ parseURL }, {\n            GIFEncoder,\n            quantize,\n            applyPalette\n        }] = await Promise.all([importApngJs(), getGifEncoder()]);\n\n        const { frames, width, height } = await parseURL(stickerLink);\n\n        const gif = new GIFEncoder();\n        const resolution = Settings.plugins.FakeNitro.stickerSize;\n\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = resolution;\n        canvas.height = resolution;\n\n        const ctx = canvas.getContext(\"2d\", {\n            willReadFrequently: true\n        })!;\n\n        const scale = resolution / Math.max(width, height);\n        ctx.scale(scale, scale);\n\n        let lastImg: HTMLImageElement | null = null;\n        for (const { left, top, width, height, disposeOp, img, delay } of frames) {\n            ctx.drawImage(img, left, top, width, height);\n\n            const { data } = ctx.getImageData(0, 0, resolution, resolution);\n\n            const palette = quantize(data, 256);\n            const index = applyPalette(data, palette);\n\n            gif.writeFrame(index, resolution, resolution, {\n                transparent: true,\n                palette,\n                delay,\n            });\n\n            if (disposeOp === ApngDisposeOp.BACKGROUND) {\n                ctx.clearRect(left, top, width, height);\n            } else if (disposeOp === ApngDisposeOp.PREVIOUS && lastImg) {\n                ctx.drawImage(lastImg, left, top, width, height);\n            }\n\n            lastImg = img;\n        }\n\n        gif.finish();\n        const file = new File([gif.bytesView()], `${stickerId}.gif`, { type: \"image/gif\" });\n        promptToUpload([file], ChannelStore.getChannel(channelId), DRAFT_TYPE);\n    },\n\n    start() {\n        const settings = Settings.plugins.FakeNitro;\n        if (!settings.enableEmojiBypass && !settings.enableStickerBypass) {\n            return;\n        }\n\n        const EmojiStore = lazyWebpack(filters.byProps(\"getCustomEmojiById\"));\n        const StickerStore = lazyWebpack(filters.byProps(\"getAllGuildStickers\")) as {\n            getPremiumPacks(): StickerPack[];\n            getAllGuildStickers(): Map<string, Sticker[]>;\n            getStickerById(id: string): Sticker | undefined;\n        };\n\n        function getWordBoundary(origStr: string, offset: number) {\n            return (!origStr[offset] || /\\s/.test(origStr[offset])) ? \"\" : \" \";\n        }\n\n        this.preSend = addPreSendListener((channelId, messageObj, extra) => {\n            const { guildId } = this;\n\n            stickerBypass: {\n                if (!settings.enableStickerBypass)\n                    break stickerBypass;\n\n                const sticker = StickerStore.getStickerById(extra?.stickerIds?.[0]!);\n                if (!sticker)\n                    break stickerBypass;\n\n                if (sticker.available !== false && (this.canUseStickers || (sticker as GuildSticker)?.guild_id === guildId))\n                    break stickerBypass;\n\n                let link = this.getStickerLink(sticker.id);\n                if (sticker.format_type === 2) {\n                    this.sendAnimatedSticker(this.getStickerLink(sticker.id), sticker.id, channelId);\n                    return { cancel: true };\n                } else {\n                    if (\"pack_id\" in sticker) {\n                        const packId = sticker.pack_id === \"847199849233514549\"\n                            // Discord moved these stickers into a different pack at some point, but\n                            // Distok still uses the old id\n                            ? \"749043879713701898\"\n                            : sticker.pack_id;\n\n                        link = `https://distok.top/stickers/${packId}/${sticker.id}.gif`;\n                    }\n\n                    delete extra.stickerIds;\n                    messageObj.content += \" \" + link;\n                }\n            }\n\n            if (!this.canUseEmotes && settings.enableEmojiBypass) {\n                for (const emoji of messageObj.validNonShortcutEmojis) {\n                    if (!emoji.require_colons) continue;\n                    if (emoji.guildId === guildId && !emoji.animated) continue;\n\n                    const emojiString = `<${emoji.animated ? \"a\" : \"\"}:${emoji.originalName || emoji.name}:${emoji.id}>`;\n                    const url = emoji.url.replace(/\\?size=\\d+/, `?size=${Settings.plugins.FakeNitro.emojiSize}`);\n                    messageObj.content = messageObj.content.replace(emojiString, (match, offset, origStr) => {\n                        return `${getWordBoundary(origStr, offset - 1)}${url}${getWordBoundary(origStr, offset + match.length)}`;\n                    });\n                }\n            }\n\n            return { cancel: false };\n        });\n\n        if (!this.canUseEmotes && settings.enableEmojiBypass) {\n            this.preEdit = addPreEditListener((_, __, messageObj) => {\n                const { guildId } = this;\n\n                for (const [emojiStr, _, emojiId] of messageObj.content.matchAll(/(?<!\\\\)<a?:(\\w+):(\\d+)>/ig)) {\n                    const emoji = EmojiStore.getCustomEmojiById(emojiId);\n                    if (emoji == null || (emoji.guildId === guildId && !emoji.animated)) continue;\n                    if (!emoji.require_colons) continue;\n\n                    const url = emoji.url.replace(/\\?size=\\d+/, `?size=${Settings.plugins.FakeNitro.emojiSize}`);\n                    messageObj.content = messageObj.content.replace(emojiStr, (match, offset, origStr) => {\n                        return `${getWordBoundary(origStr, offset - 1)}${url}${getWordBoundary(origStr, offset + match.length)}`;\n                    });\n                }\n            });\n        }\n    },\n\n    stop() {\n        removePreSendListener(this.preSend);\n        removePreEditListener(this.preEdit);\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { PluginOptionBoolean } from \"../../../utils/types\";\nimport { Forms, React, Select } from \"../../../webpack/common\";\nimport { ISettingElementProps } from \".\";\n\nexport function SettingBooleanComponent({ option, pluginSettings, id, onChange, onError }: ISettingElementProps<PluginOptionBoolean>) {\n    const def = pluginSettings[id] ?? option.default;\n\n    const [state, setState] = React.useState(def ?? false);\n    const [error, setError] = React.useState<string | null>(null);\n\n    React.useEffect(() => {\n        onError(error !== null);\n    }, [error]);\n\n    const options = [\n        { label: \"Enabled\", value: true, default: def === true },\n        { label: \"Disabled\", value: false, default: typeof def === \"undefined\" || def === false },\n    ];\n\n    function handleChange(newValue: boolean): void {\n        const isValid = (option.isValid && option.isValid(newValue)) ?? true;\n        if (typeof isValid === \"string\") setError(isValid);\n        else if (!isValid) setError(\"Invalid input provided.\");\n        else {\n            setError(null);\n            setState(newValue);\n            onChange(newValue);\n        }\n    }\n\n    return (\n        <Forms.FormSection>\n            <Forms.FormTitle>{option.description}</Forms.FormTitle>\n            <Select\n                isDisabled={option.disabled?.() ?? false}\n                options={options}\n                placeholder={option.placeholder ?? \"Select an option\"}\n                maxVisibleItems={5}\n                closeOnSelect={true}\n                select={handleChange}\n                isSelected={v => v === state}\n                serialize={v => String(v)}\n                {...option.componentProps}\n            />\n            {error && <Forms.FormText style={{ color: \"var(--text-danger)\" }}>{error}</Forms.FormText>}\n        </Forms.FormSection>\n    );\n}\n\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { PluginOptionComponent } from \"../../../utils/types\";\nimport { ISettingElementProps } from \".\";\n\nexport function SettingCustomComponent({ option, onChange, onError }: ISettingElementProps<PluginOptionComponent>) {\n    return option.component({ setValue: onChange, setError: onError, option });\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { OptionType, PluginOptionNumber } from \"../../../utils/types\";\nimport { Forms, React, TextInput } from \"../../../webpack/common\";\nimport { ISettingElementProps } from \".\";\n\nconst MAX_SAFE_NUMBER = BigInt(Number.MAX_SAFE_INTEGER);\n\nexport function SettingNumericComponent({ option, pluginSettings, id, onChange, onError }: ISettingElementProps<PluginOptionNumber>) {\n    function serialize(value: any) {\n        if (option.type === OptionType.BIGINT) return BigInt(value);\n        return Number(value);\n    }\n\n    const [state, setState] = React.useState<any>(`${pluginSettings[id] ?? option.default ?? 0}`);\n    const [error, setError] = React.useState<string | null>(null);\n\n    React.useEffect(() => {\n        onError(error !== null);\n    }, [error]);\n\n    function handleChange(newValue) {\n        const isValid = (option.isValid && option.isValid(newValue)) ?? true;\n        if (typeof isValid === \"string\") setError(isValid);\n        else if (!isValid) setError(\"Invalid input provided.\");\n        else if (option.type === OptionType.NUMBER && BigInt(newValue) >= MAX_SAFE_NUMBER) {\n            setState(`${Number.MAX_SAFE_INTEGER}`);\n            onChange(serialize(newValue));\n        } else {\n            setState(newValue);\n            onChange(serialize(newValue));\n        }\n    }\n\n    return (\n        <Forms.FormSection>\n            <Forms.FormTitle>{option.description}</Forms.FormTitle>\n            <TextInput\n                type=\"number\"\n                pattern=\"-?[0-9]+\"\n                value={state}\n                onChange={handleChange}\n                placeholder={option.placeholder ?? \"Enter a number\"}\n                disabled={option.disabled?.() ?? false}\n                {...option.componentProps}\n            />\n            {error && <Forms.FormText style={{ color: \"var(--text-danger)\" }}>{error}</Forms.FormText>}\n        </Forms.FormSection>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { PluginOptionSelect } from \"../../../utils/types\";\nimport { Forms, React, Select } from \"../../../webpack/common\";\nimport { ISettingElementProps } from \".\";\n\nexport function SettingSelectComponent({ option, pluginSettings, onChange, onError, id }: ISettingElementProps<PluginOptionSelect>) {\n    const def = pluginSettings[id] ?? option.options?.find(o => o.default)?.value;\n\n    const [state, setState] = React.useState<any>(def ?? null);\n    const [error, setError] = React.useState<string | null>(null);\n\n    React.useEffect(() => {\n        onError(error !== null);\n    }, [error]);\n\n    function handleChange(newValue) {\n        const isValid = (option.isValid && option.isValid(newValue)) ?? true;\n        if (typeof isValid === \"string\") setError(isValid);\n        else if (!isValid) setError(\"Invalid input provided.\");\n        else {\n            setState(newValue);\n            onChange(newValue);\n        }\n    }\n\n    return (\n        <Forms.FormSection>\n            <Forms.FormTitle>{option.description}</Forms.FormTitle>\n            <Select\n                isDisabled={option.disabled?.() ?? false}\n                options={option.options}\n                placeholder={option.placeholder ?? \"Select an option\"}\n                maxVisibleItems={5}\n                closeOnSelect={true}\n                select={handleChange}\n                isSelected={v => v === state}\n                serialize={v => String(v)}\n                {...option.componentProps}\n            />\n            {error && <Forms.FormText style={{ color: \"var(--text-danger)\" }}>{error}</Forms.FormText>}\n        </Forms.FormSection>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { PluginOptionSlider } from \"../../../utils/types\";\nimport { Forms, React, Slider } from \"../../../webpack/common\";\nimport { ISettingElementProps } from \".\";\n\nexport function makeRange(start: number, end: number, step = 1) {\n    const ranges: number[] = [];\n    for (let value = start; value <= end; value += step) {\n        ranges.push(Math.round(value * 100) / 100);\n    }\n    return ranges;\n}\n\nexport function SettingSliderComponent({ option, pluginSettings, id, onChange, onError }: ISettingElementProps<PluginOptionSlider>) {\n    const def = pluginSettings[id] ?? option.default;\n\n    const [error, setError] = React.useState<string | null>(null);\n\n    React.useEffect(() => {\n        onError(error !== null);\n    }, [error]);\n\n    function handleChange(newValue: number): void {\n        const isValid = (option.isValid && option.isValid(newValue)) ?? true;\n        if (typeof isValid === \"string\") setError(isValid);\n        else if (!isValid) setError(\"Invalid input provided.\");\n        else {\n            setError(null);\n            onChange(newValue);\n        }\n    }\n\n    return (\n        <Forms.FormSection>\n            <Forms.FormTitle>{option.description}</Forms.FormTitle>\n            <Slider\n                disabled={option.disabled?.() ?? false}\n                markers={option.markers}\n                minValue={option.markers[0]}\n                maxValue={option.markers[option.markers.length - 1]}\n                initialValue={def}\n                onValueChange={handleChange}\n                onValueRender={(v: number) => String(v.toFixed(2))}\n                stickToMarkers={option.stickToMarkers ?? true}\n                {...option.componentProps}\n            />\n        </Forms.FormSection>\n    );\n}\n\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { PluginOptionString } from \"../../../utils/types\";\nimport { Forms, React, TextInput } from \"../../../webpack/common\";\nimport { ISettingElementProps } from \".\";\n\nexport function SettingTextComponent({ option, pluginSettings, id, onChange, onError }: ISettingElementProps<PluginOptionString>) {\n    const [state, setState] = React.useState(pluginSettings[id] ?? option.default ?? null);\n    const [error, setError] = React.useState<string | null>(null);\n\n    React.useEffect(() => {\n        onError(error !== null);\n    }, [error]);\n\n    function handleChange(newValue) {\n        const isValid = (option.isValid && option.isValid(newValue)) ?? true;\n        if (typeof isValid === \"string\") setError(isValid);\n        else if (!isValid) setError(\"Invalid input provided.\");\n        else {\n            setState(newValue);\n            onChange(newValue);\n        }\n    }\n\n    return (\n        <Forms.FormSection>\n            <Forms.FormTitle>{option.description}</Forms.FormTitle>\n            <TextInput\n                type=\"text\"\n                value={state}\n                onChange={handleChange}\n                placeholder={option.placeholder ?? \"Enter a value\"}\n                disabled={option.disabled?.() ?? false}\n                {...option.componentProps}\n            />\n            {error && <Forms.FormText style={{ color: \"var(--text-danger)\" }}>{error}</Forms.FormText>}\n        </Forms.FormSection>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { PluginOptionBase } from \"../../../utils/types\";\n\nexport interface ISettingElementProps<T extends PluginOptionBase> {\n    option: T;\n    onChange(newValue: any): void;\n    pluginSettings: {\n        [setting: string]: any;\n        enabled: boolean;\n    };\n    id: string;\n    onError(hasError: boolean): void;\n}\n\nexport * from \"./SettingBooleanComponent\";\nexport * from \"./SettingCustomComponent\";\nexport * from \"./SettingNumericComponent\";\nexport * from \"./SettingSelectComponent\";\nexport * from \"./SettingSliderComponent\";\nexport * from \"./SettingTextComponent\";\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ApplicationCommandOptionType } from \"../api/Commands\";\nimport { makeRange } from \"../components/PluginSettings/components\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { Settings } from \"../Vencord\";\n\nexport default definePlugin({\n    name: \"Fart2\",\n    authors: [Devs.Animal],\n    description: \"Enable farting v2, a slash command that allows you to perform or request that someone perform a little toot.\",\n    dependencies: [\"CommandsAPI\"],\n    commands: [{\n        name: \"fart\",\n        description: \"A simple command in which you may either request that a user do a little toot for you, or conduct one yourself.\",\n        options: [\n            {\n                type: ApplicationCommandOptionType.USER,\n                name: \"user\",\n                description: \"A Discord\u2122 user of which you would humbly request a toot from.\",\n                required: false\n            }\n        ],\n\n        execute(args) {\n            const fart = new Audio(\"https://raw.githubusercontent.com/ItzOnlyAnimal/AliuPlugins/main/fart.mp3\");\n            fart.volume = Settings.plugins.Fart2.volume;\n            fart.play();\n\n            return {\n                content: (args[0]) ? `<@${args[0].value}> fart` : \"fart\"\n            };\n        },\n    }],\n    options: {\n        volume: {\n            description: \"how loud you wanna fart (aka volume)\",\n            type: OptionType.SLIDER,\n            markers: makeRange(0, 1, 0.1),\n            default: 0.5,\n            stickToMarkers: false,\n        }\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\nimport { waitFor } from \"../webpack\";\n\nlet GuildStore;\nwaitFor([\"getGuild\"], m => GuildStore = m);\n\nexport default definePlugin({\n    name: \"ForceOwnerCrown\",\n    description: \"Force the owner crown next to usernames even if the server is large.\",\n    authors: [Devs.D3SOX, Devs.Nickyux],\n    patches: [\n        {\n            // This is the logic where it decides whether to render the owner crown or not\n            find: \".renderOwner=\",\n            replacement: {\n                match: /isOwner;return null!=(\\w+)?&&/g,\n                replace: \"isOwner;if(Vencord.Plugins.plugins.ForceOwnerCrown.isGuildOwner(this.props)){$1=true;}return null!=$1&&\"\n            }\n        },\n    ],\n    isGuildOwner(props) {\n        // Check if channel is a Group DM, if so return false\n        if (props?.channel?.type === 3) {\n            return false;\n        }\n\n        // guild id is in props twice, fallback if the first is undefined\n        const guildId = props?.guildId ?? props?.channel?.guild_id;\n        const userId = props?.user?.id;\n\n        if (guildId && userId) {\n            const guild = GuildStore.getGuild(guildId);\n            if (guild) {\n                return guild.ownerId === userId;\n            }\n            console.error(\"[ForceOwnerCrown] failed to get guild\", { guildId, guild, props });\n        } else {\n            console.error(\"[ForceOwnerCrown] no guildId or userId\", { guildId, userId, props });\n        }\n        return false;\n    },\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ApplicationCommandInputType, sendBotMessage } from \"../api/Commands\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\nimport { findByProps } from \"../webpack\";\n\nexport default definePlugin({\n    name: \"FriendInvites\",\n    description: \"Generate and manage friend invite links.\",\n    authors: [Devs.afn],\n    dependencies: [\"CommandsAPI\"],\n    commands: [\n        {\n            name: \"create friend invite\",\n            description: \"Generates a friend invite link.\",\n            inputType: ApplicationCommandInputType.BOT,\n            execute: async (_, ctx) => {\n                const friendInvites = findByProps(\"createFriendInvite\");\n                const createInvite = await friendInvites.createFriendInvite();\n\n                return void sendBotMessage(ctx.channel.id, {\n                    content: `\n                        discord.gg/${createInvite.code}\n                        Expires: <t:${new Date(createInvite.expires_at).getTime() / 1000}:R>\n                        Max uses: \\`${createInvite.max_uses}\\`\n                    `.trim().replace(/\\s+/g, \" \")\n                });\n            },\n        },\n        {\n            name: \"view friend invites\",\n            description: \"View a list of all generated friend invites.\",\n            inputType: ApplicationCommandInputType.BOT,\n            execute: async (_, ctx) => {\n                const friendInvites = findByProps(\"createFriendInvite\");\n                const invites = await friendInvites.getAllFriendInvites();\n                const friendInviteList = invites.map(i =>\n                    `_discord.gg/${i.code}_\n                    Expires: <t:${new Date(i.expires_at).getTime() / 1000}:R>\n                    Times used: \\`${i.uses}/${i.max_uses}\\``.trim().replace(/\\s+/g, \" \")\n                );\n\n                return void sendBotMessage(ctx.channel.id, {\n                    content: friendInviteList.join(\"\\n\\n\") || \"You have no active friend invites!\"\n                });\n            },\n        },\n        {\n            name: \"revoke friend invites\",\n            description: \"Revokes ALL generated friend invite links.\",\n            inputType: ApplicationCommandInputType.BOT,\n            execute: async (_, ctx) => {\n                await findByProps(\"createFriendInvite\").revokeFriendInvites();\n\n                return void sendBotMessage(ctx.channel.id, {\n                    content: \"All friend links have been revoked.\"\n                });\n            },\n        },\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Samu\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { addPreSendListener, MessageObject, removePreSendListener } from \"../api/MessageEvents\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nconst re = /https?:\\/\\/twitter\\.com(?=\\/\\w+?\\/status\\/)/g;\n\nexport default definePlugin({\n    name: \"FxTwitter\",\n    description: \"Uses FxTwitter to improve embeds from twitter on send\",\n    authors: [Devs.Samu],\n    dependencies: [\"MessageEventsAPI\"],\n\n    addPrefix(msg: MessageObject) {\n        msg.content = msg.content.replace(re, \"https://fxtwitter.com\");\n    },\n\n    start() {\n        this.preSend = addPreSendListener((_, msg) => this.addPrefix(msg));\n    },\n\n    stop() {\n        removePreSendListener(this.preSend);\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"iLoveSpam\",\n    description: \"Do not hide messages from 'likely spammers'\",\n    authors: [Devs.botato, Devs.Animal],\n    patches: [\n        {\n            find: \"),{hasFlag:\",\n            replacement: {\n                match: /(if\\((.{1,2})<=1<<30\\)return)/,\n                replace: \"if($2===(1<<20)){return false};$1\",\n            },\n        },\n    ],\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { DataStore } from \"../api\";\nimport { Devs } from \"../utils/constants\";\nimport { lazyWebpack } from \"../utils/misc\";\nimport definePlugin from \"../utils/types\";\nimport { filters } from \"../webpack\";\n\ninterface MatchAndReplace {\n    match: RegExp;\n    replace: string;\n}\n\n/** Used to re-render the Registered Games tab to update how our button looks like */\nconst RunningGameStoreModule = lazyWebpack(filters.byProps(\"IgnoreActivities_reRenderGames\"));\n\nlet ignoredActivitiesCache: string[] = [];\n\nexport default definePlugin({\n    name: \"IgnoreActivities\",\n    authors: [Devs.Nuckyz],\n    description: \"Ignore certain activities (like games) from showing up on your status. You can configure which ones are ignored from the Registered Games tab.\",\n    patches: [{\n        find: \".Messages.SETTINGS_GAMES_OVERLAY_ON\",\n        replacement: [{\n            match: /;(.\\.renderOverlayToggle=function\\(\\).+?\\)};)/,\n            replace: (_, mod) => {\n                /** Modify the renderOverlayToggle button to remove unneded stuff and render the component the way we want */\n                const renderIgnoreActivitiesToggle = ([\n                    /** Remove overlay warn related stuff */\n                    { match: /,.{1,2}=.{1,2}\\.overlayWarn/, replace: \"\" },\n                    { match: /,.{1,2}=.{1,2}\\?\\(0,.{1,2}\\.jsx\\)\\(.{1,20}Messages\\.SETTINGS_GAMES_OVERLAY_WARNING.{1,100}null/, replace: \"\" },\n                    /** Remove overlay status related stuff */\n                    { match: /,.{1,2}=.{1,2}\\?.{1,50}Messages\\.SETTINGS_GAMES_OVERLAY_OFF/, replace: \"\" },\n                    { match: /[^[]{1,2},\\(0,.{1,2}\\.jsx\\)\\(\"div\".{1,20}\\(\\)\\.overlayStatusText.+}\\),/, replace: \"\" },\n                    /** Change the method name to renderIgnoreActivitiesToggle */\n                    { match: /renderOverlayToggle/, replace: \"renderIgnoreActivitiesToggle\" },\n                    /** Create an easily accessable variable to use the game props and then replace the boolean to determine if the button is activated or not with our custom function  */\n                    { match: /((.)=this\\.props\\.game)(.{1,70})=.{1,2}overlay/, replace: \"$1,IgnoreActivities_gameProps=$2$3=Vencord.Plugins.plugins.IgnoreActivities.isActivityEnabled(IgnoreActivities_gameProps)\" },\n                    /** Change the handler for clicking the button */\n                    { match: /.\\.handleOverlayToggle/, replace: \"() => Vencord.Plugins.plugins.IgnoreActivities.handleActivityToggle(IgnoreActivities_gameProps)\" },\n                    /** Change the button on component to our custom */\n                    { match: /(\\(0,.{1,2}\\.jsx\\)\\()(.{2})\\..(.{1,50}\\.overlayToggleIconOn)/, replace: \"$1$2.IgnoreActivities_toggleOn$3\" },\n                    /** Change the button off component to our custom */\n                    { match: /(\\(0,.{1,2}\\.jsx\\)\\()(.{2})\\..{1}(.{1,50}\\.overlayToggleIconOff)/, replace: \"$1$2.IgnoreActivities_toggleOff$3\" },\n                    /** Change the tooltip text */\n                    { match: /text:.{2}\\..\\.Messages\\.SETTINGS_GAMES_TOGGLE_OVERLAY/, replace: 'text:\"Toggle activity\"' },\n                    /** Change the aria-label text */\n                    { match: /\"aria-label\":.{2}\\..\\.Messages\\.SETTINGS_GAMES_TOGGLE_OVERLAY/, replace: '\"aria-label\":\"Toggle activity\"' }\n                ] as MatchAndReplace[])\n                    .reduce((current, { match, replace }) => current.replace(match, replace), mod);\n\n                /** Return the default renderOverlayToggle and our custom one */\n                return `;${mod}${renderIgnoreActivitiesToggle}`;\n\n            }\n        }, {\n            /** Render our ignore activity component */\n            match: /(this.renderLastPlayed\\(\\)]}\\),this.renderOverlayToggle\\(\\))/,\n            replace: \"$1,this.renderIgnoreActivitiesToggle()\"\n        }]\n    }, {\n        /** Patch the RunningGameStore to export the method to re-render the Registered Games tab */\n        find: '.displayName=\"RunningGameStore\"',\n        replacement: {\n            match: /(.:\\(\\)=>.{2})(.+function (.{2})\\(\\){.+\\.dispatch\\({type:\"RUNNING_GAMES_CHANGE\")/,\n            replace: \"$1,IgnoreActivities_reRenderGames:()=>$3$2\"\n        }\n    }, {\n        find: \"M8.67872 19H11V21H7V23H17V21H13V19H20C21.103 19 22 18.104 22 17V6C22 5.89841 21.9924 5.79857 21.9777 5.70101L20 7.67872V15H12.6787L8.67872 19ZM13.1496 6H4V15H4.14961L2.00515 17.1445C2.00174 17.0967 2 17.0486 2 17V6C2 4.897 2.897 4 4 4H15.1496L13.1496 6Z\",\n        replacement: {\n            match: /(.:\\(\\)=>.)(.+)(function (.)\\(.{1,10}\\.width.+\\)\\)})/s,\n            replace: (_, exports, restOfFunction, component) => {\n                /** Modify the overlayToggleOff component to how we want */\n                const renderIgnoreActivitiesToggleOff = ([\n                    /** Change the method name to IgnoreActivities_toggleOffToExport */\n                    { match: /function ./, replace: \"function IgnoreActivities_toggleOffToExport\" },\n                    /** Change the svg path to our custom one */\n                    { match: /M8.67872 19H11V21H7V23H17V21H13V19H20C21.103 19 22 18.104 22 17V6C22 5.89841 21.9924 5.79857 21.9777 5.70101L20 7.67872V15H12.6787L8.67872 19ZM13.1496 6H4V15H4.14961L2.00515 17.1445C2.00174 17.0967 2 17.0486 2 17V6C2 4.897 2.897 4 4 4H15.1496L13.1496 6Z/, replace: \"M 16 8 C 7.664063 8 1.25 15.34375 1.25 15.34375 L 0.65625 16 L 1.25 16.65625 C 1.25 16.65625 7.097656 23.324219 14.875 23.9375 C 15.246094 23.984375 15.617188 24 16 24 C 16.382813 24 16.753906 23.984375 17.125 23.9375 C 24.902344 23.324219 30.75 16.65625 30.75 16.65625 L 31.34375 16 L 30.75 15.34375 C 30.75 15.34375 24.335938 8 16 8 Z M 16 10 C 18.203125 10 20.234375 10.601563 22 11.40625 C 22.636719 12.460938 23 13.675781 23 15 C 23 18.613281 20.289063 21.582031 16.78125 21.96875 C 16.761719 21.972656 16.738281 21.964844 16.71875 21.96875 C 16.480469 21.980469 16.242188 22 16 22 C 15.734375 22 15.476563 21.984375 15.21875 21.96875 C 11.710938 21.582031 9 18.613281 9 15 C 9 13.695313 9.351563 12.480469 9.96875 11.4375 L 9.9375 11.4375 C 11.71875 10.617188 13.773438 10 16 10 Z M 16 12 C 14.34375 12 13 13.34375 13 15 C 13 16.65625 14.34375 18 16 18 C 17.65625 18 19 16.65625 19 15 C 19 13.34375 17.65625 12 16 12 Z M 7.25 12.9375 C 7.09375 13.609375 7 14.285156 7 15 C 7 16.753906 7.5 18.394531 8.375 19.78125 C 5.855469 18.324219 4.105469 16.585938 3.53125 16 C 4.011719 15.507813 5.351563 14.203125 7.25 12.9375 Z M 24.75 12.9375 C 26.648438 14.203125 27.988281 15.507813 28.46875 16 C 27.894531 16.585938 26.144531 18.324219 23.625 19.78125 C 24.5 18.394531 25 16.753906 25 15 C 25 14.285156 24.90625 13.601563 24.75 12.9375 Z\" },\n                    /** Modify the view box to not cut our svg */\n                    { match: /viewBox:\"0 0 24 24\"/, replace: 'viewBox:\"0 0 32 26\"' },\n                    /** Change the rectangle coordinates to match the middle of our svg */\n                    { match: /x:\"2\"/, replace: 'x:\"3\"' },\n                    { match: /y:\"20\"/, replace: 'y:\"26\"' },\n                ] as MatchAndReplace[])\n                    .reduce((current, { match, replace }) => current.replace(match, replace), component);\n\n                /** Export our custom svg */\n                return `${exports},IgnoreActivities_toggleOff:()=>IgnoreActivities_toggleOffToExport${restOfFunction}${component}${renderIgnoreActivitiesToggleOff}`;\n            }\n        }\n    }, {\n        find: \"M4 2.5C2.897 2.5 2 3.397 2 4.5V15.5C2 16.604 2.897 17.5 4 17.5H11V19.5H7V21.5H17V19.5H13V17.5H20C21.103 17.5 22 16.604 22 15.5V4.5C22 3.397 21.103 2.5 20 2.5H4ZM20 4.5V13.5H4V4.5H20Z\",\n        replacement: {\n            match: /(.:\\(\\)=>.)(.+)(function (.)\\(.{1,10}\\.width.+\\)\\)})/,\n            replace: (_, exports, restOfFunction, component) => {\n                /** Modify the overlayToggleOn svg to how we want */\n                const renderIgnoreActivitiesToggleOn = ([\n                    /** Change the method name to IgnoreActivities_toggleOnToExport */\n                    { match: /function ./, replace: \"function IgnoreActivities_toggleOnToExport\" },\n                    /** Change the svg path to our custom one */\n                    { match: /M4 2.5C2.897 2.5 2 3.397 2 4.5V15.5C2 16.604 2.897 17.5 4 17.5H11V19.5H7V21.5H17V19.5H13V17.5H20C21.103 17.5 22 16.604 22 15.5V4.5C22 3.397 21.103 2.5 20 2.5H4ZM20 4.5V13.5H4V4.5H20Z/, replace: \"M 16 8 C 7.664063 8 1.25 15.34375 1.25 15.34375 L 0.65625 16 L 1.25 16.65625 C 1.25 16.65625 7.097656 23.324219 14.875 23.9375 C 15.246094 23.984375 15.617188 24 16 24 C 16.382813 24 16.753906 23.984375 17.125 23.9375 C 24.902344 23.324219 30.75 16.65625 30.75 16.65625 L 31.34375 16 L 30.75 15.34375 C 30.75 15.34375 24.335938 8 16 8 Z M 16 10 C 18.203125 10 20.234375 10.601563 22 11.40625 C 22.636719 12.460938 23 13.675781 23 15 C 23 18.613281 20.289063 21.582031 16.78125 21.96875 C 16.761719 21.972656 16.738281 21.964844 16.71875 21.96875 C 16.480469 21.980469 16.242188 22 16 22 C 15.734375 22 15.476563 21.984375 15.21875 21.96875 C 11.710938 21.582031 9 18.613281 9 15 C 9 13.695313 9.351563 12.480469 9.96875 11.4375 L 9.9375 11.4375 C 11.71875 10.617188 13.773438 10 16 10 Z M 16 12 C 14.34375 12 13 13.34375 13 15 C 13 16.65625 14.34375 18 16 18 C 17.65625 18 19 16.65625 19 15 C 19 13.34375 17.65625 12 16 12 Z M 7.25 12.9375 C 7.09375 13.609375 7 14.285156 7 15 C 7 16.753906 7.5 18.394531 8.375 19.78125 C 5.855469 18.324219 4.105469 16.585938 3.53125 16 C 4.011719 15.507813 5.351563 14.203125 7.25 12.9375 Z M 24.75 12.9375 C 26.648438 14.203125 27.988281 15.507813 28.46875 16 C 27.894531 16.585938 26.144531 18.324219 23.625 19.78125 C 24.5 18.394531 25 16.753906 25 15 C 25 14.285156 24.90625 13.601563 24.75 12.9375 Z\" },\n                    /** Modify the view box to not cut our svg */\n                    { match: /viewBox:\"0 0 24 24\"/, replace: 'viewBox:\"0 0 32 26\"' },\n                ] as MatchAndReplace[])\n                    .reduce((current, { match, replace }) => current.replace(match, replace), component);\n\n                /** Export our custom svg */\n                return `${exports},IgnoreActivities_toggleOn:()=>IgnoreActivities_toggleOnToExport${restOfFunction}${component}${renderIgnoreActivitiesToggleOn}`;\n            }\n        }\n    }, {\n        /** Patch the LocalActivityStore to filter our ignored activities before they get pushed into the array */\n        find: '.displayName=\"LocalActivityStore\"',\n        replacement: {\n            match: /((.)\\.push\\(.\\({type:.\\..{1,3}\\.LISTENING.+?;)/,\n            replace: \"$1$2=$2.filter(Vencord.Plugins.plugins.IgnoreActivities.isActivityEnabled);\"\n        }\n    }],\n\n    async start() {\n        ignoredActivitiesCache = (await DataStore.get<string[]>(\"IgnoreActivities_ignoredActivities\")) ?? [];\n\n        if (ignoredActivitiesCache.length !== 0) {\n            const gamesSeen: Record<string, any>[] = RunningGameStoreModule.Z.getGamesSeen();\n\n            for (const [index, ignoredActivity] of ignoredActivitiesCache.entries()) {\n                if (!gamesSeen.some(game => (game.id !== undefined && game.id === ignoredActivity) || game.exePath === ignoredActivity)) {\n                    ignoredActivitiesCache.splice(index, 1);\n                }\n            }\n\n            await DataStore.set(\"IgnoreActivities_ignoredActivities\", ignoredActivitiesCache);\n        }\n    },\n\n    isActivityEnabled(props: Record<string, any>) {\n        /** LocalActivityStore games have a \"type\" prop */\n        if (\"type\" in props) {\n            if (props.application_id !== undefined) return !ignoredActivitiesCache.includes(props.application_id);\n            else {\n                const exePath = RunningGameStoreModule.Z.getRunningGames().find(game => game.name === props.name)?.exePath;\n                if (exePath) return !ignoredActivitiesCache.includes(exePath);\n            }\n        }\n        /** Registered Games tab games have an \"exePath\" prop */\n        else if (\"exePath\" in props) {\n            if (props.id !== undefined) return !ignoredActivitiesCache.includes(props.id);\n            else return !ignoredActivitiesCache.includes(props.exePath);\n        }\n        return true;\n    },\n\n    async handleActivityToggle(props: Record<string, any>) {\n        const id = props.id ?? props.exePath;\n        if (id === undefined) return;\n\n        if (ignoredActivitiesCache.includes(id)) ignoredActivitiesCache.splice(ignoredActivitiesCache.indexOf(id, 1));\n        else ignoredActivitiesCache.push(id);\n        RunningGameStoreModule.IgnoreActivities_reRenderGames();\n        await DataStore.set(\"IgnoreActivities_ignoredActivities\", ignoredActivitiesCache);\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { DataStore } from \"../api\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\nimport { ChannelStore, FluxDispatcher, NavigationRouter, SelectedChannelStore, SelectedGuildStore } from \"../webpack/common\";\n\nexport interface LogoutEvent {\n    type: \"LOGOUT\";\n    isSwitchingAccount: boolean;\n}\n\ninterface ChannelSelectEvent {\n    type: \"CHANNEL_SELECT\";\n    channelId: string | null;\n    guildId: string | null;\n}\n\ninterface PreviousChannel {\n    guildId: string | null;\n    channelId: string | null;\n}\n\n\nexport default definePlugin({\n    name: \"KeepCurrentChannel\",\n    description: \"Attempt to navigate the channel you were in before switching accounts or loading Discord.\",\n    authors: [Devs.Nuckyz],\n\n    isSwitchingAccount: false,\n    previousCache: {} as PreviousChannel,\n\n    attemptToNavigateToChannel(guildId: string | null, channelId: string) {\n        if (!ChannelStore.hasChannel(channelId)) return;\n        NavigationRouter.transitionTo(`/channels/${guildId ?? \"@me\"}/${channelId}`);\n    },\n\n    onLogout(e: LogoutEvent) {\n        this.isSwitchingAccount = e.isSwitchingAccount;\n    },\n\n    onConnectionOpen() {\n        if (!this.isSwitchingAccount) return;\n        this.isSwitchingAccount = false;\n\n        if (this.previousCache.channelId) this.attemptToNavigateToChannel(this.previousCache.guildId, this.previousCache.channelId);\n    },\n\n    async onChannelSelect({ guildId, channelId }: ChannelSelectEvent) {\n        if (this.isSwitchingAccount) return;\n\n        this.previousCache = {\n            guildId,\n            channelId\n        };\n        await DataStore.set(\"KeepCurrentChannel_previousData\", this.previousCache);\n    },\n\n    async start() {\n        const previousData = await DataStore.get<PreviousChannel>(\"KeepCurrentChannel_previousData\");\n        if (previousData) {\n            this.previousCache = previousData;\n\n            if (this.previousCache.channelId) this.attemptToNavigateToChannel(this.previousCache.guildId, this.previousCache.channelId);\n        } else {\n            this.previousCache = {\n                guildId: SelectedGuildStore.getGuildId(),\n                channelId: SelectedChannelStore.getChannelId() ?? null\n            };\n            await DataStore.set(\"KeepCurrentChannel_previousData\", this.previousCache);\n        }\n\n        FluxDispatcher.subscribe(\"LOGOUT\", this.onLogout.bind(this));\n        FluxDispatcher.subscribe(\"CONNECTION_OPEN\", this.onConnectionOpen.bind(this));\n        FluxDispatcher.subscribe(\"CHANNEL_SELECT\", this.onChannelSelect.bind(this));\n    },\n\n    stop() {\n        FluxDispatcher.unsubscribe(\"LOGOUT\", this.onLogout);\n        FluxDispatcher.unsubscribe(\"CONNECTION_OPEN\", this.onConnectionOpen);\n        FluxDispatcher.unsubscribe(\"CHANNEL_SELECT\", this.onChannelSelect);\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Sofia Lima\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Link } from \"../components/Link\";\nimport { Devs } from \"../utils/constants\";\nimport { lazyWebpack } from \"../utils/misc\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { Settings, Webpack } from \"../Vencord\";\nimport { FluxDispatcher, Forms } from \"../webpack/common\";\n\ninterface ActivityAssets {\n    large_image?: string\n    large_text?: string\n    small_image?: string\n    small_text?: string\n}\n\ninterface Activity {\n    state: string\n    details?: string\n    timestamps?: {\n        start?: Number\n    }\n    assets?: ActivityAssets\n    buttons?: Array<string>\n    name: string\n    application_id: string\n    metadata?: {\n        button_urls?: Array<string>\n    }\n    type: Number\n    flags: Number\n}\n\ninterface TrackData {\n    name: string\n    album: string\n    artist: string\n    url: string\n    imageUrl?: string\n}\n\n// only relevant enum values\nenum ActivityType {\n    PLAYING = 0,\n    LISTENING = 2,\n}\n\nenum ActivityFlag {\n    INSTANCE = 1 << 0,\n}\n\nconst applicationId = \"1043533871037284423\";\n\nconst presenceStore = lazyWebpack(Webpack.filters.byProps(\"getLocalPresence\"));\nconst assetManager = Webpack.mapMangledModuleLazy(\n    \"getAssetImage: size must === [number, number] for Twitch\",\n    {\n        getAsset: Webpack.filters.byCode(\"apply(\"),\n    }\n);\n\nasync function getApplicationAsset(key: string): Promise<string> {\n    return (await assetManager.getAsset(applicationId, [key, undefined]))[0];\n}\n\nfunction setActivity(activity?: Activity) {\n    FluxDispatcher.dispatch({ type: \"LOCAL_ACTIVITY_UPDATE\", activity: activity });\n}\n\nexport default definePlugin({\n    name: \"LastFMRichPresence\",\n    description: \"Little plugin for Last.fm rich presence\",\n    authors: [Devs.dzshn],\n\n    settingsAboutComponent: () => (\n        <>\n            <Forms.FormTitle tag=\"h3\">How to get an API key</Forms.FormTitle>\n            <Forms.FormText>\n                An API key is required to fetch your current track. To get one, you can\n                visit <Link href=\"https://www.last.fm/api/account/create\">this page</Link> and\n                fill in the following information: <br /> <br />\n\n                Application name: Discord Rich Presence <br />\n                Application description: (personal use) <br /> <br />\n\n                And copy the API key (not the shared secret!)\n            </Forms.FormText>\n        </>\n    ),\n\n    options: {\n        username: {\n            description: \"last.fm username\",\n            type: OptionType.STRING,\n        },\n        apiKey: {\n            description: \"last.fm api key\",\n            type: OptionType.STRING,\n        },\n        hideWithSpotify: {\n            description: \"hide last.fm presence if spotify is running\",\n            type: OptionType.BOOLEAN,\n            default: true,\n        },\n        useListeningStatus: {\n            description: 'show \"Listening to\" status instead of \"Playing\"',\n            type: OptionType.BOOLEAN,\n            default: false,\n        }\n    },\n\n    start() {\n        this.settings = Settings.plugins.LastFMRichPresence;\n\n        this.updateInterval = setInterval(() => { this.updatePresence(); }, 16000);\n    },\n\n    stop() {\n        clearInterval(this.updateInterval);\n    },\n\n    async fetchTrackData(): Promise<TrackData | null> {\n        if (!this.settings.username || !this.settings.apiKey) return null;\n\n        const response = await fetch(`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&api_key=${this.settings.apiKey}&user=${this.settings.username}&limit=1&format=json`);\n        const trackData = (await response.json()).recenttracks.track[0];\n\n        if (!trackData[\"@attr\"]?.nowplaying) return null;\n\n        // why does the json api have xml structure\n        return {\n            name: trackData.name || \"Unknown\",\n            album: trackData.album[\"#text\"],\n            artist: trackData.artist[\"#text\"] || \"Unknown\",\n            url: trackData.url,\n            imageUrl: (trackData.image || []).filter(x => x.size === \"large\")[0]?.[\"#text\"]\n        };\n    },\n\n    async updatePresence() {\n        if (this.settings.hideWithSpotify) {\n            for (const activity of presenceStore.getActivities()) {\n                if (activity.type === ActivityType.LISTENING && activity.application_id !== applicationId) {\n                    // there is already music status (probably only spotify can do this currently)\n                    setActivity();\n                    return;\n                }\n            }\n        }\n\n        const trackData = await this.fetchTrackData();\n\n        if (!trackData) {\n            setActivity();\n            return;\n        }\n\n        const hideAlbumName = !trackData.album || trackData.album === trackData.name;\n\n        let assets: ActivityAssets;\n        if (trackData.imageUrl) {\n            assets = {\n                large_image: await getApplicationAsset(trackData.imageUrl),\n                large_text: trackData.name,\n                small_image: await getApplicationAsset(\"lastfm-small\"),\n                small_text: \"Last.fm\",\n            };\n        } else {\n            assets = {\n                large_image: await getApplicationAsset(\"lastfm-large\"),\n                large_text: \"Last.fm\",\n            };\n        }\n\n        setActivity({\n            application_id: applicationId,\n            name: \"some music\",\n\n            details: trackData.name,\n            state: hideAlbumName ? trackData.artist : `${trackData.artist} - ${trackData.album}`,\n            assets,\n\n            buttons: [ \"Open in Last.fm\" ],\n            metadata: {\n                button_urls: [ trackData.url ]\n            },\n\n            type: this.settings.useListeningStatus ? ActivityType.LISTENING : ActivityType.PLAYING,\n            flags: ActivityFlag.INSTANCE,\n        });\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\n// These are Xor encrypted to prevent you from spoiling yourself when you read the source code.\n// don't worry about it :P\nconst quotes = [\n    \"Eyrokac\",\n    \"Rdcg$l`'k|~n\",\n    'H`tf$d&iajo+d`{\"',\n    \"Sucqplh`(Eclhualva()&\",\n    \"Lncgmka'8KNMDC,shpanf'`x./,\",\n    \"Ioqweijnfn*IeuvfvAotkfxo./,\",\n    'Hd{#cp\\x7Ft$)nbd!{lq%mig~*\\x7Fh`v#mk&sm{gx nd#idjb(a\\x7Ffao\"bja&amdkge!Rlo\u00ECkhf)hyedfjjb*\\'^hzdrdmm$lu\\'|ao+mnqw$fijxh~bbmg#Tjm\u00EEefd+fnp#lpkffz5',\n    \"h\",\n    \"sijklm&cam*rot\\\"hjjq'|ak\\x7F xmv#wc'ep*mawmvvlrb(|ynr>\\\"Aqq&cgg-\\x7F ugoh%rom)e\\x7Fhdpp%$\",\n    'Tnfb}\"u\\'~`nno!kp$vvhfzeyee\"a}%Tfam*Xh`fls%Jboldos-\"lj`&hn)~ce!`jcbct|)gdbhnf$wikm$zgaxkmc%afely+og\"144?\\'ign+iu%p$qisiefr gpfa$',\n    \"Ndtfv%ahfgk+ghtf$|ir(|z' Oguaw&`ggdj mgw$|ir(me|n\",\n    \"(!\u0363\u00B3$\u0359\u0290'\u0369\u00B9#\",\n    \"(\uFF88\u25D7\u30ED\u25D1,\uFF8F-2\uFF6C\uFF95\u272C\",\n    \"Ynw#hjil(ze+psgwp|&sgmkr!\",\n    \"Tikmolh`(fl+a!dvjk\\x7F'y|e\\x7Fe/,-\",\n    \"3/3750?5><9>885:7\",\n    \"mdmt\",\n    \"Wdn`khc+(oxbeof\",\n    'Ig\"zkp*\\'g{*xolglj`&~g|*gowg/$mgt(Eclm`.#ticf{l*xed\"wl`&Kangj igbhqn\\'d`dn `v#lqrw{3%$bhv-h|)kangj_imwhlhb',\n    \"Tscmw%Tnoa~x\",\n    \"I\u2018f#npus(ec`e!vl$lhsm{`ncu\\\"ekw&f(defeov-$Rnf|)sdu\u2018pf$wcam{ceg!vl$du'D`d~x-\\\"jw%oi(okht-\\\"DJP)Kag\u007Fs,!mq$du'A\u2010|n sg`akrkq)~jkdl#pj&diefbnf\\\"jp)&@F\\\\*{ltq#Hlhrp'\",\n    \"Ynw$v`&cg`dl fml`%rhlhs*\",\n    \"Dnl$p%qhz{s' hv$w%hh|aceg!;#gpvt(fl+cndea`&dg|fon&v#wjjqm(\",\n    \"\\ud83d)pft`gs(ec`e!13$qojmz#\",\n    \"a!njcmr'ide~nu\\\"lb%rheoedldpz$lu'gbkr\",\n    \"dn\\\"zkp&kg\u007Fo4\",\n    \"hnpqkw\",\n    \"sn\\\"fau\u007F\",\n    \"Sn\\\"tmqnh}}*musvkaw&flf&+ldv$w%lr{}*aulr#vlao|)cetn\\\"jp$\",\n    \"Dxkmc%ot(hhxomwwai\u007F'{hln\",\n    \"hd{#}js&(pe~'sg#gprb(3#\\\"\",\n    \"hd{b${\",\n    \"<;vqkijbq33271:56<3799?24944:\",\n    \"Thof$lu'ofdn,!qsefc'az*bnrcma+&Om{o+iu\\\"`khct$)bnrd\\\"bcdoi&\",\n    \"snofplkb{)c\u007F'r\\\"lod\u007F'|f*aurv#cpno`abchijklmno\"\n];\n\nexport default definePlugin({\n    name: \"LoadingQuotes\",\n    description: \"Replace Discords loading quotes\",\n    authors: [Devs.Ven, Devs.KraXen72],\n    patches: [\n        {\n            find: \".LOADING_DID_YOU_KNOW\",\n            replacement: {\n                match: /\\._loadingText=.+?random\\(.+?;/s,\n                replace: \"._loadingText=Vencord.Plugins.plugins.LoadingQuotes.quote;\",\n            },\n        },\n    ],\n\n    xor(quote: string) {\n        const key = \"read if cute\";\n        const codes = Array.from(quote, (s, i) => s.charCodeAt(0) ^ (i % key.length));\n        return String.fromCharCode(...codes);\n    },\n\n    get quote() {\n        return this.xor(quotes[Math.floor(Math.random() * quotes.length)]);\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { addClickListener, removeClickListener } from \"../api/MessageEvents\";\nimport { migratePluginSettings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport { lazyWebpack } from \"../utils/misc\";\nimport definePlugin from \"../utils/types\";\nimport { filters } from \"../webpack\";\nimport { UserStore } from \"../webpack/common\";\n\nlet isDeletePressed = false;\nconst keydown = (e: KeyboardEvent) => e.key === \"Backspace\" && (isDeletePressed = true);\nconst keyup = (e: KeyboardEvent) => e.key === \"Backspace\" && (isDeletePressed = false);\n\nmigratePluginSettings(\"MessageClickActions\", \"MessageQuickActions\");\n\nexport default definePlugin({\n    name: \"MessageClickActions\",\n    description: \"Hold Delete and click to delete, double click to edit\",\n    authors: [Devs.Ven],\n    dependencies: [\"MessageEventsAPI\"],\n\n    start() {\n        const MessageActions = lazyWebpack(filters.byProps(\"deleteMessage\", \"startEditMessage\"));\n        const PermissionStore = lazyWebpack(filters.byProps(\"can\", \"initialize\"));\n        const Permissions = lazyWebpack(m => typeof m.MANAGE_MESSAGES === \"bigint\");\n        const EditStore = lazyWebpack(filters.byProps(\"isEditing\", \"isEditingAny\"));\n\n        document.addEventListener(\"keydown\", keydown);\n        document.addEventListener(\"keyup\", keyup);\n\n        this.onClick = addClickListener((msg, chan, event) => {\n            const isMe = msg.author.id === UserStore.getCurrentUser().id;\n            if (!isDeletePressed) {\n                if (isMe && event.detail >= 2 && !EditStore.isEditing(chan.id, msg.id)) {\n                    MessageActions.startEditMessage(chan.id, msg.id, msg.content);\n                    event.preventDefault();\n                }\n            } else if (isMe || PermissionStore.can(Permissions.MANAGE_MESSAGES, chan)) {\n                MessageActions.deleteMessage(chan.id, msg.id);\n                event.preventDefault();\n            }\n        });\n    },\n\n    stop() {\n        removeClickListener(this.onClick);\n        document.removeEventListener(\"keydown\", keydown);\n        document.removeEventListener(\"keyup\", keyup);\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Settings } from \"../../api/settings\";\nimport ErrorBoundary from \"../../components/ErrorBoundary\";\nimport { Devs } from \"../../utils/constants\";\nimport Logger from \"../../utils/Logger\";\nimport { lazyWebpack } from \"../../utils/misc\";\nimport definePlugin, { OptionType } from \"../../utils/types\";\nimport { filters } from \"../../webpack\";\nimport { Parser, UserStore } from \"../../webpack/common\";\n\nfunction addDeleteStyleClass() {\n    if (Settings.plugins.MessageLogger.deleteStyle === \"text\") {\n        document.body.classList.remove(\"messagelogger-red-overlay\");\n        document.body.classList.add(\"messagelogger-red-text\");\n    } else {\n        document.body.classList.remove(\"messagelogger-red-text\");\n        document.body.classList.add(\"messagelogger-red-overlay\");\n    }\n}\n\nexport default definePlugin({\n    name: \"MessageLogger\",\n    description: \"Temporarily logs deleted and edited messages.\",\n    authors: [Devs.rushii, Devs.Ven],\n\n    timestampModule: null as any,\n    moment: null as Function | null,\n\n    css: `\n        .messagelogger-red-overlay .messageLogger-deleted {\n            background-color: rgba(240, 71, 71, 0.15);\n        }\n        .messagelogger-red-text .messageLogger-deleted div {\n            color: #f04747;\n        }\n\n        .messageLogger-deleted [class^=\"buttons\"] {\n            display: none;\n        }\n\n        .messageLogger-deleted-attachment {\n            filter: grayscale(1);\n        }\n\n        .messageLogger-deleted-attachment:hover {\n            filter: grayscale(0);\n            transition: 250ms filter linear;\n        }\n\n        .theme-dark .messageLogger-edited {\n            filter: brightness(80%);\n        }\n\n        .theme-light .messageLogger-edited {\n            opacity: 0.5;\n        }\n    `,\n\n    start() {\n        this.moment = lazyWebpack(filters.byProps(\"relativeTimeRounding\", \"relativeTimeThreshold\"));\n        this.timestampModule = lazyWebpack(filters.byProps(\"messageLogger_TimestampComponent\"));\n\n        const style = this.style = document.createElement(\"style\");\n        style.textContent = this.css;\n        style.id = \"MessageLogger-css\";\n        document.head.appendChild(style);\n\n        addDeleteStyleClass();\n    },\n\n    stop() {\n        this.style?.remove();\n\n        document.querySelectorAll(\".messageLogger-deleted\").forEach(e => e.remove());\n        document.querySelectorAll(\".messageLogger-edited\").forEach(e => e.remove());\n        document.body.classList.remove(\"messagelogger-red-overlay\");\n        document.body.classList.remove(\"messagelogger-red-text\");\n    },\n\n    renderEdit(edit: { timestamp: any, content: string; }) {\n        const Timestamp = this.timestampModule.messageLogger_TimestampComponent;\n        return (\n            <ErrorBoundary noop>\n                <div className=\"messageLogger-edited\">\n                    {Parser.parse(edit.content)}\n                    <Timestamp\n                        timestamp={edit.timestamp}\n                        isEdited={true}\n                        isInline={false}\n                    >\n                        <span>{\" \"}(edited)</span>\n                    </Timestamp>\n                </div>\n            </ErrorBoundary>\n        );\n    },\n\n    makeEdit(newMessage: any, oldMessage: any): any {\n        return {\n            timestamp: this.moment?.call(newMessage.edited_timestamp),\n            content: oldMessage.content\n        };\n    },\n\n    options: {\n        deleteStyle: {\n            type: OptionType.SELECT,\n            description: \"The style of deleted messages\",\n            default: \"text\",\n            options: [\n                { label: \"Red text\", value: \"text\", default: true },\n                { label: \"Red overlay\", value: \"overlay\" }\n            ],\n            onChange: () => addDeleteStyleClass()\n        },\n        ignoreBots: {\n            type: OptionType.BOOLEAN,\n            description: \"Whether to ignore messages by bots\",\n            default: false\n        },\n        ignoreSelf: {\n            type: OptionType.BOOLEAN,\n            description: \"Whether to ignore messages by yourself\",\n            default: false\n        }\n    },\n\n    handleDelete(cache: any, data: { ids: string[], id: string; }, isBulk: boolean) {\n        try {\n            if (cache == null || (!isBulk && !cache.has(data.id))) return cache;\n\n            const { ignoreBots, ignoreSelf } = Settings.plugins.MessageLogger;\n            const myId = UserStore.getCurrentUser().id;\n\n            function mutate(id: string) {\n                const msg = cache.get(id);\n                if (!msg) return;\n\n                const EPHEMERAL = 64;\n                const shouldIgnore = (msg.flags & EPHEMERAL) === EPHEMERAL ||\n                    ignoreBots && msg.author?.bot ||\n                    ignoreSelf && msg.author?.id === myId;\n\n                if (shouldIgnore) {\n                    cache = cache.remove(id);\n                } else {\n                    cache = cache.update(id, m => m\n                        .set(\"deleted\", true)\n                        .set(\"attachments\", m.attachments.map(a => (a.deleted = true, a))));\n                }\n            }\n\n            if (isBulk) {\n                data.ids.forEach(mutate);\n            } else {\n                mutate(data.id);\n            }\n        } catch (e) {\n            new Logger(\"MessageLogger\").error(\"Error during handleDelete\", e);\n        }\n        return cache;\n    },\n\n    // Based on canary 9ab8626bcebceaea6da570b9c586172d02b9c996\n    patches: [\n        {\n            // MessageStore\n            // Module 171447\n            find: \"displayName=\\\"MessageStore\\\"\",\n            replacement: [\n                {\n                    // Add deleted=true to all target messages in the MESSAGE_DELETE event\n                    match: /MESSAGE_DELETE:function\\((\\w)\\){var .+?((?:\\w{1,2}\\.){2})getOrCreate.+?},/,\n                    replace:\n                        \"MESSAGE_DELETE:function($1){\" +\n                        \"   var cache = $2getOrCreate($1.channelId);\" +\n                        \"   cache = Vencord.Plugins.plugins.MessageLogger.handleDelete(cache, $1, false);\" +\n                        \"   $2commit(cache);\" +\n                        \"},\"\n                },\n                {\n                    // Add deleted=true to all target messages in the MESSAGE_DELETE_BULK event\n                    match: /MESSAGE_DELETE_BULK:function\\((\\w)\\){var .+?((?:\\w{1,2}\\.){2})getOrCreate.+?},/,\n                    replace:\n                        \"MESSAGE_DELETE_BULK:function($1){\" +\n                        \"   var cache = $2getOrCreate($1.channelId);\" +\n                        \"   cache = Vencord.Plugins.plugins.MessageLogger.handleDelete(cache, $1, true);\" +\n                        \"   $2commit(cache);\" +\n                        \"},\"\n                },\n                {\n                    // Add current cached content + new edit time to cached message's editHistory\n                    match: /(MESSAGE_UPDATE:function\\((\\w)\\).+?)\\.update\\((\\w)/,\n                    replace: \"$1\" +\n                        \".update($3,m =>\" +\n                        \"   $2.message.content !== m.editHistory?.[0]?.content && $2.message.content !== m.content ?\" +\n                        \"       m.set('editHistory',[...(m.editHistory || []), Vencord.Plugins.plugins.MessageLogger.makeEdit($2.message, m)]) :\" +\n                        \"       m\" +\n                        \")\" +\n                        \".update($3\"\n                }\n            ]\n        },\n\n        {\n            // Message domain model\n            // Module 451\n            find: \"isFirstMessageInForumPost=function\",\n            replacement: [\n                {\n                    match: /(\\w)\\.customRenderedContent=(\\w)\\.customRenderedContent;/,\n                    replace: \"$1.customRenderedContent = $2.customRenderedContent;\" +\n                        \"$1.deleted = $2.deleted || false;\" +\n                        \"$1.editHistory = $2.editHistory || [];\"\n                }\n            ]\n        },\n\n        {\n            // Updated message transformer(?)\n            // Module 819525\n            find: \"THREAD_STARTER_MESSAGE?null===\",\n            replacement: [\n                // {\n                //     // DEBUG: Log the params of the target function to the patch below\n                //     match: /function N\\(e,t\\){/,\n                //     replace: \"function L(e,t){console.log('pre-transform', e, t);\"\n                // },\n                {\n                    // Pass through editHistory & deleted & original attachments to the \"edited message\" transformer\n                    match: /interactionData:(\\w)\\.interactionData/,\n                    replace:\n                        \"interactionData:$1.interactionData,\" +\n                        \"deleted:$1.deleted,\" +\n                        \"editHistory:$1.editHistory,\" +\n                        \"attachments:$1.attachments\"\n                },\n\n                // {\n                //     // DEBUG: Log the params of the target function to the patch below\n                //     match: /function R\\(e\\){/,\n                //     replace: \"function R(e){console.log('after-edit-transform', arguments);\"\n                // },\n                {\n                    // Construct new edited message and add editHistory & deleted (ref above)\n                    // Pass in custom data to attachment parser to mark attachments deleted as well\n                    match: /attachments:(\\w{1,2})\\((\\w)\\)/,\n                    replace:\n                        \"attachments: $1((() => {\" +\n                        \"   let old = arguments[1]?.attachments;\" +\n                        \"   if (!old) return $2;\" +\n                        \"   let new_ = $2.attachments?.map(a => a.id) ?? [];\" +\n                        \"   let diff = old.filter(a => !new_.includes(a.id));\" +\n                        \"   old.forEach(a => a.deleted = true);\" +\n                        \"   $2.attachments = [...diff, ...$2.attachments];\" +\n                        \"   return $2;\" +\n                        \"})()),\" +\n                        \"deleted: arguments[1]?.deleted,\" +\n                        \"editHistory: arguments[1]?.editHistory\"\n                },\n                {\n                    // Preserve deleted attribute on attachments\n                    match: /(\\((\\w)\\){return null==\\2\\.attachments.+?)spoiler:/,\n                    replace:\n                        \"$1deleted: arguments[0]?.deleted,\" +\n                        \"spoiler:\"\n                }\n            ]\n        },\n\n        {\n            // Attachment renderer\n            // Module 96063\n            find: \"[\\\"className\\\",\\\"attachment\\\",\\\"inlineMedia\\\"]\",\n            replacement: [\n                {\n                    match: /((\\w)\\.className,\\w=\\2\\.attachment),/,\n                    replace: \"$1,deleted=$2.attachment?.deleted,\"\n                },\n                {\n                    match: /(hiddenSpoilers:\\w,className:)/,\n                    replace: \"$1 (deleted ? 'messageLogger-deleted-attachment ' : '') +\"\n                }\n            ]\n        },\n\n        {\n            // Base message component renderer\n            // Module 748241\n            find: \"Message must not be a thread starter message\",\n            replacement: [\n                {\n                    // Write message.deleted to deleted var\n                    match: /var (\\w)=(\\w).id,(?=\\w=\\w.message)/,\n                    replace: \"var $1=$2.id,deleted=$2.message.deleted,\"\n                },\n                {\n                    // Append messageLogger-deleted to classNames if deleted\n                    match: /\\)\\(\"li\",\\{(.+?),className:/,\n                    replace: \")(\\\"li\\\",{$1,className:(deleted ? \\\"messageLogger-deleted \\\" : \\\"\\\")+\"\n                }\n            ]\n        },\n\n        {\n            // Message content renderer\n            // Module 43016\n            find: \"Messages.MESSAGE_EDITED,\\\")\\\"\",\n            replacement: [\n                {\n                    // Render editHistory in the deepest div for message content\n                    match: /(\\)\\(\"div\",\\{id:.+?children:\\[)/,\n                    replace: \"$1 (arguments[0].message.editHistory.length > 0 ? arguments[0].message.editHistory.map(edit => Vencord.Plugins.plugins.MessageLogger.renderEdit(edit)) : null), \"\n                }\n            ]\n        },\n\n        {\n            // ReferencedMessageStore\n            // Module 778667\n            find: \"displayName=\\\"ReferencedMessageStore\\\"\",\n            replacement: [\n                {\n                    match: /MESSAGE_DELETE:function\\((\\w)\\).+?},/,\n                    replace: \"MESSAGE_DELETE:function($1){},\"\n                },\n                {\n                    match: /MESSAGE_DELETE_BULK:function\\((\\w)\\).+?},/,\n                    replace: \"MESSAGE_DELETE_BULK:function($1){},\"\n                }\n            ]\n        },\n\n        {\n            // Message \"(edited)\" timestamp component\n            // Module 23552\n            find: \"Messages.MESSAGE_EDITED_TIMESTAMP_A11Y_LABEL.format\",\n            replacement: {\n                // Re-export the timestamp component under a findable name\n                match: /{(\\w{1,2}:\\(\\)=>(\\w{1,2}))}/,\n                replace: \"{$1,messageLogger_TimestampComponent:()=>$2}\"\n            }\n        },\n\n        {\n            // Message context base menu\n            // Module 600300\n            find: \"id:\\\"remove-reactions\\\"\",\n            replacement: [\n                {\n                    // Remove the first section if message is deleted\n                    match: /children:(\\[\"\"===.+?\\])/,\n                    replace: \"children:arguments[0].message.deleted?[]:$1\"\n                }\n            ]\n        }\n\n        // {\n        //     // MessageStore caching internals\n        //     // Module 819525\n        //     find: \"e.getOrCreate=function(t)\",\n        //     replacement: [\n        //         // {\n        //         //     // DEBUG: log getOrCreate return values from MessageStore caching internals\n        //         //     match: /getOrCreate=function(.+?)return/,\n        //         //     replace: \"getOrCreate=function$1console.log('getOrCreate',n);return\"\n        //         // }\n        //     ]\n        // }\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { DataStore } from \"../api\";\nimport { ApplicationCommandInputType, ApplicationCommandOptionType, findOption, registerCommand, sendBotMessage, unregisterCommand } from \"../api/Commands\";\nimport { Settings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin, { OptionType } from \"../utils/types\";\n\nconst EMOTE = \"<:luna:1035316192220553236>\";\nconst DATA_KEY = \"MessageTags_TAGS\";\nconst MessageTagsMarker = Symbol(\"MessageTags\");\nconst author = {\n    id: \"821472922140803112\",\n    bot: false\n};\n\ninterface Tag {\n    name: string;\n    message: string;\n    enabled: boolean;\n}\n\nconst getTags = () => DataStore.get(DATA_KEY).then<Tag[]>(t => t ?? []);\nconst getTag = (name: string) => DataStore.get(DATA_KEY).then<Tag | null>((t: Tag[]) => (t ?? []).find((tt: Tag) => tt.name === name) ?? null);\nconst addTag = async (tag: Tag) => {\n    const tags = await getTags();\n    tags.push(tag);\n    DataStore.set(DATA_KEY, tags);\n    return tags;\n};\nconst removeTag = async (name: string) => {\n    let tags = await getTags();\n    tags = await tags.filter((t: Tag) => t.name !== name);\n    DataStore.set(DATA_KEY, tags);\n    return tags;\n};\n\nfunction createTagCommand(tag: Tag) {\n    registerCommand({\n        name: tag.name,\n        description: tag.name,\n        inputType: ApplicationCommandInputType.BUILT_IN_TEXT,\n        execute: async (_, ctx) => {\n            if (!await getTag(tag.name)) {\n                sendBotMessage(ctx.channel.id, {\n                    author,\n                    content: `${EMOTE} The tag **${tag.name}** does not exist anymore! Please reload ur Discord to fix :)`\n                });\n                return { content: `/${tag.name}` };\n            }\n\n            if (Settings.plugins.MessageTags.clyde) sendBotMessage(ctx.channel.id, {\n                author,\n                content: `${EMOTE} The tag **${tag.name}** has been sent!`\n            });\n            return { content: tag.message.replaceAll(\"\\\\n\", \"\\n\") };\n        },\n        [MessageTagsMarker]: true,\n    }, \"CustomTags\");\n}\n\n\nexport default definePlugin({\n    name: \"MessageTags\",\n    description: \"Allows you to save messages and to use them with a simple command.\",\n    authors: [Devs.Luna],\n    options: {\n        clyde: {\n            name: \"Clyde message on send\",\n            description: \"If enabled, clyde will send you an ephemeral message when a tag was used.\",\n            type: OptionType.BOOLEAN,\n            default: true\n        }\n    },\n    dependencies: [\"CommandsAPI\"],\n\n    async start() {\n        for (const tag of await getTags()) createTagCommand(tag);\n    },\n\n    commands: [\n        {\n            name: \"tags\",\n            description: \"Manage all the tags for yourself\",\n            inputType: ApplicationCommandInputType.BUILT_IN,\n            options: [\n                {\n                    name: \"create\",\n                    description: \"Create a new tag\",\n                    type: ApplicationCommandOptionType.SUB_COMMAND,\n                    options: [\n                        {\n                            name: \"tag-name\",\n                            description: \"The name of the tag to trigger the response\",\n                            type: ApplicationCommandOptionType.STRING,\n                            required: true\n                        },\n                        {\n                            name: \"message\",\n                            description: \"The message that you will send when using this tag\",\n                            type: ApplicationCommandOptionType.STRING,\n                            required: true\n                        }\n                    ]\n                },\n                {\n                    name: \"list\",\n                    description: \"List all tags from yourself\",\n                    type: ApplicationCommandOptionType.SUB_COMMAND,\n                    options: []\n                },\n                {\n                    name: \"delete\",\n                    description: \"Remove a tag from your yourself\",\n                    type: ApplicationCommandOptionType.SUB_COMMAND,\n                    options: [\n                        {\n                            name: \"tag-name\",\n                            description: \"The name of the tag to trigger the response\",\n                            type: ApplicationCommandOptionType.STRING,\n                            required: true\n                        }\n                    ]\n                },\n                {\n                    name: \"preview\",\n                    description: \"Preview a tag without sending it publicly\",\n                    type: ApplicationCommandOptionType.SUB_COMMAND,\n                    options: [\n                        {\n                            name: \"tag-name\",\n                            description: \"The name of the tag to trigger the response\",\n                            type: ApplicationCommandOptionType.STRING,\n                            required: true\n                        }\n                    ]\n                }\n            ],\n\n            async execute(args, ctx) {\n\n                switch (args[0].name) {\n                    case \"create\": {\n                        const name: string = findOption(args[0].options, \"tag-name\", \"\");\n                        const message: string = findOption(args[0].options, \"message\", \"\");\n\n                        if (await getTag(name))\n                            return sendBotMessage(ctx.channel.id, {\n                                author,\n                                content: `${EMOTE} A Tag with the name **${name}** already exists!`\n                            });\n\n                        const tag = {\n                            name: name,\n                            enabled: true,\n                            message: message\n                        };\n\n                        createTagCommand(tag);\n                        await addTag(tag);\n\n                        sendBotMessage(ctx.channel.id, {\n                            author,\n                            content: `${EMOTE} Successfully created the tag **${name}**!`\n                        });\n                        break; // end 'create'\n                    }\n                    case \"delete\": {\n                        const name: string = findOption(args[0].options, \"tag-name\", \"\");\n\n                        if (!await getTag(name))\n                            return sendBotMessage(ctx.channel.id, {\n                                author,\n                                content: `${EMOTE} A Tag with the name **${name}** does not exist!`\n                            });\n\n                        unregisterCommand(name);\n                        await removeTag(name);\n\n                        sendBotMessage(ctx.channel.id, {\n                            author,\n                            content: `${EMOTE} Successfully deleted the tag **${name}**!`\n                        });\n                        break; // end 'delete'\n                    }\n                    case \"list\": {\n                        sendBotMessage(ctx.channel.id, {\n                            author,\n                            embeds: [\n                                {\n                                    // @ts-ignore\n                                    title: \"All Tags:\",\n                                    // @ts-ignore\n                                    description: (await getTags())\n                                        .map(tag => `\\`${tag.name}\\`: ${tag.message.slice(0, 72).replaceAll(\"\\\\n\", \" \")}${tag.message.length > 72 ? \"...\" : \"\"}`)\n                                        .join(\"\\n\") || `${EMOTE} Woops! There are no tags yet, use \\`/tags create\\` to create one!`,\n                                    // @ts-ignore\n                                    color: 0xd77f7f,\n                                    type: \"rich\",\n                                }\n                            ]\n                        });\n                        break; // end 'list'\n                    }\n                    case \"preview\": {\n                        const name: string = findOption(args[0].options, \"tag-name\", \"\");\n                        const tag = await getTag(name);\n\n                        if (!tag)\n                            return sendBotMessage(ctx.channel.id, {\n                                author,\n                                content: `${EMOTE} A Tag with the name **${name}** does not exist!`\n                            });\n\n                        sendBotMessage(ctx.channel.id, {\n                            author,\n                            content: tag.message.replaceAll(\"\\\\n\", \"\\n\")\n                        });\n                        break; // end 'preview'\n                    }\n                }\n\n                return sendBotMessage(ctx.channel.id, {\n                    author,\n                    content: \"Invalid sub-command\"\n                });\n            }\n        }\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated, Samu and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ApplicationCommandInputType, findOption, OptionalMessageOption, RequiredMessageOption, sendBotMessage } from \"../api/Commands\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\n\nfunction mock(input: string): string {\n    let output = \"\";\n    for (let i = 0; i < input.length; i++) {\n        output += i % 2 ? input[i].toUpperCase() : input[i].toLowerCase();\n    }\n    return output;\n}\n\nexport default definePlugin({\n    name: \"MoreCommands\",\n    description: \"echo, lenny, mock\",\n    authors: [Devs.Arjix, Devs.echo, Devs.Samu],\n    dependencies: [\"CommandsAPI\"],\n    commands: [\n        {\n            name: \"echo\",\n            description: \"Sends a message as Clyde (locally)\",\n            options: [OptionalMessageOption],\n            inputType: ApplicationCommandInputType.BOT,\n            execute: (opts, ctx) => {\n                const content = findOption(opts, \"message\", \"\");\n\n                sendBotMessage(ctx.channel.id, { content });\n            },\n        },\n        {\n            name: \"lenny\",\n            description: \"Sends a lenny face\",\n            options: [OptionalMessageOption],\n            execute: opts => ({\n                content: findOption(opts, \"message\", \"\") + \" ( \u0361\u00B0 \u035C\u0296 \u0361\u00B0)\"\n            }),\n        },\n        {\n            name: \"mock\",\n            description: \"mOcK PeOpLe\",\n            options: [RequiredMessageOption],\n            execute: opts => ({\n                content: mock(findOption(opts, \"message\", \"\"))\n            }),\n        },\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { findOption, OptionalMessageOption } from \"../api/Commands\";\nimport { migratePluginSettings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nmigratePluginSettings(\"MoreKaomoji\", \"moarKaomojis\");\nexport default definePlugin({\n    name: \"MoreKaomoji\",\n    description: \"Adds more Kaomoji to discord. \u30FD(\u00B4\u25BD`)/\",\n    authors: [Devs.JacobTm],\n    dependencies: [\"CommandsAPI\"],\n    commands: [\n        { name: \"dissatisfaction\", description: \" \uFF1E\uFE4F\uFF1C\" },\n        { name: \"smug\", description: \" \u0CA0_\u0CA0\" },\n        { name: \"happy\", description: \" \u30FD(\u00B4\u25BD`)/\" },\n        { name: \"crying\", description: \" \u0CA5_\u0CA5\" },\n        { name: \"angry\", description: \" \u30FD(\uFF40\u0414\u00B4)\uFF89\" },\n        { name: \"anger\", description: \" \u30FD(\uFF4F`\u76BF\u2032\uFF4F)\uFF89\" },\n        { name: \"joy\", description: \" <(\uFFE3\uFE36\uFFE3)>\" },\n    ].map(data => ({\n        ...data,\n        options: [OptionalMessageOption],\n        execute: opts => ({\n            content: findOption(opts, \"message\", \"\") + data.description\n        })\n    }))\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Message, ReactionEmoji } from \"discord-types/general\";\n\nimport { makeRange } from \"../components/PluginSettings/components/SettingSliderComponent\";\nimport { Devs } from \"../utils/constants\";\nimport { sleep } from \"../utils/misc\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { Settings } from \"../Vencord\";\nimport { FluxDispatcher, SelectedChannelStore, UserStore } from \"../webpack/common\";\n\ninterface IMessageCreate {\n    type: \"MESSAGE_CREATE\";\n    optimistic: boolean;\n    isPushNotification: boolean;\n    channelId: string;\n    message: Message;\n}\n\ninterface IReactionAdd {\n    type: \"MESSAGE_REACTION_ADD\";\n    optimistic: boolean;\n    channelId: string;\n    messageId: string;\n    userId: \"195136840355807232\";\n    emoji: ReactionEmoji;\n}\n\ninterface IVoiceChannelEffectSendEvent {\n    type: string;\n    emoji?: ReactionEmoji; // Just in case...\n    channelId: string;\n    userId: string;\n    animationType: number;\n    animationId: number;\n}\n\nconst MOYAI = \"\uD83D\uDDFF\";\nconst MOYAI_URL =\n    \"https://raw.githubusercontent.com/MeguminSama/VencordPlugins/main/plugins/moyai/moyai.mp3\";\n\nexport default definePlugin({\n    name: \"Moyai\",\n    authors: [Devs.Megu, Devs.Nuckyz],\n    description: \"\uD83D\uDDFF\uD83D\uDDFF\uD83D\uDDFF\uD83D\uDDFF\uD83D\uDDFF\uD83D\uDDFF\uD83D\uDDFF\uD83D\uDDFF\",\n\n    async onMessage(e: IMessageCreate) {\n        if (e.optimistic || e.type !== \"MESSAGE_CREATE\") return;\n        if (e.message.state === \"SENDING\") return;\n        if (Settings.plugins.Moyai.ignoreBots && e.message.author?.bot) return;\n        if (!e.message.content) return;\n        if (e.channelId !== SelectedChannelStore.getChannelId()) return;\n\n        const moyaiCount = getMoyaiCount(e.message.content);\n\n        for (let i = 0; i < moyaiCount; i++) {\n            boom();\n            await sleep(300);\n        }\n    },\n\n    onReaction(e: IReactionAdd) {\n        if (e.optimistic || e.type !== \"MESSAGE_REACTION_ADD\") return;\n        if (Settings.plugins.Moyai.ignoreBots && UserStore.getUser(e.userId)?.bot) return;\n        if (e.channelId !== SelectedChannelStore.getChannelId()) return;\n\n        const name = e.emoji.name.toLowerCase();\n        if (name !== MOYAI && !name.includes(\"moyai\") && !name.includes(\"moai\")) return;\n\n        boom();\n    },\n\n    onVoiceChannelEffect(e: IVoiceChannelEffectSendEvent) {\n        if (!e.emoji?.name) return;\n        const name = e.emoji.name.toLowerCase();\n        if (name !== MOYAI && !name.includes(\"moyai\") && !name.includes(\"moai\")) return;\n\n        boom();\n    },\n\n    start() {\n        FluxDispatcher.subscribe(\"MESSAGE_CREATE\", this.onMessage);\n        FluxDispatcher.subscribe(\"MESSAGE_REACTION_ADD\", this.onReaction);\n        FluxDispatcher.subscribe(\"VOICE_CHANNEL_EFFECT_SEND\", this.onVoiceChannelEffect);\n    },\n\n    stop() {\n        FluxDispatcher.unsubscribe(\"MESSAGE_CREATE\", this.onMessage);\n        FluxDispatcher.unsubscribe(\"MESSAGE_REACTION_ADD\", this.onReaction);\n        FluxDispatcher.unsubscribe(\"VOICE_CHANNEL_EFFECT_SEND\", this.onVoiceChannelEffect);\n    },\n\n    options: {\n        volume: {\n            description: \"Volume of the \uD83D\uDDFF\uD83D\uDDFF\uD83D\uDDFF\",\n            type: OptionType.SLIDER,\n            markers: makeRange(0, 1, 0.1),\n            default: 0.5,\n            stickToMarkers: false,\n        },\n        triggerWhenUnfocused: {\n            description: \"Trigger the \uD83D\uDDFF even when the window is unfocused\",\n            type: OptionType.BOOLEAN,\n            default: true,\n            restartNeeded: false,\n        },\n        ignoreBots: {\n            description: \"Ignore bots\",\n            type: OptionType.BOOLEAN,\n            default: true,\n            restartNeeded: false,\n        }\n    }\n});\n\nfunction countOccurrences(sourceString: string, subString: string) {\n    let i = 0;\n    let lastIdx = 0;\n    while ((lastIdx = sourceString.indexOf(subString, lastIdx) + 1) !== 0)\n        i++;\n\n    return i;\n}\n\nfunction countMatches(sourceString: string, pattern: RegExp) {\n    if (!pattern.global)\n        throw new Error(\"pattern must be global\");\n\n    let i = 0;\n    while (pattern.test(sourceString))\n        i++;\n\n    return i;\n}\n\nconst customMoyaiRe = /<a?:\\w*moy?ai\\w*:\\d{17,20}>/gi;\n\nfunction getMoyaiCount(message: string) {\n    const count = countOccurrences(message, MOYAI)\n        + countMatches(message, customMoyaiRe);\n\n    return Math.min(count, 10);\n}\n\nfunction boom() {\n    if (!Settings.plugins.Moyai.triggerWhenUnfocused && !document.hasFocus()) return;\n    const audioElement = document.createElement(\"audio\");\n    audioElement.src = MOYAI_URL;\n    audioElement.volume = Settings.plugins.Moyai.volume;\n    audioElement.play();\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"MuteNewGuild\",\n    description: \"Mutes newly joined guilds\",\n    authors: [Devs.Glitch],\n    patches: [\n        {\n            find: \",acceptInvite:function\",\n            replacement: {\n                match: /(\\w=null!==[^;]+)/,\n                replace: \"$1;Vencord.Webpack.findByProps('updateGuildNotificationSettings').updateGuildNotificationSettings($1,{'muted':true,'suppress_everyone':true,'suppress_roles':true})\"\n            }\n        }\n    ],\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport { lazyWebpack } from \"../utils/misc\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { Settings } from \"../Vencord\";\nimport { filters } from \"../webpack\";\nconst RelationshipStore = lazyWebpack(filters.byProps(\"getRelationships\", \"isBlocked\"));\n\nexport default definePlugin({\n    name: \"NoBlockedMessages\",\n    description: \"Hides all blocked messages from chat completely.\",\n    authors: [Devs.rushii, Devs.Samu],\n    patches: [\n        {\n            find: 'safety_prompt:\"DMSpamExperiment\",response:\"show_redacted_messages\"',\n            replacement: [\n                {\n                    match: /\\.collapsedReason;return/,\n                    replace: \".collapsedReason;return null;return;\"\n                }\n            ]\n        },\n        {\n            find: \"displayName=\\\"MessageStore\\\"\",\n            predicate: () => Settings.plugins.NoBlockedMessages.ignoreBlockedMessages === true,\n            replacement: [\n                {\n                    match: /(?<=MESSAGE_CREATE:function\\((\\w)\\){var \\w=\\w\\.channelId,\\w=\\w\\.message,\\w=\\w\\.isPushNotification,\\w=\\w\\.\\w\\.getOrCreate\\(\\w\\));/,\n                    replace: \";if(Vencord.Plugins.plugins.NoBlockedMessages.isBlocked(n))return;\"\n                }\n            ]\n        }\n    ],\n    options: {\n        ignoreBlockedMessages: {\n            description: \"Completely ignores (recent) incoming messages from blocked users (locally).\",\n            type: OptionType.BOOLEAN,\n            default: false,\n            restartNeeded: true,\n        },\n    },\n    isBlocked: message =>\n        RelationshipStore.isBlocked(message.author.id)\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Samu and Linnea Gr\u00E4f\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { addPreSendListener, MessageObject, removePreSendListener } from \"../api/MessageEvents\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { Settings } from \"../Vencord\";\n\nexport default definePlugin({\n    name: \"NoCanaryMessageLinks\",\n    description: \"Allows you to change/remove the subdomain of discord message and channel links\",\n    authors: [Devs.Samu, Devs.nea],\n    options: {\n        linkPrefix: {\n            description: \"The subdomain for your discord message links\",\n            type: OptionType.STRING,\n            default: \"\",\n            restartNeeded: false,\n        },\n        alwaysUseDiscordHost: {\n            description: \"Always use discord.com host (replace discordapp.com)\",\n            type: OptionType.BOOLEAN,\n            default: false,\n            restartNeeded: false,\n        },\n    },\n    dependencies: [\"MessageEventsAPI\"],\n\n    removeBetas(msg: MessageObject) {\n        const settings = Settings.plugins.NoCanaryMessageLinks;\n        msg.content = msg.content.replace(\n            /https:\\/\\/(?:canary\\.|ptb\\.)?(discord(?:app)?\\.com)(\\/channels\\/(?:\\d{17,20}|@me)\\/\\d{17,20}(?:\\/\\d{17,20})?)/g,\n            (_, host, path) => \"https://\" + (settings.linkPrefix ? settings.linkPrefix + \".\" : \"\") + (settings.alwaysUseDiscordHost ? \"discord.com\" : host) + path\n        );\n    },\n\n    start() {\n        this.preSend = addPreSendListener((_, msg) => this.removeBetas(msg));\n    },\n\n    stop() {\n        removePreSendListener(this.preSend);\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { migratePluginSettings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nmigratePluginSettings(\"NoDevtoolsWarning\", \"STFU\");\n\nexport default definePlugin({\n    name: \"NoDevtoolsWarning\",\n    description: \"Disables the 'HOLD UP' banner in the console\",\n    authors: [Devs.Ven],\n    patches: [{\n        find: \"setDevtoolsCallbacks\",\n        replacement: {\n            match: /if\\(.{0,10}\\|\\|\"0.0.0\"!==.{0,2}\\.remoteApp\\.getVersion\\(\\)\\)/,\n            replace: \"if(false)\"\n        }\n    }]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"No F1\",\n    description: \"Disables F1 help bind.\",\n    authors: [Devs.Cyn],\n    patches: [\n        {\n            find: ',\"f1\"],comboKeysBindGlobal:',\n            replacement: {\n                match: ',\"f1\"],comboKeysBindGlobal:',\n                replace: \"],comboKeysBindGlobal:\",\n            },\n        },\n    ],\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"No RPC\",\n    description: \"Disables Discord's RPC server.\",\n    authors: [Devs.Cyn],\n    target: \"DESKTOP\",\n    patches: [\n        {\n            find: '.ensureModule(\"discord_rpc\")',\n            replacement: {\n                match: /\\.ensureModule\\(\"discord_rpc\"\\)\\.then\\(\\(.+?\\)\\)}/,\n                replace: '.ensureModule(\"discord_rpc\")}',\n            },\n        },\n    ],\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"NoReplyMention\",\n    description: \"Disables reply pings by default\",\n    authors: [Devs.DustyAngel47],\n    patches: [\n        {\n            find: \"CREATE_PENDING_REPLY:function\",\n            replacement: {\n                match: /CREATE_PENDING_REPLY:function\\((.{1,2})\\){/,\n                replace: \"CREATE_PENDING_REPLY:function($1){$1.shouldMention=false;\"\n            }\n        }\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"NoSystemBadge\",\n    description: \"Disables the taskbar and system tray unread count badge.\",\n    authors: [Devs.rushii],\n    target: \"DESKTOP\",\n    patches: [\n        {\n            find: \"setSystemTrayApplications:function\",\n            replacement: [\n                {\n                    match: /setBadge:function.+?},/,\n                    replace: \"setBadge:function(){},\"\n                },\n                {\n                    match: /setSystemTrayIcon:function.+?},/,\n                    replace: \"setSystemTrayIcon:function(){},\"\n                }\n            ]\n        }\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"NoTrack\",\n    description: \"Disable Discord's tracking and crash reporting\",\n    authors: [Devs.Cyn],\n    required: true,\n    patches: [\n        {\n            find: \"TRACKING_URL:\",\n            replacement: {\n                match: /^.+$/,\n                replace: \"()=>{}\",\n            },\n        },\n        {\n            find: \"window.DiscordSentry=\",\n            replacement: {\n                match: /window\\.DiscordSentry=function.+\\}\\(\\)/,\n                replace: \"\",\n            }\n        }\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Sofia Lima\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\n\nexport default definePlugin({\n    name: \"NoUnblockToJump\",\n    description: \"Allows you to jump to messages of blocked users without unblocking them\",\n    authors: [Devs.dzshn],\n    patches: [\n        {\n            find: '.id,\"Search Results\"',\n            replacement: {\n                match: /if\\(.{1,10}\\)(.{1,10}\\.show\\({.{1,50}UNBLOCK_TO_JUMP_TITLE)/,\n                replace: \"if(false)$1\"\n            }\n        },\n        {\n            find: \"renderJumpButton=function()\",\n            replacement: {\n                match: /if\\(.{1,10}\\)(.{1,10}\\.show\\({.{1,50}UNBLOCK_TO_JUMP_TITLE)/,\n                replace: \"if(false)$1\"\n            }\n        },\n        {\n            find: \"flash:!0,returnMessageId\",\n            replacement: {\n                match: /.\\?(.{1,10}\\.show\\({.{1,50}UNBLOCK_TO_JUMP_TITLE)/,\n                replace: \"false?$1\"\n            }\n        }\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"oneko\",\n    description: \"cat follow mouse (real)\",\n    // Listing adryd here because this literally just evals her script\n    authors: [Devs.Ven, Devs.adryd],\n\n    start() {\n        fetch(\"https://raw.githubusercontent.com/adryd325/oneko.js/14bab15a755d0e35cd4ae19c931d96d306f99f42/oneko.js\")\n            .then(x => x.text())\n            .then(s => s.replace(\"./oneko.gif\", \"https://raw.githubusercontent.com/adryd325/oneko.js/14bab15a755d0e35cd4ae19c931d96d306f99f42/oneko.gif\"))\n            .then(eval);\n    },\n\n    stop() {\n        clearInterval(window.onekoInterval);\n        delete window.onekoInterval;\n        document.getElementById(\"oneko\")?.remove();\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ApplicationCommandInputType, ApplicationCommandOptionType, Argument, CommandContext, findOption, sendBotMessage } from \"../api/Commands\";\nimport { Devs } from \"../utils/constants\";\nimport { getGifEncoder } from \"../utils/dependencies\";\nimport { lazyWebpack, makeLazy } from \"../utils/misc\";\nimport definePlugin from \"../utils/types\";\nimport { filters } from \"../webpack\";\n\nconst DRAFT_TYPE = 0;\nconst DEFAULT_DELAY = 20;\nconst DEFAULT_RESOLUTION = 128;\nconst FRAMES = 10;\n\nconst getFrames = makeLazy(() => Promise.all(\n    Array.from(\n        { length: FRAMES },\n        (_, i) => loadImage(`https://raw.githubusercontent.com/VenPlugs/petpet/main/frames/pet${i}.gif`)\n    ))\n);\n\nconst fetchUser = lazyWebpack(filters.byCode(\".USER(\"));\nconst promptToUpload = lazyWebpack(filters.byCode(\"UPLOAD_FILE_LIMIT_ERROR\"));\nconst UploadStore = lazyWebpack(filters.byProps(\"getUploads\"));\n\nfunction loadImage(source: File | string) {\n    const isFile = source instanceof File;\n    const url = isFile ? URL.createObjectURL(source) : source;\n\n    return new Promise<HTMLImageElement>((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n            if (isFile)\n                URL.revokeObjectURL(url);\n            resolve(img);\n        };\n        img.onerror = (event, _source, _lineno, _colno, err) => reject(err || event);\n        img.crossOrigin = \"Anonymous\";\n        img.src = url;\n    });\n}\n\nasync function resolveImage(options: Argument[], ctx: CommandContext, noServerPfp: boolean): Promise<File | string | null> {\n    for (const opt of options) {\n        switch (opt.name) {\n            case \"image\":\n                const upload = UploadStore.getUploads(ctx.channel.id, DRAFT_TYPE)[0];\n                if (upload) {\n                    if (!upload.isImage) throw \"Upload is not an image\";\n                    return upload.item.file;\n                }\n                break;\n            case \"url\":\n                return opt.value;\n            case \"user\":\n                try {\n                    const user = await fetchUser(opt.value);\n                    return user.getAvatarURL(noServerPfp ? void 0 : ctx.guild?.id, 2048).replace(/\\?size=\\d+$/, \"?size=2048\");\n                } catch (err) {\n                    console.error(\"[petpet] Failed to fetch user\\n\", err);\n                    throw \"Failed to fetch user. Check the console for more info.\";\n                }\n        }\n    }\n    return null;\n}\n\nexport default definePlugin({\n    name: \"petpet\",\n    description: \"headpet a cutie\",\n    authors: [Devs.Ven],\n    dependencies: [\"CommandsAPI\"],\n    commands: [\n        {\n            inputType: ApplicationCommandInputType.BUILT_IN,\n            name: \"petpet\",\n            description: \"Create a petpet gif. You can only specify one of the image options\",\n            options: [\n                {\n                    name: \"delay\",\n                    description: \"The delay between each frame. Defaults to 20.\",\n                    type: ApplicationCommandOptionType.INTEGER\n                },\n                {\n                    name: \"resolution\",\n                    description: \"Resolution for the gif. Defaults to 120. If you enter an insane number and it freezes Discord that's your fault.\",\n                    type: ApplicationCommandOptionType.INTEGER\n                },\n                {\n                    name: \"image\",\n                    description: \"Image attachment to use\",\n                    type: ApplicationCommandOptionType.ATTACHMENT\n                },\n                {\n                    name: \"url\",\n                    description: \"URL to fetch image from\",\n                    type: ApplicationCommandOptionType.STRING\n                },\n                {\n                    name: \"user\",\n                    description: \"User whose avatar to use as image\",\n                    type: ApplicationCommandOptionType.USER\n                },\n                {\n                    name: \"no-server-pfp\",\n                    description: \"Use the normal avatar instead of the server specific one when using the 'user' option\",\n                    type: ApplicationCommandOptionType.BOOLEAN\n                }\n            ],\n            execute: async (opts, cmdCtx) => {\n                const { GIFEncoder, quantize, applyPalette } = await getGifEncoder();\n                const frames = await getFrames();\n\n                const noServerPfp = findOption(opts, \"no-server-pfp\", false);\n                try {\n                    var url = await resolveImage(opts, cmdCtx, noServerPfp);\n                    if (!url) throw \"No Image specified!\";\n                } catch (err) {\n                    sendBotMessage(cmdCtx.channel.id, {\n                        content: String(err),\n                    });\n                    return;\n                }\n\n                const avatar = await loadImage(url);\n\n                const delay = findOption(opts, \"delay\", DEFAULT_DELAY);\n                const resolution = findOption(opts, \"resolution\", DEFAULT_RESOLUTION);\n\n                const gif = new GIFEncoder();\n\n                const canvas = document.createElement(\"canvas\");\n                canvas.width = canvas.height = resolution;\n                const ctx = canvas.getContext(\"2d\")!;\n\n                for (let i = 0; i < FRAMES; i++) {\n                    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n                    const j = i < FRAMES / 2 ? i : FRAMES - i;\n                    const width = 0.8 + j * 0.02;\n                    const height = 0.8 - j * 0.05;\n                    const offsetX = (1 - width) * 0.5 + 0.1;\n                    const offsetY = 1 - height - 0.08;\n\n                    ctx.drawImage(avatar, offsetX * resolution, offsetY * resolution, width * resolution, height * resolution);\n                    ctx.drawImage(frames[i], 0, 0, resolution, resolution);\n\n                    const { data } = ctx.getImageData(0, 0, resolution, resolution);\n                    const palette = quantize(data, 256);\n                    const index = applyPalette(data, palette);\n\n                    gif.writeFrame(index, resolution, resolution, {\n                        transparent: true,\n                        palette,\n                        delay,\n                    });\n                }\n\n                gif.finish();\n                const file = new File([gif.bytesView()], \"petpet.gif\", { type: \"image/gif\" });\n                // Immediately after the command finishes, Discord clears all input, including pending attachments.\n                // Thus, setImmediate is needed to make this execute after Discord cleared the input\n                setImmediate(() => promptToUpload([file], cmdCtx.channel, DRAFT_TYPE));\n            },\n        },\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"PlainFolderIcon\",\n    description: \"Doesn't show the small guild icons in folders\",\n    authors: [Devs.botato],\n    patches: [{\n        find: \"().expandedFolderIconWrapper\",\n        replacement: [{\n            match: /\\(\\w\\|\\|\\w\\)&&(\\(.{0,40}\\(.{1,3}\\.animated)/,\n            replace: \"$1\",\n        }]\n    }]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { User } from \"discord-types/general\";\n\nimport { Settings } from \"../api/settings\";\nimport ErrorBoundary from \"../components/ErrorBoundary\";\nimport { Devs } from \"../utils/constants\";\nimport { lazyWebpack } from \"../utils/misc\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { filters } from \"../webpack\";\nimport { PresenceStore, Tooltip } from \"../webpack/common\";\n\nfunction Icon(path: string, viewBox = \"0 0 24 24\") {\n    return ({ color, tooltip }: { color: string; tooltip: string; }) => (\n        <Tooltip text={tooltip} >\n            {(tooltipProps: any) => (\n                <svg\n                    {...tooltipProps}\n                    height=\"18\"\n                    width=\"18\"\n                    viewBox={viewBox}\n                    fill={color}\n                >\n                    <path d={path} />\n                </svg>\n            )}\n        </Tooltip>\n    );\n}\n\nconst Icons = {\n    desktop: Icon(\"M4 2.5c-1.103 0-2 .897-2 2v11c0 1.104.897 2 2 2h7v2H7v2h10v-2h-4v-2h7c1.103 0 2-.896 2-2v-11c0-1.103-.897-2-2-2H4Zm16 2v9H4v-9h16Z\"),\n    web: Icon(\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2Zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93Zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39Z\"),\n    mobile: Icon(\"M15.5 1h-8A2.5 2.5 0 0 0 5 3.5v17A2.5 2.5 0 0 0 7.5 23h8a2.5 2.5 0 0 0 2.5-2.5v-17A2.5 2.5 0 0 0 15.5 1zm-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5-4H7V4h9v14z\"),\n    console: Icon(\"M14.8 2.7 9 3.1V47h3.3c1.7 0 6.2.3 10 .7l6.7.6V2l-4.2.2c-2.4.1-6.9.3-10 .5zm1.8 6.4c1 1.7-1.3 3.6-2.7 2.2C12.7 10.1 13.5 8 15 8c.5 0 1.2.5 1.6 1.1zM16 33c0 6-.4 10-1 10s-1-4-1-10 .4-10 1-10 1 4 1 10zm15-8v23.3l3.8-.7c2-.3 4.7-.6 6-.6H43V3h-2.2c-1.3 0-4-.3-6-.6L31 1.7V25z\", \"0 0 50 50\"),\n};\ntype Platform = keyof typeof Icons;\n\nconst getStatusColor = lazyWebpack(filters.byCode(\"STATUS_YELLOW\", \"TWITCH\", \"STATUS_GREY\"));\n\nconst PlatformIcon = ({ platform, status }: { platform: Platform, status: string; }) => {\n    const tooltip = platform[0].toUpperCase() + platform.slice(1);\n    const Icon = Icons[platform] ?? Icons.desktop;\n\n    return <Icon color={`var(--${getStatusColor(status)}`} tooltip={tooltip} />;\n};\n\nconst PlatformIndicator = ({ user }: { user: User; }) => {\n    if (!user || user.bot) return null;\n\n    const status = PresenceStore.getState()?.clientStatuses?.[user.id] as Record<Platform, string>;\n    if (!status) return null;\n\n    const icons = Object.entries(status).map(([platform, status]) => (\n        <PlatformIcon\n            key={platform}\n            platform={platform as Platform}\n            status={status}\n        />\n    ));\n\n    if (!icons.length) return null;\n\n    return (\n        <div\n            className=\"vc-platform-indicator\"\n            style={{\n                display: \"flex\", alignItems: \"center\", marginLeft: \"4px\", gap: \"4px\"\n            }}\n        >\n            {icons}\n        </div>\n    );\n};\n\nexport default definePlugin({\n    name: \"PlatformIndicators\",\n    description: \"Adds platform indicators (Desktop, Mobile, Web...) to users\",\n    authors: [Devs.kemo],\n\n    patches: [\n        {\n            // Server member list decorators\n            find: \"this.renderPremium()\",\n            predicate: () => [\"both\", \"list\"].includes(Settings.plugins.PlatformIndicators.displayMode),\n            replacement: {\n                match: /this.renderPremium\\(\\)[^\\]]*?\\]/,\n                replace: \"$&.concat(Vencord.Plugins.plugins.PlatformIndicators.renderPlatformIndicators(this.props))\"\n            }\n        },\n        {\n            // Dm list decorators\n            find: \"PrivateChannel.renderAvatar\",\n            predicate: () => [\"both\", \"list\"].includes(Settings.plugins.PlatformIndicators.displayMode),\n            replacement: {\n                match: /(subText:(.{1,3})\\..+?decorators:)(.+?:null)/,\n                replace: \"$1[$3].concat(Vencord.Plugins.plugins.PlatformIndicators.renderPlatformIndicators($2.props))\"\n            }\n        },\n        {\n            // User badges\n            find: \"Messages.PROFILE_USER_BADGES\",\n            predicate: () => [\"both\", \"badges\"].includes(Settings.plugins.PlatformIndicators.displayMode),\n            replacement: {\n                match: /(Messages\\.PROFILE_USER_BADGES,role:\"group\",children:)(.+?\\.key\\)\\}\\)\\))/,\n                replace: \"$1[Vencord.Plugins.plugins.PlatformIndicators.renderPlatformIndicators(e)].concat($2)\"\n            }\n        }\n    ],\n\n    renderPlatformIndicators: ({ user }: { user: User; }) => (\n        <ErrorBoundary noop>\n            <PlatformIndicator user={user} />\n        </ErrorBoundary>\n    ),\n\n    options: {\n        displayMode: {\n            type: OptionType.SELECT,\n            description: \"Where to display the platform indicators\",\n            restartNeeded: true,\n            options: [\n                {\n                    label: \"Member List & Badges\",\n                    value: \"both\",\n                    default: true\n                },\n                {\n                    label: \"Member List Only\",\n                    value: \"list\"\n                },\n                {\n                    label: \"Badges Only\",\n                    value: \"badges\"\n                }\n            ]\n        },\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Link } from \"../../../components/Link\";\nimport { Forms, React } from \"../../../webpack/common\";\n\nexport default function PronounsAboutComponent() {\n    return (\n        <React.Fragment>\n            <Forms.FormTitle tag=\"h3\">More Information</Forms.FormTitle>\n            <Forms.FormText>To add your own pronouns, visit{\" \"}\n                <Link href=\"https://pronoundb.org\">pronoundb.org</Link>\n            </Forms.FormText>\n            <Forms.FormDivider />\n            <Forms.FormText>\n                The two pronoun formats are lowercase and capitalized. Example:\n                <ul>\n                    <li>Lowercase: they/them</li>\n                    <li>Capitalized: They/Them</li>\n                </ul>\n                Text like \"Ask me my pronouns\" or \"Any pronouns\" will always be capitalized. <br /><br />\n                You can also configure whether or not to display pronouns for the current user (since you probably already know them)\n            </Forms.FormText>\n        </React.Fragment>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n/**\n * Returns a new function that will call the wrapped function\n * after the specified delay. If the function is called again\n * within the delay, the timer will be reset.\n * @param func The function to wrap\n * @param delay The delay in milliseconds\n */\nexport function debounce<T extends Function>(func: T, delay = 300): T {\n    let timeout: NodeJS.Timeout;\n    return function (...args: any[]) {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => { func(...args); }, delay);\n    } as any;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport interface UserProfileProps {\n    userId: string;\n}\n\nexport interface UserProfilePronounsProps {\n    currentPronouns: string | null;\n    hidePersonalInformation: boolean;\n}\n\nexport interface PronounsResponse {\n    [id: string]: PronounCode;\n}\n\nexport type PronounCode = keyof typeof PronounMapping;\n\nexport const PronounMapping = {\n    hh: \"He/Him\",\n    hi: \"He/It\",\n    hs: \"He/She\",\n    ht: \"He/They\",\n    ih: \"It/Him\",\n    ii: \"It/Its\",\n    is: \"It/She\",\n    it: \"It/They\",\n    shh: \"She/He\",\n    sh: \"She/Her\",\n    si: \"She/It\",\n    st: \"She/They\",\n    th: \"They/He\",\n    ti: \"They/It\",\n    ts: \"They/She\",\n    tt: \"They/Them\",\n    any: \"Any pronouns\",\n    other: \"Other pronouns\",\n    ask: \"Ask me my pronouns\",\n    avoid: \"Avoid pronouns, use my name\",\n    unspecified: \"Unspecified\"\n} as const;\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { VENCORD_USER_AGENT } from \"../../utils/constants\";\nimport { debounce } from \"../../utils/debounce\";\nimport { Settings } from \"../../Vencord\";\nimport { PronounsFormat } from \".\";\nimport { PronounCode, PronounMapping, PronounsResponse } from \"./types\";\n\n// A map of cached pronouns so the same request isn't sent twice\nconst cache: Record<string, PronounCode> = {};\n// A map of ids and callbacks that should be triggered on fetch\nconst requestQueue: Record<string, ((pronouns: PronounCode) => void)[]> = {};\n\n// Executes all queued requests and calls their callbacks\nconst bulkFetch = debounce(async () => {\n    const ids = Object.keys(requestQueue);\n    const pronouns = await bulkFetchPronouns(ids);\n    for (const id of ids) {\n        // Call all callbacks for the id\n        requestQueue[id].forEach(c => c(pronouns[id]));\n        delete requestQueue[id];\n    }\n});\n\n// Fetches the pronouns for one id, returning a promise that resolves if it was cached, or once the request is completed\nexport function fetchPronouns(id: string): Promise<PronounCode> {\n    return new Promise(res => {\n        // If cached, return the cached pronouns\n        if (id in cache) res(cache[id]);\n        // If there is already a request added, then just add this callback to it\n        else if (id in requestQueue) requestQueue[id].push(res);\n        // If not already added, then add it and call the debounced function to make sure the request gets executed\n        else {\n            requestQueue[id] = [res];\n            bulkFetch();\n        }\n    });\n}\n\nasync function bulkFetchPronouns(ids: string[]): Promise<PronounsResponse> {\n    const params = new URLSearchParams();\n    params.append(\"platform\", \"discord\");\n    params.append(\"ids\", ids.join(\",\"));\n\n    try {\n        const req = await fetch(\"https://pronoundb.org/api/v1/lookup-bulk?\" + params.toString(), {\n            method: \"GET\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"X-PronounDB-Source\": VENCORD_USER_AGENT\n            }\n        });\n        return await req.json()\n            .then((res: PronounsResponse) => {\n                Object.assign(cache, res);\n                return res;\n            });\n    } catch (e) {\n        // If the request errors, treat it as if no pronouns were found for all ids, and log it\n        console.error(\"PronounDB fetching failed: \", e);\n        const dummyPronouns = Object.fromEntries(ids.map(id => [id, \"unspecified\"] as const));\n        Object.assign(cache, dummyPronouns);\n        return dummyPronouns;\n    }\n}\n\nexport function formatPronouns(pronouns: PronounCode): string {\n    const { pronounsFormat } = Settings.plugins.PronounDB as { pronounsFormat: PronounsFormat, enabled: boolean; };\n    // For capitalized pronouns, just return the mapping (it is by default capitalized)\n    if (pronounsFormat === PronounsFormat.Capitalized) return PronounMapping[pronouns];\n    // If it is set to lowercase and a special code (any, ask, avoid), then just return the capitalized text\n    else if (\n        pronounsFormat === PronounsFormat.Lowercase\n        && [\"any\", \"ask\", \"avoid\", \"other\"].includes(pronouns)\n    ) return PronounMapping[pronouns];\n    // Otherwise (lowercase and not a special code), then convert the mapping to lowercase\n    else return PronounMapping[pronouns].toLowerCase();\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Message } from \"discord-types/general\";\n\nimport { classes, lazyWebpack, useAwaiter } from \"../../../utils/misc\";\nimport { Settings } from \"../../../Vencord\";\nimport { filters } from \"../../../webpack\";\nimport { UserStore } from \"../../../webpack/common\";\nimport { fetchPronouns, formatPronouns } from \"../pronoundbUtils\";\nimport { PronounMapping } from \"../types\";\n\nconst styles: Record<string, string> = lazyWebpack(filters.byProps(\"timestampInline\"));\n\nexport default function PronounsChatComponentWrapper({ message }: { message: Message; }) {\n    // Don't bother fetching bot or system users\n    if (message.author.bot || message.author.system)\n        return null;\n    // Respect showSelf options\n    if (!Settings.plugins.PronounDB.showSelf && message.author.id === UserStore.getCurrentUser().id)\n        return null;\n\n    return <PronounsChatComponent message={message} />;\n}\n\nfunction PronounsChatComponent({ message }: { message: Message; }) {\n    const [result, , isPending] = useAwaiter(\n        () => fetchPronouns(message.author.id),\n        null,\n        e => console.error(\"Fetching pronouns failed: \", e)\n    );\n\n    // If the promise completed, the result was not \"unspecified\", and there is a mapping for the code, then return a span with the pronouns\n    if (!isPending && result && result !== \"unspecified\" && PronounMapping[result]) {\n        return (\n            <span\n                className={classes(styles.timestampInline, styles.timestamp)}\n            >\u2022 {formatPronouns(result)}</span>\n        );\n    }\n\n    return null;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { useAwaiter } from \"../../../utils/misc\";\nimport { Settings } from \"../../../Vencord\";\nimport { UserStore } from \"../../../webpack/common\";\nimport { fetchPronouns, formatPronouns } from \"../pronoundbUtils\";\nimport { PronounMapping, UserProfilePronounsProps, UserProfileProps } from \"../types\";\n\nexport default function PronounsProfileWrapper(PronounsComponent: React.ElementType<UserProfilePronounsProps>, props: UserProfilePronounsProps, profileProps: UserProfileProps) {\n    const user = UserStore.getUser(profileProps.userId) ?? {};\n    // Don't bother fetching bot or system users\n    if (user.bot || user.system) return null;\n    // Respect showSelf options\n    if (!Settings.plugins.PronounDB.showSelf && user.id === UserStore.getCurrentUser().id)\n        return null;\n\n    return <ProfilePronouns\n        userId={profileProps.userId}\n        Component={PronounsComponent}\n        leProps={props}\n    />;\n}\n\nfunction ProfilePronouns(\n    { userId, Component, leProps }: {\n        userId: string;\n        Component: React.ElementType<UserProfilePronounsProps>;\n        leProps: UserProfilePronounsProps;\n    }\n) {\n    const [result, , isPending] = useAwaiter(\n        () => fetchPronouns(userId),\n        null,\n        e => console.error(\"Fetching pronouns failed: \", e)\n    );\n\n    // If the promise completed, the result was not \"unspecified\", and there is a mapping for the code, then render\n    if (!isPending && result && result !== \"unspecified\" && PronounMapping[result]) {\n        // First child is the header, second is a div with the actual text\n        leProps.currentPronouns ||= formatPronouns(result);\n        return <Component {...leProps} />;\n    }\n\n    return null;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../../utils/constants\";\nimport definePlugin, { OptionType } from \"../../utils/types\";\nimport PronounsAboutComponent from \"./components/PronounsAboutComponent\";\nimport PronounsChatComponent from \"./components/PronounsChatComponent\";\nimport PronounsProfileWrapper from \"./components/PronounsProfileWrapper\";\n\nexport enum PronounsFormat {\n    Lowercase = \"LOWERCASE\",\n    Capitalized = \"CAPITALIZED\"\n}\n\nexport default definePlugin({\n    name: \"PronounDB\",\n    authors: [Devs.Tyman],\n    description: \"Adds pronouns to user messages using pronoundb\",\n    patches: [\n        // Patch the chat timestamp element\n        {\n            find: \"showCommunicationDisabledStyles\",\n            replacement: {\n                match: /(?<=return\\s*\\(0,\\w{1,3}\\.jsxs?\\)\\(.+!\\w{1,3}&&)(\\(0,\\w{1,3}.jsxs?\\)\\(.+?\\{.+?\\}\\))/,\n                replace: \"[$1, Vencord.Plugins.plugins.PronounDB.PronounsChatComponent(e)]\"\n            }\n        },\n        // Hijack the discord pronouns section (hidden without experiment) and add a wrapper around the text section\n        {\n            find: \"currentPronouns:\",\n            all: true,\n            noWarn: true,\n            replacement: {\n                match: /\\(0,.{1,3}\\.jsxs?\\)\\((.{1,10}),(\\{[^[}]*currentPronouns:[^}]*(\\w)\\.pronouns[^}]*\\})\\)/,\n                replace: (original, PronounComponent, pronounProps, fullProps) => {\n                    // UserSettings\n                    if (pronounProps.includes(\"onPronounsChange\")) return original;\n\n                    return `${fullProps}&&Vencord.Plugins.plugins.PronounDB.PronounsProfileWrapper(${PronounComponent}, ${pronounProps}, ${fullProps})`;\n                }\n            }\n        },\n        // Make pronouns experiment be enabled by default\n        {\n            find: \"2022-01_pronouns\",\n            replacement: {\n                match: \"!1\", // false\n                replace: \"!0\"\n            }\n        }\n    ],\n\n    options: {\n        pronounsFormat: {\n            type: OptionType.SELECT,\n            description: \"The format for pronouns to appear in chat\",\n            options: [\n                {\n                    label: \"Lowercase\",\n                    value: PronounsFormat.Lowercase,\n                    default: true\n                },\n                {\n                    label: \"Capitalized\",\n                    value: PronounsFormat.Capitalized\n                }\n            ]\n        },\n        showSelf: {\n            type: OptionType.BOOLEAN,\n            description: \"Enable or disable showing pronouns for the current user\",\n            default: true\n        }\n    },\n    settingsAboutComponent: PronounsAboutComponent,\n    // Re-export the components on the plugin object so it is easily accessible in patches\n    PronounsChatComponent,\n    PronounsProfileWrapper\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport { lazyWebpack } from \"../utils/misc\";\nimport definePlugin from \"../utils/types\";\n\nconst ComponentDispatch = lazyWebpack(m => m.emitter?._events?.INSERT_TEXT);\n\nexport default definePlugin({\n    name: \"QuickMention\",\n    authors: [Devs.kemo],\n    description: \"Adds a quick mention button to the message actions bar\",\n\n    patches: [\n        {\n            find: \"Messages.MESSAGE_UTILITIES_A11Y_LABEL\",\n            replacement: {\n                match: /(null,)(.{1,3}&&!.{1,3}\\?(.{1,3})\\(\\{key:\"reply\",label:.{1,10}\\.Messages\\.MESSAGE_ACTION_REPLY,icon:.{1,10},channel:(.+?),message:(.+?),onClick:.+?\\}\\))/,\n                replace: (m, post, og, functionName, channelVar, messageVar) => {\n\n                    const functionSig =\n                        `${functionName}({\n                        key: \"QuickMention\",\n                        label: \"Mention\",\n                        icon: Vencord.Plugins.plugins.QuickMention.Icon,\n                        channel: ${channelVar},\n                        message: ${messageVar},\n                        onClick: ()=> Vencord.Plugins.plugins.QuickMention.onClick(${messageVar})\n                    })`;\n\n                    return `${post}${functionSig},${og}`;\n                }\n            }\n        }\n    ],\n\n    Icon: () => (\n        <svg\n            className=\"icon\"\n            height=\"24\"\n            width=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"currentColor\"\n        >\n            <path\n                d=\"M12 2C6.486 2 2 6.486 2 12C2 17.515 6.486 22 12 22C14.039 22 15.993 21.398 17.652 20.259L16.521 18.611C15.195 19.519 13.633 20 12 20C7.589 20 4 16.411 4 12C4 7.589 7.589 4 12 4C16.411 4 20 7.589 20 12V12.782C20 14.17 19.402 15 18.4 15L18.398 15.018C18.338 15.005 18.273 15 18.209 15H18C17.437 15 16.6 14.182 16.6 13.631V12C16.6 9.464 14.537 7.4 12 7.4C9.463 7.4 7.4 9.463 7.4 12C7.4 14.537 9.463 16.6 12 16.6C13.234 16.6 14.35 16.106 15.177 15.313C15.826 16.269 16.93 17 18 17L18.002 16.981C18.064 16.994 18.129 17 18.195 17H18.4C20.552 17 22 15.306 22 12.782V12C22 6.486 17.514 2 12 2ZM12 14.599C10.566 14.599 9.4 13.433 9.4 11.999C9.4 10.565 10.566 9.399 12 9.399C13.434 9.399 14.6 10.565 14.6 11.999C14.6 13.433 13.434 14.599 12 14.599Z\"\n            />\n        </svg>\n    ),\n\n    onClick: (message: any) => ComponentDispatch.dispatchToLastSubscribed(\"INSERT_TEXT\", { rawText: `<@${message.author.id}> ` })\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Message } from \"discord-types/general\";\n\nimport { migratePluginSettings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport { lazyWebpack } from \"../utils/misc\";\nimport definePlugin from \"../utils/types\";\nimport { filters } from \"../webpack\";\nimport { ChannelStore, FluxDispatcher as Dispatcher, MessageStore, SelectedChannelStore, UserStore } from \"../webpack/common\";\n\nconst Kangaroo = lazyWebpack(filters.byProps(\"jumpToMessage\"));\n\nconst isMac = navigator.platform.includes(\"Mac\"); // bruh\nlet replyIdx = -1;\nlet editIdx = -1;\n\nmigratePluginSettings(\"QuickReply\", \"InteractionKeybinds\");\n\nexport default definePlugin({\n    name: \"QuickReply\",\n    authors: [Devs.obscurity, Devs.Ven],\n    description: \"Reply to (ctrl + up/down) and edit (ctrl + shift + up/down) messages via keybinds\",\n\n    start() {\n        Dispatcher.subscribe(\"DELETE_PENDING_REPLY\", onDeletePendingReply);\n        Dispatcher.subscribe(\"MESSAGE_END_EDIT\", onEndEdit);\n        Dispatcher.subscribe(\"MESSAGE_START_EDIT\", onStartEdit);\n        Dispatcher.subscribe(\"CREATE_PENDING_REPLY\", onCreatePendingReply);\n        document.addEventListener(\"keydown\", onKeydown);\n    },\n\n    stop() {\n        Dispatcher.unsubscribe(\"DELETE_PENDING_REPLY\", onDeletePendingReply);\n        Dispatcher.unsubscribe(\"MESSAGE_END_EDIT\", onEndEdit);\n        Dispatcher.unsubscribe(\"MESSAGE_START_EDIT\", onStartEdit);\n        Dispatcher.unsubscribe(\"CREATE_PENDING_REPLY\", onCreatePendingReply);\n        document.removeEventListener(\"keydown\", onKeydown);\n    },\n});\n\nconst onDeletePendingReply = () => replyIdx = -1;\nconst onEndEdit = () => editIdx = -1;\n\nfunction calculateIdx(messages: Message[], id: string) {\n    const idx = messages.findIndex(m => m.id === id);\n    return idx === -1\n        ? idx\n        : messages.length - idx - 1;\n}\n\nfunction onStartEdit({ channelId, messageId, _isQuickEdit }: any) {\n    if (_isQuickEdit) return;\n\n    const meId = UserStore.getCurrentUser().id;\n\n    const messages = MessageStore.getMessages(channelId)._array.filter(m => m.author.id === meId);\n    editIdx = calculateIdx(messages, messageId);\n}\n\nfunction onCreatePendingReply({ message, _isQuickReply }: { message: Message; _isQuickReply: boolean; }) {\n    if (_isQuickReply) return;\n\n    replyIdx = calculateIdx(MessageStore.getMessages(message.channel_id)._array, message.id);\n}\n\nconst isCtrl = (e: KeyboardEvent) => isMac ? e.metaKey : e.ctrlKey;\nconst isAltOrMeta = (e: KeyboardEvent) => e.altKey || (!isMac && e.metaKey);\n\nfunction onKeydown(e: KeyboardEvent) {\n    const isUp = e.key === \"ArrowUp\";\n    if (!isUp && e.key !== \"ArrowDown\") return;\n    if (!isCtrl(e) || isAltOrMeta(e)) return;\n\n    if (e.shiftKey)\n        nextEdit(isUp);\n    else\n        nextReply(isUp);\n}\n\nfunction jumpIfOffScreen(channelId: string, messageId: string) {\n    const element = document.getElementById(\"message-content-\" + messageId);\n    if (!element) return;\n\n    const vh = Math.max(document.documentElement.clientHeight, window.innerHeight);\n    const rect = element.getBoundingClientRect();\n    const isOffscreen = rect.bottom < 200 || rect.top - vh >= -200;\n\n    if (isOffscreen) {\n        Kangaroo.jumpToMessage({\n            channelId,\n            messageId,\n            flash: false,\n            jumpType: \"INSTANT\"\n        });\n    }\n}\n\nfunction getNextMessage(isUp: boolean, isReply: boolean) {\n    let messages: Message[] = MessageStore.getMessages(SelectedChannelStore.getChannelId())._array;\n    if (!isReply) { // we are editing so only include own\n        const meId = UserStore.getCurrentUser().id;\n        messages = messages.filter(m => m.author.id === meId);\n    }\n\n    const mutate = (i: number) => isUp\n        ? Math.min(messages.length - 1, i + 1)\n        : Math.max(-1, i - 1);\n\n    let i: number;\n    if (isReply)\n        replyIdx = i = mutate(replyIdx);\n    else\n        editIdx = i = mutate(editIdx);\n\n    return i === - 1 ? undefined : messages[messages.length - i - 1];\n}\n\n// handle next/prev reply\nfunction nextReply(isUp: boolean) {\n    const message = getNextMessage(isUp, true);\n\n    if (!message)\n        return void Dispatcher.dispatch({\n            type: \"DELETE_PENDING_REPLY\",\n            channelId: SelectedChannelStore.getChannelId(),\n        });\n\n    const channel = ChannelStore.getChannel(message.channel_id);\n    const meId = UserStore.getCurrentUser().id;\n    Dispatcher.dispatch({\n        type: \"CREATE_PENDING_REPLY\",\n        channel,\n        message,\n        shouldMention: true,\n        showMentionToggle: channel.guild_id !== null && message.author.id !== meId,\n        _isQuickReply: true\n    });\n    jumpIfOffScreen(channel.id, message.id);\n}\n\n// handle next/prev edit\nfunction nextEdit(isUp: boolean) {\n    const message = getNextMessage(isUp, false);\n\n    if (!message)\n        Dispatcher.dispatch({\n            type: \"MESSAGE_END_EDIT\",\n            channelId: SelectedChannelStore.getChannelId()\n        });\n    else {\n        Dispatcher.dispatch({\n            type: \"MESSAGE_START_EDIT\",\n            channelId: message.channel_id,\n            messageId: message.id,\n            content: message.content,\n            _isQuickEdit: true\n        });\n        jumpIfOffScreen(message.channel_id, message.id);\n    }\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Logger from \"../utils/Logger\";\n\nconst logger = new Logger(\"ServerListAPI\");\n\nexport enum ServerListRenderPosition {\n    Above,\n    In,\n}\n\nconst renderFunctionsAbove = new Set<Function>();\nconst renderFunctionsIn = new Set<Function>();\n\nfunction getRenderFunctions(position: ServerListRenderPosition) {\n    return position === ServerListRenderPosition.Above ? renderFunctionsAbove : renderFunctionsIn;\n}\n\nexport function addServerListElement(position: ServerListRenderPosition, renderFunction: Function) {\n    getRenderFunctions(position).add(renderFunction);\n}\n\nexport function removeServerListElement(position: ServerListRenderPosition, renderFunction: Function) {\n    getRenderFunctions(position).delete(renderFunction);\n}\n\nexport const renderAll = (position: ServerListRenderPosition) => {\n    const ret: Array<JSX.Element> = [];\n\n    for (const renderFunction of getRenderFunctions(position)) {\n        try {\n            ret.unshift(renderFunction());\n        } catch (e) {\n            logger.error(\"Failed to render server list element:\", e);\n        }\n    }\n\n    return ret;\n};\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { addServerListElement, removeServerListElement, ServerListRenderPosition } from \"../api/ServerList\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\nimport { Button, FluxDispatcher, GuildChannelStore, GuildStore, React, ReadStateStore } from \"../webpack/common\";\n\nfunction onClick() {\n    const channels: Array<any> = [];\n\n    Object.values(GuildStore.getGuilds()).forEach(guild => {\n        GuildChannelStore.getChannels(guild.id).SELECTABLE.forEach((c: { channel: { id: string; }; }) => {\n            if (!ReadStateStore.hasUnread(c.channel.id)) return;\n\n            channels.push({\n                channelId: c.channel.id,\n                // messageId: c.channel?.lastMessageId,\n                messageId: ReadStateStore.lastMessageId(c.channel.id),\n                readStateType: 0\n            });\n        });\n    });\n\n    FluxDispatcher.dispatch({\n        type: \"BULK_ACK\",\n        context: \"APP\",\n        channels: channels\n    });\n}\n\nconst ReadAllButton = () => (\n    <Button\n        onClick={onClick}\n        size={Button.Sizes.MIN}\n        color={Button.Colors.BRAND}\n        style={{ marginTop: \"2px\", marginBottom: \"8px\", marginLeft: \"9px\" }}\n    >Read all</Button>\n);\n\nexport default definePlugin({\n    name: \"ReadAllNotificationsButton\",\n    description: \"Read all server notifications with a single button click!\",\n    authors: [Devs.kemo],\n    dependencies: [\"ServerListAPI\"],\n\n    renderReadAllButton: () => <ReadAllButton />,\n\n    start() {\n        addServerListElement(ServerListRenderPosition.In, this.renderReadAllButton);\n    },\n\n    stop() {\n        removeServerListElement(ServerListRenderPosition.In, this.renderReadAllButton);\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\nimport { Menu } from \"../webpack/common\";\n\nconst Engines = {\n    Google: \"https://www.google.com/searchbyimage?image_url=\",\n    Yandex: \"https://yandex.com/images/search?rpt=imageview&url=\",\n    SauceNAO: \"https://saucenao.com/search.php?url=\",\n    IQDB: \"https://iqdb.org/?url=\",\n    TinEye: \"https://www.tineye.com/search?url=\"\n};\n\nexport default definePlugin({\n    name: \"ReverseImageSearch\",\n    description: \"Adds ImageSearch to image context menus\",\n    authors: [Devs.Ven],\n    dependencies: [\"MenuItemDeobfuscatorAPI\"],\n    patches: [{\n        find: \"open-native-link\",\n        replacement: {\n            match: /id:\"open-native-link\".{0,200}\\(\\{href:(.{0,3}),.{0,200}\\},\"open-native-link\"\\)/,\n            replace: (m, src) =>\n                `${m},Vencord.Plugins.plugins.ReverseImageSearch.makeMenu(${src}, arguments[2])`\n        }\n    }, {\n        // pass the target to the open link menu so we can check if it's an image\n        find: \"REMOVE_ALL_REACTIONS_CONFIRM_BODY,\",\n        replacement: {\n            // url1 = url2 = props.attachment.url\n            // ...\n            // OpenLinks(url2 != null ? url2 : url1, someStuffs)\n            //\n            // the back references are needed because the code is like Z(a!=null?b:c,d), no way to match that\n            // otherwise\n            match: /(?<props>.).onHeightUpdate.{0,200}(.)=(.)=.\\.url;.+?\\(null!=\\3\\?\\3:\\2[^)]+/,\n            replace: \"$&,$<props>.target\"\n        }\n    }],\n\n    makeMenu(src: string, target: HTMLElement) {\n        if (target && !(target instanceof HTMLImageElement) && target.attributes[\"data-role\"]?.value !== \"img\")\n            return null;\n\n        return (\n            <Menu.MenuItem\n                label=\"Search Image\"\n                key=\"search-image\"\n                id=\"search-image\"\n            >\n                {Object.keys(Engines).map(engine => {\n                    const key = \"search-image-\" + engine;\n                    return (\n                        <Menu.MenuItem\n                            key={key}\n                            id={key}\n                            label={engine}\n                            action={() => this.search(src, Engines[engine])}\n                        />\n                    );\n                })}\n                <Menu.MenuItem\n                    key=\"search-image-all\"\n                    id=\"search-image-all\"\n                    label=\"All\"\n                    action={() => Object.values(Engines).forEach(e => this.search(src, e))}\n                />\n            </Menu.MenuItem>\n        );\n    },\n\n    // openUrl is a mangled export, so just match it in the module and pass it\n    search(src: string, engine: string) {\n        open(engine + encodeURIComponent(src), \"_blank\");\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../../../utils/constants\";\nimport Logger from \"../../../utils/Logger\";\nimport { openModal } from \"../../../utils/modal\";\nimport { Settings } from \"../../../Vencord\";\nimport { findByProps } from \"../../../webpack\";\nimport { FluxDispatcher, React, SelectedChannelStore, Toasts, UserUtils } from \"../../../webpack/common\";\nimport { Review } from \"../entities/Review\";\n\nexport async function openUserProfileModal(userId: string) {\n    await UserUtils.fetchUser(userId);\n\n    await FluxDispatcher.dispatch({\n        type: \"USER_PROFILE_MODAL_OPEN\",\n        userId,\n        channelId: SelectedChannelStore.getChannelId(),\n        analyticsLocation: \"Explosive Hotel\"\n    });\n}\n\nexport function authorize(callback?: any) {\n    const { OAuth2AuthorizeModal } = findByProps(\"OAuth2AuthorizeModal\");\n\n    openModal((props: any) =>\n        <OAuth2AuthorizeModal\n            {...props}\n            scopes={[\"identify\"]}\n            responseType=\"code\"\n            redirectUri=\"https://manti.vendicated.dev/URauth\"\n            permissions={0n}\n            clientId=\"915703782174752809\"\n            cancelCompletesFlow={false}\n            callback={async (u: string) => {\n                try {\n                    const url = new URL(u);\n                    url.searchParams.append(\"returnType\", \"json\");\n                    url.searchParams.append(\"clientMod\", \"vencord\");\n                    const res = await fetch(url, {\n                        headers: new Headers({ Accept: \"application/json\" })\n                    });\n                    const { token, status } = await res.json();\n                    if (status === 0) {\n                        Settings.plugins.ReviewDB.token = token;\n                        showToast(\"Successfully logged in!\");\n                        callback?.();\n                    } else if (res.status === 1) {\n                        showToast(\"An Error occurred while logging in.\");\n                    }\n                } catch (e) {\n                    new Logger(\"ReviewDB\").error(\"Failed to authorise\", e);\n                }\n            }}\n        />\n    );\n}\n\nexport function showToast(text: string) {\n    Toasts.show({\n        type: Toasts.Type.MESSAGE,\n        message: text,\n        id: Toasts.genId(),\n        options: {\n            position: Toasts.Position.BOTTOM\n        },\n    });\n}\n\nexport const sleep = (ms: number) => new Promise(r => setTimeout(r, ms));\n\nexport function canDeleteReview(review: Review, userId: string) {\n    if (review.senderdiscordid === userId) return true;\n\n    const myId = BigInt(userId);\n    return myId === Devs.mantikafasi.id ||\n        myId === Devs.Ven.id ||\n        myId === Devs.rushii.id;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Settings } from \"../../../Vencord\";\nimport { Review } from \"../entities/Review\";\nimport { authorize, showToast } from \"./Utils\";\n\nconst API_URL = \"https://manti.vendicated.dev\";\n\nconst getToken = () => Settings.plugins.ReviewDB.token;\n\nenum Response {\n    \"Added your review\" = 0,\n    \"Updated your review\" = 1,\n    \"Error\" = 2,\n}\n\nexport async function getReviews(id: string): Promise<Review[]> {\n    const res = await fetch(API_URL + \"/getUserReviews?snowflakeFormat=string&discordid=\" + id);\n    return await res.json() as Review[];\n}\n\nexport async function addReview(review: any): Promise<Response> {\n    review.token = getToken();\n\n    if (!review.token) {\n        showToast(\"Please authorize to add a review.\");\n        authorize();\n        return Response.Error;\n    }\n\n    return fetch(API_URL + \"/addUserReview\", {\n        method: \"POST\",\n        body: JSON.stringify(review),\n        headers: {\n            \"Content-Type\": \"application/json\",\n        }\n    })\n        .then(r => r.text())\n        .then(res => {\n            showToast(res);\n            return Response[res] ?? Response.Error;\n        });\n}\n\nexport function deleteReview(id: number): Promise<any> {\n    return fetch(API_URL + \"/deleteReview\", {\n        method: \"POST\",\n        headers: new Headers({\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n        }),\n        body: JSON.stringify({\n            token: getToken(),\n            reviewid: id\n        })\n    }).then(r => r.json());\n}\n\nexport async function reportReview(id: number) {\n    const res = await fetch(API_URL + \"/reportReview\", {\n        method: \"POST\",\n        headers: new Headers({\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n        }),\n        body: JSON.stringify({\n            reviewid: id,\n            token: getToken()\n        })\n    });\n    showToast(await res.text());\n}\n\nexport function getLastReviewID(id: string): Promise<number> {\n    return fetch(API_URL + \"/getLastReviewID?discordid=\" + id)\n        .then(r => r.text())\n        .then(Number);\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { classes, LazyComponent } from \"../../../utils/misc\";\nimport { findByProps } from \"../../../webpack\";\n\nexport default LazyComponent(() => {\n    const { button, dangerous } = findByProps(\"button\", \"wrapper\", \"disabled\");\n\n    return function MessageButton(props) {\n        return props.type === \"delete\"\n            ? (\n                <div className={classes(button, dangerous)} aria-label=\"Delete Review\" onClick={props.callback}>\n                    <svg aria-hidden=\"false\" width=\"16\" height=\"16\" viewBox=\"0 0 20 20\">\n                        <path fill=\"currentColor\" d=\"M15 3.999V2H9V3.999H3V5.999H21V3.999H15Z\"></path>\n                        <path fill=\"currentColor\" d=\"M5 6.99902V18.999C5 20.101 5.897 20.999 7 20.999H17C18.103 20.999 19 20.101 19 18.999V6.99902H5ZM11 17H9V11H11V17ZM15 17H13V11H15V17Z\"></path>\n                    </svg>\n                </div>\n            )\n            : (\n                <div className={button} aria-label=\"Report Review\" onClick={() => props.callback()}>\n                    <svg aria-hidden=\"false\" width=\"16\" height=\"16\" viewBox=\"0 0 20 20\">\n                        <path fill=\"currentColor\" d=\"M20,6.002H14V3.002C14,2.45 13.553,2.002 13,2.002H4C3.447,2.002 3,2.45 3,3.002V22.002H5V14.002H10.586L8.293,16.295C8.007,16.581 7.922,17.011 8.076,17.385C8.23,17.759 8.596,18.002 9,18.002H20C20.553,18.002 21,17.554 21,17.002V7.002C21,6.45 20.553,6.002 20,6.002Z\"></path>\n                    </svg>\n                </div>\n            );\n    };\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { classes, LazyComponent } from \"../../../utils/misc\";\nimport { filters, findBulk } from \"../../../webpack\";\nimport { Alerts, UserStore } from \"../../../webpack/common\";\nimport { Review } from \"../entities/Review\";\nimport { deleteReview, reportReview } from \"../Utils/ReviewDBAPI\";\nimport { canDeleteReview, openUserProfileModal, showToast } from \"../Utils/Utils\";\nimport MessageButton from \"./MessageButton\";\n\nexport default LazyComponent(() => {\n    // this is terrible, blame mantika\n    const p = filters.byProps;\n    const [\n        { cozyMessage, buttons, message, groupStart },\n        { container, isHeader },\n        { avatar, clickable, username, messageContent, wrapper, cozy },\n        { contents },\n        buttonClasses,\n        { defaultColor }\n    ] = findBulk(\n        p(\"cozyMessage\"),\n        p(\"container\", \"isHeader\"),\n        p(\"avatar\", \"zalgo\"),\n        p(\"contents\"),\n        p(\"button\", \"wrapper\", \"disabled\"),\n        p(\"defaultColor\")\n    );\n\n    return function ReviewComponent({ review, refetch }: { review: Review; refetch(): void; }) {\n        function openModal() {\n            openUserProfileModal(review.senderdiscordid);\n        }\n\n        function delReview() {\n            Alerts.show({\n                title: \"Are you sure?\",\n                body: \"Do you really want to delete this review?\",\n                confirmText: \"Delete\",\n                cancelText: \"Nevermind\",\n                onConfirm: () => {\n                    deleteReview(review.id).then(res => {\n                        if (res.successful) {\n                            refetch();\n                        }\n                        showToast(res.message);\n                    });\n                }\n            });\n        }\n\n        function reportRev() {\n            Alerts.show({\n                title: \"Are you sure?\",\n                body: \"Do you really you want to report this review?\",\n                confirmText: \"Report\",\n                cancelText: \"Nevermind\",\n                // confirmColor: \"red\", this just adds a class name and breaks the submit button guh\n                onConfirm: () => reportReview(review.id)\n            });\n        }\n\n        return (\n            <div className={classes(cozyMessage, message, groupStart, wrapper, cozy, \"user-review\")}>\n                <div className={contents}>\n                    <img\n                        className={classes(avatar, clickable)}\n                        style={{ left: \"8px\" }}\n                        onClick={openModal}\n                        src={review.profile_photo || \"/assets/1f0bfc0865d324c2587920a7d80c609b.png?size=128\"}\n                    />\n                    <span\n                        className={classes(username, clickable)}\n                        style={{ color: \"var(--text-normal)\", right: \"8px\" }}\n                        onClick={() => openModal()}\n                    >\n                        {review.username}\n                    </span>\n                    <p\n                        className={classes(messageContent, defaultColor)}\n                        style={{ fontSize: 15, marginTop: 4, right: \"8px\" }}\n                    >\n                        {review.comment}\n                    </p>\n                    <div className={classes(container, isHeader, buttons)} style={{\n                        padding: \"0px\",\n                    }}>\n                        <div className={buttonClasses.wrapper} >\n                            <MessageButton type=\"report\" callback={reportRev} />\n                            {canDeleteReview(review, UserStore.getCurrentUser().id) && (\n                                <MessageButton type=\"delete\" callback={delReview} />\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    };\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport type { KeyboardEvent } from \"react\";\n\nimport { classes, lazyWebpack, useAwaiter } from \"../../../utils/misc\";\nimport { Forms, Text, UserStore } from \"../../../webpack/common\";\nimport { addReview, getReviews } from \"../Utils/ReviewDBAPI\";\nimport ReviewComponent from \"./ReviewComponent\";\n\nconst Classes = lazyWebpack(m => typeof m.textarea === \"string\");\n\nexport default function ReviewsView({ userId }: { userId: string; }) {\n    const [reviews, _, isLoading, refetch] = useAwaiter(() => getReviews(userId), []);\n\n    if (isLoading) return null;\n\n    function onKeyPress({ key, target }: KeyboardEvent<HTMLTextAreaElement>) {\n        if (key === \"Enter\") {\n            addReview({\n                userid: userId,\n                comment: (target as HTMLInputElement).value,\n                star: -1\n            }).then(res => {\n                if (res === 0 || res === 1) {\n                    (target as HTMLInputElement).value = \"\"; // clear the input\n                    refetch();\n                }\n            });\n        }\n    }\n\n    return (\n        <div className=\"ReviewDB\">\n            <>\n                <Text\n                    tag=\"h2\"\n                    variant=\"eyebrow\"\n                    style={{\n                        paddingLeft: \"0px\",\n                        marginBottom: \"12px\",\n                        color: \"var(--header-primary)\"\n                    }}\n                >\n                    User Reviews\n                </Text>\n                {reviews?.map(review =>\n                    <ReviewComponent\n                        key={review.id}\n                        review={review}\n                        refetch={refetch}\n                    />\n                )}\n                {reviews?.length === 0 && (\n                    <Forms.FormText style={{ paddingLeft: \"0px\", paddingRight: \"12px\", marginBottom: \"12px\" }}>\n                        Looks like nobody reviewed this user yet. You could be the first!\n                    </Forms.FormText>\n                )}\n                <textarea\n                    className={classes(Classes.textarea, \"enter-comment\")}\n                    placeholder={\"Review @\" + UserStore.getUser(userId)?.username ?? \"\"}\n                    onKeyDown={onKeyPress}\n                    style={{\n                        padding: \"12px\",\n                        marginBottom: \"12px\",\n                        color: \"var(--text-normal)\",\n                        border: \"1px solid var(--profile-message-input-border-color)\",\n                        fontSize: \"14px\",\n                        borderRadius: \"3px\",\n                    }}\n                />\n            </>\n        </div>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { User } from \"discord-types/general\";\n\nimport ErrorBoundary from \"../../components/ErrorBoundary\";\nimport { Devs } from \"../../utils/constants\";\nimport definePlugin, { OptionType } from \"../../utils/types\";\nimport { Settings } from \"../../Vencord\";\nimport { Button, UserStore } from \"../../webpack/common\";\nimport ReviewsView from \"./components/ReviewsView\";\nimport { getLastReviewID } from \"./Utils/ReviewDBAPI\";\nimport { authorize, showToast } from \"./Utils/Utils\";\n\nexport default definePlugin({\n    name: \"ReviewDB\",\n    description: \"Review other users (Adds a new settings to profiles)\",\n    authors: [Devs.mantikafasi, Devs.Ven],\n\n    patches: [\n        {\n            find: \"disableBorderColor:!0\",\n            replacement: {\n                match: /\\(.{0,10}\\{user:(.),setNote:.,canDM:.,.+?\\}\\)/,\n                replace: \"$&,Vencord.Plugins.plugins.ReviewDB.getReviewsComponent($1)\"\n            },\n        }\n    ],\n\n    options: {\n        authorize: {\n            type: OptionType.COMPONENT,\n            description: \"Authorise with ReviewDB\",\n            component: () => (\n                <Button onClick={authorize}>\n                    Authorise with ReviewDB\n                </Button>\n            )\n        },\n        notifyReviews: {\n            type: OptionType.BOOLEAN,\n            description: \"Notify about new reviews on startup\",\n            default: true,\n        }\n    },\n\n    async start() {\n        const settings = Settings.plugins.ReviewDB;\n        if (!settings.lastReviewId || !settings.notifyReviews) return;\n\n        setTimeout(async () => {\n            const id = await getLastReviewID(UserStore.getCurrentUser().id);\n            if (settings.lastReviewId < id) {\n                showToast(\"You have new reviews on your profile!\");\n                settings.lastReviewId = id;\n            }\n        }, 4000);\n    },\n\n    getReviewsComponent: (user: User) => (\n        <ErrorBoundary message=\"Failed to render Reviews\">\n            <ReviewsView userId={user.id} />\n        </ErrorBoundary>\n    )\n});\n", "export default \".vcSettingsTabBar {\\n    margin-top: 20px;\\n    margin-bottom: -2px;\\n    border-bottom: 2px solid var(--background-modifier-accent);\\n}\\n\\n.vcSettingsTabBarItem {\\n    margin-right: 32px;\\n    padding-bottom: 16px;\\n    margin-bottom: -2px;\\n}\\n\\n.vcSettingsQuickActionCard {\\n    padding: 1em;\\n    display: flex;\\n    gap: 1em;\\n    align-items: center;\\n    justify-content: space-between;\\n    flex-wrap: wrap;\\n    flex-grow: 1;\\n    flex-direction: row;\\n    margin-bottom: 1em;\\n}\\n\"", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Toasts } from \"../webpack/common\";\nimport IpcEvents from \"./IpcEvents\";\nimport Logger from \"./Logger\";\n\nexport async function importSettings(data: string) {\n    try {\n        var parsed = JSON.parse(data);\n    } catch (err) {\n        console.log(data);\n        throw new Error(\"Failed to parse JSON: \" + String(err));\n    }\n\n    if (\"settings\" in parsed && \"quickCss\" in parsed) {\n        await VencordNative.ipc.invoke(IpcEvents.SET_SETTINGS, JSON.stringify(parsed.settings, null, 4));\n        await VencordNative.ipc.invoke(IpcEvents.SET_QUICK_CSS, parsed.quickCss);\n    } else\n        throw new Error(\"Invalid Settings. Is this even a Vencord Settings file?\");\n}\n\nexport async function exportSettings() {\n    const settings = JSON.parse(VencordNative.ipc.sendSync(IpcEvents.GET_SETTINGS));\n    const quickCss = await VencordNative.ipc.invoke(IpcEvents.GET_QUICK_CSS);\n    return JSON.stringify({ settings, quickCss }, null, 4);\n}\n\nexport async function downloadSettingsBackup() {\n    const filename = \"vencord-settings-backup.json\";\n    const backup = await exportSettings();\n    const data = new TextEncoder().encode(backup);\n\n    if (IS_WEB) {\n        const file = new File([data], filename, { type: \"application/json\" });\n        const a = document.createElement(\"a\");\n        a.href = URL.createObjectURL(file);\n        a.download = filename;\n\n        document.body.appendChild(a);\n        a.click();\n        setImmediate(() => {\n            URL.revokeObjectURL(a.href);\n            document.body.removeChild(a);\n        });\n    } else {\n        DiscordNative.fileManager.saveWithDialog(data, filename);\n    }\n}\n\nconst toastSuccess = () => Toasts.show({\n    type: Toasts.Type.SUCCESS,\n    message: \"Settings successfully imported. Restart to apply changes!\",\n    id: Toasts.genId()\n});\n\nconst toastFailure = (err: any) => Toasts.show({\n    type: Toasts.Type.FAILURE,\n    message: `Failed to import settings: ${String(err)}`,\n    id: Toasts.genId()\n});\n\nexport async function uploadSettingsBackup(showToast = true): Promise<void> {\n    if (IS_WEB) {\n        const input = document.createElement(\"input\");\n        input.type = \"file\";\n        input.style.display = \"none\";\n        input.accept = \"application/json\";\n        input.onchange = async () => {\n            const file = input.files?.[0];\n            if (!file) return;\n\n            const reader = new FileReader();\n            reader.onload = async () => {\n                try {\n                    await importSettings(reader.result as string);\n                    if (showToast) toastSuccess();\n                } catch (err) {\n                    new Logger(\"SettingsSync\").error(err);\n                    if (showToast) toastFailure(err);\n                }\n            };\n            reader.readAsText(file);\n        };\n\n        document.body.appendChild(input);\n        input.click();\n        setImmediate(() => document.body.removeChild(input));\n    } else {\n        const [file] = await DiscordNative.fileManager.openFiles({\n            filters: [\n                { name: \"Vencord Settings Backup\", extensions: [\"json\"] },\n                { name: \"all\", extensions: [\"*\"] }\n            ]\n        });\n\n        if (file) {\n            try {\n                console.log(file);\n                await importSettings(new TextDecoder().decode(file.data));\n                if (showToast) toastSuccess();\n            } catch (err) {\n                new Logger(\"SettingsSync\").error(err);\n                if (showToast) toastFailure(err);\n            }\n        }\n    }\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { downloadSettingsBackup, uploadSettingsBackup } from \"../../utils/settingsSync\";\nimport { Button, Card, Forms, Margins, Text } from \"../../webpack/common\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport { Flex } from \"../Flex\";\n\nfunction BackupRestoreTab() {\n    return (\n        <Forms.FormSection title=\"Settings Sync\">\n            <Card style={{\n                backgroundColor: \"var(--info-warning-background)\",\n                borderColor: \"var(--info-warning-foreground)\",\n                color: \"var(--info-warning-text)\",\n                padding: \"1em\",\n                marginBottom: \"0.5em\",\n            }}>\n                <Flex flexDirection=\"column\">\n                    <strong>Warning</strong>\n                    <span>Importing a settings file will overwrite your current settings.</span>\n                </Flex>\n            </Card>\n            <Text variant=\"text-md/normal\" className={Margins.marginBottom8}>\n                You can import and export your Vencord settings as a JSON file.\n                This allows you to easily transfer your settings to another device,\n                or recover your settings after reinstalling Vencord or Discord.\n            </Text>\n            <Text variant=\"text-md/normal\" className={Margins.marginBottom8}>\n                Settings Export contains:\n                <ul>\n                    <li>&mdash; Custom QuickCSS</li>\n                    <li>&mdash; Plugin Settings</li>\n                </ul>\n            </Text>\n            <Flex>\n                <Button\n                    onClick={uploadSettingsBackup}\n                    size={Button.Sizes.SMALL}\n                >\n                    Import Settings\n                </Button>\n                <Button\n                    onClick={downloadSettingsBackup}\n                    size={Button.Sizes.SMALL}\n                >\n                    Export Settings\n                </Button>\n            </Flex>\n        </Forms.FormSection>\n    );\n}\n\nexport default ErrorBoundary.wrap(BackupRestoreTab);\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Plugins from \"~plugins\";\n\nimport { registerCommand, unregisterCommand } from \"../api/Commands\";\nimport { Settings } from \"../api/settings\";\nimport { traceFunction } from \"../debug/Tracer\";\nimport Logger from \"../utils/Logger\";\nimport { Patch, Plugin } from \"../utils/types\";\n\nconst logger = new Logger(\"PluginManager\", \"#a6d189\");\n\nexport const PMLogger = logger;\nexport const plugins = Plugins;\nexport const patches = [] as Patch[];\n\nconst settings = Settings.plugins;\n\nexport function isPluginEnabled(p: string) {\n    return (\n        Plugins[p]?.required ||\n        Plugins[p]?.isDependency ||\n        settings[p]?.enabled\n    ) ?? false;\n}\n\nconst pluginsValues = Object.values(Plugins);\n\n// First roundtrip to mark and force enable dependencies\nfor (const p of pluginsValues) {\n    p.dependencies?.forEach(d => {\n        const dep = Plugins[d];\n        if (dep) {\n            settings[d].enabled = true;\n            dep.isDependency = true;\n        }\n        else {\n            const error = new Error(`Plugin ${p.name} has unresolved dependency ${d}`);\n            if (IS_DEV)\n                throw error;\n            logger.warn(error);\n        }\n    });\n}\n\nfor (const p of pluginsValues)\n    if (p.patches && isPluginEnabled(p.name)) {\n        for (const patch of p.patches) {\n            patch.plugin = p.name;\n            if (!Array.isArray(patch.replacement))\n                patch.replacement = [patch.replacement];\n            patches.push(patch);\n        }\n    }\n\nexport const startAllPlugins = traceFunction(\"startAllPlugins\", function startAllPlugins() {\n    for (const name in Plugins)\n        if (isPluginEnabled(name)) {\n            startPlugin(Plugins[name]);\n        }\n});\n\nexport function startDependenciesRecursive(p: Plugin) {\n    let restartNeeded = false;\n    const failures: string[] = [];\n    p.dependencies?.forEach(dep => {\n        if (!Settings.plugins[dep].enabled) {\n            startDependenciesRecursive(Plugins[dep]);\n            // If the plugin has patches, don't start the plugin, just enable it.\n            if (Plugins[dep].patches) {\n                logger.warn(`Enabling dependency ${dep} requires restart.`);\n                Settings.plugins[dep].enabled = true;\n                restartNeeded = true;\n                return;\n            }\n            const result = startPlugin(Plugins[dep]);\n            if (!result) failures.push(dep);\n        }\n    });\n    return { restartNeeded, failures };\n}\n\nexport const startPlugin = traceFunction(\"startPlugin\", function startPlugin(p: Plugin) {\n    if (p.start) {\n        logger.info(\"Starting plugin\", p.name);\n        if (p.started) {\n            logger.warn(`${p.name} already started`);\n            return false;\n        }\n        try {\n            p.start();\n            p.started = true;\n        } catch (e) {\n            logger.error(`Failed to start ${p.name}\\n`, e);\n            return false;\n        }\n    }\n\n    if (p.commands?.length) {\n        logger.info(\"Registering commands of plugin\", p.name);\n        for (const cmd of p.commands) {\n            try {\n                registerCommand(cmd, p.name);\n            } catch (e) {\n                logger.error(`Failed to register command ${cmd.name}\\n`, e);\n                return false;\n            }\n        }\n\n    }\n\n    return true;\n}, p => `startPlugin ${p.name}`);\n\nexport const stopPlugin = traceFunction(\"stopPlugin\", function stopPlugin(p: Plugin) {\n    if (p.stop) {\n        logger.info(\"Stopping plugin\", p.name);\n        if (!p.started) {\n            logger.warn(`${p.name} already stopped`);\n            return false;\n        }\n        try {\n            p.stop();\n            p.started = false;\n        } catch (e) {\n            logger.error(`Failed to stop ${p.name}\\n`, e);\n            return false;\n        }\n    }\n\n    if (p.commands?.length) {\n        logger.info(\"Unregistering commands of plugin\", p.name);\n        for (const cmd of p.commands) {\n            try {\n                unregisterCommand(cmd.name);\n            } catch (e) {\n                logger.error(`Failed to unregister command ${cmd.name}\\n`, e);\n                return false;\n            }\n        }\n    }\n\n    return true;\n}, p => `stopPlugin ${p.name}`);\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport class ChangeList<T>{\n    private set = new Set<T>();\n\n    public get changeCount() {\n        return this.set.size;\n    }\n\n    public get hasChanges() {\n        return this.changeCount > 0;\n    }\n\n    public handleChange(item: T) {\n        if (!this.set.delete(item))\n            this.set.add(item);\n    }\n\n    public add(item: T) {\n        return this.set.add(item);\n    }\n\n    public remove(item: T) {\n        return this.set.delete(item);\n    }\n\n    public getChanges() {\n        return this.set.values();\n    }\n\n    public map<R>(mapper: (v: T, idx: number, arr: T[]) => R): R[] {\n        return [...this.getChanges()].map(mapper);\n    }\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport gitHash from \"~git-hash\";\n\nimport IpcEvents from \"./IpcEvents\";\nimport Logger from \"./Logger\";\nimport { IpcRes } from \"./types\";\n\nexport const UpdateLogger = new Logger(\"Updater\", \"white\");\nexport let isOutdated = false;\nexport let isNewer = false;\nexport let updateError: any;\nexport let changes: Record<\"hash\" | \"author\" | \"message\", string>[];\n\nasync function Unwrap<T>(p: Promise<IpcRes<T>>) {\n    const res = await p;\n\n    if (res.ok) return res.value;\n\n    updateError = res.error;\n    throw res.error;\n}\n\nexport async function checkForUpdates() {\n    changes = await Unwrap(VencordNative.ipc.invoke<IpcRes<typeof changes>>(IpcEvents.GET_UPDATES));\n    if (changes.some(c => c.hash === gitHash)) {\n        isNewer = true;\n        return (isOutdated = false);\n    }\n    return (isOutdated = changes.length > 0);\n}\n\nexport async function update() {\n    if (!isOutdated) return true;\n\n    const res = await Unwrap(VencordNative.ipc.invoke<IpcRes<boolean>>(IpcEvents.UPDATE));\n\n    if (res)\n        isOutdated = false;\n\n    return res;\n}\n\nexport function getRepo() {\n    return Unwrap(VencordNative.ipc.invoke<IpcRes<string>>(IpcEvents.GET_REPO));\n}\n\ntype Hashes = Record<\"patcher.js\" | \"preload.js\" | \"renderer.js\", string>;\n\n/**\n * @returns true if hard restart is required\n */\nexport async function rebuild() {\n    const oldHashes = await Unwrap(VencordNative.ipc.invoke<IpcRes<Hashes>>(IpcEvents.GET_HASHES));\n\n    if (!await Unwrap(VencordNative.ipc.invoke<IpcRes<boolean>>(IpcEvents.BUILD)))\n        throw new Error(\"The Build failed. Please try manually building the new update\");\n\n    const newHashes = await Unwrap(VencordNative.ipc.invoke<IpcRes<Hashes>>(IpcEvents.GET_HASHES));\n\n    return oldHashes[\"patcher.js\"] !== newHashes[\"patcher.js\"] ||\n        oldHashes[\"preload.js\"] !== newHashes[\"preload.js\"];\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { isOutdated, rebuild, update } from \"../utils/updater\";\n\nexport async function handleComponentFailed() {\n    if (isOutdated) {\n        setImmediate(async () => {\n            const wantsUpdate = confirm(\n                \"Uh Oh! Failed to render this Page.\" +\n                \" However, there is an update available that might fix it.\" +\n                \" Would you like to update and restart now?\"\n            );\n            if (wantsUpdate) {\n                try {\n                    await update();\n                    await rebuild();\n                    if (IS_WEB)\n                        location.reload();\n                    else\n                        DiscordNative.app.relaunch();\n                } catch (e) {\n                    console.error(e);\n                    alert(\"That also failed :( Try updating or reinstalling with the installer!\");\n                }\n            }\n        });\n    }\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { User } from \"discord-types/general\";\nimport { Constructor } from \"type-fest\";\n\nimport { generateId } from \"../../api/Commands\";\nimport { useSettings } from \"../../api/settings\";\nimport { LazyComponent, lazyWebpack } from \"../../utils/misc\";\nimport { ModalContent, ModalFooter, ModalHeader, ModalProps, ModalRoot, ModalSize } from \"../../utils/modal\";\nimport { proxyLazy } from \"../../utils/proxyLazy\";\nimport { OptionType, Plugin } from \"../../utils/types\";\nimport { filters, findByCode } from \"../../webpack\";\nimport { Button, FluxDispatcher, Forms, React, Text, Tooltip, UserStore, UserUtils } from \"../../webpack/common\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport { Flex } from \"../Flex\";\nimport {\n    ISettingElementProps,\n    SettingBooleanComponent,\n    SettingCustomComponent,\n    SettingNumericComponent,\n    SettingSelectComponent,\n    SettingSliderComponent,\n    SettingTextComponent\n} from \"./components\";\n\nconst UserSummaryItem = LazyComponent(() => findByCode(\"defaultRenderUser\", \"showDefaultAvatarsForNullUsers\"));\nconst AvatarStyles = lazyWebpack(filters.byProps(\"moreUsers\", \"emptyUser\", \"avatarContainer\", \"clickableAvatar\"));\nconst UserRecord: Constructor<Partial<User>> = proxyLazy(() => UserStore.getCurrentUser().constructor) as any;\n\ninterface PluginModalProps extends ModalProps {\n    plugin: Plugin;\n    onRestartNeeded(): void;\n}\n\n/** To stop discord making unwanted requests... */\nfunction makeDummyUser(user: { name: string, id: BigInt; }) {\n    const newUser = new UserRecord({\n        username: user.name,\n        id: generateId(),\n        bot: true,\n    });\n    FluxDispatcher.dispatch({\n        type: \"USER_UPDATE\",\n        user: newUser,\n    });\n    return newUser;\n}\n\nconst Components: Record<OptionType, React.ComponentType<ISettingElementProps<any>>> = {\n    [OptionType.STRING]: SettingTextComponent,\n    [OptionType.NUMBER]: SettingNumericComponent,\n    [OptionType.BIGINT]: SettingNumericComponent,\n    [OptionType.BOOLEAN]: SettingBooleanComponent,\n    [OptionType.SELECT]: SettingSelectComponent,\n    [OptionType.SLIDER]: SettingSliderComponent,\n    [OptionType.COMPONENT]: SettingCustomComponent\n};\n\nexport default function PluginModal({ plugin, onRestartNeeded, onClose, transitionState }: PluginModalProps) {\n    const [authors, setAuthors] = React.useState<Partial<User>[]>([]);\n\n    const pluginSettings = useSettings().plugins[plugin.name];\n\n    const [tempSettings, setTempSettings] = React.useState<Record<string, any>>({});\n\n    const [errors, setErrors] = React.useState<Record<string, boolean>>({});\n    const [saveError, setSaveError] = React.useState<string | null>(null);\n\n    const canSubmit = () => Object.values(errors).every(e => !e);\n\n    React.useEffect(() => {\n        (async () => {\n            for (const user of plugin.authors.slice(0, 6)) {\n                const author = user.id\n                    ? await UserUtils.fetchUser(`${user.id}`).catch(() => makeDummyUser(user))\n                    : makeDummyUser(user);\n                setAuthors(a => [...a, author]);\n            }\n        })();\n    }, []);\n\n    async function saveAndClose() {\n        if (!plugin.options) {\n            onClose();\n            return;\n        }\n\n        if (plugin.beforeSave) {\n            const result = await Promise.resolve(plugin.beforeSave(tempSettings));\n            if (result !== true) {\n                setSaveError(result);\n                return;\n            }\n        }\n\n        let restartNeeded = false;\n        for (const [key, value] of Object.entries(tempSettings)) {\n            const option = plugin.options[key];\n            pluginSettings[key] = value;\n            option?.onChange?.(value);\n            if (option?.restartNeeded) restartNeeded = true;\n        }\n        if (restartNeeded) onRestartNeeded();\n        onClose();\n    }\n\n    function renderSettings() {\n        if (!pluginSettings || !plugin.options) {\n            return <Forms.FormText>There are no settings for this plugin.</Forms.FormText>;\n        }\n\n        const options = Object.entries(plugin.options).map(([key, setting]) => {\n            function onChange(newValue: any) {\n                setTempSettings(s => ({ ...s, [key]: newValue }));\n            }\n\n            function onError(hasError: boolean) {\n                setErrors(e => ({ ...e, [key]: hasError }));\n            }\n\n            const Component = Components[setting.type];\n            return (\n                <Component\n                    id={key}\n                    key={key}\n                    option={setting}\n                    onChange={onChange}\n                    onError={onError}\n                    pluginSettings={pluginSettings}\n                />\n            );\n        });\n\n        return <Flex flexDirection=\"column\" style={{ gap: 12 }}>{options}</Flex>;\n    }\n\n    function renderMoreUsers(_label: string, count: number) {\n        const sliceCount = plugin.authors.length - count;\n        const sliceStart = plugin.authors.length - sliceCount;\n        const sliceEnd = sliceStart + plugin.authors.length - count;\n\n        return (\n            <Tooltip text={plugin.authors.slice(sliceStart, sliceEnd).map(u => u.name).join(\", \")}>\n                {({ onMouseEnter, onMouseLeave }) => (\n                    <div\n                        className={AvatarStyles.moreUsers}\n                        onMouseEnter={onMouseEnter}\n                        onMouseLeave={onMouseLeave}\n                    >\n                        +{sliceCount}\n                    </div>\n                )}\n            </Tooltip>\n        );\n    }\n\n    return (\n        <ModalRoot transitionState={transitionState} size={ModalSize.MEDIUM}>\n            <ModalHeader>\n                <Text variant=\"heading-md/bold\">{plugin.name}</Text>\n            </ModalHeader>\n            <ModalContent style={{ marginBottom: 8, marginTop: 8 }}>\n                <Forms.FormSection>\n                    <Forms.FormTitle tag=\"h3\">About {plugin.name}</Forms.FormTitle>\n                    <Forms.FormText>{plugin.description}</Forms.FormText>\n                    <div style={{ marginTop: 8, marginBottom: 8, width: \"fit-content\" }}>\n                        <UserSummaryItem\n                            users={authors}\n                            count={plugin.authors.length}\n                            guildId={undefined}\n                            renderIcon={false}\n                            max={6}\n                            showDefaultAvatarsForNullUsers\n                            showUserPopout\n                            renderMoreUsers={renderMoreUsers}\n                        />\n                    </div>\n                </Forms.FormSection>\n                {!!plugin.settingsAboutComponent && (\n                    <div style={{ marginBottom: 8 }}>\n                        <Forms.FormSection>\n                            <ErrorBoundary message=\"An error occurred while rendering this plugin's custom InfoComponent\">\n                                <plugin.settingsAboutComponent />\n                            </ErrorBoundary>\n                        </Forms.FormSection>\n                    </div>\n                )}\n                <Forms.FormSection>\n                    <Forms.FormTitle tag=\"h3\">Settings</Forms.FormTitle>\n                    {renderSettings()}\n                </Forms.FormSection>\n            </ModalContent>\n            <ModalFooter>\n                <Flex flexDirection=\"column\" style={{ width: \"100%\" }}>\n                    <Flex style={{ marginLeft: \"auto\" }}>\n                        <Button\n                            onClick={onClose}\n                            size={Button.Sizes.SMALL}\n                            color={Button.Colors.RED}\n                        >\n                            Cancel\n                        </Button>\n                        <Tooltip text=\"You must fix all errors before saving\" shouldShow={!canSubmit()}>\n                            {({ onMouseEnter, onMouseLeave }) => (\n                                <Button\n                                    size={Button.Sizes.SMALL}\n                                    color={Button.Colors.BRAND}\n                                    onClick={saveAndClose}\n                                    onMouseEnter={onMouseEnter}\n                                    onMouseLeave={onMouseLeave}\n                                    disabled={!canSubmit()}\n                                >\n                                    Save & Close\n                                </Button>\n                            )}\n                        </Tooltip>\n                    </Flex>\n                    {saveError && <Text variant=\"text-md/semibold\" style={{ color: \"var(--text-danger)\" }}>Error while saving: {saveError}</Text>}\n                </Flex>\n            </ModalFooter>\n        </ModalRoot>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport const PluginsGrid: React.CSSProperties = {\n    marginTop: 16,\n    display: \"grid\",\n    gridGap: 16,\n    gridTemplateColumns: \"repeat(auto-fill, minmax(250px, 1fr))\",\n};\n\nexport const PluginsGridItem: React.CSSProperties = {\n    backgroundColor: \"var(--background-modifier-selected)\",\n    color: \"var(--interactive-active)\",\n    borderRadius: 3,\n    cursor: \"pointer\",\n    display: \"block\",\n    height: \"min-content\",\n    padding: 10,\n    width: \"100%\",\n};\n\nexport const FiltersBar: React.CSSProperties = {\n    gap: 10,\n    height: 40,\n    gridTemplateColumns: \"1fr 150px\",\n    display: \"grid\"\n};\n\nexport const SettingsIcon: React.CSSProperties = {\n    height: \"24px\",\n    width: \"24px\",\n    padding: \"0\",\n    background: \"transparent\",\n    marginRight: 8\n};\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Plugins from \"~plugins\";\n\nimport { showNotice } from \"../../api/Notices\";\nimport { Settings, useSettings } from \"../../api/settings\";\nimport { startDependenciesRecursive, startPlugin, stopPlugin } from \"../../plugins\";\nimport { ChangeList } from \"../../utils/ChangeList\";\nimport Logger from \"../../utils/Logger\";\nimport { classes, LazyComponent, lazyWebpack } from \"../../utils/misc\";\nimport { openModalLazy } from \"../../utils/modal\";\nimport { Plugin } from \"../../utils/types\";\nimport { filters, findByCode } from \"../../webpack\";\nimport { Alerts, Button, Forms, Margins, Parser, React, Select, Switch, Text, TextInput, Toasts, Tooltip } from \"../../webpack/common\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport { ErrorCard } from \"../ErrorCard\";\nimport { Flex } from \"../Flex\";\nimport { handleComponentFailed } from \"../handleComponentFailed\";\nimport PluginModal from \"./PluginModal\";\nimport * as styles from \"./styles\";\n\nconst logger = new Logger(\"PluginSettings\", \"#a6d189\");\n\nconst InputStyles = lazyWebpack(filters.byProps(\"inputDefault\", \"inputWrapper\"));\n\nconst CogWheel = LazyComponent(() => findByCode(\"18.564C15.797 19.099 14.932 19.498 14 19.738V22H10V19.738C9.069\"));\nconst InfoIcon = LazyComponent(() => findByCode(\"4.4408921e-16 C4.4771525,-1.77635684e-15 4.4408921e-16\"));\n\nfunction showErrorToast(message: string) {\n    Toasts.show({\n        message,\n        type: Toasts.Type.FAILURE,\n        id: Toasts.genId(),\n        options: {\n            position: Toasts.Position.BOTTOM\n        }\n    });\n}\n\ninterface ReloadRequiredCardProps extends React.HTMLProps<HTMLDivElement> {\n    plugins: string[];\n}\n\nfunction ReloadRequiredCard({ plugins, ...props }: ReloadRequiredCardProps) {\n    if (plugins.length === 0) return null;\n\n    const pluginPrefix = plugins.length === 1 ? \"The plugin\" : \"The following plugins require a reload to apply changes:\";\n    const pluginSuffix = plugins.length === 1 ? \" requires a reload to apply changes.\" : \".\";\n\n    return (\n        <ErrorCard {...props} style={{ padding: \"1em\", display: \"grid\", gridTemplateColumns: \"1fr auto\", gap: 8, ...props.style }}>\n            <span style={{ margin: \"auto 0\" }}>\n                {pluginPrefix} <code>{plugins.join(\", \")}</code>{pluginSuffix}\n            </span>\n            <Button look={Button.Looks.INVERTED} onClick={() => location.reload()}>Reload</Button>\n        </ErrorCard>\n    );\n}\n\ninterface PluginCardProps extends React.HTMLProps<HTMLDivElement> {\n    plugin: Plugin;\n    disabled: boolean;\n    onRestartNeeded(name: string): void;\n}\n\nfunction PluginCard({ plugin, disabled, onRestartNeeded, onMouseEnter, onMouseLeave }: PluginCardProps) {\n    const settings = useSettings();\n    const pluginSettings = settings.plugins[plugin.name];\n\n    const [iconHover, setIconHover] = React.useState(false);\n\n    function isEnabled() {\n        return pluginSettings?.enabled || plugin.started;\n    }\n\n    function openModal() {\n        openModalLazy(async () => {\n            return modalProps => {\n                return <PluginModal {...modalProps} plugin={plugin} onRestartNeeded={() => onRestartNeeded(plugin.name)} />;\n            };\n        });\n    }\n\n    function toggleEnabled() {\n        const wasEnabled = isEnabled();\n\n        // If we're enabling a plugin, make sure all deps are enabled recursively.\n        if (!wasEnabled) {\n            const { restartNeeded, failures } = startDependenciesRecursive(plugin);\n            if (failures.length) {\n                logger.error(`Failed to start dependencies for ${plugin.name}: ${failures.join(\", \")}`);\n                showNotice(\"Failed to start dependencies: \" + failures.join(\", \"), \"Close\", () => null);\n                return;\n            } else if (restartNeeded) {\n                // If any dependencies have patches, don't start the plugin yet.\n                pluginSettings.enabled = true;\n                onRestartNeeded(plugin.name);\n                return;\n            }\n        }\n\n        // if the plugin has patches, dont use stopPlugin/startPlugin. Wait for restart to apply changes.\n        if (plugin.patches) {\n            pluginSettings.enabled = !wasEnabled;\n            onRestartNeeded(plugin.name);\n            return;\n        }\n\n        // If the plugin is enabled, but hasn't been started, then we can just toggle it off.\n        if (wasEnabled && !plugin.started) {\n            pluginSettings.enabled = !wasEnabled;\n            return;\n        }\n\n        const result = wasEnabled ? stopPlugin(plugin) : startPlugin(plugin);\n        const action = wasEnabled ? \"stop\" : \"start\";\n\n        if (!result) {\n            logger.error(`Failed to ${action} plugin ${plugin.name}`);\n            showErrorToast(`Failed to ${action} plugin: ${plugin.name}`);\n            return;\n        }\n\n        pluginSettings.enabled = !wasEnabled;\n    }\n\n    return (\n        <Flex style={styles.PluginsGridItem} flexDirection=\"column\" onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave}>\n            <Switch\n                onChange={toggleEnabled}\n                disabled={disabled}\n                value={isEnabled()}\n                note={<Text variant=\"text-md/normal\" style={{\n                    height: 40,\n                    overflow: \"hidden\",\n                    // mfw css is so bad you need whatever this is to get multi line overflow ellipsis to work\n                    textOverflow: \"ellipsis\",\n                    display: \"-webkit-box\", // firefox users will cope (it doesn't support it)\n                    WebkitLineClamp: 2,\n                    lineClamp: 2,\n                    WebkitBoxOrient: \"vertical\",\n                    boxOrient: \"vertical\"\n                }}>\n                    {plugin.description}\n                </Text>}\n                hideBorder={true}\n            >\n                <Flex style={{ marginTop: \"auto\", width: \"100%\", height: \"100%\", alignItems: \"center\" }}>\n                    <Text variant=\"text-md/bold\" style={{ flexGrow: \"1\" }}>{plugin.name}</Text>\n                    <button role=\"switch\" onClick={() => openModal()} style={styles.SettingsIcon} className=\"button-12Fmur\">\n                        {plugin.options\n                            ? <CogWheel\n                                style={{ color: iconHover ? \"\" : \"var(--text-muted)\" }}\n                                onMouseEnter={() => setIconHover(true)}\n                                onMouseLeave={() => setIconHover(false)}\n                            />\n                            : <InfoIcon\n                                width=\"24\" height=\"24\"\n                                style={{ color: iconHover ? \"\" : \"var(--text-muted)\" }}\n                                onMouseEnter={() => setIconHover(true)}\n                                onMouseLeave={() => setIconHover(false)}\n                            />}\n                    </button>\n                </Flex>\n            </Switch>\n        </Flex>\n    );\n}\n\nexport default ErrorBoundary.wrap(function Settings() {\n    const settings = useSettings();\n    const changes = React.useMemo(() => new ChangeList<string>(), []);\n\n    React.useEffect(() => {\n        return () => void (changes.hasChanges && Alerts.show({\n            title: \"Restart required\",\n            body: (\n                <>\n                    <p>The following plugins require a restart:</p>\n                    <div>{changes.map((s, i) => (\n                        <>\n                            {i > 0 && \", \"}\n                            {Parser.parse(\"`\" + s + \"`\")}\n                        </>\n                    ))}</div>\n                </>\n            ),\n            confirmText: \"Restart now\",\n            cancelText: \"Later!\",\n            onConfirm: () => location.reload()\n        }));\n    }, []);\n\n    const depMap = React.useMemo(() => {\n        const o = {} as Record<string, string[]>;\n        for (const plugin in Plugins) {\n            const deps = Plugins[plugin].dependencies;\n            if (deps) {\n                for (const dep of deps) {\n                    o[dep] ??= [];\n                    o[dep].push(plugin);\n                }\n            }\n        }\n        return o;\n    }, []);\n\n    const sortedPlugins = React.useMemo(() => Object.values(Plugins)\n        .sort((a, b) => a.name.localeCompare(b.name)), []);\n\n    const [searchValue, setSearchValue] = React.useState({ value: \"\", status: \"all\" });\n\n    const onSearch = (query: string) => setSearchValue(prev => ({ ...prev, value: query }));\n    const onStatusChange = (status: string) => setSearchValue(prev => ({ ...prev, status }));\n\n    const pluginFilter = (plugin: typeof Plugins[keyof typeof Plugins]) => {\n        const showEnabled = searchValue.status === \"enabled\" || searchValue.status === \"all\";\n        const showDisabled = searchValue.status === \"disabled\" || searchValue.status === \"all\";\n        const enabled = settings.plugins[plugin.name]?.enabled || plugin.started;\n        return (\n            ((showEnabled && enabled) || (showDisabled && !enabled)) &&\n            (\n                plugin.name.toLowerCase().includes(searchValue.value.toLowerCase()) ||\n                plugin.description.toLowerCase().includes(searchValue.value.toLowerCase())\n            )\n        );\n    };\n\n    return (\n        <Forms.FormSection>\n            <Forms.FormTitle tag=\"h5\" className={classes(Margins.marginTop20, Margins.marginBottom8)}>\n                Filters\n            </Forms.FormTitle>\n\n            <ReloadRequiredCard plugins={[...changes.getChanges()]} style={{ marginBottom: 16 }} />\n\n            <div style={styles.FiltersBar}>\n                <TextInput value={searchValue.value} placeholder={\"Search for a plugin...\"} onChange={onSearch} style={{ marginBottom: 24 }} />\n                <div className={InputStyles.inputWrapper}>\n                    <Select\n                        className={InputStyles.inputDefault}\n                        options={[\n                            { label: \"Show All\", value: \"all\", default: true },\n                            { label: \"Show Enabled\", value: \"enabled\" },\n                            { label: \"Show Disabled\", value: \"disabled\" }\n                        ]}\n                        serialize={String}\n                        select={onStatusChange}\n                        isSelected={v => v === searchValue.status}\n                        closeOnSelect={true}\n                    />\n                </div>\n            </div>\n\n            <Forms.FormTitle className={Margins.marginTop20}>Plugins</Forms.FormTitle>\n\n            <div style={styles.PluginsGrid}>\n                {sortedPlugins?.length ? sortedPlugins\n                    .filter(a => !a.required && !dependencyCheck(a.name, depMap).length && pluginFilter(a))\n                    .map(plugin => {\n                        const enabledDependants = depMap[plugin.name]?.filter(d => settings.plugins[d].enabled);\n                        const dependency = enabledDependants?.length;\n                        return <PluginCard\n                            onRestartNeeded={name => changes.add(name)}\n                            disabled={plugin.required || !!dependency}\n                            plugin={plugin}\n                            key={plugin.name}\n                        />;\n                    })\n                    : <Text variant=\"text-md/normal\">No plugins meet search criteria.</Text>\n                }\n            </div>\n            <Forms.FormDivider />\n            <Forms.FormTitle tag=\"h5\" className={classes(Margins.marginTop20, Margins.marginBottom8)}>\n                Required Plugins\n            </Forms.FormTitle>\n            <div style={styles.PluginsGrid}>\n                {sortedPlugins?.length ? sortedPlugins\n                    .filter(a => a.required || dependencyCheck(a.name, depMap).length && pluginFilter(a))\n                    .map(plugin => {\n                        const enabledDependants = depMap[plugin.name]?.filter(d => settings.plugins[d].enabled);\n                        const dependency = enabledDependants?.length;\n                        const tooltipText = plugin.required\n                            ? \"This plugin is required for Vencord to function.\"\n                            : makeDependencyList(dependencyCheck(plugin.name, depMap));\n                        return <Tooltip text={tooltipText} key={plugin.name}>\n                            {({ onMouseLeave, onMouseEnter }) => (\n                                <PluginCard\n                                    onMouseLeave={onMouseLeave}\n                                    onMouseEnter={onMouseEnter}\n                                    onRestartNeeded={name => changes.handleChange(name)}\n                                    disabled={plugin.required || !!dependency}\n                                    plugin={plugin}\n                                />\n                            )}\n                        </Tooltip>;\n                    })\n                    : <Text variant=\"text-md/normal\">No plugins meet search criteria.</Text>\n                }\n            </div>\n        </Forms.FormSection >\n    );\n}, {\n    message: \"Failed to render the Plugin Settings. If this persists, try using the installer to reinstall!\",\n    onError: handleComponentFailed,\n});\n\nfunction makeDependencyList(deps: string[]) {\n    return (\n        <React.Fragment>\n            <Forms.FormText>This plugin is required by:</Forms.FormText>\n            {deps.map((dep: string) => <Forms.FormText style={{ margin: \"0 auto\" }}>{dep}</Forms.FormText>)}\n        </React.Fragment>\n    );\n}\n\nfunction dependencyCheck(pluginName: string, depMap: Record<string, string[]>): string[] {\n    return depMap[pluginName]?.filter(d => Settings.plugins[d].enabled) || [];\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport PluginSettings from \"../PluginSettings\";\n\nexport default ErrorBoundary.wrap(PluginSettings);\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport gitHash from \"~git-hash\";\n\nimport { classes, useAwaiter } from \"../../utils/misc\";\nimport { changes, checkForUpdates, getRepo, isNewer, rebuild, update, updateError, UpdateLogger } from \"../../utils/updater\";\nimport { Alerts, Button, Card, Forms, Margins, Parser, React, Toasts } from \"../../webpack/common\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport { ErrorCard } from \"../ErrorCard\";\nimport { Flex } from \"../Flex\";\nimport { handleComponentFailed } from \"../handleComponentFailed\";\nimport { Link } from \"../Link\";\n\nfunction withDispatcher(dispatcher: React.Dispatch<React.SetStateAction<boolean>>, action: () => any) {\n    return async () => {\n        dispatcher(true);\n        try {\n            await action();\n        } catch (e: any) {\n            UpdateLogger.error(\"Failed to update\", e);\n            if (!e) {\n                var err = \"An unknown error occurred (error is undefined).\\nPlease try again.\";\n            } else if (e.code && e.cmd) {\n                const { code, path, cmd, stderr } = e;\n\n                if (code === \"ENOENT\")\n                    var err = `Command \\`${path}\\` not found.\\nPlease install it and try again`;\n                else {\n                    var err = `An error occured while running \\`${cmd}\\`:\\n`;\n                    err += stderr || `Code \\`${code}\\`. See the console for more info`;\n                }\n\n            } else {\n                var err = \"An unknown error occurred. See the console for more info.\";\n            }\n            Alerts.show({\n                title: \"Oops!\",\n                body: (\n                    <ErrorCard>\n                        {err.split(\"\\n\").map(line => <div>{Parser.parse(line)}</div>)}\n                    </ErrorCard>\n                )\n            });\n        }\n        finally {\n            dispatcher(false);\n        }\n    };\n}\n\ninterface CommonProps {\n    repo: string;\n    repoPending: boolean;\n}\n\nfunction Changes({ updates, repo, repoPending }: CommonProps & { updates: typeof changes; }) {\n    return (\n        <Card style={{ padding: \".5em\" }}>\n            {updates.map(({ hash, author, message }) => (\n                <div>\n                    <Link href={`${repo}/commit/${hash}`} disabled={repoPending}>\n                        <code>{hash}</code>\n                    </Link>\n                    <span style={{\n                        marginLeft: \"0.5em\",\n                        color: \"var(--text-normal)\"\n                    }}>{message} - {author}</span>\n                </div>\n            ))}\n        </Card>\n    );\n}\n\nfunction Updatable(props: CommonProps) {\n    const [updates, setUpdates] = React.useState(changes);\n    const [isChecking, setIsChecking] = React.useState(false);\n    const [isUpdating, setIsUpdating] = React.useState(false);\n\n    const isOutdated = (updates?.length ?? 0) > 0;\n\n    return (\n        <>\n            {!updates && updateError ? (\n                <>\n                    <Forms.FormText>Failed to check updates. Check the console for more info</Forms.FormText>\n                    <ErrorCard style={{ padding: \"1em\" }}>\n                        <p>{updateError.stderr || updateError.stdout || \"An unknown error occurred\"}</p>\n                    </ErrorCard>\n                </>\n            ) : (\n                <Forms.FormText className={Margins.marginBottom8}>\n                    {isOutdated ? `There are ${updates.length} Updates` : \"Up to Date!\"}\n                </Forms.FormText>\n            )}\n\n            {isOutdated && <Changes updates={updates} {...props} />}\n\n            <Flex className={classes(Margins.marginBottom8, Margins.marginTop8)}>\n                {isOutdated && <Button\n                    size={Button.Sizes.SMALL}\n                    disabled={isUpdating || isChecking}\n                    onClick={withDispatcher(setIsUpdating, async () => {\n                        if (await update()) {\n                            setUpdates([]);\n                            const needFullRestart = await rebuild();\n                            await new Promise<void>(r => {\n                                Alerts.show({\n                                    title: \"Update Success!\",\n                                    body: \"Successfully updated. Restart now to apply the changes?\",\n                                    confirmText: \"Restart\",\n                                    cancelText: \"Not now!\",\n                                    onConfirm() {\n                                        if (needFullRestart)\n                                            window.DiscordNative.app.relaunch();\n                                        else\n                                            location.reload();\n                                        r();\n                                    },\n                                    onCancel: r\n                                });\n                            });\n                        }\n                    })}\n                >\n                    Update Now\n                </Button>}\n                <Button\n                    size={Button.Sizes.SMALL}\n                    disabled={isUpdating || isChecking}\n                    onClick={withDispatcher(setIsChecking, async () => {\n                        const outdated = await checkForUpdates();\n                        if (outdated) {\n                            setUpdates(changes);\n                        } else {\n                            setUpdates([]);\n                            Toasts.show({\n                                message: \"No updates found!\",\n                                id: Toasts.genId(),\n                                type: Toasts.Type.MESSAGE,\n                                options: {\n                                    position: Toasts.Position.BOTTOM\n                                }\n                            });\n                        }\n                    })}\n                >\n                    Check for Updates\n                </Button>\n            </Flex>\n        </>\n    );\n}\n\nfunction Newer(props: CommonProps) {\n    return (\n        <>\n            <Forms.FormText className={Margins.marginBottom8}>\n                Your local copy has more recent commits. Please stash or reset them.\n            </Forms.FormText>\n            <Changes {...props} updates={changes} />\n        </>\n    );\n}\n\nfunction Updater() {\n    const [repo, err, repoPending] = useAwaiter(getRepo, \"Loading...\");\n\n    React.useEffect(() => {\n        if (err)\n            UpdateLogger.error(\"Failed to retrieve repo\", err);\n    }, [err]);\n\n    const commonProps: CommonProps = {\n        repo,\n        repoPending\n    };\n\n    return (\n        <Forms.FormSection>\n            <Forms.FormTitle tag=\"h5\">Repo</Forms.FormTitle>\n\n            <Forms.FormText>{repoPending ? repo : err ? \"Failed to retrieve - check console\" : (\n                <Link href={repo}>\n                    {repo.split(\"/\").slice(-2).join(\"/\")}\n                </Link>\n            )} ({gitHash})</Forms.FormText>\n\n            <Forms.FormDivider />\n\n            <Forms.FormTitle tag=\"h5\">Updates</Forms.FormTitle>\n\n            {isNewer ? <Newer {...commonProps} /> : <Updatable {...commonProps} />}\n        </Forms.FormSection >\n    );\n}\n\nexport default IS_WEB ? null : ErrorBoundary.wrap(Updater, {\n    message: \"Failed to render the Updater. If this persists, try using the installer to reinstall!\",\n    onError: handleComponentFailed,\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\nimport { useSettings } from \"../../api/settings\";\nimport IpcEvents from \"../../utils/IpcEvents\";\nimport { useAwaiter } from \"../../utils/misc\";\nimport { Button, Card, Forms, React, Switch } from \"../../webpack/common\";\nimport DonateButton from \"../DonateButton\";\nimport ErrorBoundary from \"../ErrorBoundary\";\n\nconst st = (style: string) => `vcSettings${style}`;\n\nfunction VencordSettings() {\n    const [settingsDir, , settingsDirPending] = useAwaiter(() => VencordNative.ipc.invoke<string>(IpcEvents.GET_SETTINGS_DIR), \"Loading...\");\n    const settings = useSettings();\n\n    return (\n        <React.Fragment>\n            <DonateCard />\n            <Forms.FormSection title=\"Quick Actions\">\n                <Card className={st(\"QuickActionCard\")}>\n                    {IS_WEB ? (\n                        <Button\n                            onClick={() => require(\"../Monaco\").launchMonacoEditor()}\n                            size={Button.Sizes.SMALL}\n                            disabled={settingsDir === \"Loading...\"}>\n                            Open QuickCSS File\n                        </Button>\n                    ) : (\n                        <React.Fragment>\n                            <Button\n                                onClick={() => window.DiscordNative.app.relaunch()}\n                                size={Button.Sizes.SMALL}>\n                                Restart Client\n                            </Button>\n                            <Button\n                                onClick={() => VencordNative.ipc.invoke(IpcEvents.OPEN_MONACO_EDITOR)}\n                                size={Button.Sizes.SMALL}\n                                disabled={settingsDir === \"Loading...\"}>\n                                Open QuickCSS File\n                            </Button>\n                            <Button\n                                onClick={() => window.DiscordNative.fileManager.showItemInFolder(settingsDir)}\n                                size={Button.Sizes.SMALL}\n                                disabled={settingsDirPending}>\n                                Open Settings Folder\n                            </Button>\n                            <Button\n                                onClick={() => VencordNative.ipc.invoke(IpcEvents.OPEN_EXTERNAL, \"https://github.com/Vendicated/Vencord\")}\n                                size={Button.Sizes.SMALL}\n                                disabled={settingsDirPending}>\n                                Open in GitHub\n                            </Button>\n                        </React.Fragment>\n                    )}\n                </Card>\n            </Forms.FormSection>\n\n            <Forms.FormDivider />\n\n            <Forms.FormSection title=\"Settings\">\n                <Switch\n                    value={settings.useQuickCss}\n                    onChange={(v: boolean) => settings.useQuickCss = v}\n                    note=\"Loads styles from your QuickCss file\">\n                    Use QuickCss\n                </Switch>\n                {!IS_WEB && (\n                    <React.Fragment>\n                        <Switch\n                            value={settings.enableReactDevtools}\n                            onChange={(v: boolean) => settings.enableReactDevtools = v}\n                            note=\"Requires a full restart\">\n                            Enable React Developer Tools\n                        </Switch>\n                        <Switch\n                            value={settings.notifyAboutUpdates}\n                            onChange={(v: boolean) => settings.notifyAboutUpdates = v}\n                            note=\"Shows a Toast on StartUp\">\n                            Get notified about new Updates\n                        </Switch>\n                    </React.Fragment>\n                )}\n\n            </Forms.FormSection>\n        </React.Fragment>\n    );\n}\n\n\n\nfunction DonateCard() {\n    return (\n        <Card style={{\n            padding: \"1em\",\n            display: \"flex\",\n            flexDirection: \"row\",\n            marginBottom: \"1em\",\n            marginTop: \"1em\"\n        }}>\n            <div>\n                <Forms.FormTitle tag=\"h5\">Support the Project</Forms.FormTitle>\n                <Forms.FormText>\n                    Please consider supporting the Development of Vencord by donating!\n                </Forms.FormText>\n                <DonateButton style={{ transform: \"translateX(-1em)\" }} />\n            </div>\n            <img\n                role=\"presentation\"\n                src=\"https://cdn.discordapp.com/emojis/1026533090627174460.png\"\n                alt=\"\"\n                style={{ marginLeft: \"auto\", transform: \"rotate(10deg)\" }}\n            />\n        </Card>\n    );\n}\n\nexport default ErrorBoundary.wrap(VencordSettings);\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport cssText from \"~fileContent/settingsStyles.css\";\n\nimport { lazyWebpack } from \"../../utils/misc\";\nimport { filters } from \"../../webpack\";\nimport { Forms, React, Router, Text } from \"../../webpack/common\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport BackupRestoreTab from \"./BackupRestoreTab\";\nimport PluginsTab from \"./PluginsTab\";\nimport Updater from \"./Updater\";\nimport VencordSettings from \"./VencordTab\";\n\nconst style = document.createElement(\"style\");\nstyle.textContent = cssText;\ndocument.head.appendChild(style);\n\nconst st = (style: string) => `vcSettings${style}`;\n\nconst TabBar = lazyWebpack(filters.byCode('[role=\"tab\"][aria-disabled=\"false\"]'));\n\ninterface SettingsProps {\n    tab: string;\n}\n\nconst SettingsTabs = {\n    VencordSettings: { name: \"Vencord\", component: () => <VencordSettings /> },\n    VencordPlugins: { name: \"Plugins\", component: () => <PluginsTab /> },\n    VencordThemes: { name: \"Themes\", component: () => <Text variant=\"text-md/medium\">Coming soon to a Vencord near you!</Text> },\n    VencordUpdater: { name: \"Updater\", component: () => Updater ? <Updater /> : null },\n    VencordSettingsSync: { name: \"Backup & Restore\", component: () => <BackupRestoreTab /> },\n};\n\n\nfunction Settings(props: SettingsProps) {\n    const { tab = \"VencordSettings\" } = props;\n\n    const CurrentTab = SettingsTabs[tab]?.component ?? null;\n\n    return <Forms.FormSection>\n        <Text variant=\"heading-md/normal\" tag=\"h2\">Vencord Settings</Text>\n\n        <TabBar\n            type={TabBar.Types.TOP}\n            look={TabBar.Looks.BRAND}\n            className={st(\"TabBar\")}\n            selectedItem={tab}\n            onItemSelect={Router.open}\n        >\n            {Object.entries(SettingsTabs).map(([key, { name }]) => {\n                return <TabBar.Item\n                    id={key}\n                    className={st(\"TabBarItem\")}\n                    key={key}>\n                    {name}\n                </TabBar.Item>;\n            })}\n        </TabBar>\n        <Forms.FormDivider />\n        <CurrentTab />\n    </Forms.FormSection >;\n}\n\nexport default function (props: SettingsProps) {\n    return <ErrorBoundary>\n        <Settings tab={props.tab} />\n    </ErrorBoundary>;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and Megumin\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport gitHash from \"~git-hash\";\n\nimport { Devs } from \"../utils/constants\";\nimport { LazyComponent } from \"../utils/misc\";\nimport definePlugin from \"../utils/types\";\n\nconst SettingsComponent = LazyComponent(() => require(\"../components/VencordSettings\").default);\n\nexport default definePlugin({\n    name: \"Settings\",\n    description: \"Adds Settings UI and debug info\",\n    authors: [Devs.Ven, Devs.Megu],\n    required: true,\n    patches: [{\n        find: \"().versionHash\",\n        replacement: [\n            {\n                match: /\\[\\(0,.{1,3}\\.jsxs?\\)\\((.{1,10}),(\\{[^{}}]+\\{.{0,20}\\(\\)\\.versionHash,.+?\\})\\),\" \"/,\n                replace: (m, component, props) => {\n                    props = props.replace(/children:\\[.+\\]/, \"\");\n                    return `${m},Vencord.Plugins.plugins.Settings.makeInfoElements(${component}, ${props})`;\n                }\n            }\n        ]\n    }, {\n        find: \"Messages.ACTIVITY_SETTINGS\",\n        replacement: {\n            match: /\\{section:(.{1,2})\\.ID\\.HEADER,\\s*label:(.{1,2})\\..{1,2}\\.Messages\\.ACTIVITY_SETTINGS\\}/,\n            replace: (m, mod) => {\n                const updater = !IS_WEB ? '{section:\"VencordUpdater\",label:\"Updater\",element:Vencord.Plugins.plugins.Settings.tabs.updater},' : \"\";\n                const patchHelper = IS_DEV ? '{section:\"VencordPatchHelper\",label:\"Patch Helper\",element:Vencord.Components.PatchHelper},' : \"\";\n                return (\n                    `{section:${mod}.ID.HEADER,label:\"Vencord\"},` +\n                    '{section:\"VencordSettings\",label:\"Vencord\",element:Vencord.Plugins.plugins.Settings.tabs.vencord},' +\n                    '{section:\"VencordPlugins\",label:\"Plugins\",element:Vencord.Plugins.plugins.Settings.tabs.plugins},' +\n                    '{section:\"VencordThemes\",label:\"Themes\",element:Vencord.Plugins.plugins.Settings.tabs.themes},' +\n                    updater +\n                    '{section:\"VencordSettingsSync\",label:\"Backup & Restore\",element:Vencord.Plugins.plugins.Settings.tabs.sync},' +\n                    patchHelper +\n                    `{section:${mod}.ID.DIVIDER},${m}`\n                );\n            }\n        }\n    }],\n\n    tabs: {\n        vencord: () => <SettingsComponent tab=\"VencordSettings\" />,\n        plugins: () => <SettingsComponent tab=\"VencordPlugins\" />,\n        themes: () => <SettingsComponent tab=\"VencordThemes\" />,\n        updater: () => <SettingsComponent tab=\"VencordUpdater\" />,\n        sync: () => <SettingsComponent tab=\"VencordSettingsSync\" />\n    },\n\n    get electronVersion() {\n        return VencordNative.getVersions().electron || window.armcord?.electron || null;\n    },\n\n    get chromiumVersion() {\n        try {\n            return VencordNative.getVersions().chrome\n                // @ts-ignore Typescript will add userAgentData IMMEDIATELY\n                || navigator.userAgentData?.brands?.find(b => b.brand === \"Chromium\" || b.brand === \"Google Chrome\")?.version\n                || null;\n        } catch { // inb4 some stupid browser throws unsupported error for navigator.userAgentData, it's only in chromium\n            return null;\n        }\n    },\n\n    get additionalInfo() {\n        if (IS_DEV) return \" (Dev)\";\n        if (IS_WEB) return \" (Web)\";\n        if (IS_STANDALONE) return \" (Standalone)\";\n        return \"\";\n    },\n\n    makeInfoElements(Component: React.ComponentType<React.PropsWithChildren>, props: React.PropsWithChildren) {\n        const { electronVersion, chromiumVersion, additionalInfo } = this;\n\n        return (\n            <>\n                <Component {...props}>Vencord {gitHash}{additionalInfo}</Component>\n                {electronVersion && <Component {...props}>Electron {electronVersion}</Component>}\n                {chromiumVersion && <Component {...props}>Chromium {chromiumVersion}</Component>}\n            </>\n        );\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\nimport { Flex } from \"../components/Flex\";\nimport { Devs } from \"../utils/constants\";\nimport { ModalContent, ModalFooter, ModalHeader, ModalRoot, ModalSize, openModal } from \"../utils/modal\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { Settings } from \"../Vencord\";\nimport { waitFor } from \"../webpack\";\nimport { Button, ChannelStore, Text } from \"../webpack/common\";\n\nconst CONNECT = 1048576n;\nconst VIEW_CHANNEL = 1024n;\n\nlet can = (permission, channel) => true;\nwaitFor(m => m.can && m.initialize, m => ({ can } = m));\n\nexport default definePlugin({\n    name: \"ShowHiddenChannels\",\n    description: \"Show hidden channels\",\n    authors: [Devs.BigDuck, Devs.AverageReactEnjoyer, Devs.D3SOX],\n    options: {\n        hideUnreads: {\n            description: \"Hide unreads\",\n            type: OptionType.BOOLEAN,\n            default: true,\n            restartNeeded: true // Restart is needed to refresh channel list\n        }\n    },\n    patches: [\n        {\n            // RenderLevel defines if a channel is hidden, collapsed in category, visible, etc\n            find: \".CannotShow\",\n            replacement: {\n                match: /renderLevel:(\\w+)\\.CannotShow/g,\n                replace: \"renderLevel:Vencord.Plugins.plugins.ShowHiddenChannels.shouldShow(this.record, this.category, this.isMuted)?$1.Show:$1.CannotShow\"\n            }\n        },\n        {\n            // This is where the logic that chooses the icon is, we override it to be a locked voice channel if it's hidden\n            find: \".rulesChannelId))\",\n            replacement: {\n                match: /(\\w+)\\.locked(.*?)switch\\((\\w+)\\.type\\)({case \\w+\\.\\w+\\.GUILD_ANNOUNCEMENT)/g,\n                replace: \"Vencord.Plugins.plugins.ShowHiddenChannels.isHiddenChannel($3)||$1.locked$2switch($3._isHiddenChannel?2:$3.type)$4\"\n            }\n        },\n        {\n            // inside the onMouseClick handler, we check if the channel is hidden and open the modal if it is\n            find: \".handleThreadsPopoutClose();\",\n            replacement: {\n                match: /((\\w)\\.handleThreadsPopoutClose\\(\\);)/g,\n                replace: \"if(arguments[0].button===0&&Vencord.Plugins.plugins.ShowHiddenChannels.channelSelected($2?.props?.channel))return;$1\"\n            }\n        },\n        {\n            // Prevent categories from disappearing when they're collapsed\n            find: \".prototype.shouldShowEmptyCategory=function(){\",\n            replacement: {\n                match: /(\\.prototype\\.shouldShowEmptyCategory=function\\(\\){)/g,\n                replace: \"$1return true;\"\n            }\n        },\n        {\n            // Hide unreads\n            find: \"?\\\"button\\\":\\\"link\\\"\",\n            predicate: () => Settings.plugins.ShowHiddenChannels.hideUnreads === true,\n            replacement: {\n                match: /(\\w)\\.connected,(\\w)=(\\w\\.unread),(\\w=\\w\\.canHaveDot)/g,\n                replace: \"$1.connected,$2=Vencord.Plugins.plugins.ShowHiddenChannels.isHiddenChannel($1.channel)?false:$3,$4\"\n            }\n        },\n        {\n            // Hide New unreads box for hidden channels\n            find: '.displayName=\"ChannelListUnreadsStore\"',\n            replacement: {\n                match: /((.)\\.getGuildId\\(\\))(&&\\(!\\(.\\.isThread.{1,100}\\.hasRelevantUnread\\()/,\n                replace: \"$1&&!$2._isHiddenChannel$3\"\n            }\n        }\n    ],\n    shouldShow(channel, category, isMuted) {\n        if (!this.isHiddenChannel(channel)) return false;\n        if (!category) return false;\n        if (channel.type === 0 && category.guild?.hideMutedChannels && isMuted) return false;\n\n        return !category.isCollapsed;\n    },\n    isHiddenChannel(channel) {\n        if (!channel) return false;\n        if (channel.channelId)\n            channel = ChannelStore.getChannel(channel.channelId);\n        if (!channel || channel.isDM() || channel.isGroupDM() || channel.isMultiUserDM())\n            return false;\n\n        // check for disallowed voice channels too so that they get hidden when collapsing the category\n        channel._isHiddenChannel = !can(VIEW_CHANNEL, channel) || (channel.type === 2 && !can(CONNECT, channel));\n        return channel._isHiddenChannel;\n    },\n    channelSelected(channel) {\n        if (!channel) return false;\n        const isHidden = this.isHiddenChannel(channel);\n        // check for type again, otherwise it would show it for hidden stage channels\n        if (channel.type === 0 && isHidden) {\n            const lastMessageDate = channel.lastActiveTimestamp ? new Date(channel.lastActiveTimestamp).toLocaleString() : null;\n            openModal(modalProps => (\n                <ModalRoot size={ModalSize.SMALL} {...modalProps}>\n                    <ModalHeader>\n                        <Flex>\n                            <Text variant=\"heading-md/bold\">{channel.name}</Text>\n                            {(channel.isNSFW() && (\n                                <Text style={{ backgroundColor: \"var(--status-danger)\", borderRadius: \"8px\", paddingLeft: 4, paddingRight: 4 }} variant=\"heading-md/normal\">\n                                    NSFW\n                                </Text>\n                            ))}\n                        </Flex>\n                    </ModalHeader>\n                    <ModalContent style={{ marginBottom: 10, marginTop: 10, marginRight: 8, marginLeft: 8 }}>\n                        <Text variant=\"text-md/normal\">You don't have the permission to view the messages in this channel.</Text>\n                        {(channel.topic || \"\").length > 0 && (\n                            <>\n                                <Text variant=\"text-md/bold\" style={{ marginTop: 10 }}>\n                                    Topic:\n                                </Text>\n                                <Text variant=\"code\">{channel.topic}</Text>\n                            </>\n                        )}\n                        {lastMessageDate && (\n                            <>\n                                <Text variant=\"text-md/bold\" style={{ marginTop: 10 }}>\n                                    Last message sent:\n                                </Text>\n                                <Text variant=\"code\">{lastMessageDate}</Text>\n                            </>\n                        )}\n                    </ModalContent>\n                    <ModalFooter>\n                        <Flex>\n                            <Button\n                                onClick={modalProps.onClose}\n                                size={Button.Sizes.SMALL}\n                                color={Button.Colors.PRIMARY}\n                            >\n                                Close\n                            </Button>\n                        </Flex>\n                    </ModalFooter>\n                </ModalRoot>\n            ));\n        }\n        return isHidden;\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"SilentTyping\",\n    authors: [Devs.Ven],\n    description: \"Hide that you are typing\",\n    patches: [{\n        find: \"startTyping:\",\n        replacement: {\n            match: /startTyping:.+?,stop/,\n            replace: \"startTyping:()=>{},stop\"\n        }\n    }]\n});\n", "export default \"#vc-spotify-player {\\n    padding: 0.375rem 0.5rem;\\n    border-bottom: 1px solid var(--background-modifier-accent);\\n    --vc-spotify-green: #1db954; /* so cusotm themes can easily change it */\\n}\\n.vc-spotify-button {\\n    background: none;\\n    color: var(--interactive-normal);\\n    padding: 0;\\n    width: 32px;\\n    height: 32px;\\n\\n    border-radius: 100%;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n}\\n.vc-spotify-button:hover {\\n    color: var(--interactive-hover);\\n    background-color: var(--background-modifier-selected);\\n}\\n\\n.vc-spotify-button svg {\\n    height: 24px;\\n    width: 24px;\\n}\\n[class*=\\\"vc-spotify-shuffle\\\"] > svg,\\n[class*=\\\"vc-spotify-repeat\\\"] > svg {\\n    width: 22px;\\n    height: 22px;\\n}\\n.vc-spotify-button svg path {\\n    width: 100%;\\n    height: 100%;\\n}\\n/* .vc-spotify-button:hover {\\n    filter: brightness(1.3);\\n} */\\n\\n.vc-spotify-shuffle-on,\\n.vc-spotify-repeat-context,\\n.vc-spotify-repeat-track,\\n.vc-spotify-shuffle-on:hover,\\n.vc-spotify-repeat-context:hover,\\n.vc-spotify-repeat-track:hover {\\n    color: var(--vc-spotify-green);\\n}\\n\\n.vc-spotify-tooltip-text {\\n    overflow: hidden;\\n    white-space: nowrap;\\n    padding-right: 0.2em;\\n    max-width: 100%;\\n}\\n.vc-spotify-repeat-1 {\\n    font-size: 70%;\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    transform: translate(-50%, -50%);\\n}\\n\\n.vc-spotify-button-row {\\n    justify-content: center;\\n}\\n\\n#vc-spotify-info-wrapper {\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    height: 3em;\\n    gap: 0.5em;\\n}\\n\\n#vc-spotify-info-wrapper img {\\n    height: 90%;\\n    object-fit: contain;\\n}\\n\\n#vc-spotify-album-expanded-wrapper img {\\n    width: 100%;\\n    object-fit: contain;\\n}\\n\\n#vc-spotify-titles {\\n    display: flex;\\n    flex-direction: column;\\n    padding: 0.2rem;\\n    justify-content: center;\\n    align-items: flex-start;\\n    align-content: flex-start;\\n    overflow: hidden;\\n}\\n\\n.vc-spotify-tooltip-text {\\n    margin: unset;\\n}\\n\\n#vc-spotify-song-title {\\n    color: var(--header-primary);\\n    font-size: 14px;\\n    font-weight: 600;\\n}\\n.vc-spotify-ellipoverflow {\\n    white-space: nowrap;\\n    overflow: hidden;\\n    width: 100%;\\n    text-overflow: ellipsis;\\n}\\n\\n.vc-spotify-artist,\\n.vc-spotify-album {\\n    font-size: 12px;\\n    text-decoration: none;\\n    color: var(--header-secondary);\\n}\\n\\n.vc-spotify-comma {\\n    color: var(--header-secondary);\\n}\\n\\n.vc-spotify-artist:hover,\\n#vc-spotify-album-title:hover,\\n#vc-spotify-song-title[role=\\\"link\\\"]:hover {\\n    text-decoration: underline;\\n    cursor: pointer;\\n}\\n\\n#vc-spotify-album-image {\\n    border-radius: 3px;\\n}\\n\\n#vc-spotify-album-image:hover {\\n    filter: brightness(1.2);\\n    cursor: pointer;\\n}\\n\\n#vc-spotify-progress-bar {\\n    position: relative;\\n\\n    color: var(--text-normal);\\n    width: 100%;\\n    margin: 0.5em 0;\\n    margin-bottom: 5px;\\n}\\n\\n#vc-spotify-progress-bar > [class^=\\\"slider\\\"] {\\n    flex-grow: 1;\\n    width: 100%;\\n    padding: 0 !important;\\n}\\n\\n#vc-spotify-progress-bar > [class^=\\\"slider\\\"] [class^=\\\"bar-\\\"] {\\n    height: 4px !important;\\n}\\n#vc-spotify-progress-bar > [class^=\\\"slider\\\"] [class^=\\\"grabber\\\"] {\\n    /* these importants are neccessary, it applies a width and height through inline styles */\\n    height: 10px !important;\\n    width: 10px !important;\\n    background-color: var(--interactive-normal);\\n    border-color: var(--interactive-normal);\\n    color: var(--interactive-normal);\\n}\\n\\n#vc-spotify-progress-text {\\n    margin: 0;\\n}\\n\\n.vc-spotify-progress-time {\\n    font-size: 12px;\\n\\n    top: 10px;\\n    position: absolute;\\n}\\n\\n.vc-spotify-time-left {\\n    left: 0;\\n}\\n.vc-spotify-time-right {\\n    right: 0;\\n}\\n\"", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport cssText from \"~fileContent/spotifyStyles.css\";\n\nimport IpcEvents from \"../../utils/IpcEvents\";\nimport { lazyWebpack } from \"../../utils/misc\";\nimport { proxyLazy } from \"../../utils/proxyLazy\";\nimport { filters } from \"../../webpack\";\nimport { Flux, FluxDispatcher } from \"../../webpack/common\";\n\nexport interface Track {\n    id: string;\n    name: string;\n    duration: number;\n    isLocal: boolean;\n    album: {\n        id: string;\n        name: string;\n        image: {\n            height: number;\n            width: number;\n            url: string;\n        };\n    };\n    artists: {\n        id: string;\n        href: string;\n        name: string;\n        type: string;\n        uri: string;\n    }[];\n}\n\ninterface PlayerState {\n    accountId: string;\n    track: Track | null;\n    volumePercent: number,\n    isPlaying: boolean,\n    repeat: boolean,\n    position: number,\n    context?: any;\n    device?: Device;\n\n    // added by patch\n    actual_repeat: Repeat;\n}\n\ninterface Device {\n    id: string;\n    is_active: boolean;\n}\n\ntype Repeat = \"off\" | \"track\" | \"context\";\n\n// Don't wanna run before Flux and Dispatcher are ready!\nexport const SpotifyStore = proxyLazy(() => {\n    // TODO: Move this elsewhere\n    const style = document.createElement(\"style\");\n    style.innerText = cssText;\n    document.head.appendChild(style);\n\n    // For some reason ts hates extends Flux.Store\n    const { Store } = Flux;\n\n    const SpotifySocket = lazyWebpack(filters.byProps(\"getActiveSocketAndDevice\"));\n    const SpotifyAPI = lazyWebpack(filters.byProps(\"SpotifyAPIMarker\"));\n\n    const API_BASE = \"https://api.spotify.com/v1/me/player\";\n\n    class SpotifyStore extends Store {\n        constructor(dispatcher: any, handlers: any) {\n            super(dispatcher, handlers);\n        }\n\n        public mPosition = 0;\n        private start = 0;\n\n        public track: Track | null = null;\n        public device: Device | null = null;\n        public isPlaying = false;\n        public repeat: Repeat = \"off\";\n        public shuffle = false;\n        public volume = 0;\n\n        public isSettingPosition = false;\n\n        public openExternal(path: string) {\n            VencordNative.ipc.invoke(IpcEvents.OPEN_EXTERNAL, \"https://open.spotify.com\" + path);\n        }\n\n        // Need to keep track of this manually\n        public get position(): number {\n            let pos = this.mPosition;\n            if (this.isPlaying) {\n                pos += Date.now() - this.start;\n            }\n            return pos;\n        }\n\n        public set position(p: number) {\n            this.mPosition = p;\n            this.start = Date.now();\n        }\n\n        prev() {\n            this.req(\"post\", \"/previous\");\n        }\n\n        next() {\n            this.req(\"post\", \"/next\");\n        }\n\n        setVolume(percent: number) {\n            this.req(\"put\", \"/volume\", {\n                query: {\n                    volume_percent: Math.round(percent)\n                }\n\n            }).then(() => {\n                this.volume = percent;\n                this.emitChange();\n            });\n        }\n\n        setPlaying(playing: boolean) {\n            this.req(\"put\", playing ? \"/play\" : \"/pause\");\n        }\n\n        setRepeat(state: Repeat) {\n            this.req(\"put\", \"/repeat\", {\n                query: { state }\n            });\n        }\n\n        setShuffle(state: boolean) {\n            this.req(\"put\", \"/shuffle\", {\n                query: { state }\n            }).then(() => {\n                this.shuffle = state;\n                this.emitChange();\n            });\n        }\n\n        seek(ms: number) {\n            if (this.isSettingPosition) return Promise.resolve();\n\n            this.isSettingPosition = true;\n\n            return this.req(\"put\", \"/seek\", {\n                query: {\n                    position_ms: Math.round(ms)\n                }\n            }).catch((e: any) => {\n                console.error(\"[VencordSpotifyControls] Failed to seek\", e);\n                this.isSettingPosition = false;\n            });\n        }\n\n        private req(method: \"post\" | \"get\" | \"put\", route: string, data: any = {}) {\n            if (this.device?.is_active)\n                (data.query ??= {}).device_id = this.device.id;\n\n            const { socket } = SpotifySocket.getActiveSocketAndDevice();\n            return SpotifyAPI[method](socket.accountId, socket.accessToken, {\n                url: API_BASE + route,\n                ...data\n            });\n        }\n    }\n\n    const store = new SpotifyStore(FluxDispatcher, {\n        SPOTIFY_PLAYER_STATE(e: PlayerState) {\n            store.track = e.track;\n            store.device = e.device ?? null;\n            store.isPlaying = e.isPlaying ?? false;\n            store.volume = e.volumePercent ?? 0;\n            store.repeat = e.actual_repeat || \"off\";\n            store.position = e.position ?? 0;\n            store.isSettingPosition = false;\n            store.emitChange();\n        },\n        SPOTIFY_SET_DEVICES({ devices }: { devices: Device[]; }) {\n            store.device = devices.find(d => d.is_active) ?? devices[0] ?? null;\n            store.emitChange();\n        }\n    });\n\n    return store;\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport ErrorBoundary from \"../../components/ErrorBoundary\";\nimport { Flex } from \"../../components/Flex\";\nimport { Link } from \"../../components/Link\";\nimport { debounce } from \"../../utils/debounce\";\nimport { classes, LazyComponent, lazyWebpack } from \"../../utils/misc\";\nimport { ContextMenu, FluxDispatcher, Forms, Menu, React } from \"../../webpack/common\";\nimport { filters, find } from \"../../webpack/webpack\";\nimport { SpotifyStore, Track } from \"./SpotifyStore\";\n\nconst cl = (className: string) => `vc-spotify-${className}`;\n\nfunction msToHuman(ms: number) {\n    const minutes = ms / 1000 / 60;\n    const m = Math.floor(minutes);\n    const s = Math.floor((minutes - m) * 60);\n    return `${m.toString().padStart(2, \"0\")}:${s.toString().padStart(2, \"0\")}`;\n}\n\nconst useStateFromStores: <T>(\n    stores: typeof SpotifyStore[],\n    mapper: () => T,\n    idk?: null,\n    compare?: (old: T, newer: T) => boolean\n) => T\n    = lazyWebpack(filters.byCode(\"useStateFromStores\"));\n\nfunction Svg(path: string, label: string) {\n    return () => (\n        <svg\n            className={classes(cl(\"button-icon\"), cl(label))}\n            height=\"24\"\n            width=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"currentColor\"\n            aria-label={label}\n            focusable={false}\n        >\n            <path d={path} />\n        </svg>\n    );\n}\n\n// KraXen's icons :yesyes:\n// from https://fonts.google.com/icons?icon.style=Rounded&icon.set=Material+Icons\n// older material icon style, but still really good\nconst PlayButton = Svg(\"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z\", \"play\");\nconst PauseButton = Svg(\"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z\", \"pause\");\nconst SkipPrev = Svg(\"M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1zm3.66 6.82l5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64z\", \"previous\");\nconst SkipNext = Svg(\"M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z\", \"next\");\nconst Repeat = Svg(\"M7 7h10v1.79c0 .45.54.67.85.35l2.79-2.79c.2-.2.2-.51 0-.71l-2.79-2.79c-.31-.31-.85-.09-.85.36V5H6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7zm10 10H7v-1.79c0-.45-.54-.67-.85-.35l-2.79 2.79c-.2.2-.2.51 0 .71l2.79 2.79c.31.31.85.09.85-.36V19h11c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v3z\", \"repeat\");\nconst Shuffle = Svg(\"M10.59 9.17L6.12 4.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.46 4.46 1.42-1.4zm4.76-4.32l1.19 1.19L4.7 17.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L17.96 7.46l1.19 1.19c.31.31.85.09.85-.36V4.5c0-.28-.22-.5-.5-.5h-3.79c-.45 0-.67.54-.36.85zm-.52 8.56l-1.41 1.41 3.13 3.13-1.2 1.2c-.31.31-.09.85.36.85h3.79c.28 0 .5-.22.5-.5v-3.79c0-.45-.54-.67-.85-.35l-1.19 1.19-3.13-3.14z\", \"shuffle\");\n\nfunction Button(props: React.ButtonHTMLAttributes<HTMLButtonElement>) {\n    return (\n        <button\n            className={cl(\"button\")}\n            {...props}\n        >\n            {props.children}\n        </button>\n    );\n}\n\nfunction Controls() {\n    const [isPlaying, shuffle, repeat] = useStateFromStores(\n        [SpotifyStore],\n        () => [SpotifyStore.isPlaying, SpotifyStore.shuffle, SpotifyStore.repeat]\n    );\n\n    const [nextRepeat, repeatClassName] = (() => {\n        switch (repeat) {\n            case \"off\": return [\"context\", \"repeat-off\"] as const;\n            case \"context\": return [\"track\", \"repeat-context\"] as const;\n            case \"track\": return [\"off\", \"repeat-track\"] as const;\n            default: throw new Error(`Invalid repeat state ${repeat}`);\n        }\n    })();\n\n    // the 1 is using position absolute so it does not make the button jump around\n    return (\n        <Flex className={cl(\"button-row\")} style={{ gap: 0 }}>\n            <Button\n                className={classes(cl(\"button\"), cl(shuffle ? \"shuffle-on\" : \"shuffle-off\"))}\n                onClick={() => SpotifyStore.setShuffle(!shuffle)}\n            >\n                <Shuffle />\n            </Button>\n            <Button onClick={() => SpotifyStore.prev()}>\n                <SkipPrev />\n            </Button>\n            <Button onClick={() => SpotifyStore.setPlaying(!isPlaying)}>\n                {isPlaying ? <PauseButton /> : <PlayButton />}\n            </Button>\n            <Button onClick={() => SpotifyStore.next()}>\n                <SkipNext />\n            </Button>\n            <Button\n                className={classes(cl(\"button\"), cl(repeatClassName))}\n                onClick={() => SpotifyStore.setRepeat(nextRepeat)}\n                style={{ position: \"relative\" }}\n            >\n                {repeat === \"track\" && <span className={cl(\"repeat-1\")}>1</span>}\n                <Repeat />\n            </Button>\n        </Flex>\n    );\n}\n\nconst seek = debounce((v: number) => {\n    SpotifyStore.seek(v);\n});\n\nconst Slider = LazyComponent(() => {\n    const filter = filters.byCode(\"sliderContainer\");\n    return find(m => m.render && filter(m.render));\n});\n\nfunction SeekBar() {\n    const { duration } = SpotifyStore.track!;\n\n    const [storePosition, isSettingPosition, isPlaying] = useStateFromStores(\n        [SpotifyStore],\n        () => [SpotifyStore.mPosition, SpotifyStore.isSettingPosition, SpotifyStore.isPlaying]\n    );\n\n    const [position, setPosition] = React.useState(storePosition);\n\n    // eslint-disable-next-line consistent-return\n    React.useEffect(() => {\n        if (isPlaying && !isSettingPosition) {\n            setPosition(SpotifyStore.position);\n            const interval = setInterval(() => {\n                setPosition(p => p + 1000);\n            }, 1000);\n\n            return () => clearInterval(interval);\n        }\n    }, [storePosition, isSettingPosition, isPlaying]);\n\n    return (\n        <div id={cl(\"progress-bar\")}>\n            <Forms.FormText\n                variant=\"text-xs/medium\"\n                className={cl(\"progress-time\") + \" \" + cl(\"time-left\")}\n                aria-label=\"Progress\"\n            >\n                {msToHuman(position)}\n            </Forms.FormText>\n            <Slider\n                minValue={0}\n                maxValue={duration}\n                value={position}\n                onChange={(v: number) => {\n                    if (isSettingPosition) return;\n                    setPosition(v);\n                    seek(v);\n                }}\n                renderValue={msToHuman}\n            />\n            <Forms.FormText\n                variant=\"text-xs/medium\"\n                className={cl(\"progress-time\") + \" \" + cl(\"time-right\")}\n                aria-label=\"Total Duration\"\n            >\n                {msToHuman(duration)}\n            </Forms.FormText>\n        </div>\n    );\n}\n\n\nfunction AlbumContextMenu({ track }: { track: Track; }) {\n    const volume = useStateFromStores([SpotifyStore], () => SpotifyStore.volume);\n\n    return (\n        <Menu.ContextMenu\n            navId=\"spotify-album-menu\"\n            onClose={() => FluxDispatcher.dispatch({ type: \"CONTEXT_MENU_CLOSE\" })}\n            aria-label=\"Spotify Album Menu\"\n        >\n            <Menu.MenuItem\n                key=\"open-album\"\n                id=\"open-album\"\n                label=\"Open Album\"\n                action={() => SpotifyStore.openExternal(`/album/${track.album.id}`)}\n            />\n            <Menu.MenuItem\n                key=\"view-cover\"\n                id=\"view-cover\"\n                label=\"View Album Cover\"\n                // trolley\n                action={() => (Vencord.Plugins.plugins.ViewIcons as any).openImage(track.album.image.url)}\n            />\n            <Menu.MenuControlItem\n                id=\"spotify-volume\"\n                key=\"spotify-volume\"\n                label=\"Volume\"\n                control={(props, ref) => (\n                    <Slider\n                        {...props}\n                        ref={ref}\n                        value={volume}\n                        minValue={0}\n                        maxValue={100}\n                        onChange={debounce((v: number) => SpotifyStore.setVolume(v))}\n                    />\n                )}\n            />\n        </Menu.ContextMenu>\n    );\n}\n\nfunction Info({ track }: { track: Track; }) {\n    const img = track?.album?.image;\n\n    const [coverExpanded, setCoverExpanded] = React.useState(false);\n\n    const i = (\n        <>\n            {img && (\n                <img\n                    id={cl(\"album-image\")}\n                    src={img.url}\n                    alt=\"Album Image\"\n                    onClick={() => setCoverExpanded(!coverExpanded)}\n                    onContextMenu={e => {\n                        ContextMenu.open(e, () => <AlbumContextMenu track={track} />);\n                    }}\n                />\n            )}\n        </>\n    );\n\n    if (coverExpanded && img) return (\n        <div id={cl(\"album-expanded-wrapper\")}>\n            {i}\n        </div>\n    );\n\n    return (\n        <div id={cl(\"info-wrapper\")}>\n            {i}\n            <div id={cl(\"titles\")}>\n                <Forms.FormText\n                    variant=\"text-sm/semibold\"\n                    id={cl(\"song-title\")}\n                    className={cl(\"ellipoverflow\")}\n                    role={track.id ? \"link\" : undefined}\n                    title={track.name}\n                    onClick={track.id ? () => {\n                        SpotifyStore.openExternal(`/track/${track.id}`);\n                    } : void 0}\n                >\n                    {track.name}\n                </Forms.FormText>\n                {track.artists.some(a => a.name) && (\n                    <Forms.FormText variant=\"text-sm/normal\" className={cl(\"ellipoverflow\")}>\n                        by&nbsp;\n                        {track.artists.map((a, i) => (\n                            <React.Fragment key={a.name}>\n                                <Link\n                                    className={cl(\"artist\")}\n                                    disabled={!a.id}\n                                    href={`https://open.spotify.com/artist/${a.id}`}\n                                    style={{ fontSize: \"inherit\" }}\n                                    title={a.name}\n                                >\n                                    {a.name}\n                                </Link>\n                                {i !== track.artists.length - 1 && <span className={cl(\"comma\")}>{\", \"}</span>}\n                            </React.Fragment>\n                        ))}\n                    </Forms.FormText>\n                )}\n                {track.album.name && (\n                    <Forms.FormText variant=\"text-sm/normal\" className={cl(\"ellipoverflow\")}>\n                        on&nbsp;\n                        <Link id={cl(\"album-title\")}\n                            href={`https://open.spotify.com/album/${track.album.id}`}\n                            target=\"_blank\"\n                            className={cl(\"album\")}\n                            disabled={!track.album.id}\n                            style={{ fontSize: \"inherit\" }}\n                            title={track.album.name}\n                        >\n                            {track.album.name}\n                        </Link>\n                    </Forms.FormText>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport function Player() {\n    const track = useStateFromStores(\n        [SpotifyStore],\n        () => SpotifyStore.track,\n        null,\n        (prev, next) => prev?.id ? (prev.id === next?.id) : prev?.name === next?.name\n    );\n\n    const device = useStateFromStores(\n        [SpotifyStore],\n        () => SpotifyStore.device,\n        null,\n        (prev, next) => prev?.id === next?.id\n    );\n\n    const isPlaying = useStateFromStores([SpotifyStore], () => SpotifyStore.isPlaying);\n    const [shouldHide, setShouldHide] = React.useState(false);\n\n    // Hide player after 5 minutes of inactivity\n    // eslint-disable-next-line consistent-return\n    React.useEffect(() => {\n        setShouldHide(false);\n        if (!isPlaying) {\n            const timeout = setTimeout(() => setShouldHide(true), 1000 * 60 * 5);\n            return () => clearTimeout(timeout);\n        }\n    }, [isPlaying]);\n\n    if (!track || !device?.is_active || shouldHide)\n        return null;\n\n    return (\n        <ErrorBoundary fallback={() => (\n            <>\n                <Forms.FormText>Failed to render Spotify Modal :(</Forms.FormText>\n                <Forms.FormText>Check the console for errors</Forms.FormText>\n            </>\n        )}>\n            <div id={cl(\"player\")}>\n                <Info track={track} />\n                <SeekBar />\n                <Controls />\n            </div>\n        </ErrorBoundary>\n    );\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../../utils/constants\";\nimport definePlugin from \"../../utils/types\";\nimport { Player } from \"./PlayerComponent\";\n\nexport default definePlugin({\n    name: \"SpotifyControls\",\n    description: \"Spotify Controls\",\n    authors: [Devs.Ven, Devs.afn, Devs.KraXen72],\n    dependencies: [\"MenuItemDeobfuscatorAPI\"],\n    patches: [\n        {\n            find: \"showTaglessAccountPanel:\",\n            replacement: {\n                // return React.createElement(AccountPanel, { ..., showTaglessAccountPanel: blah })\n                match: /return ?(.{0,30}\\(.{1,3},\\{[^}]+?,showTaglessAccountPanel:.+?\\}\\))/,\n                // return [Player, Panel]\n                replace: \"return [Vencord.Plugins.plugins.SpotifyControls.renderPlayer(),$1]\"\n            }\n        },\n        // Adds POST and a Marker to the SpotifyAPI (so we can easily find it)\n        {\n            find: \".PLAYER_DEVICES\",\n            replacement: {\n                match: /get:(.{1,3})\\.bind\\(null,(.{1,6})\\.get\\)/,\n                replace: \"SpotifyAPIMarker:1,post:$1.bind(null,$2.post),$&\"\n            }\n        },\n        // Discord doesn't give you the repeat kind, only a boolean\n        {\n            find: 'repeat:\"off\"!==',\n            replacement: {\n                match: /repeat:\"off\"!==(.{1,3}),/,\n                replace: \"actual_repeat:$1,$&\"\n            }\n        }\n    ],\n\n    renderPlayer: () => <Player />\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { migratePluginSettings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin, { OptionType } from \"../utils/types\";\nimport { Settings } from \"../Vencord\";\n\nmigratePluginSettings(\"SpotifyCrack\", \"Ify\");\nexport default definePlugin({\n    name: \"SpotifyCrack\",\n    description: \"Free listen along, no auto-pausing in voice chat, and allows activity to continue playing when idling\",\n    authors: [\n        Devs.Cyn,\n        Devs.Nuckyz\n    ],\n\n    patches: [{\n        find: 'dispatch({type:\"SPOTIFY_PROFILE_UPDATE\"',\n        replacement: [{\n            match: /(function\\((.{1,2})\\){)(.{1,6}dispatch\\({type:\"SPOTIFY_PROFILE_UPDATE\")/,\n            replace: (_, functionStart, data, functionBody) => `${functionStart}${data}.body.product=\"premium\";${functionBody}`\n        }],\n    }, {\n        find: '.displayName=\"SpotifyStore\"',\n        predicate: () => Settings.plugins.SpotifyCrack.noSpotifyAutoPause,\n        replacement: {\n            match: /function (.{1,2})\\(\\).{0,200}SPOTIFY_AUTO_PAUSED\\);.{0,}}}}/,\n            replace: \"function $1(){}\"\n        }\n    }, {\n        find: '.displayName=\"SpotifyStore\"',\n        predicate: () => Settings.plugins.SpotifyCrack.keepSpotifyActivityOnIdle,\n        replacement: {\n            match: /(shouldShowActivity=function\\(\\){.{1,50})&&!.{1,6}\\.isIdle\\(\\)(.{0,}?})/,\n            replace: (_, functionDeclarationAndExpression, restOfFunction) => `${functionDeclarationAndExpression}${restOfFunction}`\n        }\n    }],\n\n    options: {\n        noSpotifyAutoPause: {\n            description: \"Disable Spotify auto-pause\",\n            type: OptionType.BOOLEAN,\n            default: true,\n            restartNeeded: true,\n        },\n        keepSpotifyActivityOnIdle: {\n            description: \"Keep Spotify activity playing when idling\",\n            type: OptionType.BOOLEAN,\n            default: false,\n            restartNeeded: true,\n        }\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ApplicationCommandInputType, sendBotMessage } from \"../api/Commands\";\nimport { migratePluginSettings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport { lazyWebpack } from \"../utils/misc\";\nimport definePlugin from \"../utils/types\";\nimport { filters } from \"../webpack\";\nimport { FluxDispatcher } from \"../webpack/common\";\n\ninterface Album {\n    id: string;\n    image: {\n        height: number;\n        width: number;\n        url: string;\n    };\n    name: string;\n}\n\ninterface Artist {\n    external_urls: {\n        spotify: string;\n    };\n    href: string;\n    id: string;\n    name: string;\n    type: \"artist\" | string;\n    uri: string;\n}\n\ninterface Track {\n    id: string;\n    album: Album;\n    artists: Artist[];\n    duration: number;\n    isLocal: boolean;\n    name: string;\n}\n\nconst Spotify = lazyWebpack(filters.byProps(\"getPlayerState\"));\nconst MessageCreator = lazyWebpack(filters.byProps(\"getSendMessageOptionsForReply\", \"sendMessage\"));\nconst PendingReplyStore = lazyWebpack(filters.byProps(\"getPendingReply\"));\n\nfunction sendMessage(channelId, message) {\n    message = {\n        // The following are required to prevent Discord from throwing an error\n        invalidEmojis: [],\n        tts: false,\n        validNonShortcutEmojis: [],\n        ...message\n    };\n    const reply = PendingReplyStore.getPendingReply(channelId);\n    MessageCreator.sendMessage(channelId, message, void 0, MessageCreator.getSendMessageOptionsForReply(reply))\n        .then(() => {\n            if (reply) {\n                FluxDispatcher.dispatch({ type: \"DELETE_PENDING_REPLY\", channelId });\n            }\n        });\n}\n\nmigratePluginSettings(\"SpotifyShareCommands\", \"Sendify\");\nexport default definePlugin({\n    name: \"SpotifyShareCommands\",\n    description: \"Share your current Spotify track, album or artist via slash command (/track, /album, /artist)\",\n    authors: [Devs.katlyn],\n    dependencies: [\"CommandsAPI\"],\n    commands: [\n        {\n            name: \"track\",\n            description: \"Send your current Spotify track to chat\",\n            inputType: ApplicationCommandInputType.BUILT_IN,\n            options: [],\n            execute: (_, ctx) => {\n                const track: Track | null = Spotify.getTrack();\n                if (track === null) {\n                    sendBotMessage(ctx.channel.id, {\n                        content: \"You're not listening to any music.\"\n                    });\n                    return;\n                }\n                // Note: Due to how Discord handles commands, we need to manually create and send the message\n                sendMessage(ctx.channel.id, {\n                    content: `https://open.spotify.com/track/${track.id}`\n                });\n            }\n        },\n        {\n            name: \"album\",\n            description: \"Send your current Spotify album to chat\",\n            inputType: ApplicationCommandInputType.BUILT_IN,\n            options: [],\n            execute: (_, ctx) => {\n                const track: Track | null = Spotify.getTrack();\n                if (track === null) {\n                    sendBotMessage(ctx.channel.id, {\n                        content: \"You're not listening to any music.\"\n                    });\n                    return;\n                }\n                sendMessage(ctx.channel.id, {\n                    content: `https://open.spotify.com/album/${track.album.id}`\n                });\n            }\n        },\n        {\n            name: \"artist\",\n            description: \"Send your current Spotify artist to chat\",\n            inputType: ApplicationCommandInputType.BUILT_IN,\n            options: [],\n            execute: (_, ctx) => {\n                const track: Track | null = Spotify.getTrack();\n                if (track === null) {\n                    sendBotMessage(ctx.channel.id, {\n                        content: \"You're not listening to any music.\"\n                    });\n                    return;\n                }\n                sendMessage(ctx.channel.id, {\n                    content: track.artists[0].external_urls.spotify\n                });\n            }\n        }\n    ]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport ErrorBoundary from \"../../components/ErrorBoundary\";\nimport { Flex } from \"../../components/Flex\";\nimport { lazyWebpack } from \"../../utils/misc\";\nimport { Forms, React } from \"../../webpack/common\";\nimport { filters } from \"../../webpack/webpack\";\n\ninterface AppStartPerformance {\n    prefix: string;\n    logs: Log[];\n    logGroups: LogGroup[];\n    endTime_: number;\n    isTracing_: boolean;\n}\n\ninterface LogGroup {\n    index: number;\n    timestamp: number;\n    logs: Log[];\n    nativeLogs: any[];\n    serverTrace: string;\n}\n\ninterface Log {\n    emoji: string;\n    prefix: string;\n    log: string;\n    timestamp?: number;\n    delta?: number;\n}\n\nconst AppStartPerformance = lazyWebpack(filters.byProps(\"markWithDelta\", \"markAndLog\", \"markAt\")) as AppStartPerformance;\n\ninterface TimerItemProps extends Log {\n    instance: {\n        sinceStart: number;\n        sinceLast: number;\n    };\n}\n\nfunction TimerItem({ emoji, prefix, log, delta, instance }: TimerItemProps) {\n    return (\n        <React.Fragment>\n            <span>{instance.sinceStart.toFixed(3)}s</span>\n            <span>{instance.sinceLast.toFixed(3)}s</span>\n            <span>{delta?.toFixed(0) ?? \"\"}</span>\n            <span><pre>{emoji} {prefix ?? \" \"}{log}</pre></span>\n        </React.Fragment>\n    );\n}\n\ninterface TimingSectionProps {\n    title: string;\n    logs: Log[];\n    traceEnd?: number;\n}\n\nfunction TimingSection({ title, logs, traceEnd }: TimingSectionProps) {\n    const startTime = logs.find(l => l.timestamp)?.timestamp ?? 0;\n\n    let lastTimestamp = startTime;\n    const timings = logs.map(log => {\n        // Get last log entry with valid timestamp\n        const timestamp = log.timestamp ?? lastTimestamp;\n\n        const sinceStart = (timestamp - startTime) / 1000;\n        const sinceLast = (timestamp - lastTimestamp) / 1000;\n\n        lastTimestamp = timestamp;\n\n        return { sinceStart, sinceLast };\n    });\n\n    return (\n        <Forms.FormSection title={title} tag=\"h1\">\n            <code>\n                {traceEnd && (\n                    <div style={{ color: \"var(--header-primary)\", marginBottom: 5, userSelect: \"text\" }}>\n                        Trace ended at: {(new Date(traceEnd)).toTimeString()}\n                    </div>\n                )}\n                <div style={{ color: \"var(--header-primary)\", display: \"grid\", gridTemplateColumns: \"repeat(3, auto) 1fr\", gap: \"2px 10px\", userSelect: \"text\" }}>\n                    <span>Start</span>\n                    <span>Interval</span>\n                    <span>Delta</span>\n                    <span style={{ marginBottom: 5 }}>Event</span>\n                    {AppStartPerformance.logs.map((log, i) => (\n                        <TimerItem key={i} {...log} instance={timings[i]} />\n                    ))}\n                </div>\n            </code>\n        </Forms.FormSection>\n    );\n}\n\ninterface ServerTraceProps {\n    trace: string;\n}\n\nfunction ServerTrace({ trace }: ServerTraceProps) {\n    const lines = trace.split(\"\\n\");\n\n    return (\n        <Forms.FormSection title=\"Server Trace\" tag=\"h2\">\n            <code>\n                <Flex flexDirection=\"column\" style={{ color: \"var(--header-primary)\", gap: 5, userSelect: \"text\" }}>\n                    {lines.map(line => (\n                        <span>{line}</span>\n                    ))}\n                </Flex>\n            </code>\n        </Forms.FormSection>\n    );\n}\n\nfunction StartupTimingPage() {\n    if (!AppStartPerformance?.logs) return <div>Loading...</div>;\n\n    const serverTrace = AppStartPerformance.logGroups.find(g => g.serverTrace)?.serverTrace;\n\n    return (\n        <React.Fragment>\n            <TimingSection\n                title=\"Startup Timings\"\n                logs={AppStartPerformance.logs}\n                traceEnd={AppStartPerformance.endTime_}\n            />\n            {/* Lazy Divider */}\n            <div style={{ marginTop: 5 }}>&nbsp;</div>\n            {serverTrace && <ServerTrace trace={serverTrace} />}\n        </React.Fragment>\n    );\n}\n\nexport default ErrorBoundary.wrap(StartupTimingPage);\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\nimport { Devs } from \"../../utils/constants\";\nimport { LazyComponent } from \"../../utils/misc\";\nimport definePlugin from \"../../utils/types\";\n\nexport default definePlugin({\n    name: \"StartupTimings\",\n    description: \"Adds Startup Timings to the Settings menu\",\n    authors: [Devs.Megu],\n    patches: [{\n        find: \"PAYMENT_FLOW_MODAL_TEST_PAGE,\",\n        replacement: {\n            match: /({section:[\\w.]+?\\.PAYMENT_FLOW_MODAL_TEST_PAGE,)/,\n            replace: '{section:\"StartupTimings\",label:\"Startup Timings\",element:Vencord.Plugins.plugins.StartupTimings.StartupTimingPage},$1'\n        }\n    }],\n    StartupTimingPage: LazyComponent(() => require(\"./StartupTimingPage\").default)\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { addPreEditListener, addPreSendListener, MessageObject, removePreEditListener,removePreSendListener } from \"../api/MessageEvents\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"Unindent\",\n    description: \"Trims leading indentation from codeblocks\",\n    authors: [Devs.Ven],\n    dependencies: [\"MessageEventsAPI\"],\n    patches: [\n        {\n            find: \"inQuote:\",\n            replacement: {\n                match: /,content:([^,]+),inQuote/,\n                replace: (_, content) => `,content:Vencord.Plugins.plugins.Unindent.unindent(${content}),inQuote`\n            }\n        }\n    ],\n\n    unindent(str: string) {\n        // Users cannot send tabs, they get converted to spaces. However, a bot may send tabs, so convert them to 4 spaces first\n        str = str.replace(/\\t/g, \"    \");\n        const minIndent = str.match(/^ *(?=\\S)/gm)\n            ?.reduce((prev, curr) => Math.min(prev, curr.length), Infinity) ?? 0;\n\n        if (!minIndent) return str;\n        return str.replace(new RegExp(`^ {${minIndent}}`, \"gm\"), \"\");\n    },\n\n    unindentMsg(msg: MessageObject) {\n        msg.content = msg.content.replace(/```(.|\\n)*?```/g, m => {\n            const lines = m.split(\"\\n\");\n            if (lines.length < 2) return m; // Do not affect inline codeblocks\n            let suffix = \"\";\n            if (lines[lines.length - 1] === \"```\") suffix = lines.pop()!;\n            return `${lines[0]}\\n${this.unindent(lines.slice(1).join(\"\\n\"))}\\n${suffix}`;\n        });\n    },\n\n    start() {\n        this.preSend = addPreSendListener((_, msg) => this.unindentMsg(msg));\n        this.preEdit = addPreEditListener((_cid, _mid, msg) => this.unindentMsg(msg));\n    },\n\n    stop() {\n        removePreSendListener(this.preSend);\n        removePreEditListener(this.preEdit);\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nlet ERROR_CODES: any;\nconst CODES_URL =\n    \"https://raw.githubusercontent.com/facebook/react/17.0.2/scripts/error-codes/codes.json\";\n\nexport default definePlugin({\n    name: \"ReactErrorDecoder\",\n    description: 'Replaces \"Minifed React Error\" with the actual error.',\n    authors: [Devs.Cyn],\n    patches: [\n        {\n            find: '\"https://reactjs.org/docs/error-decoder.html?invariant=\"',\n            replacement: {\n                match: /(function .\\(.\\)){(for\\(var .=\"https:\\/\\/reactjs\\.org\\/docs\\/error-decoder\\.html\\?invariant=\"\\+.,.=1;.<arguments\\.length;.\\+\\+\\).\\+=\"&args\\[\\]=\"\\+encodeURIComponent\\(arguments\\[.\\]\\);return\"Minified React error #\"\\+.\\+\"; visit \"\\+.\\+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\")}/,\n                replace: (_, func, original) =>\n                    `${func}{var decoded=Vencord.Plugins.plugins.ReactErrorDecoder.decodeError.apply(null, arguments);if(decoded)return decoded;${original}}`,\n            },\n        },\n    ],\n\n    async start() {\n        ERROR_CODES = await fetch(CODES_URL)\n            .then(res => res.json())\n            .catch(e => console.error(\"[ReactErrorDecoder] Failed to fetch React error codes\\n\", e));\n    },\n\n    stop() {\n        ERROR_CODES = undefined;\n    },\n\n    decodeError(code: number, ...args: any) {\n        let index = 0;\n        return ERROR_CODES?.[code]?.replace(/%s/g, () => {\n            const arg = args[index];\n            index++;\n            return arg;\n        });\n    },\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { findOption, RequiredMessageOption } from \"../api/Commands\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nconst endings = [\n    \"owo\", \"UwU\", \">w<\", \"^w^\", \"\u25CFw\u25CF\", \"\u2606w\u2606\", \"\uD835\uDDE8\uD835\uDE04\uD835\uDDE8\", \"(\u15D2\u15E8\u15D5)\", \"(\u25B0\u02D8v\u02D8\u25B0)\",\n    \"( \u00B4 \u25BD ` ).\uFF61\uFF4F\u2661\", \"*unbuttons shirt*\", \">3<\", \">:3\", \":3\", \"murr~\",\n    \"\u2665(\u3002U \u03C9 U\u3002)\", \"(\u02D8\u03B5\u02D8)\", \"*screams*\", \"*twerks*\", \"*sweats*\",\n];\n\nconst replacements = [\n    [\"love\", \"wuv\"],\n    [\"mr\", \"mistuh\"],\n    [\"dog\", \"doggo\"],\n    [\"cat\", \"kitteh\"],\n    [\"hello\", \"henwo\"],\n    [\"hell\", \"heck\"],\n    [\"fuck\", \"fwick\"],\n    [\"fuk\", \"fwick\"],\n    [\"shit\", \"shoot\"],\n    [\"friend\", \"fwend\"],\n    [\"stop\", \"stawp\"],\n    [\"god\", \"gosh\"],\n    [\"dick\", \"peepee\"],\n    [\"penis\", \"bulge\"],\n    [\"damn\", \"darn\"],\n];\n\n\nfunction uwuify(message: string): string {\n    return message\n        .split(\" \")\n        .map(w => {\n            let owofied = false;\n            const lowerCase = w.toLowerCase();\n            // return if the word is too short - uwuifying short words makes them unreadable\n            if (w.length < 4) {\n                return w;\n            }\n\n            // replacing the words based on the array on line 29\n            for (const [find, replace] of replacements) {\n                if (w.includes(find)) {\n                    w = w.replace(find, replace);\n                    owofied = true;\n                }\n            }\n            // these are the biggest word changes. if any of these are done we dont do the\n            // ones after the isowo check. to keep the words somewhat readable\n            if (lowerCase.includes(\"u\") && !lowerCase.includes(\"uwu\")) {\n                w = w.replace(\"u\", \"UwU\");\n                owofied = true;\n            }\n            if (lowerCase.includes(\"o\") && !lowerCase.includes(\"owo\")) {\n                w = w.replace(\"o\", \"OwO\");\n                owofied = true;\n            }\n            if (lowerCase.endsWith(\"y\") && w.length < 7) {\n                w = w + \" \" + \"w\" + w.slice(1);\n                owofied = true;\n            }\n\n            // returning if word has been already uwuified - to prevent over-uwuifying\n            if (owofied) {\n                return w;\n            }\n\n            // more tiny changes - to keep the words that passed through the latter changes uwuified\n            if (!lowerCase.endsWith(\"n\")) {\n                w = w.replace(\"n\", \"ny\");\n            }\n            if (Math.floor(Math.random() * 2) === 1) {\n                w.replace(\"s\", \"sh\");\n            }\n            if (Math.floor(Math.random() * 5) === 3 && !owofied) {\n                w = w[0] + \"-\" + w[0] + \"-\" + w;\n            }\n            if (Math.floor(Math.random() * 5) === 3) {\n                w =\n                    w +\n                    \" \" +\n                    endings[Math.floor(Math.random() * endings.length)];\n            }\n            w = w.replaceAll(\"r\", \"w\").replaceAll(\"l\", \"w\");\n            return w;\n        }).join(\" \");\n}\n\n\n\n// actual command declaration\nexport default definePlugin({\n    name: \"UwUifier\",\n    description: \"Simply uwuify commands\",\n    authors: [Devs.echo],\n    dependencies: [\"CommandsAPI\"],\n\n    commands: [\n        {\n            name: \"uwuify\",\n            description: \"uwuifies your messages\",\n            options: [RequiredMessageOption],\n\n            execute: opts => ({\n                content: uwuify(findOption(opts, \"message\", \"\")),\n            }),\n        },\n    ],\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { migratePluginSettings } from \"../api/settings\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\nimport { SelectedChannelStore } from \"../webpack/common\";\n\nconst timers = {} as Record<string, {\n    timeout?: NodeJS.Timeout;\n    i: number;\n}>;\n\nmigratePluginSettings(\"VoiceChatDoubleClick\", \"vcDoubleClick\");\nexport default definePlugin({\n    name: \"VoiceChatDoubleClick\",\n    description: \"Join voice chats via double click instead of single click\",\n    authors: [Devs.Ven, Devs.D3SOX],\n    patches: [\n        {\n            find: \"VoiceChannel.renderPopout\",\n            // hack: these are not React onClick, it is a custom prop handled by Discord\n            // thus, replacing this with onDoubleClick won't work, and you also cannot check\n            // e.detail since instead of the event they pass the channel.\n            // do this timer workaround instead\n            replacement: [\n                // voice channels\n                {\n                    match: /onClick:(.*)function\\(\\)\\{(e\\.handleClick.+?)}/g,\n                    replace: \"onClick:$1function(){Vencord.Plugins.plugins.VoiceChatDoubleClick.schedule(()=>{$2}, e)}\",\n                },\n                // stage channels\n                {\n                    match: /onClick:(.{0,15})this\\.handleClick,/g,\n                    replace: \"onClick:$1(...args)=>Vencord.Plugins.plugins.VoiceChatDoubleClick.schedule(()=>{this.handleClick(...args);}, args[0]),\",\n                }\n            ],\n        },\n        {\n            find: 'className:\"channelMention\",iconType:(',\n            replacement: {\n                match: /onClick:(.{1,3}),/,\n                replace: \"onClick:(_vcEv)=>(_vcEv.detail>=2||_vcEv.target.className.includes('MentionText'))&&($1)(),\",\n            }\n        }\n    ],\n\n    schedule(cb: () => void, e: any) {\n        // support from stage and voice channels patch\n        const id = e?.id ?? e.props.channel.id as string;\n        if (SelectedChannelStore.getVoiceChannelId() === id) {\n            cb();\n            return;\n        }\n        // use a different counter for each channel\n        const data = (timers[id] ??= { timeout: void 0, i: 0 });\n        // clear any existing timer\n        clearTimeout(data.timeout);\n\n        // if we already have 2 or more clicks, run the callback immediately\n        if (++data.i >= 2) {\n            cb();\n            delete timers[id];\n        } else {\n            // else reset the counter in 500ms\n            data.timeout = setTimeout(() => {\n                delete timers[id];\n            }, 500);\n        }\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport type { Guild } from \"discord-types/general\";\n\nimport { Devs } from \"../utils/constants\";\nimport { LazyComponent, lazyWebpack } from \"../utils/misc\";\nimport { ModalRoot, ModalSize, openModal } from \"../utils/modal\";\nimport { PluginDef } from \"../utils/types\";\nimport { filters, find } from \"../webpack\";\nimport { Menu } from \"../webpack/common\";\n\nconst ImageModal = LazyComponent(() => find(m => m.prototype?.render?.toString().includes(\"OPEN_ORIGINAL_IMAGE\")));\nconst MaskedLink = LazyComponent(() => find(m => m.type?.toString().includes(\"MASKED_LINK)\")));\n\nconst GuildBannerStore = lazyWebpack(filters.byProps(\"getGuildBannerURL\"));\n\nconst OPEN_URL = \"Vencord.Plugins.plugins.ViewIcons.openImage(\";\nexport default new class ViewIcons implements PluginDef {\n    name = \"ViewIcons\";\n    authors = [Devs.Ven];\n    description = \"Makes Avatars/Banners in user profiles clickable, and adds Guild Context Menu Entries to View Banner/Icon.\";\n\n    dependencies = [\"MenuItemDeobfuscatorAPI\"];\n\n    openImage(url: string) {\n        const u = new URL(url);\n        u.searchParams.set(\"size\", \"512\");\n        url = u.toString();\n\n        openModal(modalProps => (\n            <ModalRoot size={ModalSize.DYNAMIC} {...modalProps}>\n                <ImageModal\n                    shouldAnimate={true}\n                    original={url}\n                    src={url}\n                    renderLinkComponent={() => <MaskedLink />}\n                />\n            </ModalRoot>\n        ));\n    }\n\n    patches = [\n        {\n            find: \"onAddFriend:\",\n            replacement: {\n                // global because Discord has two components that are 99% identical with one small change ._.\n                match: /\\{src:(.{1,2}),avatarDecoration/g,\n                replace: (_, src) => `{src:${src},onClick:()=>${OPEN_URL}${src}),avatarDecoration`\n            }\n        }, {\n            find: \"().popoutNoBannerPremium\",\n            replacement: {\n                match: /style:.{0,10}\\{\\},(.{1,2})\\)/,\n                replace: (m, style) =>\n                    `onClick:${style}.backgroundImage&&(${style}.cursor=\"pointer\",` +\n                    `()=>${OPEN_URL}${style}.backgroundImage.replace(\"url(\", \"\"))),${m}`\n            }\n        }, {\n            find: '\"GuildContextMenu:',\n            replacement: [\n                {\n                    match: /\\w=(\\w)\\.id/,\n                    replace: \"_guild=$1,$&\"\n                },\n                {\n                    match: /(id:\"leave-guild\".{0,200}),(\\(0,.{1,3}\\.jsxs?\\).{0,200}function)/,\n                    replace: \"$1,Vencord.Plugins.plugins.ViewIcons.buildGuildContextMenuEntries(_guild),$2\"\n                }\n            ]\n        }\n    ];\n\n    buildGuildContextMenuEntries(guild: Guild) {\n        return (\n            <Menu.MenuGroup>\n                {guild.banner && (\n                    <Menu.MenuItem\n                        id=\"view-banner\"\n                        key=\"view-banner\"\n                        label=\"View Banner\"\n                        action={() => this.openImage(GuildBannerStore.getGuildBannerURL(guild))}\n                    />\n                )}\n                {guild.icon && (\n                    <Menu.MenuItem\n                        id=\"view-icon\"\n                        key=\"view-icon\"\n                        label=\"View Icon\"\n                        action={() => this.openImage(guild.getIconURL(0, true))}\n                    />\n                )}\n            </Menu.MenuGroup>\n        );\n    }\n};\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { makeRange } from \"../components/PluginSettings/components/SettingSliderComponent\";\nimport { Devs } from \"../utils/constants\";\nimport definePlugin, { OptionType } from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"VolumeBooster\",\n    authors: [Devs.Nuckyz],\n    description: \"Allows you to set the user and stream volume above the default maximum.\",\n\n    patches: [\n        {\n            find: \".Messages.USER_VOLUME\",\n            replacement: {\n                match: /maxValue:(.{1,2}\\..{1,2})\\?(\\d+?):(\\d+?),/,\n                replace: (_, defaultMaxVolumePredicate, higherMaxVolume, minorMaxVolume) => \"\"\n                    + `maxValue:${defaultMaxVolumePredicate}`\n                    + `?${higherMaxVolume}*Vencord.Settings.plugins.VolumeBooster.multiplier`\n                    + `:${minorMaxVolume}*Vencord.Settings.plugins.VolumeBooster.multiplier,`\n            }\n        },\n        {\n            find: \"currentVolume:\",\n            replacement: {\n                match: /maxValue:(.{1,2}\\..{1,2})\\?(\\d+?):(\\d+?),/,\n                replace: (_, defaultMaxVolumePredicate, higherMaxVolume, minorMaxVolume) => \"\"\n                    + `maxValue:${defaultMaxVolumePredicate}`\n                    + `?${higherMaxVolume}*Vencord.Settings.plugins.VolumeBooster.multiplier`\n                    + `:${minorMaxVolume}*Vencord.Settings.plugins.VolumeBooster.multiplier,`\n            }\n        }\n    ],\n\n    options: {\n        multiplier: {\n            description: \"Volume Multiplier\",\n            type: OptionType.SLIDER,\n            markers: makeRange(1, 5, 1),\n            default: 2,\n            stickToMarkers: true,\n        }\n    }\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"WebContextMenus\",\n    description: \"Re-adds some of context menu items missing on the web version of Discord, namely Copy/Open Link\",\n    authors: [Devs.Ven],\n    target: \"WEB\",\n\n    patches: [{\n        // There is literally no reason for Discord to make this Desktop only.\n        // The only thing broken is copy, but they already have a different copy function\n        // with web support????\n        find: \"open-native-link\",\n        replacement: [\n            {\n                // if (isNative || null ==\n                match: /if\\(!\\w\\..{1,3}\\|\\|null==/,\n                replace: \"if(null==\"\n            },\n            // Fix silly Discord calling the non web support copy\n            {\n                match: /\\w\\.default\\.copy/,\n                replace: \"Vencord.Webpack.Common.Clipboard.copy\"\n            }\n        ]\n    }]\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Devs } from \"../utils/constants\";\nimport definePlugin from \"../utils/types\";\n\nexport default definePlugin({\n    name: \"Webhook Tags\",\n    description: \"Changes the bot tag to say webhook for webhooks\",\n    authors: [Devs.Cyn],\n    patches: [\n        {\n            find: '.BOT=0]=\"BOT\"',\n            replacement: [\n                {\n                    match: /(.)\\[.\\.BOT=0\\]=\"BOT\";/,\n                    replace: (orig, types) =>\n                        `${types}[${types}.WEBHOOK=99]=\"WEBHOOK\";${orig}`,\n                },\n                {\n                    match: /case (.)\\.BOT:default:(.)=/,\n                    replace: (orig, types, text) =>\n                        `case ${types}.WEBHOOK:${text}=\"WEBHOOK\";break;${orig}`,\n                },\n            ],\n        },\n        {\n            find: \".Types.ORIGINAL_POSTER\",\n            replacement: {\n                match: /return null==(.)\\?null:\\(0,.{1,3}\\.jsxs?\\)\\((.{1,3})\\.Z/,\n                replace: (orig, type, BotTag) =>\n                    `if(arguments[0].message.webhookId&&arguments[0].user.isNonUserBot()){${type}=${BotTag}.Z.Types.WEBHOOK}${orig}`,\n            },\n        },\n    ],\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Promisable } from \"type-fest\";\n\n/**\n * A queue that can be used to run tasks consecutively.\n * Highly recommended for things like fetching data from Discord\n */\nexport class Queue {\n    /**\n     * @param maxSize The maximum amount of functions that can be queued at once.\n     *                If the queue is full, the oldest function will be removed.\n     */\n    constructor(public maxSize = Infinity) { }\n\n    private queue = [] as Array<() => Promisable<unknown>>;\n\n    private promise?: Promise<any>;\n\n    private next() {\n        const func = this.queue.shift();\n        if (func)\n            this.promise = Promise.resolve()\n                .then(func)\n                .finally(() => this.next());\n        else\n            this.promise = undefined;\n    }\n\n    private run() {\n        if (!this.promise)\n            this.next();\n    }\n\n    /**\n     * Append a task at the end of the queue. This task will be executed after all other tasks\n     * If the queue exceeds the specified maxSize, the first task in queue will be removed.\n     * @param func Task\n     */\n    push<T>(func: () => Promisable<T>) {\n        if (this.size >= this.maxSize)\n            this.queue.shift();\n\n        this.queue.push(func);\n        this.run();\n    }\n\n    /**\n     * Prepend a task at the beginning of the queue. This task will be executed next\n     * If the queue exceeds the specified maxSize, the last task in queue will be removed.\n     * @param func Task\n     */\n    unshift<T>(func: () => Promisable<T>) {\n        if (this.size >= this.maxSize)\n            this.queue.pop();\n\n        this.queue.unshift(func);\n        this.run();\n    }\n\n    /**\n     * The amount of tasks in the queue\n     */\n    get size() {\n        return this.queue.length;\n    }\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ReactionEmoji, User } from \"discord-types/general\";\n\nimport ErrorBoundary from \"../components/ErrorBoundary\";\nimport { Devs } from \"../utils/constants\";\nimport { LazyComponent, lazyWebpack, sleep, useForceUpdater } from \"../utils/misc\";\nimport { Queue } from \"../utils/Queue\";\nimport definePlugin from \"../utils/types\";\nimport { filters, findByCode } from \"../webpack\";\nimport { ChannelStore, FluxDispatcher, React, RestAPI, Tooltip } from \"../webpack/common\";\n\nconst UserSummaryItem = LazyComponent(() => findByCode(\"defaultRenderUser\", \"showDefaultAvatarsForNullUsers\"));\nconst AvatarStyles = lazyWebpack(filters.byProps(\"moreUsers\", \"emptyUser\", \"avatarContainer\", \"clickableAvatar\"));\n\nconst ReactionStore = lazyWebpack(filters.byProps(\"getReactions\"));\n\nconst queue = new Queue();\n\nfunction fetchReactions(msg: Message, emoji: ReactionEmoji) {\n    const key = emoji.name + (emoji.id ? `:${emoji.id}` : \"\");\n    return RestAPI.get({\n        url: `/channels/${msg.channel_id}/messages/${msg.id}/reactions/${key}`,\n        query: {\n            limit: 100\n        },\n        oldFormErrors: true\n    })\n        .then(res => FluxDispatcher.dispatch({\n            type: \"MESSAGE_REACTION_ADD_USERS\",\n            channelId: msg.channel_id,\n            messageId: msg.id,\n            users: res.body,\n            emoji\n        }))\n        .catch(console.error)\n        .finally(() => sleep(250));\n}\n\nfunction getReactionsWithQueue(msg: Message, e: ReactionEmoji) {\n    const key = `${msg.id}:${e.name}:${e.id ?? \"\"}`;\n    const cache = ReactionStore.__getLocalVars().reactions[key] ??= { fetched: false, users: {} };\n    if (!cache.fetched) {\n        queue.unshift(() =>\n            fetchReactions(msg, e)\n        );\n        cache.fetched = true;\n    }\n\n    return cache.users;\n}\n\nfunction makeRenderMoreUsers(users: User[]) {\n    return function renderMoreUsers(_label: string, _count: number) {\n        return (\n            <Tooltip text={users.slice(5).map(u => u.username).join(\", \")} >\n                {({ onMouseEnter, onMouseLeave }) => (\n                    <div\n                        className={AvatarStyles.moreUsers}\n                        onMouseEnter={onMouseEnter}\n                        onMouseLeave={onMouseLeave}\n                    >\n                        +{users.length - 5}\n                    </div>\n                )}\n            </Tooltip >\n        );\n    };\n}\n\nexport default definePlugin({\n    name: \"WhoReacted\",\n    description: \"Renders the Avatars of reactors\",\n    authors: [Devs.Ven],\n\n    patches: [{\n        find: \",reactionRef:\",\n        replacement: {\n            match: /((.)=(.{1,3})\\.hideCount)(,.+?reactionCount.+?\\}\\))/,\n            replace: \"$1,whoReactedProps=$3$4,$2?null:Vencord.Plugins.plugins.WhoReacted.renderUsers(whoReactedProps)\"\n        }\n    }],\n\n    renderUsers(props: RootObject) {\n        return props.message.reactions.length > 10 ? null : (\n            <ErrorBoundary noop>\n                <this._renderUsers {...props} />\n            </ErrorBoundary>\n        );\n    },\n\n    _renderUsers({ message, emoji }: RootObject) {\n        const forceUpdate = useForceUpdater();\n        React.useEffect(() => {\n            const cb = (e: any) => {\n                if (e.messageId === message.id)\n                    forceUpdate();\n            };\n            FluxDispatcher.subscribe(\"MESSAGE_REACTION_ADD_USERS\", cb);\n\n            return () => FluxDispatcher.unsubscribe(\"MESSAGE_REACTION_ADD_USERS\", cb);\n        }, [message.id]);\n\n        const reactions = getReactionsWithQueue(message, emoji);\n        const users = Object.values(reactions).filter(Boolean) as User[];\n\n        return (\n            <div\n                style={{ marginLeft: \"0.5em\", transform: \"scale(0.9)\" }}\n            >\n                <UserSummaryItem\n                    users={users}\n                    guildId={ChannelStore.getChannel(message.channel_id)?.guild_id}\n                    renderIcon={false}\n                    max={5}\n                    showDefaultAvatarsForNullUsers\n                    showUserPopout\n                    renderMoreUsers={makeRenderMoreUsers(users)}\n                />\n            </div>\n        );\n    }\n});\n\n\nexport interface GuildMemberAvatar { }\n\nexport interface Author {\n    id: string;\n    username: string;\n    discriminator: string;\n    avatar: string;\n    avatarDecoration?: any;\n    email: string;\n    verified: boolean;\n    bot: boolean;\n    system: boolean;\n    mfaEnabled: boolean;\n    mobile: boolean;\n    desktop: boolean;\n    premiumType: number;\n    flags: number;\n    publicFlags: number;\n    purchasedFlags: number;\n    premiumUsageFlags: number;\n    phone: string;\n    nsfwAllowed: boolean;\n    guildMemberAvatars: GuildMemberAvatar;\n}\n\nexport interface Emoji {\n    id: string;\n    name: string;\n}\n\nexport interface Reaction {\n    emoji: Emoji;\n    count: number;\n    burst_user_ids: any[];\n    burst_count: number;\n    burst_colors: any[];\n    burst_me: boolean;\n    me: boolean;\n}\n\nexport interface Message {\n    id: string;\n    type: number;\n    channel_id: string;\n    author: Author;\n    content: string;\n    deleted: boolean;\n    editHistory: any[];\n    attachments: any[];\n    embeds: any[];\n    mentions: any[];\n    mentionRoles: any[];\n    mentionChannels: any[];\n    mentioned: boolean;\n    pinned: boolean;\n    mentionEveryone: boolean;\n    tts: boolean;\n    codedLinks: any[];\n    giftCodes: any[];\n    timestamp: string;\n    editedTimestamp?: any;\n    state: string;\n    nonce?: any;\n    blocked: boolean;\n    call?: any;\n    bot: boolean;\n    webhookId?: any;\n    reactions: Reaction[];\n    applicationId?: any;\n    application?: any;\n    activity?: any;\n    messageReference?: any;\n    flags: number;\n    isSearchHit: boolean;\n    stickers: any[];\n    stickerItems: any[];\n    components: any[];\n    loggingName?: any;\n    interaction?: any;\n    interactionData?: any;\n    interactionError?: any;\n}\n\nexport interface Emoji {\n    id: string;\n    name: string;\n    animated: boolean;\n}\n\nexport interface RootObject {\n    message: Message;\n    readOnly: boolean;\n    isLurking: boolean;\n    isPendingMember: boolean;\n    useChatFontScaling: boolean;\n    emoji: Emoji;\n    count: number;\n    burst_user_ids: any[];\n    burst_count: number;\n    burst_colors: any[];\n    burst_me: boolean;\n    me: boolean;\n    type: number;\n    hideEmoji: boolean;\n    remainingBurstCurrency: number;\n}\n", "import p0 from \"./plugins/BetterNotes\";\nimport p1 from \"./plugins/HideAttachments\";\nimport p2 from \"./plugins/TimeBarAllActivities\";\nimport p3 from \"./plugins/anonymiseFileNames\";\nimport p4 from \"./plugins/apiBadges\";\nimport p5 from \"./plugins/apiCommands\";\nimport p6 from \"./plugins/apiMenuItemDeobfuscator\";\nimport p7 from \"./plugins/apiMessageAccessories\";\nimport p8 from \"./plugins/apiMessageEvents\";\nimport p9 from \"./plugins/apiNotices\";\nimport p10 from \"./plugins/apiServerList\";\nimport p11 from \"./plugins/arRPC\";\nimport p12 from \"./plugins/banger\";\nimport p13 from \"./plugins/betterGifAltText\";\nimport p14 from \"./plugins/betterRoleDot\";\nimport p15 from \"./plugins/betterUploadButton\";\nimport p16 from \"./plugins/callTimer\";\nimport p17 from \"./plugins/clearURLs\";\nimport p18 from \"./plugins/consoleShortcuts\";\nimport p19 from \"./plugins/corruptMp4s\";\nimport p20 from \"./plugins/dictionary\";\nimport p21 from \"./plugins/emoteCloner\";\nimport p22 from \"./plugins/experiments\";\nimport p23 from \"./plugins/fakeNitro\";\nimport p24 from \"./plugins/fart\";\nimport p25 from \"./plugins/forceOwnerCrown\";\nimport p26 from \"./plugins/friendInvites\";\nimport p27 from \"./plugins/fxTwitter\";\nimport p28 from \"./plugins/iLoveSpam\";\nimport p29 from \"./plugins/ignoreActivities\";\nimport p30 from \"./plugins/keepCurrentChannel\";\nimport p31 from \"./plugins/lastfm\";\nimport p32 from \"./plugins/loadingQuotes\";\nimport p33 from \"./plugins/messageActions\";\nimport p34 from \"./plugins/messageLogger\";\nimport p35 from \"./plugins/messageTags\";\nimport p36 from \"./plugins/moreCommands\";\nimport p37 from \"./plugins/moreKaomoji\";\nimport p38 from \"./plugins/moyai\";\nimport p39 from \"./plugins/muteNewGuild\";\nimport p40 from \"./plugins/noBlockedMessages\";\nimport p41 from \"./plugins/noCanaryMessageLinks\";\nimport p42 from \"./plugins/noDevtoolsWarning\";\nimport p43 from \"./plugins/noF1\";\nimport p44 from \"./plugins/noRPC\";\nimport p45 from \"./plugins/noReplyMention\";\nimport p46 from \"./plugins/noSystemBadge\";\nimport p47 from \"./plugins/noTrack\";\nimport p48 from \"./plugins/noUnblockToJump\";\nimport p49 from \"./plugins/oneko\";\nimport p50 from \"./plugins/petpet\";\nimport p51 from \"./plugins/plainFolderIcon\";\nimport p52 from \"./plugins/platformIndicators\";\nimport p53 from \"./plugins/pronoundb\";\nimport p54 from \"./plugins/quickMention\";\nimport p55 from \"./plugins/quickReply\";\nimport p56 from \"./plugins/readAllNotificationsButton\";\nimport p57 from \"./plugins/reverseImageSearch\";\nimport p58 from \"./plugins/reviewDB\";\nimport p59 from \"./plugins/settings\";\nimport p60 from \"./plugins/showHiddenChannels\";\nimport p61 from \"./plugins/silentTyping\";\nimport p62 from \"./plugins/spotifyControls\";\nimport p63 from \"./plugins/spotifyCrack\";\nimport p64 from \"./plugins/spotifyShareCommands\";\nimport p65 from \"./plugins/startupTimings\";\nimport p66 from \"./plugins/unindent\";\nimport p67 from \"./plugins/unminifyErrors\";\nimport p68 from \"./plugins/uwuify\";\nimport p69 from \"./plugins/vcDoubleClick\";\nimport p70 from \"./plugins/viewIcons\";\nimport p71 from \"./plugins/volumeBooster\";\nimport p72 from \"./plugins/webContextMenus\";\nimport p73 from \"./plugins/webhookTags\";\nimport p74 from \"./plugins/whoReacted\";\nexport default {\n[p0.name]:p0,\n[p1.name]:p1,\n[p2.name]:p2,\n[p3.name]:p3,\n[p4.name]:p4,\n[p5.name]:p5,\n[p6.name]:p6,\n[p7.name]:p7,\n[p8.name]:p8,\n[p9.name]:p9,\n[p10.name]:p10,\n[p11.name]:p11,\n[p12.name]:p12,\n[p13.name]:p13,\n[p14.name]:p14,\n[p15.name]:p15,\n[p16.name]:p16,\n[p17.name]:p17,\n[p18.name]:p18,\n[p19.name]:p19,\n[p20.name]:p20,\n[p21.name]:p21,\n[p22.name]:p22,\n[p23.name]:p23,\n[p24.name]:p24,\n[p25.name]:p25,\n[p26.name]:p26,\n[p27.name]:p27,\n[p28.name]:p28,\n[p29.name]:p29,\n[p30.name]:p30,\n[p31.name]:p31,\n[p32.name]:p32,\n[p33.name]:p33,\n[p34.name]:p34,\n[p35.name]:p35,\n[p36.name]:p36,\n[p37.name]:p37,\n[p38.name]:p38,\n[p39.name]:p39,\n[p40.name]:p40,\n[p41.name]:p41,\n[p42.name]:p42,\n[p43.name]:p43,\n[p44.name]:p44,\n[p45.name]:p45,\n[p46.name]:p46,\n[p47.name]:p47,\n[p48.name]:p48,\n[p49.name]:p49,\n[p50.name]:p50,\n[p51.name]:p51,\n[p52.name]:p52,\n[p53.name]:p53,\n[p54.name]:p54,\n[p55.name]:p55,\n[p56.name]:p56,\n[p57.name]:p57,\n[p58.name]:p58,\n[p59.name]:p59,\n[p60.name]:p60,\n[p61.name]:p61,\n[p62.name]:p62,\n[p63.name]:p63,\n[p64.name]:p64,\n[p65.name]:p65,\n[p66.name]:p66,\n[p67.name]:p67,\n[p68.name]:p68,\n[p69.name]:p69,\n[p70.name]:p70,\n[p71.name]:p71,\n[p72.name]:p72,\n[p73.name]:p73,\n[p74.name]:p74,\n};", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { User } from \"discord-types/general\";\nimport { HTMLProps } from \"react\";\n\nimport Plugins from \"~plugins\";\n\nexport enum BadgePosition {\n    START,\n    END\n}\n\nexport interface ProfileBadge {\n    /** The tooltip to show on hover */\n    tooltip: string;\n    /** The custom image to use */\n    image?: string;\n    /** Action to perform when you click the badge */\n    onClick?(): void;\n    /** Should the user display this badge? */\n    shouldShow?(userInfo: BadgeUserArgs): boolean;\n    /** Optional props (e.g. style) for the badge */\n    props?: HTMLProps<HTMLImageElement>;\n    /** Insert at start or end? */\n    position?: BadgePosition;\n\n    /** The badge name to display. Discord uses this, but we don't. */\n    key?: string;\n}\n\nconst Badges = new Set<ProfileBadge>();\n\n/**\n * Register a new badge with the Badges API\n * @param badge The badge to register\n */\nexport function addBadge(badge: ProfileBadge) {\n    Badges.add(badge);\n}\n\n/**\n * Unregister a badge from the Badges API\n * @param badge The badge to remove\n */\nexport function removeBadge(badge: ProfileBadge) {\n    return Badges.delete(badge);\n}\n\n/**\n * Inject badges into the profile badges array.\n * You probably don't need to use this.\n */\nexport function inject(badgeArray: ProfileBadge[], args: BadgeUserArgs) {\n    for (const badge of Badges) {\n        if (!badge.shouldShow || badge.shouldShow(args)) {\n            badge.position === BadgePosition.START\n                ? badgeArray.unshift(badge)\n                : badgeArray.push(badge);\n        }\n    }\n    (Plugins.BadgeAPI as any).addDonorBadge(badgeArray, args.user.id);\n\n    return badgeArray;\n}\n\nexport interface BadgeUserArgs {\n    user: User;\n    profile: Profile;\n    premiumSince: Date;\n    premiumGuildSince?: Date;\n}\n\ninterface ConnectedAccount {\n    type: string;\n    id: string;\n    name: string;\n    verified: boolean;\n}\n\ninterface Profile {\n    connectedAccounts: ConnectedAccount[];\n    premiumType: number;\n    premiumSince: string;\n    premiumGuildSince?: any;\n    lastFetched: number;\n    profileFetchFailed: boolean;\n    application?: any;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport type AccessoryCallback = (props: Record<string, any>) => JSX.Element;\nexport type Accessory = {\n    callback: AccessoryCallback;\n    position?: number;\n};\n\nexport const accessories = new Map<String, Accessory>();\n\nexport function addAccessory(\n    identifier: string,\n    callback: AccessoryCallback,\n    position?: number\n) {\n    accessories.set(identifier, {\n        callback,\n        position,\n    });\n}\n\nexport function removeAccessory(identifier: string) {\n    accessories.delete(identifier);\n}\n\nexport function _modifyAccessories(\n    elements: JSX.Element[],\n    props: Record<string, any>\n) {\n    for (const accessory of accessories.values()) {\n        elements.splice(\n            accessory.position != null\n                ? accessory.position < 0\n                    ? elements.length + accessory.position\n                    : accessory.position\n                : elements.length,\n            0,\n            accessory.callback(props)\n        );\n    }\n\n    return elements;\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport * as $Badges from \"./Badges\";\nimport * as $Commands from \"./Commands\";\nimport * as $DataStore from \"./DataStore\";\nimport * as $MessageAccessories from \"./MessageAccessories\";\nimport * as $MessageEventsAPI from \"./MessageEvents\";\nimport * as $Notices from \"./Notices\";\nimport * as $ServerList from \"./ServerList\";\n\n/**\n * An API allowing you to listen to Message Clicks or run your own logic\n * before a message is sent\n *\n * If your plugin uses this, you must add MessageEventsAPI to its dependencies\n */\nconst MessageEvents = $MessageEventsAPI;\n/**\n * An API allowing you to create custom notices\n * (snackbars on the top, like the Update prompt)\n */\nconst Notices = $Notices;\n/**\n * An API allowing you to register custom commands\n */\nconst Commands = $Commands;\n/**\n * A wrapper around IndexedDB. This can store arbitrarily\n * large data and supports a lot of datatypes (Blob, Map, ...).\n * For a full list, see the mdn link below\n *\n * This should always be preferred over the Settings API if possible, as\n * localstorage has very strict size restrictions and blocks the event loop\n *\n * Make sure your keys are unique (tip: prefix them with ur plugin name)\n * and please clean up no longer needed entries.\n *\n * This is actually just idb-keyval, so if you're familiar with that, you're golden!\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm#supported_types}\n */\nconst DataStore = $DataStore;\n/**\n * An API allowing you to add custom components as message accessories\n */\nconst MessageAccessories = $MessageAccessories;\n/**\n * An API allowing you to add badges to user profiles\n */\nconst Badges = $Badges;\n/**\n * An API allowing you to add custom elements to the server list\n */\nconst ServerList = $ServerList;\n\nexport { Badges, Commands, DataStore, MessageAccessories, MessageEvents, Notices, ServerList };\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { Guild } from \"discord-types/general\";\n\nimport { ChannelStore, GuildStore, PrivateChannelsStore, SelectedChannelStore } from \"../webpack/common\";\n\nexport function getCurrentChannel() {\n    return ChannelStore.getChannel(SelectedChannelStore.getChannelId());\n}\n\nexport function getCurrentGuild(): Guild | undefined {\n    return GuildStore.getGuild(getCurrentChannel()?.guild_id);\n}\n\nexport function openPrivateChannel(userId: string) {\n    PrivateChannelsStore.openPrivateChannel(userId);\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport type { LiteralUnion } from \"type-fest\";\n\n/**\n * Wait for a property to be defined on the target, then call the callback with\n * the value\n * @param target Object\n * @param property Property to be defined\n * @param callback Callback\n *\n * @example onceDefined(window, \"webpackChunkdiscord_app\", wpInstance => wpInstance.push(...));\n */\nexport function onceDefined<T, P extends LiteralUnion<keyof T, PropertyKey>>(\n    target: T, property: P, callback: (v: P extends keyof T ? T[P] : any) => void\n): void {\n    const propertyAsAny = property as any;\n\n    if (property in target)\n        return void callback(target[propertyAsAny]);\n\n    Object.defineProperty(target, property, {\n        set(v) {\n            delete target[propertyAsAny];\n            target[propertyAsAny] = v;\n            callback(v);\n        },\n        configurable: true,\n        enumerable: false\n    });\n}\n", "/*!\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport * from \"./ChangeList\";\nexport * as Constants from \"./constants\";\nexport * from \"./debounce\";\nexport * as Discord from \"./discord\";\nexport { default as IpcEvents } from \"./IpcEvents\";\nexport { default as Logger } from \"./Logger\";\nexport * from \"./misc\";\nexport * as Modals from \"./modal\";\nexport * from \"./onceDefined\";\nexport * from \"./proxyLazy\";\nexport * from \"./Queue\";\n\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { addSettingsListener, Settings } from \"../api/settings\";\nimport IpcEvents from \"./IpcEvents\";\n\nlet style: HTMLStyleElement;\n\nexport async function toggle(isEnabled: boolean) {\n    if (!style) {\n        if (isEnabled) {\n            style = document.createElement(\"style\");\n            style.id = \"vencord-custom-css\";\n            document.head.appendChild(style);\n            VencordNative.ipc.on(IpcEvents.QUICK_CSS_UPDATE, (_, css: string) => style.innerText = css);\n            style.textContent = await VencordNative.ipc.invoke(IpcEvents.GET_QUICK_CSS);\n        }\n    } else // @ts-ignore yes typescript, property 'disabled' does exist on type 'HTMLStyleElement' u should try reading the docs some time\n        style.disabled = !isEnabled;\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    toggle(Settings.useQuickCss);\n    addSettingsListener(\"useQuickCss\", toggle);\n});\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { WEBPACK_CHUNK } from \"../utils/constants\";\nimport Logger from \"../utils/Logger\";\nimport { _initWebpack } from \".\";\n\nlet webpackChunk: any[];\n\nconst logger = new Logger(\"WebpackInterceptor\", \"#8caaee\");\n\nObject.defineProperty(window, WEBPACK_CHUNK, {\n    get: () => webpackChunk,\n    set: v => {\n        if (v?.push !== Array.prototype.push) {\n            logger.info(`Patching ${WEBPACK_CHUNK}.push`);\n            _initWebpack(v);\n            patchPush();\n            // @ts-ignore\n            delete window[WEBPACK_CHUNK];\n            window[WEBPACK_CHUNK] = v;\n        }\n        webpackChunk = v;\n    },\n    configurable: true\n});\n\nfunction patchPush() {\n    function handlePush(chunk: any) {\n        try {\n            const modules = chunk[1];\n            const { subscriptions, listeners } = Vencord.Webpack;\n            const { patches } = Vencord.Plugins;\n\n            for (const id in modules) {\n                let mod = modules[id];\n                // Discords Webpack chunks for some ungodly reason contain random\n                // newlines. Cyn recommended this workaround and it seems to work fine,\n                // however this could potentially break code, so if anything goes weird,\n                // this is probably why.\n                // Additionally, `[actual newline]` is one less char than \"\\n\", so if Discord\n                // ever targets newer browsers, the minifier could potentially use this trick and\n                // cause issues.\n                let code: string = mod.toString().replaceAll(\"\\n\", \"\");\n                // a very small minority of modules use function() instead of arrow functions,\n                // but, unnamed toplevel functions aren't valid. However 0, function() makes it a statement\n                if (code.startsWith(\"function(\")) {\n                    code = \"0,\" + code;\n                }\n                const originalMod = mod;\n                const patchedBy = new Set();\n\n                const factory = modules[id] = function (module, exports, require) {\n                    try {\n                        mod(module, exports, require);\n                    } catch (err) {\n                        // Just rethrow discord errors\n                        if (mod === originalMod) throw err;\n\n                        logger.error(\"Error in patched chunk\", err);\n                        return void originalMod(module, exports, require);\n                    }\n\n                    // There are (at the time of writing) 11 modules exporting the window\n                    // Make these non enumerable to improve webpack search performance\n                    if (module.exports === window) {\n                        Object.defineProperty(require.c, id, {\n                            value: require.c[id],\n                            enumerable: false,\n                            configurable: true,\n                            writable: true\n                        });\n                        return;\n                    }\n\n                    for (const callback of listeners) {\n                        try {\n                            callback(exports);\n                        } catch (err) {\n                            logger.error(\"Error in webpack listener\", err);\n                        }\n                    }\n\n                    for (const [filter, callback] of subscriptions) {\n                        try {\n                            if (filter(exports)) {\n                                subscriptions.delete(filter);\n                                callback(exports);\n                            } else if (typeof exports === \"object\") {\n                                if (exports.default && filter(exports.default)) {\n                                    subscriptions.delete(filter);\n                                    callback(exports.default);\n                                }\n\n                                for (const nested in exports) if (nested.length <= 3) {\n                                    if (exports[nested] && filter(exports[nested])) {\n                                        subscriptions.delete(filter);\n                                        callback(exports[nested]);\n                                    }\n                                }\n                            }\n                        } catch (err) {\n                            logger.error(\"Error while firing callback for webpack chunk\", err);\n                        }\n                    }\n                } as any as { toString: () => string, original: any, (...args: any[]): void; };\n\n                // for some reason throws some error on which calling .toString() leads to infinite recursion\n                // when you force load all chunks???\n                try {\n                    factory.toString = () => mod.toString();\n                    factory.original = originalMod;\n                } catch { }\n\n                for (let i = 0; i < patches.length; i++) {\n                    const patch = patches[i];\n                    if (patch.predicate && !patch.predicate()) continue;\n\n                    if (code.includes(patch.find)) {\n                        patchedBy.add(patch.plugin);\n\n                        // @ts-ignore we change all patch.replacement to array in plugins/index\n                        for (const replacement of patch.replacement) {\n                            const lastMod = mod;\n                            const lastCode = code;\n\n                            try {\n                                const newCode = code.replace(replacement.match, replacement.replace);\n                                if (newCode === code && !replacement.noWarn) {\n                                    logger.warn(`Patch by ${patch.plugin} had no effect (Module id is ${id}): ${replacement.match}`);\n                                    if (IS_DEV) {\n                                        logger.debug(\"Function Source:\\n\", code);\n                                    }\n                                } else {\n                                    code = newCode;\n                                    mod = (0, eval)(`// Webpack Module ${id} - Patched by ${[...patchedBy].join(\", \")}\\n${newCode}\\n//# sourceURL=WebpackModule${id}`);\n                                }\n                            } catch (err) {\n                                logger.error(`Patch by ${patch.plugin} errored (Module id is ${id}): ${replacement.match}\\n`, err);\n\n                                if (IS_DEV) {\n                                    const changeSize = code.length - lastCode.length;\n                                    const match = lastCode.match(replacement.match)!;\n\n                                    // Use 200 surrounding characters of context\n                                    const start = Math.max(0, match.index! - 200);\n                                    const end = Math.min(lastCode.length, match.index! + match[0].length + 200);\n                                    // (changeSize may be negative)\n                                    const endPatched = end + changeSize;\n\n                                    const context = lastCode.slice(start, end);\n                                    const patchedContext = code.slice(start, endPatched);\n\n                                    // inline require to avoid including it in !IS_DEV builds\n                                    const diff = (require(\"diff\") as typeof import(\"diff\")).diffWordsWithSpace(context, patchedContext);\n                                    let fmt = \"%c %s \";\n                                    const elements = [] as string[];\n                                    for (const d of diff) {\n                                        const color = d.removed\n                                            ? \"red\"\n                                            : d.added\n                                                ? \"lime\"\n                                                : \"grey\";\n                                        fmt += \"%c%s\";\n                                        elements.push(\"color:\" + color, d.value);\n                                    }\n\n                                    logger.errorCustomFmt(...Logger.makeTitle(\"white\", \"Before\"), context);\n                                    logger.errorCustomFmt(...Logger.makeTitle(\"white\", \"After\"), context);\n                                    const [titleFmt, ...titleElements] = Logger.makeTitle(\"white\", \"Diff\");\n                                    logger.errorCustomFmt(titleFmt + fmt, ...titleElements, ...elements);\n                                }\n                                code = lastCode;\n                                mod = lastMod;\n                                patchedBy.delete(patch.plugin);\n                            }\n                        }\n\n                        if (!patch.all) patches.splice(i--, 1);\n                    }\n                }\n            }\n        } catch (err) {\n            logger.error(\"Error in handlePush\", err);\n        }\n\n        return handlePush.original.call(window[WEBPACK_CHUNK], chunk);\n    }\n\n    handlePush.original = window[WEBPACK_CHUNK].push;\n    Object.defineProperty(window[WEBPACK_CHUNK], \"push\", {\n        get: () => handlePush,\n        set: v => (handlePush.original = v),\n        configurable: true\n    });\n}\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { debounce } from \"../utils/debounce\";\nimport { makeCodeblock } from \"../utils/misc\";\nimport { Button, Clipboard, Forms, Margins, Parser, React, Switch, Text, TextInput } from \"../webpack/common\";\nimport { search } from \"../webpack/webpack\";\nimport { CheckedTextInput } from \"./CheckedTextInput\";\nimport ErrorBoundary from \"./ErrorBoundary\";\n\n// Do not include diff in non dev builds (side effects import)\nif (IS_DEV) {\n    var differ = require(\"diff\") as typeof import(\"diff\");\n}\n\nconst findCandidates = debounce(function ({ find, setModule, setError }) {\n    const candidates = search(find);\n    const keys = Object.keys(candidates);\n    const len = keys.length;\n    if (len === 0)\n        setError(\"No match. Perhaps that module is lazy loaded?\");\n    else if (len !== 1)\n        setError(\"Multiple matches. Please refine your filter\");\n    else\n        setModule([keys[0], candidates[keys[0]]]);\n});\n\nfunction ReplacementComponent({ module, match, replacement, setReplacementError }) {\n    const [id, fact] = module;\n    const [compileResult, setCompileResult] = React.useState<[boolean, string]>();\n\n    const [patchedCode, matchResult, diff] = React.useMemo(() => {\n        const src: string = fact.toString().replaceAll(\"\\n\", \"\");\n        try {\n            var patched = src.replace(match, replacement);\n            setReplacementError(void 0);\n        } catch (e) {\n            setReplacementError((e as Error).message);\n            return [\"\", [], []];\n        }\n        const m = src.match(match);\n        return [patched, m, makeDiff(src, patched, m)];\n    }, [id, match, replacement]);\n\n    function makeDiff(original: string, patched: string, match: RegExpMatchArray | null) {\n        if (!match || original === patched) return null;\n\n        const changeSize = patched.length - original.length;\n\n        // Use 200 surrounding characters of context\n        const start = Math.max(0, match.index! - 200);\n        const end = Math.min(original.length, match.index! + match[0].length + 200);\n        // (changeSize may be negative)\n        const endPatched = end + changeSize;\n\n        const context = original.slice(start, end);\n        const patchedContext = patched.slice(start, endPatched);\n\n        return differ.diffWordsWithSpace(context, patchedContext);\n    }\n\n    function renderMatch() {\n        if (!matchResult)\n            return <Forms.FormText>Regex doesn't match!</Forms.FormText>;\n\n        const fullMatch = matchResult[0] ? makeCodeblock(matchResult[0], \"js\") : \"\";\n        const groups = matchResult.length > 1\n            ? makeCodeblock(matchResult.slice(1).map((g, i) => `Group ${i + 1}: ${g}`).join(\"\\n\"), \"yml\")\n            : \"\";\n\n        return (\n            <>\n                <div style={{ userSelect: \"text\" }}>{Parser.parse(fullMatch)}</div>\n                <div style={{ userSelect: \"text\" }}>{Parser.parse(groups)}</div>\n            </>\n        );\n    }\n\n    function renderDiff() {\n        return diff?.map(p => {\n            const color = p.added ? \"lime\" : p.removed ? \"red\" : \"grey\";\n            return <div style={{ color, userSelect: \"text\" }}>{p.value}</div>;\n        });\n    }\n\n    return (\n        <>\n            <Forms.FormTitle>Module {id}</Forms.FormTitle>\n\n            {!!matchResult?.[0]?.length && (\n                <>\n                    <Forms.FormTitle>Match</Forms.FormTitle>\n                    {renderMatch()}\n                </>)\n            }\n\n            {!!diff?.length && (\n                <>\n                    <Forms.FormTitle>Diff</Forms.FormTitle>\n                    {renderDiff()}\n                </>\n            )}\n\n            {!!diff?.length && (\n                <Button className={Margins.marginTop20} onClick={() => {\n                    try {\n                        Function(patchedCode.replace(/^function\\(/, \"function patchedModule(\"));\n                        setCompileResult([true, \"Compiled successfully\"]);\n                    } catch (err) {\n                        setCompileResult([false, (err as Error).message]);\n                    }\n                }}>Compile</Button>\n            )}\n\n            {compileResult &&\n                <Forms.FormText style={{ color: compileResult[0] ? \"var(--text-positive)\" : \"var(--text-danger)\" }}>\n                    {compileResult[1]}\n                </Forms.FormText>\n            }\n        </>\n    );\n}\n\nfunction ReplacementInput({ replacement, setReplacement, replacementError }) {\n    const [isFunc, setIsFunc] = React.useState(false);\n    const [error, setError] = React.useState<string>();\n\n    function onChange(v: string) {\n        setError(void 0);\n\n        if (isFunc) {\n            try {\n                const func = (0, eval)(v);\n                if (typeof func === \"function\")\n                    setReplacement(() => func);\n                else\n                    setError(\"Replacement must be a function\");\n            } catch (e) {\n                setReplacement(v);\n                setError((e as Error).message);\n            }\n        } else {\n            setReplacement(v);\n        }\n    }\n\n    React.useEffect(\n        () => void (isFunc ? onChange(replacement) : setError(void 0)),\n        [isFunc]\n    );\n\n    return (\n        <>\n            <Forms.FormTitle>replacement</Forms.FormTitle>\n            <TextInput\n                value={replacement?.toString()}\n                onChange={onChange}\n                error={error ?? replacementError}\n            />\n            {!isFunc && (\n                <>\n                    <Forms.FormTitle>Cheat Sheet</Forms.FormTitle>\n                    {Object.entries({\n                        \"$$\": \"Insert a $\",\n                        \"$&\": \"Insert the entire match\",\n                        \"$`\u200B\": \"Insert the substring before the match\",\n                        \"$'\": \"Insert the substring after the match\",\n                        \"$n\": \"Insert the nth capturing group ($1, $2...)\"\n                    }).map(([placeholder, desc]) => (\n                        <Forms.FormText key={placeholder}>\n                            {Parser.parse(\"`\" + placeholder + \"`\")}: {desc}\n                        </Forms.FormText>\n                    ))}\n                </>\n            )}\n\n            <Switch\n                className={Margins.marginTop8}\n                value={isFunc}\n                onChange={setIsFunc}\n                note=\"'replacement' will be evaled if this is toggled\"\n                hideBorder={true}\n            >\n                Treat as Function\n            </Switch>\n        </>\n    );\n}\n\nfunction PatchHelper() {\n    const [find, setFind] = React.useState<string>(\"\");\n    const [match, setMatch] = React.useState<string>(\"\");\n    const [replacement, setReplacement] = React.useState<string | Function>(\"\");\n\n    const [replacementError, setReplacementError] = React.useState<string>();\n\n    const [module, setModule] = React.useState<[number, Function]>();\n    const [findError, setFindError] = React.useState<string>();\n\n    const code = React.useMemo(() => {\n        return `\n{\n    find: ${JSON.stringify(find)},\n    replacement: {\n        match: /${match.replace(/(?<!\\\\)\\//g, \"\\\\/\")}/,\n        replace: ${typeof replacement === \"function\" ? replacement.toString() : JSON.stringify(replacement)}\n    }\n}\n        `.trim();\n    }, [find, match, replacement]);\n\n    function onFindChange(v: string) {\n        setFindError(void 0);\n        setFind(v);\n        if (v.length) {\n            findCandidates({ find: v, setModule, setError: setFindError });\n        }\n    }\n\n    function onMatchChange(v: string) {\n        try {\n            new RegExp(v);\n            setFindError(void 0);\n            setMatch(v);\n        } catch (e: any) {\n            setFindError((e as Error).message);\n        }\n    }\n\n    return (\n        <Forms.FormSection>\n            <Text variant=\"heading-md/normal\" tag=\"h2\" className={Margins.marginBottom8}>Patch Helper</Text>\n            <Forms.FormTitle>find</Forms.FormTitle>\n            <TextInput\n                type=\"text\"\n                value={find}\n                onChange={onFindChange}\n                error={findError}\n            />\n\n            <Forms.FormTitle>match</Forms.FormTitle>\n            <CheckedTextInput\n                value={match}\n                onChange={onMatchChange}\n                validate={v => {\n                    try {\n                        return (new RegExp(v), true);\n                    } catch (e) {\n                        return (e as Error).message;\n                    }\n                }}\n            />\n\n            <ReplacementInput\n                replacement={replacement}\n                setReplacement={setReplacement}\n                replacementError={replacementError}\n            />\n\n            <Forms.FormDivider />\n            {module && (\n                <ReplacementComponent\n                    module={module}\n                    match={new RegExp(match)}\n                    replacement={replacement}\n                    setReplacementError={setReplacementError}\n                />\n            )}\n\n            {!!(find && match && replacement) && (\n                <>\n                    <Forms.FormTitle className={Margins.marginTop20}>Code</Forms.FormTitle>\n                    <div style={{ userSelect: \"text\" }}>{Parser.parse(makeCodeblock(code, \"ts\"))}</div>\n                    <Button onClick={() => Clipboard.copy(code)}>Copy to Clipboard</Button>\n                </>\n            )}\n        </Forms.FormSection>\n    );\n}\n\nexport default IS_DEV ? ErrorBoundary.wrap(PatchHelper) : null;\n", "/*\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport { default as PatchHelper } from \"./PatchHelper\";\nexport { default as PluginSettings } from \"./PluginSettings\";\nexport { default as VencordSettings } from \"./VencordSettings\";\n", "/*!\n * Vencord, a modification for Discord's desktop app\n * Copyright (c) 2022 Vendicated and contributors\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport * as Api from \"./api\";\nexport * as Plugins from \"./plugins\";\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nexport * as Util from \"./utils\";\nexport * as QuickCss from \"./utils/quickCss\";\nexport * as Updater from \"./utils/updater\";\nexport * as Webpack from \"./webpack\";\nexport { PlainSettings, Settings };\n\nimport \"./utils/quickCss\";\nimport \"./webpack/patchWebpack\";\n\nimport { popNotice, showNotice } from \"./api/Notices\";\nimport { PlainSettings, Settings } from \"./api/settings\";\nimport { patches, PMLogger, startAllPlugins } from \"./plugins\";\nimport { checkForUpdates, UpdateLogger } from \"./utils/updater\";\nimport { onceReady } from \"./webpack\";\nimport { Router } from \"./webpack/common\";\n\nexport let Components: any;\n\nasync function init() {\n    await onceReady;\n    startAllPlugins();\n    Components = await import(\"./components\");\n\n    if (!IS_WEB) {\n        try {\n            const isOutdated = await checkForUpdates();\n            if (isOutdated && Settings.notifyAboutUpdates)\n                setTimeout(() => {\n                    showNotice(\n                        \"A Vencord update is available!\",\n                        \"View Update\",\n                        () => {\n                            popNotice();\n                            Router.open(\"VencordUpdater\");\n                        }\n                    );\n                }, 10000);\n        } catch (err) {\n            UpdateLogger.error(\"Failed to check for updates\", err);\n        }\n    }\n\n    if (IS_DEV) {\n        const pendingPatches = patches.filter(p => !p.all && p.predicate?.() !== false);\n        if (pendingPatches.length)\n            PMLogger.warn(\n                \"Webpack has finished initialising, but some patches haven't been applied yet.\",\n                \"This might be expected since some Modules are lazy loaded, but please verify\",\n                \"that all plugins are working as intended.\",\n                \"You are seeing this warning because this is a Development build of Vencord.\",\n                \"\\nThe following patches have not been applied:\",\n                \"\\n\\n\" + pendingPatches.map(p => `${p.plugin}: ${p.find}`).join(\"\\n\")\n            );\n    }\n}\n\ninit();\n"],
  "mappings": "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ACR,EACA,UAAW,CACP,KAAM,YACN,GAAI,mBACR,EACA,OAAQ,CACJ,KAAM,SACN,GAAI,mBACR,EACA,OAAQ,CACJ,KAAM,UACN,GAAI,mBACR,EACA,KAAM,CACF,KAAM,OACN,GAAI,mBACR,EACA,OAAQ,CACJ,KAAM,SACN,GAAI,mBACR,EACA,UAAW,CACP,KAAM,MACN,GAAI,mBACR,EACA,KAAM,CACF,KAAM,OACN,GAAI,mBACR,EACA,OAAQ,CACJ,KAAM,SACN,GAAI,mBACR,EACA,IAAK,CACD,KAAM,MACN,GAAI,mBACR,EACA,OAAQ,CACJ,KAAM,SACN,GAAI,mBACR,EACA,MAAO,CACH,KAAM,QACN,GAAI,mBACR,EACA,QAAS,CACL,KAAM,UACN,GAAI,mBACR,EACA,YAAa,CACT,KAAM,cACN,GAAI,mBACR,EACA,MAAO,CACH,KAAM,QACN,GAAI,mBACR,EACA,QAAS,CACL,KAAM,WACN,GAAI,mBACR,EACA,aAAc,CACV,KAAM,eACN,GAAI,mBACR,EACA,WAAY,CACR,KAAM,aACN,GAAI,mBACR,EACA,QAAS,CACL,KAAM,UACN,GAAI,oBACR,EACA,oBAAqB,CACjB,KAAM,wBACN,GAAI,oBACR,EACA,MAAO,CACH,KAAM,QACN,GAAI,EACR,EACA,MAAO,CACH,KAAM,QACN,GAAI,mBACR,EACA,IAAK,CACD,KAAM,MACN,GAAI,mBACR,EACA,SAAU,CACN,KAAM,WACN,GAAI,mBACR,EACA,KAAM,CACF,KAAM,OACN,GAAI,mBACR,EACA,MAAO,CACH,KAAM,QACN,GAAI,mBACR,EACA,MAAO,CACH,KAAM,QACN,GAAI,mBACR,EACA,OAAQ,CACJ,KAAM,SACN,GAAI,mBACR,EACA,KAAM,CACF,KAAM,OACN,GAAI,mBACR,CACJ,CAAC,IC/JD,IAuBOW,GAvBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,IACAC,IAEOP,GAAQQ,EAAa,CACxB,KAAM,iBACN,YAAa,6DACb,QAAS,CAACC,EAAK,GAAG,EAElB,QAAS,CACL,CACI,KAAM,YACN,IAAK,GACL,UAAWC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,EAAA,kBAAAC,IAmBaH,GAAe,CACxB,oBACA,kBACA,iBACA,uBACA,uBACA,eACA,gBACA,4BACA,2BACA,QACA,aACA,mBACA,qBACA,eACA,eACA,gBACA,mBACA,cACA,gBACA,oBACA,mBACA,cACA,cACA,gBACA,eACA,wBACA,gBACA,gBACA,cACA,cACA,cACA,cACA,cACA,SACA,UACA,MACA,cACA,OACA,QACA,SACA,eACA,aACA,aACA,aACA,UACA,WACA,cACA,QACA,QACA,aACA,WACA,YACA,UACA,cACA,aACA,SACA,SACA,SACA,OACA,cACA,aACA,aACA,YACA,aACA,SACA,aACA,mBACA,YACA,UACA,QACA,YACA,OACA,QACA,MACA,OACA,cACA,WACA,cACA,gBACA,kBACA,SACA,YACA,SACA,sBACA,mBACA,OACA,kBACA,eACA,cACA,eACA,kBACA,kBACA,kBACA,iBACA,SACA,QACA,SACA,SACA,gBACA,yBACA,2BACA,kBACA,kBACA,sBACA,YACA,aACA,cACA,oBACA,sBACA,iBACA,SACA,aACA,cACA,aACA,eACA,WACA,qBACJ,ICzIA,IA+BMI,GACAC,GAGCC,GAnCPC,GAAAC,EAAA,kBAAAC,IAkBAC,KAOAC,IACAC,IACAC,IACAC,KAGMV,GAAe,sBACfC,GAAkB,OAAOD,GAAa,MAAM,EAElDW,EAAsB,YAAa,WAAW,EACvCT,GAAQU,EAAa,CACxB,KAAM,YACN,YAAa,qCACb,QAAS,CAACC,EAAK,KAAK,EACpB,aAAc,CAAC,kBAAkB,EAEjC,aAAaC,EAAa,CACtB,OAAQA,GAAOb,GAAgB,KAAKa,CAAG,EACjCA,EAAI,QAAQd,GAAc,MAAM,EAC/Bc,GAAO,EAClB,EAEA,aAAc,CAGV,IAAMC,EAAQC,GAEd,KAAK,eAAiB,IAAI,IAC1B,KAAK,YAAc,IAAI,IACvB,KAAK,UAAY,IAAI,IAErB,QAAWC,KAAQF,EAAO,CACtB,IAAMG,EAAYD,EAAK,MAAM,GAAG,EAC1BE,EAAY,IAAI,OAClB,IACA,KAAK,aAAaD,EAAU,EAAE,EAAE,QAAQ,OAAQ,KAAK,EACrD,GACJ,EAEA,GAAI,CAACA,EAAU,GAAI,CACf,KAAK,eAAe,IAAIC,CAAS,EACjC,QACJ,CACA,IAAMC,EAAW,IAAI,OACjB,aACA,KAAK,aAAaF,EAAU,EAAE,EACzB,QAAQ,OAAQ,KAAK,EACrB,QAAQ,YAAa,WAAW,EAChC,QAAQ,OAAQ,KAAK,EAC1B,GACJ,EACMG,EAAgBD,EAAS,SAAS,EAExC,KAAK,UAAU,IAAIC,EAAeD,CAAQ,EACtC,KAAK,YAAY,IAAIC,CAAa,GAAK,MACvC,KAAK,YAAY,IAAIA,EAAe,IAAI,GAAK,EAEjD,KAAK,YAAY,IAAIA,CAAa,EAAE,IAAIF,CAAS,CACrD,CACJ,EAEA,YAAYF,EAAuBK,EAAeC,EAAyB,EACnED,IAAUL,GAAQA,aAAgB,QAAUA,EAAK,KAAKK,CAAK,IAC3DC,EAAO,OAAOD,CAAK,CAE3B,EAEA,SAASE,EAAe,CAEpB,GAAI,CACA,IAAIC,EAAM,IAAI,IAAID,CAAK,CAC3B,MAAE,CAEE,OAAOA,CACX,CAGA,OAAIC,EAAI,aAAa,QAAQ,EAAE,KAAK,EAAE,KAE3BD,GAIX,KAAK,eAAe,QAAQP,GAAQ,CAChCQ,EAAI,aAAa,QAAQ,CAACC,EAAQJ,EAAOC,IAAW,CAChD,KAAK,YAAYN,EAAMK,EAAOC,CAAM,CACxC,CAAC,CACL,CAAC,EAGD,KAAK,UAAU,QAAQ,CAACI,EAAOC,IAAiB,CACxC,CAACD,EAAM,KAAKF,EAAI,QAAQ,GAC5B,KAAK,YAAY,IAAIG,CAAY,EAAE,QAAQX,GAAQ,CAC/CQ,EAAI,aAAa,QAAQ,CAACC,EAAQJ,EAAOC,IAAW,CAChD,KAAK,YAAYN,EAAMK,EAAOC,CAAM,CACxC,CAAC,CACL,CAAC,CACL,CAAC,EAEME,EAAI,SAAS,EACxB,EAEA,OAAOI,EAAoB,CAEnBA,EAAI,QAAQ,MAAM,eAAe,IACjCA,EAAI,QAAUA,EAAI,QAAQ,QACtB,yCACAL,GAAS,KAAK,SAASA,CAAK,CAChC,EAER,EAEA,OAAQ,CACJ,KAAK,YAAY,EACjB,KAAK,QAAUM,GAAmB,CAACC,EAAGF,IAAQ,KAAK,OAAOA,CAAG,CAAC,EAC9D,KAAK,QAAUG,GAAmB,CAACC,EAAMC,EAAML,IAC3C,KAAK,OAAOA,CAAG,CACnB,CACJ,EAEA,MAAO,CACHM,GAAsB,KAAK,OAAO,EAClCC,GAAsB,KAAK,OAAO,CACtC,CACJ,CAAC,ICrJD,IAyBOC,GAzBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAMOL,GAAQM,EAAa,CACxB,KAAM,mBACN,YAAa,qFACb,QAAS,CAACC,EAAK,GAAG,EAElB,cAAe,CACX,MAAO,CACH,OAAsC,OAAO,cAAc,UAAU,KACrE,SAA0C,OAAO,cAAc,UAAU,KACzE,GAAI,QAAQ,QACZ,IAAK,QAAQ,QAAQ,KAAK,EAC1B,KAAM,QAAQ,QAAQ,KACtB,SAAU,QAAQ,QAAQ,OAC1B,KAAM,QAAQ,QAAQ,QACtB,MAAQC,GAAiB,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,aAAaA,CAAI,CAAE,EACpF,YAAa,QAAQ,QAAQ,YAC7B,KAAM,QAAQ,QAAQ,KACtB,QAAS,QAAQ,QACjB,MAAO,QAAQ,QAAQ,OAAO,MAC9B,SAAU,QAAQ,SAClB,IAAK,QAAQ,IACb,OAAQ,IAAM,SAAS,OAAO,EAC9B,QAAwC,OAAO,cAAc,IAAI,QACrE,CACJ,EAEA,OAAQ,CACJ,IAAMC,EAAY,KAAK,aAAa,EACpC,OAAO,aAAeA,EACtB,OAAW,CAACC,EAAKC,CAAG,IAAK,OAAO,QAAQF,CAAS,EAC7C,OAAOC,GAAOC,CACtB,EAEA,MAAO,CACH,OAAO,OAAO,aACd,QAAWD,KAAO,KAAK,aAAa,EAChC,OAAO,OAAOA,EACtB,CACJ,CAAC,IChCM,SAASE,IAAa,CACzB,MAAO,IAAIC,GAAe,cAAc,KAAK,IAAI,CAAC,GACtD,CAQO,SAASC,EAAeC,EAAmBC,EAAwC,CACtF,IAAMC,EAAaC,GAAiB,CAAE,UAAAH,EAAW,QAAS,GAAI,OAAQ,CAAC,CAAE,CAAC,EAE1E,OAAAI,GAAc,eAAeJ,EAAWK,GAAcJ,EAASC,CAAU,CAAC,EAEnED,CACX,CAWO,SAASK,GAAWC,EAAkBC,EAAcC,EAAqB,CAC5E,OAAQF,EAAK,KAAKG,GAAKA,EAAE,OAASF,CAAI,GAAG,OAASC,CACtD,CA5DA,IAyBMN,GACAC,GAEFN,GA5BJa,GAAAC,EAAA,kBAAAC,IAqBAC,IACAC,IAGMZ,GAAmBa,EAAYC,EAAQ,OAAO,kBAAkB,CAAC,EACjEb,GAAgBY,EAAYC,EAAQ,QAAQ,gBAAgB,CAAC,EAGnEC,EAAQ,gBAAiBC,GAAKrB,GAAiBqB,CAAC,IC7BhD,IA0BYC,GAcAC,GA0BAC,GAlEZC,GAAAC,EAAA,kBAAAC,IA0BYL,QACRA,IAAA,YAAc,GAAd,cACAA,IAAA,kBAAoB,GAApB,oBACAA,IAAA,OAAS,GAAT,SACAA,IAAA,QAAU,GAAV,UACAA,IAAA,QAAU,GAAV,UACAA,IAAA,KAAO,GAAP,OACAA,IAAA,QAAU,GAAV,UACAA,IAAA,KAAO,GAAP,OACAA,IAAA,YAAc,GAAd,cACAA,IAAA,OAAS,IAAT,SACAA,IAAA,WAAa,IAAb,aAXQA,QAAA,IAcAC,QACRA,IAAA,SAAW,GAAX,WACAA,IAAA,cAAgB,GAAhB,gBACAA,IAAA,qBAAuB,GAAvB,uBACAA,IAAA,IAAM,GAAN,MACAA,IAAA,YAAc,GAAd,cALQA,QAAA,IA0BAC,QACRA,IAAA,WAAa,GAAb,aACAA,IAAA,KAAO,GAAP,OACAA,IAAA,QAAU,GAAV,UAHQA,QAAA,MClEZ,IAAAI,GAAA,GAAAC,GAAAD,GAAA,iCAAAE,GAAA,iCAAAC,GAAA,2BAAAC,GAAA,aAAAC,GAAA,0BAAAC,GAAA,0BAAAC,GAAA,mBAAAC,GAAA,UAAAC,GAAA,aAAAC,GAAA,eAAAC,GAAA,eAAAC,GAAA,kBAAAC,GAAA,oBAAAC,GAAA,mBAAAC,EAAA,sBAAAC,KAsFO,SAASH,GAA0CI,EAAW,CACjE,OAAAA,EAAI,cAAgBA,EAAI,KACxBA,EAAI,qBAAuBA,EAAI,YAC/BA,EAAI,SAAS,QAAQ,CAACA,EAAKC,EAAGC,IAAS,CAE/BF,IAAQG,GAAgBD,EAAKD,GAAKZ,GAC7BW,IAAQI,KAAgBF,EAAKD,GAAKX,IAC3CU,EAAI,SAAS,QAAQK,GAAKA,EAAE,cAAgBA,EAAE,IAAI,EAElDT,GAAcM,EAAKD,EAAE,CACzB,CAAC,EACMD,CACX,CAKA,SAASM,GAAoBC,EAAcC,EAAgB,CACvDD,EAAI,SAAS,QAAQE,GAAK,CACtB,GAAIA,EAAE,OAAS,EACX,MAAM,IAAI,MAAM,wEAAwE,EAC5F,IAAMC,EAAS,CACX,GAAGH,EACH,GAAGE,EACH,OACA,KAAM,GAAGF,EAAI,QAAQE,EAAE,OACvB,YAAa,GAAGF,EAAI,QAAQE,EAAE,OAC9B,eAAgB,CAAC,CACb,KAAMA,EAAE,KACR,KAAMA,EAAE,KACR,YAAaA,EAAE,IACnB,CAAC,EACD,YAAaF,CACjB,EACAV,GAAgBa,EAAeF,CAAM,CACzC,CAAC,CACL,CAEO,SAASX,GAAmCc,EAAYH,EAAgB,CAC3E,GAAI,CAACpB,GAAU,CACX,QAAQ,KACJ,gBACA,mBAAmBuB,EAAQ,mDAC3B,gCACJ,EACA,MACJ,CAEA,GAAIvB,GAAS,KAAKwB,GAAKA,EAAE,OAASD,EAAQ,IAAI,EAC1C,MAAM,IAAI,MAAM,YAAYA,EAAQ,uBAAuB,EAW/D,GATAA,EAAQ,iBAAmB,GAC3BA,EAAQ,KAAO,IAAIvB,GAAS,OAAS,IACrCuB,EAAQ,gBAAkB,KAC1BA,EAAQ,OAAS,EACjBA,EAAQ,YAAc,EACtBA,EAAQ,SAAWH,EAEnBZ,GAAce,CAAO,EAEjBA,EAAQ,UAAU,IAAI,OAAS,EAA0C,CACzEL,GAAoBK,EAASH,CAAM,EACnC,MACJ,CAEAf,GAASkB,EAAQ,MAAQA,EACzBvB,GAAS,KAAKuB,CAAO,CACzB,CAEO,SAASZ,GAAkBc,EAAc,CAC5C,IAAMC,EAAM1B,GAAS,UAAUwB,GAAKA,EAAE,OAASC,CAAI,EACnD,OAAIC,IAAQ,GACD,IAEX1B,GAAS,OAAO0B,EAAK,CAAC,EACtB,OAAOrB,GAASoB,GAET,GACX,CApKA,IAyBWzB,GACEK,GAGPU,GACAC,GAMKf,GAMAC,GAEEE,GAWAD,GAvDbwB,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,KACAC,KAEAD,KACAC,KAGa3B,GAAW,CAAC,EAGnBU,GAAiB,OAAO,uBAAuB,EAC/CC,GAAiB,OAAO,uBAAuB,EAM1Cf,GAAgCc,GAMhCb,GAAgCc,GAE9BZ,GAAQ,SAAU6B,EAAiB,CAC5C,GAAI,CACAjC,GAAWiC,EACXhC,GAAwBgC,EAAK,KAAKT,GAAKA,EAAE,OAAS,OAAO,EAAG,QAAS,GACrEtB,GAAwB+B,EAAK,KAAKT,GAAKA,EAAE,OAAS,IAAI,EAAG,QAAS,EACtE,MAAE,CACE,QAAQ,MAAM,4BAA4B,CAC9C,CACA,OAAOS,CACX,EAEa9B,GAAiB,SAAUgB,EAAce,EAAkBC,EAAqB,CACzF,GAAI,CAAChB,EAAI,iBACL,OAAOA,EAAI,QAAQe,EAAMC,CAAG,EAEhC,IAAMC,EAAeC,GAAa,CAE9B,IAAMC,EAAM,8CAA8CnB,EAAI,QACxDoB,EAASF,aAAe,MAAQA,EAAI,OAASA,EAAI,QAAU,OAAOA,CAAG,EAE3E,QAAQ,MAAMC,EAAKD,CAAG,EACtB3B,EAAeyB,EAAI,QAAQ,GAAI,CAC3B,QAAS,GAAGG;AAAA,EAASE,GAAcD,CAAM,IACzC,OAAQ,CACJ,SAAU,SACd,CACJ,CAAC,CACL,EAEA,GAAI,CACA,IAAME,EAAMtB,EAAI,QAAQe,EAAMC,CAAG,EACjC,OAAOM,aAAe,QAAUA,EAAI,MAAML,CAAW,EAAIK,CAC7D,OAASJ,EAAP,CACE,OAAOD,EAAYC,CAAG,CAC1B,CACJ,IC/EA,IAyBMK,GAECC,GA3BPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,KACAC,KACAC,IACAD,IACAE,IAEMT,GAAa,EAEZC,GAAQS,EAAa,CACxB,KAAM,cACN,YAAa,+DACb,QAAS,CAACC,EAAK,GAAG,EAClB,aAAc,CAAC,aAAa,EAC5B,SAAU,CAAC,CACP,KAAM,UACN,YAAa,gEACb,YACA,QAAS,CACL,CACI,KAAM,MACN,YAAa,uBACb,QACA,SAAU,EACd,EACA,CACI,KAAM,OACN,YAAa,yBACb,OACA,QAAS,CACL,CACI,KAAM,WACN,MAAO,WACP,MAAO,oBACX,EACA,CACI,KAAM,WACN,MAAO,WACP,MAAO,mBACX,CACJ,CACJ,CACJ,EACA,QAAS,MAAOC,EAAMC,IAAQ,CAI1B,IAAMC,EAHcC,GAAY,YAAY,EACjB,WAAWF,EAAI,QAAQ,GAAIb,EAAU,EAAE,IAE5C,MAAM,KAE5B,GAAIc,GAAO,OAAS,YAChB,OAAO,KAAKE,EAAeH,EAAI,QAAQ,GAAI,CACvC,QAAS,0BACb,CAAC,EAEL,IAAMI,EAAaC,GAAmBN,EAAM,OAAQ,UAAU,EAExDO,EAAM,IAAI,WAAW,MAAML,EAAM,YAAY,CAAC,EAChDM,EAAQ,GAGZ,QAASC,EAAI,EAAGA,EAAIF,EAAI,OAAQE,IAC5B,GAAIF,EAAIE,KAAO,KAAQF,EAAIE,EAAI,KAAO,KAAQF,EAAIE,EAAI,KAAO,KAAQF,EAAIE,EAAI,KAAO,IAAM,CACtF,IAAIC,EAAQD,EAAI,GAChBF,EAAIG,KAAW,EACfH,EAAIG,KAAW,EACfH,EAAIG,KAAWL,IAAe,WAAa,IAAO,IAClDE,EAAIG,KAAW,IACfH,EAAIG,KAAW,IACfH,EAAIG,KAAWL,IAAe,WAAa,IAAO,IAClDG,EAAQ,GACR,KACJ,CAGJ,GAAI,CAACA,EACD,OAAO,KAAKJ,EAAeH,EAAI,QAAQ,GAAI,CACvC,QAAS,+CACb,CAAC,EAGL,IAAMU,EAAUT,EAAM,KAAK,QAAQ,UAAW,cAAc,EACtDU,EAAiBC,GAAW,yBAAyB,EACrDC,EAAO,IAAI,KAAK,CAACP,CAAG,EAAGI,EAAS,CAAE,KAAM,WAAY,CAAC,EAC3D,aAAa,IAAMC,EAAe,CAACE,CAAI,EAAGb,EAAI,QAASb,EAAU,CAAC,CACtE,CACJ,CAAC,CACL,CAAC,ICxGD,IAuBO2B,GAvBPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,KACAC,IACAD,IAEOL,GAAQO,EAAa,CACxB,KAAM,kBACN,YAAa,0CACb,QAAS,CAACC,EAAK,MAAM,EACrB,aAAc,CAAC,aAAa,EAC5B,SAAU,CACN,CACI,KAAM,QACN,YAAa,yDACb,YACA,QAAS,CACL,CACI,OACA,KAAM,OACN,YAAa,6CACb,SAAU,EACd,CACJ,EACA,QAAS,MAAOC,EAAMC,IAAQ,CAC1B,GAAI,CACA,GAAM,CAAE,KAAM,CAACC,CAAU,CAAE,EAAI,MAAO,MAAM,MAAM,kDAAkDF,EAAK,GAAG,OAAO,GAAG,KAAK,EAE3H,GAAI,CAACE,EACD,OAAO,KAAKC,EAAeF,EAAI,QAAQ,GAAI,CAAE,QAAS,mBAAoB,CAAC,EAE/E,IAAMG,EAAUC,GAAQA,EAAK,QAAQ,aAAc,CAACC,EAAGC,IAAS,IAAIA,sDAAyD,mBAAmBA,CAAI,IAAI,EAExJ,OAAO,KAAKJ,EAAeF,EAAI,QAAQ,GAAI,CACvC,OAAQ,CACJ,CACI,KAAM,OACN,OAAQ,CACJ,KAAM,iBAAiBC,EAAW,OAClC,IAAKA,EAAW,SACpB,EACA,YAAaE,EAAQF,EAAW,UAAU,EAC1C,OAAQ,CACJ,CACI,KAAM,UACN,MAAOE,EAAQF,EAAW,OAAO,CACrC,CACJ,EACA,MAAO,SACP,OAAQ,CAAE,KAAM,aAAMA,EAAW,UAAU,SAAS,iBAAUA,EAAW,YAAY,SAAS,mBAAmBA,EAAW,SAAU,SAAU,6CAA8C,EAC9L,UAAW,IAAI,KAAKA,EAAW,UAAU,EAAE,YAAY,CAC3D,CACJ,CACJ,CAAC,CACL,OAASM,EAAP,CACE,OAAO,KAAKL,EAAeF,EAAI,QAAQ,GAAI,CACvC,QAAS,2BAA2BO,KACxC,CAAC,CACL,CACJ,CACJ,CACJ,CACJ,CAAC,ICrCM,SAASC,GAAiB,CAAE,MAAOC,EAAc,SAAAC,EAAU,SAAAC,CAAS,EAAmB,CAC1F,GAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAM,SAASL,CAAY,EAC/C,CAACM,EAAOC,CAAQ,EAAIF,EAAM,SAAiB,EAEjD,SAASG,EAAaC,EAAW,CAC7BL,EAASK,CAAC,EACV,IAAMC,EAAMR,EAASO,CAAC,EAClBC,IAAQ,IACRH,EAAS,MAAM,EACfN,EAASQ,CAAC,GAEVF,EAASG,CAAG,CAEpB,CAEA,OACIC,EAAAC,EAAA,KACID,EAACE,GAAA,CACG,KAAK,OACL,MAAOV,EACP,SAAUK,EACV,MAAOF,EACX,CACJ,CAER,CAnEA,IAAAQ,GAAAC,EAAA,kBAAAC,IAkBAC,MCeA,SAASC,GAAmBC,EAAqB,CAC7C,IAAMC,EAAOC,EAAU,eAAe,EAAE,GAExC,OAAO,OAAO,OAAOC,GAAW,UAAU,CAAC,EAAE,OAAOC,GAAK,CAGrD,GAAI,EAFcA,EAAE,UAAYH,GAC5B,OAAOI,GAAgB,oBAAoB,CAAE,GAAID,EAAE,EAAG,CAAC,EAAIE,EAA0B,IAAMA,IAC/E,MAAO,GAEvB,IAAMC,EAAaH,EAAE,iBAAiB,EAChC,CAAE,OAAAI,CAAO,EAAIC,GAAgB,UAAU,EAAEL,EAAE,IAE7CM,EAAQ,EACZ,QAAWC,KAASH,EACZG,EAAM,WAAaX,GAAYU,IACvC,OAAOA,EAAQH,CACnB,CAAC,EAAE,KAAK,CAACK,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,CAClD,CAEA,eAAeC,GAAQC,EAAiBC,EAAYC,EAAcjB,EAAqB,CACnF,IAAMkB,EAAO,MAAM,MAAM,qCAAqCF,KAAMhB,EAAa,MAAQ,OAAO,EAC3F,KAAKmB,GAAKA,EAAE,KAAK,CAAC,EACjBC,EAAS,IAAI,WAEnBA,EAAO,OAAS,IAAM,CAClBC,GAAY,CACR,QAAAN,EACA,KAAAE,EACA,MAAOG,EAAO,MAClB,CAAC,EAAE,KAAK,IAAM,CACVE,EAAO,KAAK,CACR,QAAS,uBAAuBL,KAChC,KAAMK,EAAO,KAAK,QAClB,GAAIA,EAAO,MAAM,CACrB,CAAC,CACL,CAAC,EAAE,MAAOC,GAAW,CACjB,IAAIC,EAAO,aAAa,EAAE,MAAM,yBAA0BD,CAAC,EAC3DD,EAAO,KAAK,CACR,QAAS,kDACT,KAAMA,EAAO,KAAK,QAClB,GAAIA,EAAO,MAAM,CACrB,CAAC,CACL,CAAC,CACL,EAEAF,EAAO,cAAcF,CAAI,CAC7B,CAUA,SAASO,GAAW,CAAE,GAAAT,EAAI,KAAMU,EAAW,WAAA1B,CAAW,EAAuD,CACzG,GAAM,CAAC2B,EAAWC,CAAY,EAAIC,EAAM,SAAS,EAAK,EAChD,CAACZ,EAAMa,CAAO,EAAID,EAAM,SAASH,CAAS,EAE1C,CAACK,EAAGC,CAAc,EAAIH,EAAM,WAAWE,GAAKA,EAAI,EAAG,CAAC,EAEpDE,EAASJ,EAAM,QAAQ,IAAM9B,GAAmBC,CAAU,EAAG,CAACA,EAAY+B,CAAC,CAAC,EAElF,OACIG,EAAAC,EAAA,KACID,EAACE,EAAM,UAAN,CAAgB,UAAWC,EAAQ,aAAa,aAAW,EAC5DH,EAACI,GAAA,CACG,MAAOrB,EACP,SAAUa,EACV,SAAUS,GACLA,EAAE,OAAS,GAAKA,EAAE,OAAS,IAAMC,GAAc,KAAKD,CAAC,GACnD,oFAEX,EACAL,EAAC,OAAI,MAAO,CACR,QAAS,OACT,SAAU,OACV,IAAK,MACL,QAAS,YACT,eAAgB,SAChB,WAAY,QAChB,GACKD,EAAO,IAAI,GACRC,EAACO,GAAA,CAAQ,KAAM,EAAE,MACZ,CAAC,CAAE,aAAAC,EAAc,aAAAC,CAAa,IAC3BT,EAAC,OACG,aAAcQ,EACd,aAAcC,EACd,KAAK,SACL,aAAY,YAAc,EAAE,KAC5B,gBAAehB,EACf,MAAO,CACH,aAAc,MACd,gBAAiB,8BACjB,QAAS,cACT,eAAgB,SAChB,WAAY,SACZ,MAAO,MACP,OAAQ,MACR,OAAQA,EAAY,cAAgB,UACpC,OAAQA,EAAY,kBAAoB,MAC5C,EACA,QAASA,EAAY,OAAS,SAAY,CACtCC,EAAa,EAAI,EACjBd,GAAQ,EAAE,GAAIE,EAAIC,EAAMjB,CAAU,EAAE,QAAQ,IAAM,CAC9CgC,EAAe,EACfJ,EAAa,EAAK,CACtB,CAAC,CACL,GAEC,EAAE,KACCM,EAAC,OACG,cAAW,GACX,MAAO,CACH,aAAc,MACd,MAAO,OACP,OAAQ,MACZ,EACA,IAAK,EAAE,WAAW,IAAK,EAAI,EAC3B,IAAK,EAAE,KACX,EAEAA,EAACE,EAAM,SAAN,CACG,MAAO,CACH,SAAUQ,GAAY,EAAE,OAAO,EAC/B,MAAO,OACP,SAAU,SACV,WAAY,SACZ,UAAW,SACX,OAAQjB,EAAY,cAAgB,SACxC,GAEC,EAAE,OACP,CAER,CAER,CACH,CACL,CACJ,CAER,CA/KA,IA4BMrB,GAEAG,GACAY,GAiDAuB,GAMAJ,GA4FCK,GAlLPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,KACAC,IACAC,KACAC,IACAC,KACAC,IACAC,IACAC,IAEMnD,GAA6B,IAAM,IAEnCG,GAAkBiD,EAAYC,EAAQ,QAAQ,YAAa,eAAe,CAAC,EAC3EtC,GAAcqC,EAAYC,EAAQ,OAAO,uBAAwB,eAAe,CAAC,EAiDjFf,GAAegB,GAEH,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,EAC5BA,EAAE,SAAW,EAGxBpB,GAAgB,SA2FtBqB,EAAsB,cAAe,YAAY,EAC1ChB,GAAQiB,EAAa,CACxB,KAAM,cACN,YAAa,yEACb,QAAS,CAACC,EAAK,GAAG,EAClB,aAAc,CAAC,yBAAyB,EAExC,QAAS,CAAC,CAEN,KAAM,mBACN,YAAa,CACT,MAAO,iFACP,QAAS,+DACb,CAEJ,EAEA,CAEI,KAAM,qCACN,UAAWC,GAAS,IAAM,CAACC,EAAS,QAAQ,mBAAmB,OAAO,EACtE,OAAQ,GACR,YAAa,CACT,MAAO,6EACP,QAAS,oBACb,CACJ,CAAC,EAED,SAASC,EAA+B,CACpC,GAAIA,GAAa,QAAQ,OAAS,QAC9B,OAAO,KAEX,GAAM,CAAE,GAAAlD,CAAG,EAAIkD,EAAY,QACrBjD,EAAOiD,EAAY,IAAI,MAAM,iBAAiB,IAAI,GAExD,GAAI,CAACjD,GAAQ,CAACD,EACV,OAAO,KAEX,IAAMhB,EAAa,IAAI,IAAIkE,EAAY,GAAG,EAAE,SAAS,SAAS,MAAM,EAEpE,OAAOhC,EAACiC,GAAK,SAAL,CACJ,GAAG,eACH,IAAI,eACJ,MAAM,QACN,OAAQ,IACJC,GAAUC,GACNnC,EAACoC,GAAA,CAAW,GAAGD,GACXnC,EAACqC,GAAA,KACGrC,EAAC,OACG,KAAK,eACL,cAAW,GACX,IAAK,qCAAqClB,KAAMhB,EAAa,MAAQ,QACrE,IAAI,GACJ,OAAQ,GACR,MAAO,GACP,MAAO,CAAE,YAAa,OAAQ,EAClC,EACAkC,EAACE,EAAM,SAAN,KAAe,SAAOnB,CAAK,CAChC,EACAiB,EAACsC,GAAA,KACGtC,EAACT,GAAA,CAAW,GAAIT,EAAI,KAAMC,EAAM,WAAYjB,EAAY,CAC5D,CACJ,CACH,EAGT,CACJ,CACJ,CAAC,ICrPD,IAyBMyE,GAECC,GA3BPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,IACAC,KACAC,IACAC,IAEMV,GAAYW,EAAYC,EAAQ,QAAQ,MAAO,qBAAqB,CAAC,EAEpEX,GAAQY,EAAa,CACxB,KAAM,cACN,QAAS,CACLC,EAAK,KACLA,EAAK,IACLA,EAAK,QACLA,EAAK,UACT,EACA,YAAa,2CACb,QAAS,CAAC,CACN,KAAM,4CACN,YAAa,CACT,MAAO,wDACP,QAAS,MACb,CACJ,EAAG,CACC,KAAM,uBACN,YAAa,CACT,MAAO,iCACP,QAAS,QACb,CACJ,EAAG,CACC,KAAM,uBACN,UAAW,IAAMC,EAAS,QAAQ,YAAY,gBAAkB,GAChE,YAAa,CACT,CACI,MAAO,2CACP,QAAS,4FACb,EACA,CACI,MAAO,6DACP,QAAS,mCACb,CACJ,CACJ,CAAC,EACD,QAAS,CACL,cAAe,CACX,YAAa,oCACb,OACA,QAAS,GACT,cAAe,EACnB,CACJ,EAEA,uBAAwB,IAAM,CAC1B,IAAMC,EAAU,UAAU,SAAS,SAAS,KAAK,EAC3CC,EAASD,EAAU,MAAQ,OAC3BE,EAASF,EAAU,MAAQ,MACjC,OACIG,EAACC,EAAM,SAAN,KACGD,EAACE,EAAM,UAAN,CAAgB,IAAI,MAAK,kBAAgB,EAC1CF,EAACE,EAAM,SAAN,CAAe,QAAQ,kBAAiB,iCACN,IAC/BF,EAAC,OAAI,UAAWnB,GAAU,KAAMiB,CAAO,EAAM,KAAG,IAChDE,EAAC,OAAI,UAAWnB,GAAU,KAAMkB,CAAO,EAAM,KAAG,IAChDC,EAAC,OAAI,UAAWnB,GAAU,KAAK,GAAC,EAAO,IAAI,kBAC5BmB,EAAC,YAAK,SAAO,EAAO,QACvC,EACAA,EAACE,EAAM,SAAN,KAAe,qBACMF,EAAC,YAAK,iBAAe,EAAO,WAAQA,EAAC,YAAK,mBAAiB,EAAO,mBACxF,CACJ,CAER,CACJ,CAAC,IC3FD,IA2BaG,GAGAC,GA9BbC,GAAAC,EAAA,kBAAAC,IAkBAC,IASaL,GAAgBM,GAAS,IAAM,OAAO,oDAAoD,EAG1FL,GAAeK,GAAS,SAAY,CAC7C,IAAMC,EAAU,CAAC,EACXC,EAAW,IAAI,MAAM,OAAQ,CAAE,IAAK,CAACC,EAAGC,EAAGC,IAAMJ,EAAQG,GAAKC,CAAE,CAAC,EACvE,gBAAS,OAAQ,MAAM,MAAM,6EAA6E,EAAE,KAAKC,GAAKA,EAAE,KAAK,CAAC,CAAC,EAAEJ,CAAQ,EAElID,EAAQ,IACnB,CAAC,ICpCD,IA4BMM,GACAC,GA+BCC,GA5DPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IACAC,KACAC,IACAC,IACAC,KACAC,IACAC,IAEMd,GAAa,EACbC,GAAiBc,EAAYC,EAAQ,OAAO,yBAAyB,CAAC,EA6B5EC,EAAsB,YAAa,aAAa,EAEzCf,GAAQgB,EAAa,CACxB,KAAM,YACN,QAAS,CAACC,EAAK,MAAOA,EAAK,MAAOA,EAAK,IAAKA,EAAK,SAAS,EAC1D,YAAa,uEACb,aAAc,CAAC,kBAAkB,EAEjC,QAAS,CACL,CACI,KAAM,gCACN,UAAW,IAAMC,EAAS,QAAQ,UAAU,oBAAsB,GAClE,YAAa,CACT,uBACA,wBACJ,EAAE,IAAIC,IACK,CACH,MAAO,IAAI,OAAO,GAAGA,mBAAsB,EAC3C,QAAS,GAAGA,6BAChB,EACH,CACL,EACA,CACI,KAAM,gCACN,UAAW,IAAMD,EAAS,QAAQ,UAAU,sBAAwB,GACpE,YAAa,CACT,MAAO,0CACP,QAAS,oDACb,CACJ,EACA,CACI,KAAM,aACN,UAAW,IAAMA,EAAS,QAAQ,UAAU,sBAAwB,GACpE,YAAa,CACT,MAAO,qBACP,QAAS,OACb,CACJ,EACA,CACI,KAAM,gCACN,UAAW,IAAMA,EAAS,QAAQ,UAAU,4BAA8B,GAC1E,YAAa,CACT,+BACA,uBACA,qBACJ,EAAE,IAAIC,IACK,CACH,MAAO,IAAI,OAAO,GAAGA,mBAAsB,EAC3C,QAAS,GAAGA,6BAChB,EACH,CACL,EACA,CACI,KAAM,2BACN,UAAW,IAAMD,EAAS,QAAQ,UAAU,4BAA8B,GAC1E,YAAa,CACT,MAAO,uDACP,QAAS,EACb,CACJ,CACJ,EAEA,QAAS,CACL,kBAAmB,CACf,YAAa,4BACb,OACA,QAAS,GACT,cAAe,EACnB,EACA,UAAW,CACP,YAAa,kCACb,OACA,QAAS,GACT,QAAS,CAAC,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAG,CAC5C,EACA,oBAAqB,CACjB,YAAa,8BACb,OACA,QAAS,GACT,cAAe,EACnB,EACA,YAAa,CACT,YAAa,oCACb,OACA,QAAS,IACT,QAAS,CAAC,GAAI,GAAI,IAAK,IAAK,IAAK,GAAG,CACxC,EACA,0BAA2B,CACvB,YAAa,mCACb,OACA,QAAS,GACT,cAAe,EACnB,CACJ,EAEA,IAAI,SAAU,CACV,OAAO,OAAO,SAAS,KAAK,MAAM,WAAW,EAAE,GAAG,MAAM,GAAG,EAAE,EACjE,EAEA,IAAI,cAAe,CACf,OAAQE,EAAU,eAAe,EAAE,aAAe,GAAK,CAC3D,EAEA,IAAI,gBAAiB,CACjB,OAAQA,EAAU,eAAe,EAAE,aAAe,GAAK,CAC3D,EAEA,eAAeC,EAAmB,CAC9B,MAAO,yCAAyCA,cAAsBH,EAAS,QAAQ,UAAU,aACrG,EAEA,MAAM,oBAAoBI,EAAqBD,EAAmBE,EAAmB,CACjF,GAAM,CAAC,CAAE,SAAAC,CAAS,EAAG,CACjB,WAAAC,EACA,SAAAC,EACA,aAAAC,CACJ,CAAC,EAAI,MAAM,QAAQ,IAAI,CAACC,GAAa,EAAGC,GAAc,CAAC,CAAC,EAElD,CAAE,OAAAC,EAAQ,MAAAC,EAAO,OAAAC,CAAO,EAAI,MAAMR,EAASF,CAAW,EAEtDW,EAAM,IAAIR,EACVS,EAAahB,EAAS,QAAQ,UAAU,YAExCiB,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQD,EACfC,EAAO,OAASD,EAEhB,IAAME,EAAMD,EAAO,WAAW,KAAM,CAChC,mBAAoB,EACxB,CAAC,EAEKE,EAAQH,EAAa,KAAK,IAAIH,EAAOC,CAAM,EACjDI,EAAI,MAAMC,EAAOA,CAAK,EAEtB,IAAIC,EAAmC,KACvC,OAAW,CAAE,KAAAC,EAAM,IAAAC,EAAK,MAAAT,GAAO,OAAAC,GAAQ,UAAAS,GAAW,IAAAC,GAAK,MAAAC,EAAM,IAAKb,EAAQ,CACtEM,EAAI,UAAUM,GAAKH,EAAMC,EAAKT,GAAOC,EAAM,EAE3C,GAAM,CAAE,KAAAY,EAAK,EAAIR,EAAI,aAAa,EAAG,EAAGF,EAAYA,CAAU,EAExDW,GAAUnB,EAASkB,GAAM,GAAG,EAC5BE,GAAQnB,EAAaiB,GAAMC,EAAO,EAExCZ,EAAI,WAAWa,GAAOZ,EAAYA,EAAY,CAC1C,YAAa,GACb,QAAAW,GACA,MAAAF,EACJ,CAAC,EAEGF,KAAc,EACdL,EAAI,UAAUG,EAAMC,EAAKT,GAAOC,EAAM,EAC/BS,KAAc,GAA0BH,GAC/CF,EAAI,UAAUE,EAASC,EAAMC,EAAKT,GAAOC,EAAM,EAGnDM,EAAUI,EACd,CAEAT,EAAI,OAAO,EACX,IAAMc,GAAO,IAAI,KAAK,CAACd,EAAI,UAAU,CAAC,EAAG,GAAGZ,QAAiB,CAAE,KAAM,WAAY,CAAC,EAClFtB,GAAe,CAACgD,EAAI,EAAGC,GAAa,WAAWzB,CAAS,EAAGzB,EAAU,CACzE,EAEA,OAAQ,CACJ,IAAMmD,EAAW/B,EAAS,QAAQ,UAClC,GAAI,CAAC+B,EAAS,mBAAqB,CAACA,EAAS,oBACzC,OAGJ,IAAMC,EAAarC,EAAYC,EAAQ,QAAQ,oBAAoB,CAAC,EAC9DqC,EAAetC,EAAYC,EAAQ,QAAQ,qBAAqB,CAAC,EAMvE,SAASsC,EAAgBC,EAAiBC,EAAgB,CACtD,MAAQ,CAACD,EAAQC,IAAW,KAAK,KAAKD,EAAQC,EAAO,EAAK,GAAK,GACnE,CAEA,KAAK,QAAUC,GAAmB,CAAChC,EAAWiC,EAAYC,IAAU,CAChE,GAAM,CAAE,QAAAC,CAAQ,EAAI,KAEpBC,EAAe,CACX,GAAI,CAACV,EAAS,oBACV,MAAMU,EAEV,IAAMC,EAAUT,EAAa,eAAeM,GAAO,aAAa,EAAG,EAInE,GAHI,CAACG,GAGDA,EAAQ,YAAc,KAAU,KAAK,gBAAmBA,GAA0B,WAAaF,GAC/F,MAAMC,EAEV,IAAIE,EAAO,KAAK,eAAeD,EAAQ,EAAE,EACzC,GAAIA,EAAQ,cAAgB,EACxB,YAAK,oBAAoB,KAAK,eAAeA,EAAQ,EAAE,EAAGA,EAAQ,GAAIrC,CAAS,EACxE,CAAE,OAAQ,EAAK,EAElB,YAAaqC,IAObC,EAAO,+BANQD,EAAQ,UAAY,qBAG7B,qBACAA,EAAQ,WAEkCA,EAAQ,UAG5D,OAAOH,EAAM,WACbD,EAAW,SAAW,IAAMK,CAEpC,CAEA,GAAI,CAAC,KAAK,cAAgBZ,EAAS,kBAC/B,QAAWa,KAASN,EAAW,uBAAwB,CAEnD,GADI,CAACM,EAAM,gBACPA,EAAM,UAAYJ,GAAW,CAACI,EAAM,SAAU,SAElD,IAAMC,EAAc,IAAID,EAAM,SAAW,IAAM,MAAMA,EAAM,cAAgBA,EAAM,QAAQA,EAAM,MACzFE,EAAMF,EAAM,IAAI,QAAQ,aAAc,SAAS5C,EAAS,QAAQ,UAAU,WAAW,EAC3FsC,EAAW,QAAUA,EAAW,QAAQ,QAAQO,EAAa,CAACE,EAAOX,EAAQD,IAClE,GAAGD,EAAgBC,EAASC,EAAS,CAAC,IAAIU,IAAMZ,EAAgBC,EAASC,EAASW,EAAM,MAAM,GACxG,CACL,CAGJ,MAAO,CAAE,OAAQ,EAAM,CAC3B,CAAC,EAEG,CAAC,KAAK,cAAgBhB,EAAS,oBAC/B,KAAK,QAAUiB,GAAmB,CAACC,EAAGC,EAAIZ,IAAe,CACrD,GAAM,CAAE,QAAAE,CAAQ,EAAI,KAEpB,OAAW,CAACW,EAAUF,EAAGG,CAAO,IAAKd,EAAW,QAAQ,SAAS,2BAA2B,EAAG,CAC3F,IAAMM,EAAQZ,EAAW,mBAAmBoB,CAAO,EAEnD,GADIR,GAAS,MAASA,EAAM,UAAYJ,GAAW,CAACI,EAAM,UACtD,CAACA,EAAM,eAAgB,SAE3B,IAAME,EAAMF,EAAM,IAAI,QAAQ,aAAc,SAAS5C,EAAS,QAAQ,UAAU,WAAW,EAC3FsC,EAAW,QAAUA,EAAW,QAAQ,QAAQa,EAAU,CAACJ,EAAOX,EAAQD,IAC/D,GAAGD,EAAgBC,EAASC,EAAS,CAAC,IAAIU,IAAMZ,EAAgBC,EAASC,EAASW,EAAM,MAAM,GACxG,CACL,CACJ,CAAC,EAET,EAEA,MAAO,CACHM,GAAsB,KAAK,OAAO,EAClCC,GAAsB,KAAK,OAAO,CACtC,CACJ,CAAC,IChSM,SAASC,GAAwB,CAAE,OAAAC,EAAQ,eAAAC,EAAgB,GAAAC,EAAI,SAAAC,EAAU,QAAAC,CAAQ,EAA8C,CAClI,IAAMC,EAAMJ,EAAeC,IAAOF,EAAO,QAEnC,CAACM,EAAOC,CAAQ,EAAIC,EAAM,SAASH,GAAO,EAAK,EAC/C,CAACI,EAAOC,CAAQ,EAAIF,EAAM,SAAwB,IAAI,EAE5DA,EAAM,UAAU,IAAM,CAClBJ,EAAQK,IAAU,IAAI,CAC1B,EAAG,CAACA,CAAK,CAAC,EAEV,IAAME,EAAU,CACZ,CAAE,MAAO,UAAW,MAAO,GAAM,QAASN,IAAQ,EAAK,EACvD,CAAE,MAAO,WAAY,MAAO,GAAO,QAAS,OAAOA,EAAQ,KAAeA,IAAQ,EAAM,CAC5F,EAEA,SAASO,EAAaC,EAAyB,CAC3C,IAAMC,GAAWd,EAAO,SAAWA,EAAO,QAAQa,CAAQ,IAAM,GAC5D,OAAOC,GAAY,SAAUJ,EAASI,CAAO,EACvCA,GAENJ,EAAS,IAAI,EACbH,EAASM,CAAQ,EACjBV,EAASU,CAAQ,GAJFH,EAAS,yBAAyB,CAMzD,CAEA,OACIK,EAACC,EAAM,YAAN,KACGD,EAACC,EAAM,UAAN,KAAiBhB,EAAO,WAAY,EACrCe,EAACE,GAAA,CACG,WAAYjB,EAAO,WAAW,GAAK,GACnC,QAASW,EACT,YAAaX,EAAO,aAAe,mBACnC,gBAAiB,EACjB,cAAe,GACf,OAAQY,EACR,WAAYM,GAAKA,IAAMZ,EACvB,UAAWY,GAAK,OAAOA,CAAC,EACvB,GAAGlB,EAAO,eACf,EACCS,GAASM,EAACC,EAAM,SAAN,CAAe,MAAO,CAAE,MAAO,oBAAqB,GAAIP,CAAM,CAC7E,CAER,CAjEA,IAAAU,GAAAC,EAAA,kBAAAC,IAmBAC,MCEO,SAASC,GAAuB,CAAE,OAAAC,EAAQ,SAAAC,EAAU,QAAAC,CAAQ,EAAgD,CAC/G,OAAOF,EAAO,UAAU,CAAE,SAAUC,EAAU,SAAUC,EAAS,OAAAF,CAAO,CAAC,CAC7E,CAvBA,IAAAG,GAAAC,EAAA,kBAAAC,MCwBO,SAASC,GAAwB,CAAE,OAAAC,EAAQ,eAAAC,EAAgB,GAAAC,EAAI,SAAAC,EAAU,QAAAC,CAAQ,EAA6C,CACjI,SAASC,EAAUC,EAAY,CAC3B,OAAIN,EAAO,OAAS,EAA0B,OAAOM,CAAK,EACnD,OAAOA,CAAK,CACvB,CAEA,GAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAM,SAAc,GAAGR,EAAeC,IAAOF,EAAO,SAAW,GAAG,EACtF,CAACU,EAAOC,CAAQ,EAAIF,EAAM,SAAwB,IAAI,EAE5DA,EAAM,UAAU,IAAM,CAClBL,EAAQM,IAAU,IAAI,CAC1B,EAAG,CAACA,CAAK,CAAC,EAEV,SAASE,EAAaC,EAAU,CAC5B,IAAMC,GAAWd,EAAO,SAAWA,EAAO,QAAQa,CAAQ,IAAM,GAC5D,OAAOC,GAAY,SAAUH,EAASG,CAAO,EACvCA,EACDd,EAAO,OAAS,GAAqB,OAAOa,CAAQ,GAAKE,IAC9DP,EAAS,GAAG,OAAO,kBAAkB,EACrCL,EAASE,EAAUQ,CAAQ,CAAC,IAE5BL,EAASK,CAAQ,EACjBV,EAASE,EAAUQ,CAAQ,CAAC,GANbF,EAAS,yBAAyB,CAQzD,CAEA,OACIK,EAACC,EAAM,YAAN,KACGD,EAACC,EAAM,UAAN,KAAiBjB,EAAO,WAAY,EACrCgB,EAACE,GAAA,CACG,KAAK,SACL,QAAQ,WACR,MAAOX,EACP,SAAUK,EACV,YAAaZ,EAAO,aAAe,iBACnC,SAAUA,EAAO,WAAW,GAAK,GAChC,GAAGA,EAAO,eACf,EACCU,GAASM,EAACC,EAAM,SAAN,CAAe,MAAO,CAAE,MAAO,oBAAqB,GAAIP,CAAM,CAC7E,CAER,CAjEA,IAsBMK,GAtBNI,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAGMR,GAAkB,OAAO,OAAO,gBAAgB,ICA/C,SAASS,GAAuB,CAAE,OAAAC,EAAQ,eAAAC,EAAgB,SAAAC,EAAU,QAAAC,EAAS,GAAAC,CAAG,EAA6C,CAChI,IAAMC,EAAMJ,EAAeG,IAAOJ,EAAO,SAAS,KAAKM,GAAKA,EAAE,OAAO,GAAG,MAElE,CAACC,EAAOC,CAAQ,EAAIC,EAAM,SAAcJ,GAAO,IAAI,EACnD,CAACK,EAAOC,CAAQ,EAAIF,EAAM,SAAwB,IAAI,EAE5DA,EAAM,UAAU,IAAM,CAClBN,EAAQO,IAAU,IAAI,CAC1B,EAAG,CAACA,CAAK,CAAC,EAEV,SAASE,EAAaC,EAAU,CAC5B,IAAMC,GAAWd,EAAO,SAAWA,EAAO,QAAQa,CAAQ,IAAM,GAC5D,OAAOC,GAAY,SAAUH,EAASG,CAAO,EACvCA,GAENN,EAASK,CAAQ,EACjBX,EAASW,CAAQ,GAHFF,EAAS,yBAAyB,CAKzD,CAEA,OACII,EAACC,EAAM,YAAN,KACGD,EAACC,EAAM,UAAN,KAAiBhB,EAAO,WAAY,EACrCe,EAACE,GAAA,CACG,WAAYjB,EAAO,WAAW,GAAK,GACnC,QAASA,EAAO,QAChB,YAAaA,EAAO,aAAe,mBACnC,gBAAiB,EACjB,cAAe,GACf,OAAQY,EACR,WAAYM,GAAKA,IAAMX,EACvB,UAAWW,GAAK,OAAOA,CAAC,EACvB,GAAGlB,EAAO,eACf,EACCU,GAASK,EAACC,EAAM,SAAN,CAAe,MAAO,CAAE,MAAO,oBAAqB,GAAIN,CAAM,CAC7E,CAER,CA3DA,IAAAS,GAAAC,EAAA,kBAAAC,IAmBAC,MCGO,SAASC,GAAUC,EAAeC,EAAaC,EAAO,EAAG,CAC5D,IAAMC,EAAmB,CAAC,EAC1B,QAASC,EAAQJ,EAAOI,GAASH,EAAKG,GAASF,EAC3CC,EAAO,KAAK,KAAK,MAAMC,EAAQ,GAAG,EAAI,GAAG,EAE7C,OAAOD,CACX,CAEO,SAASE,GAAuB,CAAE,OAAAC,EAAQ,eAAAC,EAAgB,GAAAC,EAAI,SAAAC,EAAU,QAAAC,CAAQ,EAA6C,CAChI,IAAMC,EAAMJ,EAAeC,IAAOF,EAAO,QAEnC,CAACM,EAAOC,CAAQ,EAAIC,EAAM,SAAwB,IAAI,EAE5DA,EAAM,UAAU,IAAM,CAClBJ,EAAQE,IAAU,IAAI,CAC1B,EAAG,CAACA,CAAK,CAAC,EAEV,SAASG,EAAaC,EAAwB,CAC1C,IAAMC,GAAWX,EAAO,SAAWA,EAAO,QAAQU,CAAQ,IAAM,GAC5D,OAAOC,GAAY,SAAUJ,EAASI,CAAO,EACvCA,GAENJ,EAAS,IAAI,EACbJ,EAASO,CAAQ,GAHFH,EAAS,yBAAyB,CAKzD,CAEA,OACIK,EAACC,EAAM,YAAN,KACGD,EAACC,EAAM,UAAN,KAAiBb,EAAO,WAAY,EACrCY,EAACE,GAAA,CACG,SAAUd,EAAO,WAAW,GAAK,GACjC,QAASA,EAAO,QAChB,SAAUA,EAAO,QAAQ,GACzB,SAAUA,EAAO,QAAQA,EAAO,QAAQ,OAAS,GACjD,aAAcK,EACd,cAAeI,EACf,cAAgBM,GAAc,OAAOA,EAAE,QAAQ,CAAC,CAAC,EACjD,eAAgBf,EAAO,gBAAkB,GACxC,GAAGA,EAAO,eACf,CACJ,CAER,CAjEA,IAAAgB,GAAAC,EAAA,kBAAAC,IAmBAC,MCGO,SAASC,GAAqB,CAAE,OAAAC,EAAQ,eAAAC,EAAgB,GAAAC,EAAI,SAAAC,EAAU,QAAAC,CAAQ,EAA6C,CAC9H,GAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAM,SAASN,EAAeC,IAAOF,EAAO,SAAW,IAAI,EAC/E,CAACQ,EAAOC,CAAQ,EAAIF,EAAM,SAAwB,IAAI,EAE5DA,EAAM,UAAU,IAAM,CAClBH,EAAQI,IAAU,IAAI,CAC1B,EAAG,CAACA,CAAK,CAAC,EAEV,SAASE,EAAaC,EAAU,CAC5B,IAAMC,GAAWZ,EAAO,SAAWA,EAAO,QAAQW,CAAQ,IAAM,GAC5D,OAAOC,GAAY,SAAUH,EAASG,CAAO,EACvCA,GAENN,EAASK,CAAQ,EACjBR,EAASQ,CAAQ,GAHFF,EAAS,yBAAyB,CAKzD,CAEA,OACII,EAACC,EAAM,YAAN,KACGD,EAACC,EAAM,UAAN,KAAiBd,EAAO,WAAY,EACrCa,EAACE,GAAA,CACG,KAAK,OACL,MAAOV,EACP,SAAUK,EACV,YAAaV,EAAO,aAAe,gBACnC,SAAUA,EAAO,WAAW,GAAK,GAChC,GAAGA,EAAO,eACf,EACCQ,GAASK,EAACC,EAAM,SAAN,CAAe,MAAO,CAAE,MAAO,oBAAqB,GAAIN,CAAM,CAC7E,CAER,CAtDA,IAAAQ,GAAAC,EAAA,kBAAAC,IAmBAC,MCnBA,IAAAC,GAAAC,EAAA,kBAAAC,IA+BAC,KACAC,KACAC,KACAC,KACAC,KACAC,OCpCA,IAwBOC,GAxBPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,KACAC,IACAC,IACAC,KAEOR,GAAQS,EAAa,CACxB,KAAM,QACN,QAAS,CAACC,EAAK,MAAM,EACrB,YAAa,+GACb,aAAc,CAAC,aAAa,EAC5B,SAAU,CAAC,CACP,KAAM,OACN,YAAa,kHACb,QAAS,CACL,CACI,OACA,KAAM,OACN,YAAa,sEACb,SAAU,EACd,CACJ,EAEA,QAAQC,EAAM,CACV,IAAMC,EAAO,IAAI,MAAM,2EAA2E,EAClG,OAAAA,EAAK,OAASC,EAAS,QAAQ,MAAM,OACrCD,EAAK,KAAK,EAEH,CACH,QAAUD,EAAK,GAAM,KAAKA,EAAK,GAAG,cAAgB,MACtD,CACJ,CACJ,CAAC,EACD,QAAS,CACL,OAAQ,CACJ,YAAa,uCACb,OACA,QAASG,GAAU,EAAG,EAAG,EAAG,EAC5B,QAAS,GACT,eAAgB,EACpB,CACJ,CACJ,CAAC,IC5DD,IAsBIC,GAGGC,GAzBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,IAGAC,EAAQ,CAAC,UAAU,EAAGC,GAAKT,GAAaS,CAAC,EAElCR,GAAQS,EAAa,CACxB,KAAM,kBACN,YAAa,uEACb,QAAS,CAACC,EAAK,MAAOA,EAAK,OAAO,EAClC,QAAS,CACL,CAEI,KAAM,gBACN,YAAa,CACT,MAAO,iCACP,QAAS,yGACb,CACJ,CACJ,EACA,aAAaC,EAAO,CAEhB,GAAIA,GAAO,SAAS,OAAS,EACzB,MAAO,GAIX,IAAMC,EAAUD,GAAO,SAAWA,GAAO,SAAS,SAC5CE,EAASF,GAAO,MAAM,GAE5B,GAAIC,GAAWC,EAAQ,CACnB,IAAMC,EAAQf,GAAW,SAASa,CAAO,EACzC,GAAIE,EACA,OAAOA,EAAM,UAAYD,EAE7B,QAAQ,MAAM,wCAAyC,CAAE,QAAAD,EAAS,MAAAE,EAAO,MAAAH,CAAM,CAAC,CACpF,MACI,QAAQ,MAAM,yCAA0C,CAAE,QAAAC,EAAS,OAAAC,EAAQ,MAAAF,CAAM,CAAC,EAEtF,MAAO,EACX,CACJ,CAAC,IC5DD,IAuBOI,GAvBPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IACAC,IAEOP,GAAQQ,EAAa,CACxB,KAAM,gBACN,YAAa,2CACb,QAAS,CAACC,EAAK,GAAG,EAClB,aAAc,CAAC,aAAa,EAC5B,SAAU,CACN,CACI,KAAM,uBACN,YAAa,kCACb,YACA,QAAS,MAAOC,EAAGC,IAAQ,CAEvB,IAAMC,EAAe,MADCC,GAAY,oBAAoB,EACb,mBAAmB,EAE5D,OAAO,KAAKC,EAAeH,EAAI,QAAQ,GAAI,CACvC,QAAS;AAAA,qCACQC,EAAa;AAAA,sCACZ,IAAI,KAAKA,EAAa,UAAU,EAAE,QAAQ,EAAI;AAAA,sCAC9CA,EAAa;AAAA,sBAC7B,KAAK,EAAE,QAAQ,OAAQ,GAAG,CAChC,CAAC,CACL,CACJ,EACA,CACI,KAAM,sBACN,YAAa,+CACb,YACA,QAAS,MAAOF,EAAGC,IAAQ,CAGvB,IAAMI,GADU,MADMF,GAAY,oBAAoB,EAClB,oBAAoB,GACvB,IAAIG,GACjC,eAAeA,EAAE;AAAA,kCACH,IAAI,KAAKA,EAAE,UAAU,EAAE,QAAQ,EAAI;AAAA,oCACjCA,EAAE,QAAQA,EAAE,aAAa,KAAK,EAAE,QAAQ,OAAQ,GAAG,CACvE,EAEA,OAAO,KAAKF,EAAeH,EAAI,QAAQ,GAAI,CACvC,QAASI,EAAiB,KAAK;AAAA;AAAA,CAAM,GAAK,oCAC9C,CAAC,CACL,CACJ,EACA,CACI,KAAM,wBACN,YAAa,6CACb,YACA,QAAS,MAAOL,EAAGC,KACf,MAAME,GAAY,oBAAoB,EAAE,oBAAoB,EAErD,KAAKC,EAAeH,EAAI,QAAQ,GAAI,CACvC,QAAS,qCACb,CAAC,EAET,CACJ,CACJ,CAAC,IC7ED,IAsBMM,GAECC,GAxBPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IAEMP,GAAK,+CAEJC,GAAQO,EAAa,CACxB,KAAM,YACN,YAAa,wDACb,QAAS,CAACC,EAAK,IAAI,EACnB,aAAc,CAAC,kBAAkB,EAEjC,UAAUC,EAAoB,CAC1BA,EAAI,QAAUA,EAAI,QAAQ,QAAQV,GAAI,uBAAuB,CACjE,EAEA,OAAQ,CACJ,KAAK,QAAUW,GAAmB,CAACC,EAAGF,IAAQ,KAAK,UAAUA,CAAG,CAAC,CACrE,EAEA,MAAO,CACHG,GAAsB,KAAK,OAAO,CACtC,CACJ,CAAC,ICzCD,IAqBOC,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,YACN,YAAa,8CACb,QAAS,CAACC,EAAK,OAAQA,EAAK,MAAM,EAClC,QAAS,CACL,CACI,KAAM,cACN,YAAa,CACT,MAAO,gCACP,QAAS,mCACb,CACJ,CACJ,CACJ,CAAC,IClCD,IA8BMC,GAEFC,GAEGC,GAlCPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IACAC,IACAC,IAQMV,GAAyBW,EAAYC,EAAQ,QAAQ,gCAAgC,CAAC,EAExFX,GAAmC,CAAC,EAEjCC,GAAQW,EAAa,CACxB,KAAM,mBACN,QAAS,CAACC,EAAK,MAAM,EACrB,YAAa,iJACb,QAAS,CAAC,CACN,KAAM,sCACN,YAAa,CAAC,CACV,MAAO,gDACP,QAAS,CAACC,EAAGC,IAAQ,CAEjB,IAAMC,EAAgC,CAElC,CAAE,MAAO,8BAA+B,QAAS,EAAG,EACpD,CAAE,MAAO,iGAAkG,QAAS,EAAG,EAEvH,CAAE,MAAO,8DAA+D,QAAS,EAAG,EACpF,CAAE,MAAO,yEAA0E,QAAS,EAAG,EAE/F,CAAE,MAAO,sBAAuB,QAAS,8BAA+B,EAExE,CAAE,MAAO,iDAAkD,QAAS,2HAA4H,EAEhM,CAAE,MAAO,yBAA0B,QAAS,iGAAkG,EAE9I,CAAE,MAAO,+DAAgE,QAAS,kCAAmC,EAErH,CAAE,MAAO,mEAAoE,QAAS,mCAAoC,EAE1H,CAAE,MAAO,wDAAyD,QAAS,wBAAyB,EAEpG,CAAE,MAAO,gEAAiE,QAAS,gCAAiC,CACxH,EACK,OAAO,CAACC,EAAS,CAAE,MAAAC,EAAO,QAAAC,CAAQ,IAAMF,EAAQ,QAAQC,EAAOC,CAAO,EAAGJ,CAAG,EAGjF,MAAO,IAAIA,IAAMC,GAErB,CACJ,EAAG,CAEC,MAAO,+DACP,QAAS,wCACb,CAAC,CACL,EAAG,CAEC,KAAM,kCACN,YAAa,CACT,MAAO,mFACP,QAAS,4CACb,CACJ,EAAG,CACC,KAAM,gQACN,YAAa,CACT,MAAO,wDACP,QAAS,CAACF,EAAGM,EAASC,EAAgBC,IAAc,CAEhD,IAAMC,EAAmC,CAErC,CAAE,MAAO,aAAc,QAAS,6CAA8C,EAE9E,CAAE,MAAO,gQAAiQ,QAAS,6zCAA8zC,EAEjlD,CAAE,MAAO,sBAAuB,QAAS,qBAAsB,EAE/D,CAAE,MAAO,QAAS,QAAS,OAAQ,EACnC,CAAE,MAAO,SAAU,QAAS,QAAS,CACzC,EACK,OAAO,CAACN,EAAS,CAAE,MAAAC,EAAO,QAAAC,CAAQ,IAAMF,EAAQ,QAAQC,EAAOC,CAAO,EAAGG,CAAS,EAGvF,MAAO,GAAGF,sEAA4EC,IAAiBC,IAAYC,GACvH,CACJ,CACJ,EAAG,CACC,KAAM,yLACN,YAAa,CACT,MAAO,uDACP,QAAS,CAACT,EAAGM,EAASC,EAAgBC,IAAc,CAEhD,IAAME,EAAkC,CAEpC,CAAE,MAAO,aAAc,QAAS,4CAA6C,EAE7E,CAAE,MAAO,yLAA0L,QAAS,6zCAA8zC,EAE1gD,CAAE,MAAO,sBAAuB,QAAS,qBAAsB,CACnE,EACK,OAAO,CAACP,EAAS,CAAE,MAAAC,EAAO,QAAAC,CAAQ,IAAMF,EAAQ,QAAQC,EAAOC,CAAO,EAAGG,CAAS,EAGvF,MAAO,GAAGF,oEAA0EC,IAAiBC,IAAYE,GACrH,CACJ,CACJ,EAAG,CAEC,KAAM,oCACN,YAAa,CACT,MAAO,iDACP,QAAS,6EACb,CACJ,CAAC,EAED,MAAM,OAAQ,CAGV,GAFAxB,GAA0B,MAAMyB,GAAU,IAAc,oCAAoC,GAAM,CAAC,EAE/FzB,GAAuB,SAAW,EAAG,CACrC,IAAM0B,EAAmC3B,GAAuB,EAAE,aAAa,EAE/E,OAAW,CAAC4B,EAAOC,CAAe,IAAK5B,GAAuB,QAAQ,EAC7D0B,EAAU,KAAKG,GAASA,EAAK,KAAO,QAAaA,EAAK,KAAOD,GAAoBC,EAAK,UAAYD,CAAe,GAClH5B,GAAuB,OAAO2B,EAAO,CAAC,EAI9C,MAAMF,GAAU,IAAI,qCAAsCzB,EAAsB,CACpF,CACJ,EAEA,kBAAkB8B,EAA4B,CAE1C,GAAI,SAAUA,EAAO,CACjB,GAAIA,EAAM,iBAAmB,OAAW,MAAO,CAAC9B,GAAuB,SAAS8B,EAAM,cAAc,EAC/F,CACD,IAAMC,EAAUhC,GAAuB,EAAE,gBAAgB,EAAE,KAAK8B,GAAQA,EAAK,OAASC,EAAM,IAAI,GAAG,QACnG,GAAIC,EAAS,MAAO,CAAC/B,GAAuB,SAAS+B,CAAO,CAChE,CACJ,SAES,YAAaD,EAClB,OAAIA,EAAM,KAAO,OAAkB,CAAC9B,GAAuB,SAAS8B,EAAM,EAAE,EAChE,CAAC9B,GAAuB,SAAS8B,EAAM,OAAO,EAE9D,MAAO,EACX,EAEA,MAAM,qBAAqBA,EAA4B,CACnD,IAAME,EAAKF,EAAM,IAAMA,EAAM,QACzBE,IAAO,SAEPhC,GAAuB,SAASgC,CAAE,EAAGhC,GAAuB,OAAOA,GAAuB,QAAQgC,EAAI,CAAC,CAAC,EACvGhC,GAAuB,KAAKgC,CAAE,EACnCjC,GAAuB,+BAA+B,EACtD,MAAM0B,GAAU,IAAI,qCAAsCzB,EAAsB,EACpF,CACJ,CAAC,IClLD,IAwCOiC,GAxCPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IACAC,IAmBOP,GAAQQ,EAAa,CACxB,KAAM,qBACN,YAAa,4FACb,QAAS,CAACC,EAAK,MAAM,EAErB,mBAAoB,GACpB,cAAe,CAAC,EAEhB,2BAA2BC,EAAwBC,EAAmB,CAC9D,CAACC,GAAa,WAAWD,CAAS,GACtCE,GAAiB,aAAa,aAAaH,GAAW,SAASC,GAAW,CAC9E,EAEA,SAAS,EAAgB,CACrB,KAAK,mBAAqB,EAAE,kBAChC,EAEA,kBAAmB,CACX,CAAC,KAAK,qBACV,KAAK,mBAAqB,GAEtB,KAAK,cAAc,WAAW,KAAK,2BAA2B,KAAK,cAAc,QAAS,KAAK,cAAc,SAAS,EAC9H,EAEA,MAAM,gBAAgB,CAAE,QAAAD,EAAS,UAAAC,CAAU,EAAuB,CAC1D,KAAK,qBAET,KAAK,cAAgB,CACjB,QAAAD,EACA,UAAAC,CACJ,EACA,MAAMG,GAAU,IAAI,kCAAmC,KAAK,aAAa,EAC7E,EAEA,MAAM,OAAQ,CACV,IAAMC,EAAe,MAAMD,GAAU,IAAqB,iCAAiC,EACvFC,GACA,KAAK,cAAgBA,EAEjB,KAAK,cAAc,WAAW,KAAK,2BAA2B,KAAK,cAAc,QAAS,KAAK,cAAc,SAAS,IAE1H,KAAK,cAAgB,CACjB,QAASC,GAAmB,WAAW,EACvC,UAAWC,GAAqB,aAAa,GAAK,IACtD,EACA,MAAMH,GAAU,IAAI,kCAAmC,KAAK,aAAa,GAG7EI,EAAe,UAAU,SAAU,KAAK,SAAS,KAAK,IAAI,CAAC,EAC3DA,EAAe,UAAU,kBAAmB,KAAK,iBAAiB,KAAK,IAAI,CAAC,EAC5EA,EAAe,UAAU,iBAAkB,KAAK,gBAAgB,KAAK,IAAI,CAAC,CAC9E,EAEA,MAAO,CACHA,EAAe,YAAY,SAAU,KAAK,QAAQ,EAClDA,EAAe,YAAY,kBAAmB,KAAK,gBAAgB,EACnEA,EAAe,YAAY,iBAAkB,KAAK,eAAe,CACrE,CACJ,CAAC,ICrBD,eAAeC,GAAoBC,EAA8B,CAC7D,OAAQ,MAAMC,GAAa,SAASC,GAAe,CAACF,EAAK,MAAS,CAAC,GAAG,EAC1E,CAEA,SAASG,GAAYC,EAAqB,CACtCC,EAAe,SAAS,CAAE,KAAM,wBAAyB,SAAUD,CAAS,CAAC,CACjF,CAnFA,IAmEMF,GAEAI,GACAL,GAeCM,GArFPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IACAC,IACAC,KACAC,IA4CMd,GAAgB,sBAEhBI,GAAgBW,EAAYC,GAAQ,QAAQ,QAAQ,kBAAkB,CAAC,EACvEjB,GAAeiB,GAAQ,qBACzB,2DACA,CACI,SAAUA,GAAQ,QAAQ,OAAO,QAAQ,CAC7C,CACJ,EAUOX,GAAQY,EAAa,CACxB,KAAM,qBACN,YAAa,0CACb,QAAS,CAACC,EAAK,KAAK,EAEpB,uBAAwB,IACpBC,EAAAC,EAAA,KACID,EAACE,EAAM,UAAN,CAAgB,IAAI,MAAK,uBAAqB,EAC/CF,EAACE,EAAM,SAAN,KAAe,iFAENF,EAACG,GAAA,CAAK,KAAK,0CAAyC,WAAS,EAAO,2CACvCH,EAAC,SAAG,EAAE,IAACA,EAAC,SAAG,EAAE,2CAERA,EAAC,SAAG,EAAE,2CACNA,EAAC,SAAG,EAAE,IAACA,EAAC,SAAG,EAAE,+CAGzD,CACJ,EAGJ,QAAS,CACL,SAAU,CACN,YAAa,mBACb,MACJ,EACA,OAAQ,CACJ,YAAa,kBACb,MACJ,EACA,gBAAiB,CACb,YAAa,8CACb,OACA,QAAS,EACb,EACA,mBAAoB,CAChB,YAAa,kDACb,OACA,QAAS,EACb,CACJ,EAEA,OAAQ,CACJ,KAAK,SAAWI,EAAS,QAAQ,mBAEjC,KAAK,eAAiB,YAAY,IAAM,CAAE,KAAK,eAAe,CAAG,EAAG,IAAK,CAC7E,EAEA,MAAO,CACH,cAAc,KAAK,cAAc,CACrC,EAEA,MAAM,gBAA4C,CAC9C,GAAI,CAAC,KAAK,SAAS,UAAY,CAAC,KAAK,SAAS,OAAQ,OAAO,KAG7D,IAAMC,GAAa,MADF,MAAM,MAAM,0EAA0E,KAAK,SAAS,eAAe,KAAK,SAAS,8BAA8B,GAC9I,KAAK,GAAG,aAAa,MAAM,GAE7D,OAAKA,EAAU,UAAU,WAGlB,CACH,KAAMA,EAAU,MAAQ,UACxB,MAAOA,EAAU,MAAM,SACvB,OAAQA,EAAU,OAAO,UAAY,UACrC,IAAKA,EAAU,IACf,UAAWA,EAAU,OAAS,CAAC,GAAG,OAAOC,GAAKA,EAAE,OAAS,OAAO,EAAE,KAAK,QAC3E,EAT4C,IAUhD,EAEA,MAAM,gBAAiB,CACnB,GAAI,KAAK,SAAS,iBACd,QAAWvB,KAAYE,GAAc,cAAc,EAC/C,GAAIF,EAAS,OAAS,GAA0BA,EAAS,iBAAmBF,GAAe,CAEvFC,GAAY,EACZ,MACJ,EAIR,IAAMuB,EAAY,MAAM,KAAK,eAAe,EAE5C,GAAI,CAACA,EAAW,CACZvB,GAAY,EACZ,MACJ,CAEA,IAAMyB,EAAgB,CAACF,EAAU,OAASA,EAAU,QAAUA,EAAU,KAEpEG,EACAH,EAAU,SACVG,EAAS,CACL,YAAa,MAAM9B,GAAoB2B,EAAU,QAAQ,EACzD,WAAYA,EAAU,KACtB,YAAa,MAAM3B,GAAoB,cAAc,EACrD,WAAY,SAChB,EAEA8B,EAAS,CACL,YAAa,MAAM9B,GAAoB,cAAc,EACrD,WAAY,SAChB,EAGJI,GAAY,CACR,eAAgBD,GAChB,KAAM,aAEN,QAASwB,EAAU,KACnB,MAAOE,EAAgBF,EAAU,OAAS,GAAGA,EAAU,YAAYA,EAAU,QAC7E,OAAAG,EAEA,QAAS,CAAE,iBAAkB,EAC7B,SAAU,CACN,YAAa,CAAEH,EAAU,GAAI,CACjC,EAEA,KAAM,KAAK,SAAS,mBAAqB,EAAyB,EAClE,MAAO,CACX,CAAC,CACL,CACJ,CAAC,IC/MD,IAuBMI,GAsCCC,GA7DPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAIMN,GAAS,CACX,UACA,eACA,mBACA,wBACA,8BACA,8BACA,sJACA,IACA,0FACA,mIACA,oDACA,wCACA,uDACA,4BACA,qCACA,oBACA,OACA,kBACA,6GACA,eACA,mLACA,2BACA,6DACA,+BACA,uCACA,kBACA,SACA,aACA,yDACA,8BACA,2BACA,SACA,gCACA,6DACA,qDACJ,EAEOC,GAAQM,EAAa,CACxB,KAAM,gBACN,YAAa,kCACb,QAAS,CAACC,EAAK,IAAKA,EAAK,QAAQ,EACjC,QAAS,CACL,CACI,KAAM,wBACN,YAAa,CACT,MAAO,kCACP,QAAS,4DACb,CACJ,CACJ,EAEA,IAAIC,EAAe,CACf,IAAMC,EAAM,eACNC,EAAQ,MAAM,KAAKF,EAAO,CAACG,EAAGC,IAAMD,EAAE,WAAW,CAAC,EAAKC,EAAIH,EAAI,MAAO,EAC5E,OAAO,OAAO,aAAa,GAAGC,CAAK,CACvC,EAEA,IAAI,OAAQ,CACR,OAAO,KAAK,IAAIX,GAAO,KAAK,MAAM,KAAK,OAAO,EAAIA,GAAO,MAAM,EAAE,CACrE,CACJ,CAAC,ICpFD,IA0BIc,GACEC,GACAC,GAICC,GAhCPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IAEIb,GAAkB,GAChBC,GAAW,GAAqB,EAAE,MAAQ,cAAgBD,GAAkB,IAC5EE,GAAS,GAAqB,EAAE,MAAQ,cAAgBF,GAAkB,IAEhFc,EAAsB,sBAAuB,qBAAqB,EAE3DX,GAAQY,EAAa,CACxB,KAAM,sBACN,YAAa,wDACb,QAAS,CAACC,EAAK,GAAG,EAClB,aAAc,CAAC,kBAAkB,EAEjC,OAAQ,CACJ,IAAMC,EAAiBC,EAAYC,EAAQ,QAAQ,gBAAiB,kBAAkB,CAAC,EACjFC,EAAkBF,EAAYC,EAAQ,QAAQ,MAAO,YAAY,CAAC,EAClEE,EAAcH,EAAYI,GAAK,OAAOA,EAAE,iBAAoB,QAAQ,EACpEC,EAAYL,EAAYC,EAAQ,QAAQ,YAAa,cAAc,CAAC,EAE1E,SAAS,iBAAiB,UAAWlB,EAAO,EAC5C,SAAS,iBAAiB,QAASC,EAAK,EAExC,KAAK,QAAUsB,GAAiB,CAACC,EAAKC,EAAMC,IAAU,CAClD,IAAMC,EAAOH,EAAI,OAAO,KAAOI,EAAU,eAAe,EAAE,GACrD7B,IAKM4B,GAAQR,EAAgB,IAAIC,EAAY,gBAAiBK,CAAI,KACpET,EAAe,cAAcS,EAAK,GAAID,EAAI,EAAE,EAC5CE,EAAM,eAAe,GANjBC,GAAQD,EAAM,QAAU,GAAK,CAACJ,EAAU,UAAUG,EAAK,GAAID,EAAI,EAAE,IACjER,EAAe,iBAAiBS,EAAK,GAAID,EAAI,GAAIA,EAAI,OAAO,EAC5DE,EAAM,eAAe,EAMjC,CAAC,CACL,EAEA,MAAO,CACHG,GAAoB,KAAK,OAAO,EAChC,SAAS,oBAAoB,UAAW7B,EAAO,EAC/C,SAAS,oBAAoB,QAASC,EAAK,CAC/C,CACJ,CAAC,ICvCD,SAAS6B,IAAsB,CACvBC,EAAS,QAAQ,cAAc,cAAgB,QAC/C,SAAS,KAAK,UAAU,OAAO,2BAA2B,EAC1D,SAAS,KAAK,UAAU,IAAI,wBAAwB,IAEpD,SAAS,KAAK,UAAU,OAAO,wBAAwB,EACvD,SAAS,KAAK,UAAU,IAAI,2BAA2B,EAE/D,CAnCA,IAqCOC,GArCPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,KACAC,IACAC,KACAC,IACAC,IACAC,IACAC,IAYOX,GAAQY,EAAa,CACxB,KAAM,gBACN,YAAa,gDACb,QAAS,CAACC,EAAK,OAAQA,EAAK,GAAG,EAE/B,gBAAiB,KACjB,OAAQ,KAER,IAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA8BL,OAAQ,CACJ,KAAK,OAASC,EAAYC,EAAQ,QAAQ,uBAAwB,uBAAuB,CAAC,EAC1F,KAAK,gBAAkBD,EAAYC,EAAQ,QAAQ,kCAAkC,CAAC,EAEtF,IAAMC,EAAQ,KAAK,MAAQ,SAAS,cAAc,OAAO,EACzDA,EAAM,YAAc,KAAK,IACzBA,EAAM,GAAK,oBACX,SAAS,KAAK,YAAYA,CAAK,EAE/BlB,GAAoB,CACxB,EAEA,MAAO,CACH,KAAK,OAAO,OAAO,EAEnB,SAAS,iBAAiB,wBAAwB,EAAE,QAAQ,GAAK,EAAE,OAAO,CAAC,EAC3E,SAAS,iBAAiB,uBAAuB,EAAE,QAAQ,GAAK,EAAE,OAAO,CAAC,EAC1E,SAAS,KAAK,UAAU,OAAO,2BAA2B,EAC1D,SAAS,KAAK,UAAU,OAAO,wBAAwB,CAC3D,EAEA,WAAWmB,EAA4C,CACnD,IAAMC,EAAY,KAAK,gBAAgB,iCACvC,OACIC,EAACC,EAAA,CAAc,KAAI,IACfD,EAAC,OAAI,UAAU,wBACVE,GAAO,MAAMJ,EAAK,OAAO,EAC1BE,EAACD,EAAA,CACG,UAAWD,EAAK,UAChB,SAAU,GACV,SAAU,IAEVE,EAAC,YAAM,IAAI,UAAQ,CACvB,CACJ,CACJ,CAER,EAEA,SAASG,EAAiBC,EAAsB,CAC5C,MAAO,CACH,UAAW,KAAK,QAAQ,KAAKD,EAAW,gBAAgB,EACxD,QAASC,EAAW,OACxB,CACJ,EAEA,QAAS,CACL,YAAa,CACT,OACA,YAAa,gCACb,QAAS,OACT,QAAS,CACL,CAAE,MAAO,WAAY,MAAO,OAAQ,QAAS,EAAK,EAClD,CAAE,MAAO,cAAe,MAAO,SAAU,CAC7C,EACA,SAAU,IAAMzB,GAAoB,CACxC,EACA,WAAY,CACR,OACA,YAAa,qCACb,QAAS,EACb,EACA,WAAY,CACR,OACA,YAAa,yCACb,QAAS,EACb,CACJ,EAEA,aAAa0B,EAAYC,EAAsCC,EAAiB,CAC5E,GAAI,CAMA,IAASC,EAAT,SAAgBC,EAAY,CACxB,IAAMC,EAAML,EAAM,IAAII,CAAE,EACxB,GAAI,CAACC,EAAK,OAEV,IAAMC,EAAY,IACID,EAAI,MAAQC,KAAeA,GAC7CC,GAAcF,EAAI,QAAQ,KAC1BG,GAAcH,EAAI,QAAQ,KAAOI,EAGjCT,EAAQA,EAAM,OAAOI,CAAE,EAEvBJ,EAAQA,EAAM,OAAOI,EAAIM,GAAKA,EACzB,IAAI,UAAW,EAAI,EACnB,IAAI,cAAeA,EAAE,YAAY,IAAIC,IAAMA,EAAE,QAAU,GAAMA,EAAE,CAAC,CAAC,CAE9E,EAhBS,IAAAR,IALT,GAAIH,GAAS,MAAS,CAACE,GAAU,CAACF,EAAM,IAAIC,EAAK,EAAE,EAAI,OAAOD,EAE9D,GAAM,CAAE,WAAAO,EAAY,WAAAC,CAAW,EAAIjC,EAAS,QAAQ,cAC9CkC,EAAOG,EAAU,eAAe,EAAE,GAoBpCV,EACAD,EAAK,IAAI,QAAQE,CAAM,EAEvBA,EAAOF,EAAK,EAAE,CAEtB,OAASY,EAAP,CACE,IAAIC,EAAO,eAAe,EAAE,MAAM,4BAA6BD,CAAC,CACpE,CACA,OAAOb,CACX,EAGA,QAAS,CACL,CAGI,KAAM,6BACN,YAAa,CACT,CAEI,MAAO,4EACP,QACI,8KAKR,EACA,CAEI,MAAO,iFACP,QACI,kLAKR,EACA,CAEI,MAAO,qDACP,QAAS,wPAOb,CACJ,CACJ,EAEA,CAGI,KAAM,qCACN,YAAa,CACT,CACI,MAAO,2DACP,QAAS,6HAGb,CACJ,CACJ,EAEA,CAGI,KAAM,iCACN,YAAa,CAMT,CAEI,MAAO,wCACP,QACI,6GAIR,EAOA,CAGI,MAAO,gCACP,QACI,8WAWR,EACA,CAEI,MAAO,qDACP,QACI,2CAER,CACJ,CACJ,EAEA,CAGI,KAAM,2CACN,YAAa,CACT,CACI,MAAO,uCACP,QAAS,oCACb,EACA,CACI,MAAO,iCACP,QAAS,2DACb,CACJ,CACJ,EAEA,CAGI,KAAM,+CACN,YAAa,CACT,CAEI,MAAO,qCACP,QAAS,0CACb,EACA,CAEI,MAAO,8BACP,QAAS,iEACb,CACJ,CACJ,EAEA,CAGI,KAAM,8BACN,YAAa,CACT,CAEI,MAAO,kCACP,QAAS,kKACb,CACJ,CACJ,EAEA,CAGI,KAAM,uCACN,YAAa,CACT,CACI,MAAO,uCACP,QAAS,gCACb,EACA,CACI,MAAO,4CACP,QAAS,qCACb,CACJ,CACJ,EAEA,CAGI,KAAM,sDACN,YAAa,CAET,MAAO,8BACP,QAAS,8CACb,CACJ,EAEA,CAGI,KAAM,wBACN,YAAa,CACT,CAEI,MAAO,0BACP,QAAS,6CACb,CACJ,CACJ,CAcJ,CACJ,CAAC,IC9UD,SAASe,GAAiBC,EAAU,CAChCC,GAAgB,CACZ,KAAMD,EAAI,KACV,YAAaA,EAAI,KACjB,YACA,QAAS,MAAOE,EAAGC,IACV,MAAMC,GAAOJ,EAAI,IAAI,GAQtBK,EAAS,QAAQ,YAAY,OAAOC,EAAeH,EAAI,QAAQ,GAAI,CACnE,OAAAI,GACA,QAAS,GAAGC,gBAAmBR,EAAI,uBACvC,CAAC,EACM,CAAE,QAASA,EAAI,QAAQ,WAAW,MAAO;AAAA,CAAI,CAAE,IAXlDM,EAAeH,EAAI,QAAQ,GAAI,CAC3B,OAAAI,GACA,QAAS,GAAGC,gBAAmBR,EAAI,mEACvC,CAAC,EACM,CAAE,QAAS,IAAIA,EAAI,MAAO,GASzC,CAACS,IAAoB,EACzB,EAAG,YAAY,CACnB,CA3EA,IAwBMD,GACAE,GACAD,GACAF,GAWAI,GACAP,GACAQ,GAMAC,GAgCCC,GA9EPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,KACAC,IACAC,IACAC,IAEMd,GAAQ,8BACRE,GAAW,mBACXD,GAAoB,OAAO,aAAa,EACxCF,GAAS,CACX,GAAI,qBACJ,IAAK,EACT,EAQMI,GAAU,IAAMY,GAAU,IAAIb,EAAQ,EAAE,KAAYc,GAAKA,GAAK,CAAC,CAAC,EAChEpB,GAAUqB,GAAiBF,GAAU,IAAIb,EAAQ,EAAE,KAAkB,IAAc,GAAK,CAAC,GAAG,KAAMgB,GAAYA,EAAG,OAASD,CAAI,GAAK,IAAI,EACvIb,GAAS,MAAOZ,GAAa,CAC/B,IAAM2B,EAAO,MAAMhB,GAAQ,EAC3B,OAAAgB,EAAK,KAAK3B,CAAG,EACbuB,GAAU,IAAIb,GAAUiB,CAAI,EACrBA,CACX,EACMd,GAAY,MAAOY,GAAiB,CACtC,IAAIE,EAAO,MAAMhB,GAAQ,EACzB,OAAAgB,EAAO,MAAMA,EAAK,OAAQH,GAAWA,EAAE,OAASC,CAAI,EACpDF,GAAU,IAAIb,GAAUiB,CAAI,EACrBA,CACX,EA2BOb,GAAQc,EAAa,CACxB,KAAM,cACN,YAAa,qEACb,QAAS,CAACC,EAAK,IAAI,EACnB,QAAS,CACL,MAAO,CACH,KAAM,wBACN,YAAa,4EACb,OACA,QAAS,EACb,CACJ,EACA,aAAc,CAAC,aAAa,EAE5B,MAAM,OAAQ,CACV,QAAW7B,KAAO,MAAMW,GAAQ,EAAGZ,GAAiBC,CAAG,CAC3D,EAEA,SAAU,CACN,CACI,KAAM,OACN,YAAa,mCACb,YACA,QAAS,CACL,CACI,KAAM,SACN,YAAa,mBACb,OACA,QAAS,CACL,CACI,KAAM,WACN,YAAa,8CACb,OACA,SAAU,EACd,EACA,CACI,KAAM,UACN,YAAa,qDACb,OACA,SAAU,EACd,CACJ,CACJ,EACA,CACI,KAAM,OACN,YAAa,8BACb,OACA,QAAS,CAAC,CACd,EACA,CACI,KAAM,SACN,YAAa,kCACb,OACA,QAAS,CACL,CACI,KAAM,WACN,YAAa,8CACb,OACA,SAAU,EACd,CACJ,CACJ,EACA,CACI,KAAM,UACN,YAAa,4CACb,OACA,QAAS,CACL,CACI,KAAM,WACN,YAAa,8CACb,OACA,SAAU,EACd,CACJ,CACJ,CACJ,EAEA,MAAM,QAAQ8B,EAAM3B,EAAK,CAErB,OAAQ2B,EAAK,GAAG,UACP,SAAU,CACX,IAAML,EAAeM,GAAWD,EAAK,GAAG,QAAS,WAAY,EAAE,EACzDE,EAAkBD,GAAWD,EAAK,GAAG,QAAS,UAAW,EAAE,EAEjE,GAAI,MAAM1B,GAAOqB,CAAI,EACjB,OAAOnB,EAAeH,EAAI,QAAQ,GAAI,CAClC,OAAAI,GACA,QAAS,GAAGC,4BAA+BiB,qBAC/C,CAAC,EAEL,IAAMzB,EAAM,CACR,KAAMyB,EACN,QAAS,GACT,QAASO,CACb,EAEAjC,GAAiBC,CAAG,EACpB,MAAMY,GAAOZ,CAAG,EAEhBM,EAAeH,EAAI,QAAQ,GAAI,CAC3B,OAAAI,GACA,QAAS,GAAGC,qCAAwCiB,MACxD,CAAC,EACD,KACJ,KACK,SAAU,CACX,IAAMA,EAAeM,GAAWD,EAAK,GAAG,QAAS,WAAY,EAAE,EAE/D,GAAI,CAAC,MAAM1B,GAAOqB,CAAI,EAClB,OAAOnB,EAAeH,EAAI,QAAQ,GAAI,CAClC,OAAAI,GACA,QAAS,GAAGC,4BAA+BiB,qBAC/C,CAAC,EAELQ,GAAkBR,CAAI,EACtB,MAAMZ,GAAUY,CAAI,EAEpBnB,EAAeH,EAAI,QAAQ,GAAI,CAC3B,OAAAI,GACA,QAAS,GAAGC,qCAAwCiB,MACxD,CAAC,EACD,KACJ,KACK,OAAQ,CACTnB,EAAeH,EAAI,QAAQ,GAAI,CAC3B,OAAAI,GACA,OAAQ,CACJ,CAEI,MAAO,YAEP,aAAc,MAAMI,GAAQ,GACvB,IAAIX,GAAO,KAAKA,EAAI,WAAWA,EAAI,QAAQ,MAAM,EAAG,EAAE,EAAE,WAAW,MAAO,GAAG,IAAIA,EAAI,QAAQ,OAAS,GAAK,MAAQ,IAAI,EACvH,KAAK;AAAA,CAAI,GAAK,GAAGQ,uEAEtB,MAAO,SACP,KAAM,MACV,CACJ,CACJ,CAAC,EACD,KACJ,KACK,UAAW,CACZ,IAAMiB,EAAeM,GAAWD,EAAK,GAAG,QAAS,WAAY,EAAE,EACzD9B,EAAM,MAAMI,GAAOqB,CAAI,EAE7B,GAAI,CAACzB,EACD,OAAOM,EAAeH,EAAI,QAAQ,GAAI,CAClC,OAAAI,GACA,QAAS,GAAGC,4BAA+BiB,qBAC/C,CAAC,EAELnB,EAAeH,EAAI,QAAQ,GAAI,CAC3B,OAAAI,GACA,QAASP,EAAI,QAAQ,WAAW,MAAO;AAAA,CAAI,CAC/C,CAAC,EACD,KACJ,EAGJ,OAAOM,EAAeH,EAAI,QAAQ,GAAI,CAClC,OAAAI,GACA,QAAS,qBACb,CAAC,CACL,CACJ,CACJ,CACJ,CAAC,IC9ND,SAAS2B,GAAKC,EAAuB,CACjC,IAAIC,EAAS,GACb,QAASC,EAAI,EAAGA,EAAIF,EAAM,OAAQE,IAC9BD,GAAUC,EAAI,EAAIF,EAAME,GAAG,YAAY,EAAIF,EAAME,GAAG,YAAY,EAEpE,OAAOD,CACX,CA7BA,IA+BOE,GA/BPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IAWON,GAAQO,EAAa,CACxB,KAAM,eACN,YAAa,oBACb,QAAS,CAACC,EAAK,MAAOA,EAAK,KAAMA,EAAK,IAAI,EAC1C,aAAc,CAAC,aAAa,EAC5B,SAAU,CACN,CACI,KAAM,OACN,YAAa,qCACb,QAAS,CAACC,EAAqB,EAC/B,YACA,QAAS,CAACC,EAAMC,IAAQ,CACpB,IAAMC,EAAUC,GAAWH,EAAM,UAAW,EAAE,EAE9CI,EAAeH,EAAI,QAAQ,GAAI,CAAE,QAAAC,CAAQ,CAAC,CAC9C,CACJ,EACA,CACI,KAAM,QACN,YAAa,qBACb,QAAS,CAACH,EAAqB,EAC/B,QAASC,IAAS,CACd,QAASG,GAAWH,EAAM,UAAW,EAAE,EAAI,wCAC/C,EACJ,EACA,CACI,KAAM,OACN,YAAa,cACb,QAAS,CAACK,EAAqB,EAC/B,QAASL,IAAS,CACd,QAASd,GAAKiB,GAAWH,EAAM,UAAW,EAAE,CAAC,CACjD,EACJ,CACJ,CACJ,CAAC,ICjED,IAwBOM,GAxBPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IACAC,IAEAC,EAAsB,cAAe,cAAc,EAC5CR,GAAQS,EAAa,CACxB,KAAM,cACN,YAAa,qDACb,QAAS,CAACC,EAAK,OAAO,EACtB,aAAc,CAAC,aAAa,EAC5B,SAAU,CACN,CAAE,KAAM,kBAAmB,YAAa,qBAAO,EAC/C,CAAE,KAAM,OAAQ,YAAa,gBAAO,EACpC,CAAE,KAAM,QAAS,YAAa,uBAAW,EACzC,CAAE,KAAM,SAAU,YAAa,gBAAO,EACtC,CAAE,KAAM,QAAS,YAAa,iCAAW,EACzC,CAAE,KAAM,QAAS,YAAa,0CAAa,EAC3C,CAAE,KAAM,MAAO,YAAa,yBAAW,CAC3C,EAAE,IAAIC,IAAS,CACX,GAAGA,EACH,QAAS,CAACC,EAAqB,EAC/B,QAASC,IAAS,CACd,QAASC,GAAWD,EAAM,UAAW,EAAE,EAAIF,EAAK,WACpD,EACJ,EAAE,CACN,CAAC,ICuFD,SAASI,GAAiBC,EAAsBC,EAAmB,CAC/D,IAAIC,EAAI,EACJC,EAAU,EACd,MAAQA,EAAUH,EAAa,QAAQC,EAAWE,CAAO,EAAI,KAAO,GAChED,IAEJ,OAAOA,CACX,CAEA,SAASE,GAAaJ,EAAsBK,EAAiB,CACzD,GAAI,CAACA,EAAQ,OACT,MAAM,IAAI,MAAM,wBAAwB,EAE5C,IAAIH,EAAI,EACR,KAAOG,EAAQ,KAAKL,CAAY,GAC5BE,IAEJ,OAAOA,CACX,CAIA,SAASI,GAAcC,EAAiB,CACpC,IAAMC,EAAQT,GAAiBQ,EAASE,EAAK,EACvCL,GAAaG,EAASG,EAAa,EAEzC,OAAO,KAAK,IAAIF,EAAO,EAAE,CAC7B,CAEA,SAASG,IAAO,CACZ,GAAI,CAACC,EAAS,QAAQ,MAAM,sBAAwB,CAAC,SAAS,SAAS,EAAG,OAC1E,IAAMC,EAAe,SAAS,cAAc,OAAO,EACnDA,EAAa,IAAMC,GACnBD,EAAa,OAASD,EAAS,QAAQ,MAAM,OAC7CC,EAAa,KAAK,CACtB,CAtKA,IAqDMJ,GACAK,GAGCC,GA8FDL,GAvJNM,GAAAC,EAAA,kBAAAC,IAoBAC,KACAC,IACAC,IACAC,IACAC,KACAC,IA4BMf,GAAQ,YACRK,GACF,4FAEGC,GAAQU,EAAa,CACxB,KAAM,QACN,QAAS,CAACC,EAAK,KAAMA,EAAK,MAAM,EAChC,YAAa,2EAEb,MAAM,UAAU,EAAmB,CAK/B,GAJI,EAAE,YAAc,EAAE,OAAS,kBAC3B,EAAE,QAAQ,QAAU,WACpBd,EAAS,QAAQ,MAAM,YAAc,EAAE,QAAQ,QAAQ,KACvD,CAAC,EAAE,QAAQ,SACX,EAAE,YAAce,GAAqB,aAAa,EAAG,OAEzD,IAAMC,EAAatB,GAAc,EAAE,QAAQ,OAAO,EAElD,QAASJ,EAAI,EAAGA,EAAI0B,EAAY1B,IAC5BS,GAAK,EACL,MAAMkB,GAAM,GAAG,CAEvB,EAEA,WAAW,EAAiB,CAGxB,GAFI,EAAE,YAAc,EAAE,OAAS,wBAC3BjB,EAAS,QAAQ,MAAM,YAAckB,EAAU,QAAQ,EAAE,MAAM,GAAG,KAClE,EAAE,YAAcH,GAAqB,aAAa,EAAG,OAEzD,IAAMI,EAAO,EAAE,MAAM,KAAK,YAAY,EAClCA,IAAStB,IAAS,CAACsB,EAAK,SAAS,OAAO,GAAK,CAACA,EAAK,SAAS,MAAM,GAEtEpB,GAAK,CACT,EAEA,qBAAqB,EAAiC,CAClD,GAAI,CAAC,EAAE,OAAO,KAAM,OACpB,IAAMoB,EAAO,EAAE,MAAM,KAAK,YAAY,EAClCA,IAAStB,IAAS,CAACsB,EAAK,SAAS,OAAO,GAAK,CAACA,EAAK,SAAS,MAAM,GAEtEpB,GAAK,CACT,EAEA,OAAQ,CACJqB,EAAe,UAAU,iBAAkB,KAAK,SAAS,EACzDA,EAAe,UAAU,uBAAwB,KAAK,UAAU,EAChEA,EAAe,UAAU,4BAA6B,KAAK,oBAAoB,CACnF,EAEA,MAAO,CACHA,EAAe,YAAY,iBAAkB,KAAK,SAAS,EAC3DA,EAAe,YAAY,uBAAwB,KAAK,UAAU,EAClEA,EAAe,YAAY,4BAA6B,KAAK,oBAAoB,CACrF,EAEA,QAAS,CACL,OAAQ,CACJ,YAAa,4CACb,OACA,QAASC,GAAU,EAAG,EAAG,EAAG,EAC5B,QAAS,GACT,eAAgB,EACpB,EACA,qBAAsB,CAClB,YAAa,0DACb,OACA,QAAS,GACT,cAAe,EACnB,EACA,WAAY,CACR,YAAa,cACb,OACA,QAAS,GACT,cAAe,EACnB,CACJ,CACJ,CAAC,EAsBKvB,GAAgB,kCCvJtB,IAqBOwB,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,eACN,YAAa,4BACb,QAAS,CAACC,EAAK,MAAM,EACrB,QAAS,CACL,CACI,KAAM,yBACN,YAAa,CACT,MAAO,oBACP,QAAS,qKACb,CACJ,CACJ,CACJ,CAAC,IClCD,IAuBMC,GAECC,GAzBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,IACAC,KACAC,IACMT,GAAoBU,EAAYC,EAAQ,QAAQ,mBAAoB,WAAW,CAAC,EAE/EV,GAAQW,EAAa,CACxB,KAAM,oBACN,YAAa,mDACb,QAAS,CAACC,EAAK,OAAQA,EAAK,IAAI,EAChC,QAAS,CACL,CACI,KAAM,qEACN,YAAa,CACT,CACI,MAAO,2BACP,QAAS,sCACb,CACJ,CACJ,EACA,CACI,KAAM,6BACN,UAAW,IAAMC,EAAS,QAAQ,kBAAkB,wBAA0B,GAC9E,YAAa,CACT,CACI,MAAO,mIACP,QAAS,oEACb,CACJ,CACJ,CACJ,EACA,QAAS,CACL,sBAAuB,CACnB,YAAa,8EACb,OACA,QAAS,GACT,cAAe,EACnB,CACJ,EACA,UAAWC,GACPf,GAAkB,UAAUe,EAAQ,OAAO,EAAE,CACrD,CAAC,IC5DD,IAuBOC,GAvBPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IACAC,KAEOP,GAAQQ,EAAa,CACxB,KAAM,uBACN,YAAa,iFACb,QAAS,CAACC,EAAK,KAAMA,EAAK,GAAG,EAC7B,QAAS,CACL,WAAY,CACR,YAAa,+CACb,OACA,QAAS,GACT,cAAe,EACnB,EACA,qBAAsB,CAClB,YAAa,uDACb,OACA,QAAS,GACT,cAAe,EACnB,CACJ,EACA,aAAc,CAAC,kBAAkB,EAEjC,YAAYC,EAAoB,CAC5B,IAAMC,EAAWC,EAAS,QAAQ,qBAClCF,EAAI,QAAUA,EAAI,QAAQ,QACtB,iHACA,CAACG,EAAGC,EAAMC,IAAS,YAAcJ,EAAS,WAAaA,EAAS,WAAa,IAAM,KAAOA,EAAS,qBAAuB,cAAgBG,GAAQC,CACtJ,CACJ,EAEA,OAAQ,CACJ,KAAK,QAAUC,GAAmB,CAACH,EAAGH,IAAQ,KAAK,YAAYA,CAAG,CAAC,CACvE,EAEA,MAAO,CACHO,GAAsB,KAAK,OAAO,CACtC,CACJ,CAAC,IC1DD,IAwBOC,GAxBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,IAEAC,EAAsB,oBAAqB,MAAM,EAE1CP,GAAQQ,EAAa,CACxB,KAAM,oBACN,YAAa,+CACb,QAAS,CAACC,EAAK,GAAG,EAClB,QAAS,CAAC,CACN,KAAM,uBACN,YAAa,CACT,MAAO,+DACP,QAAS,WACb,CACJ,CAAC,CACL,CAAC,ICnCD,IAqBOC,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,QACN,YAAa,yBACb,QAAS,CAACC,EAAK,GAAG,EAClB,QAAS,CACL,CACI,KAAM,8BACN,YAAa,CACT,MAAO,8BACP,QAAS,wBACb,CACJ,CACJ,CACJ,CAAC,IClCD,IAqBOC,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,SACN,YAAa,iCACb,QAAS,CAACC,EAAK,GAAG,EAClB,OAAQ,UACR,QAAS,CACL,CACI,KAAM,+BACN,YAAa,CACT,MAAO,oDACP,QAAS,+BACb,CACJ,CACJ,CACJ,CAAC,ICnCD,IAqBOC,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,iBACN,YAAa,kCACb,QAAS,CAACC,EAAK,YAAY,EAC3B,QAAS,CACL,CACI,KAAM,gCACN,YAAa,CACT,MAAO,6CACP,QAAS,2DACb,CACJ,CACJ,CACJ,CAAC,IClCD,IAqBOC,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,gBACN,YAAa,2DACb,QAAS,CAACC,EAAK,MAAM,EACrB,OAAQ,UACR,QAAS,CACL,CACI,KAAM,qCACN,YAAa,CACT,CACI,MAAO,yBACP,QAAS,wBACb,EACA,CACI,MAAO,kCACP,QAAS,iCACb,CACJ,CACJ,CACJ,CACJ,CAAC,ICzCD,IAqBOC,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,UACN,YAAa,iDACb,QAAS,CAACC,EAAK,GAAG,EAClB,SAAU,GACV,QAAS,CACL,CACI,KAAM,gBACN,YAAa,CACT,MAAO,OACP,QAAS,QACb,CACJ,EACA,CACI,KAAM,wBACN,YAAa,CACT,MAAO,yCACP,QAAS,EACb,CACJ,CACJ,CACJ,CAAC,IC1CD,IAsBOC,GAtBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAGOL,GAAQM,EAAa,CACxB,KAAM,kBACN,YAAa,0EACb,QAAS,CAACC,EAAK,KAAK,EACpB,QAAS,CACL,CACI,KAAM,uBACN,YAAa,CACT,MAAO,8DACP,QAAS,aACb,CACJ,EACA,CACI,KAAM,8BACN,YAAa,CACT,MAAO,8DACP,QAAS,aACb,CACJ,EACA,CACI,KAAM,2BACN,YAAa,CACT,MAAO,oDACP,QAAS,UACb,CACJ,CACJ,CACJ,CAAC,ICjDD,IAqBOC,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,QACN,YAAa,0BAEb,QAAS,CAACC,EAAK,IAAKA,EAAK,KAAK,EAE9B,OAAQ,CACJ,MAAM,uGAAuG,EACxG,KAAKC,GAAKA,EAAE,KAAK,CAAC,EAClB,KAAKC,GAAKA,EAAE,QAAQ,cAAe,wGAAwG,CAAC,EAC5I,KAAK,IAAI,CAClB,EAEA,MAAO,CACH,cAAc,OAAO,aAAa,EAClC,OAAO,OAAO,cACd,SAAS,eAAe,OAAO,GAAG,OAAO,CAC7C,CACJ,CAAC,ICED,SAASC,GAAUC,EAAuB,CACtC,IAAMC,EAASD,aAAkB,KAC3BE,EAAMD,EAAS,IAAI,gBAAgBD,CAAM,EAAIA,EAEnD,OAAO,IAAI,QAA0B,CAACG,EAASC,IAAW,CACtD,IAAMC,EAAM,IAAI,MAChBA,EAAI,OAAS,IAAM,CACXJ,GACA,IAAI,gBAAgBC,CAAG,EAC3BC,EAAQE,CAAG,CACf,EACAA,EAAI,QAAU,CAACC,EAAOC,EAASC,EAASC,EAAQC,IAAQN,EAAOM,GAAOJ,CAAK,EAC3ED,EAAI,YAAc,YAClBA,EAAI,IAAMH,CACd,CAAC,CACL,CAEA,eAAeS,GAAaC,EAAqBC,EAAqBC,EAAqD,CACvH,QAAWC,KAAOH,EACd,OAAQG,EAAI,UACH,QACD,IAAMC,EAASC,GAAY,WAAWJ,EAAI,QAAQ,GAAIK,EAAU,EAAE,GAClE,GAAIF,EAAQ,CACR,GAAI,CAACA,EAAO,QAAS,KAAM,yBAC3B,OAAOA,EAAO,KAAK,IACvB,CACA,UACC,MACD,OAAOD,EAAI,UACV,OACD,GAAI,CAEA,OADa,MAAMI,GAAUJ,EAAI,KAAK,GAC1B,aAAaD,EAAc,OAASD,EAAI,OAAO,GAAI,IAAI,EAAE,QAAQ,cAAe,YAAY,CAC5G,OAASH,EAAP,CACE,cAAQ,MAAM;AAAA,EAAmCA,CAAG,EAC9C,wDACV,EAGZ,OAAO,IACX,CAjFA,IAyBMQ,GACAE,GACAC,GACAC,GAEAC,GAOAJ,GACAK,GACAP,GA4CCQ,GAnFPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,KACAC,IACAC,IACAC,IAEMhB,GAAa,EACbE,GAAgB,GAChBC,GAAqB,IACrBC,GAAS,GAETC,GAAYY,GAAS,IAAM,QAAQ,IACrC,MAAM,KACF,CAAE,OAAQb,EAAO,EACjB,CAACc,EAAGC,IAAMtC,GAAU,oEAAoEsC,OAAO,CACnG,CAAC,CACL,EAEMlB,GAAYmB,EAAYC,EAAQ,OAAO,QAAQ,CAAC,EAChDf,GAAiBc,EAAYC,EAAQ,OAAO,yBAAyB,CAAC,EACtEtB,GAAcqB,EAAYC,EAAQ,QAAQ,YAAY,CAAC,EA4CtDd,GAAQe,EAAa,CACxB,KAAM,SACN,YAAa,kBACb,QAAS,CAACC,EAAK,GAAG,EAClB,aAAc,CAAC,aAAa,EAC5B,SAAU,CACN,CACI,YACA,KAAM,SACN,YAAa,qEACb,QAAS,CACL,CACI,KAAM,QACN,YAAa,gDACb,MACJ,EACA,CACI,KAAM,aACN,YAAa,mHACb,MACJ,EACA,CACI,KAAM,QACN,YAAa,0BACb,OACJ,EACA,CACI,KAAM,MACN,YAAa,0BACb,MACJ,EACA,CACI,KAAM,OACN,YAAa,oCACb,MACJ,EACA,CACI,KAAM,gBACN,YAAa,wFACb,MACJ,CACJ,EACA,QAAS,MAAOC,EAAMC,IAAW,CAC7B,GAAM,CAAE,WAAAC,EAAY,SAAAC,EAAU,aAAAC,CAAa,EAAI,MAAMC,GAAc,EAC7DC,EAAS,MAAMzB,GAAU,EAEzBT,EAAcmC,GAAWP,EAAM,gBAAiB,EAAK,EAC3D,GAAI,CACA,IAAIxC,EAAM,MAAMS,GAAa+B,EAAMC,EAAQ7B,CAAW,EACtD,GAAI,CAACZ,EAAK,KAAM,qBACpB,OAASQ,EAAP,CACEwC,EAAeP,EAAO,QAAQ,GAAI,CAC9B,QAAS,OAAOjC,CAAG,CACvB,CAAC,EACD,MACJ,CAEA,IAAMyC,EAAS,MAAMpD,GAAUG,CAAG,EAE5BkD,EAAQH,GAAWP,EAAM,QAAStB,EAAa,EAC/CiC,EAAaJ,GAAWP,EAAM,aAAcrB,EAAkB,EAE9DiC,EAAM,IAAIV,EAEVW,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQA,EAAO,OAASF,EAC/B,IAAMxC,EAAM0C,EAAO,WAAW,IAAI,EAElC,QAASlB,EAAI,EAAGA,EAAIf,GAAQe,IAAK,CAC7BxB,EAAI,UAAU,EAAG,EAAG0C,EAAO,MAAOA,EAAO,MAAM,EAE/C,IAAMC,GAAInB,EAAIf,GAAS,EAAIe,EAAIf,GAASe,EAClCoB,EAAQ,GAAMD,GAAI,IAClBE,EAAS,GAAMF,GAAI,IACnBG,IAAW,EAAIF,GAAS,GAAM,GAC9BG,GAAU,EAAIF,EAAS,IAE7B7C,EAAI,UAAUsC,EAAQQ,GAAUN,EAAYO,GAAUP,EAAYI,EAAQJ,EAAYK,EAASL,CAAU,EACzGxC,EAAI,UAAUmC,EAAOX,GAAI,EAAG,EAAGgB,EAAYA,CAAU,EAErD,GAAM,CAAE,KAAAQ,EAAK,EAAIhD,EAAI,aAAa,EAAG,EAAGwC,EAAYA,CAAU,EACxDS,GAAUjB,EAASgB,GAAM,GAAG,EAC5BE,GAAQjB,EAAae,GAAMC,EAAO,EAExCR,EAAI,WAAWS,GAAOV,EAAYA,EAAY,CAC1C,YAAa,GACb,QAAAS,GACA,MAAAV,CACJ,CAAC,CACL,CAEAE,EAAI,OAAO,EACX,IAAMU,EAAO,IAAI,KAAK,CAACV,EAAI,UAAU,CAAC,EAAG,aAAc,CAAE,KAAM,WAAY,CAAC,EAG5E,aAAa,IAAM9B,GAAe,CAACwC,CAAI,EAAGrB,EAAO,QAASzB,EAAU,CAAC,CACzE,CACJ,CACJ,CACJ,CAAC,ICtLD,IAqBO+C,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,kBACN,YAAa,gDACb,QAAS,CAACC,EAAK,MAAM,EACrB,QAAS,CAAC,CACN,KAAM,+BACN,YAAa,CAAC,CACV,MAAO,8CACP,QAAS,IACb,CAAC,CACL,CAAC,CACL,CAAC,ICJD,SAASC,GAAKC,EAAcC,EAAU,YAAa,CAC/C,MAAO,CAAC,CAAE,MAAAC,EAAO,QAAAC,CAAQ,IACrBC,EAACC,GAAA,CAAQ,KAAMF,GACTG,GACEF,EAAC,OACI,GAAGE,EACJ,OAAO,KACP,MAAM,KACN,QAASL,EACT,KAAMC,GAENE,EAAC,QAAK,EAAGJ,EAAM,CACnB,CAER,CAER,CA5CA,IA8CMO,GAQAC,GAEAC,GAOAC,GA4BCC,GA3FPC,GAAAC,EAAA,kBAAAC,IAoBAC,IACAC,KACAC,IACAC,IACAC,IACAC,IACAC,IAoBMd,GAAQ,CACV,QAASR,GAAK,oIAAoI,EAClJ,IAAKA,GAAK,8SAA8S,EACxT,OAAQA,GAAK,uMAAuM,EACpN,QAASA,GAAK,kRAAmR,WAAW,CAChT,EAGMS,GAAiBc,EAAYC,EAAQ,OAAO,gBAAiB,SAAU,aAAa,CAAC,EAErFd,GAAe,CAAC,CAAE,SAAAe,EAAU,OAAAC,CAAO,IAA+C,CACpF,IAAMtB,EAAUqB,EAAS,GAAG,YAAY,EAAIA,EAAS,MAAM,CAAC,EACtDzB,EAAOQ,GAAMiB,IAAajB,GAAM,QAEtC,OAAOH,EAACL,EAAA,CAAK,MAAO,SAASS,GAAeiB,CAAM,IAAK,QAAStB,EAAS,CAC7E,EAEMO,GAAoB,CAAC,CAAE,KAAAgB,CAAK,IAAuB,CACrD,GAAI,CAACA,GAAQA,EAAK,IAAK,OAAO,KAE9B,IAAMD,EAASE,GAAc,SAAS,GAAG,iBAAiBD,EAAK,IAC/D,GAAI,CAACD,EAAQ,OAAO,KAEpB,IAAMG,EAAQ,OAAO,QAAQH,CAAM,EAAE,IAAI,CAAC,CAACD,EAAUC,CAAM,IACvDrB,EAACK,GAAA,CACG,IAAKe,EACL,SAAUA,EACV,OAAQC,EACZ,CACH,EAED,OAAKG,EAAM,OAGPxB,EAAC,OACG,UAAU,wBACV,MAAO,CACH,QAAS,OAAQ,WAAY,SAAU,WAAY,MAAO,IAAK,KACnE,GAECwB,CACL,EAVsB,IAY9B,EAEOjB,GAAQkB,EAAa,CACxB,KAAM,qBACN,YAAa,8DACb,QAAS,CAACC,EAAK,IAAI,EAEnB,QAAS,CACL,CAEI,KAAM,uBACN,UAAW,IAAM,CAAC,OAAQ,MAAM,EAAE,SAASC,EAAS,QAAQ,mBAAmB,WAAW,EAC1F,YAAa,CACT,MAAO,kCACP,QAAS,4FACb,CACJ,EACA,CAEI,KAAM,8BACN,UAAW,IAAM,CAAC,OAAQ,MAAM,EAAE,SAASA,EAAS,QAAQ,mBAAmB,WAAW,EAC1F,YAAa,CACT,MAAO,+CACP,QAAS,8FACb,CACJ,EACA,CAEI,KAAM,+BACN,UAAW,IAAM,CAAC,OAAQ,QAAQ,EAAE,SAASA,EAAS,QAAQ,mBAAmB,WAAW,EAC5F,YAAa,CACT,MAAO,2EACP,QAAS,uFACb,CACJ,CACJ,EAEA,yBAA0B,CAAC,CAAE,KAAAL,CAAK,IAC9BtB,EAAC4B,EAAA,CAAc,KAAI,IACf5B,EAACM,GAAA,CAAkB,KAAMgB,EAAM,CACnC,EAGJ,QAAS,CACL,YAAa,CACT,OACA,YAAa,2CACb,cAAe,GACf,QAAS,CACL,CACI,MAAO,uBACP,MAAO,OACP,QAAS,EACb,EACA,CACI,MAAO,mBACP,MAAO,MACX,EACA,CACI,MAAO,cACP,MAAO,QACX,CACJ,CACJ,CACJ,CACJ,CAAC,ICrIc,SAARO,IAA0C,CAC7C,OACIC,EAACC,EAAM,SAAN,KACGD,EAACE,EAAM,UAAN,CAAgB,IAAI,MAAK,kBAAgB,EAC1CF,EAACE,EAAM,SAAN,KAAe,kCAAgC,IAC5CF,EAACG,GAAA,CAAK,KAAK,yBAAwB,eAAa,CACpD,EACAH,EAACE,EAAM,YAAN,IAAkB,EACnBF,EAACE,EAAM,SAAN,KAAe,kEAEZF,EAAC,UACGA,EAAC,UAAG,sBAAoB,EACxBA,EAAC,UAAG,wBAAsB,CAC9B,EAAK,gFACwEA,EAAC,SAAG,EAAEA,EAAC,SAAG,EAAE,uHAE7F,CACJ,CAER,CAxCA,IAAAI,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,MCMO,SAASC,GAA6BC,EAASC,EAAQ,IAAQ,CAClE,IAAIC,EACJ,OAAO,YAAaC,EAAa,CAC7B,aAAaD,CAAO,EACpBA,EAAU,WAAW,IAAM,CAAEF,EAAK,GAAGG,CAAI,CAAG,EAAGF,CAAK,CACxD,CACJ,CA/BA,IAAAG,GAAAC,EAAA,kBAAAC,MCAA,IAiCaC,GAjCbC,GAAAC,EAAA,kBAAAC,IAiCaH,GAAiB,CAC1B,GAAI,SACJ,GAAI,QACJ,GAAI,SACJ,GAAI,UACJ,GAAI,SACJ,GAAI,SACJ,GAAI,SACJ,GAAI,UACJ,IAAK,SACL,GAAI,UACJ,GAAI,SACJ,GAAI,WACJ,GAAI,UACJ,GAAI,UACJ,GAAI,WACJ,GAAI,YACJ,IAAK,eACL,MAAO,iBACP,IAAK,qBACL,MAAO,8BACP,YAAa,aACjB,ICdO,SAASI,GAAcC,EAAkC,CAC5D,OAAO,IAAI,QAAQC,GAAO,CAElBD,KAAME,GAAOD,EAAIC,GAAMF,EAAG,EAErBA,KAAMG,GAAcA,GAAaH,GAAI,KAAKC,CAAG,GAGlDE,GAAaH,GAAM,CAACC,CAAG,EACvBG,GAAU,EAElB,CAAC,CACL,CAEA,eAAeC,GAAkBC,EAA0C,CACvE,IAAMC,EAAS,IAAI,gBACnBA,EAAO,OAAO,WAAY,SAAS,EACnCA,EAAO,OAAO,MAAOD,EAAI,KAAK,GAAG,CAAC,EAElC,GAAI,CAQA,OAAO,MAPK,MAAM,MAAM,4CAA8CC,EAAO,SAAS,EAAG,CACrF,OAAQ,MACR,QAAS,CACL,OAAU,mBACV,qBAAsBC,EAC1B,CACJ,CAAC,GACgB,KAAK,EACjB,KAAMP,IACH,OAAO,OAAOC,GAAOD,CAAG,EACjBA,EACV,CACT,OAASQ,EAAP,CAEE,QAAQ,MAAM,8BAA+BA,CAAC,EAC9C,IAAMC,EAAgB,OAAO,YAAYJ,EAAI,IAAIN,GAAM,CAACA,EAAI,aAAa,CAAU,CAAC,EACpF,cAAO,OAAOE,GAAOQ,CAAa,EAC3BA,CACX,CACJ,CAEO,SAASC,GAAeC,EAA+B,CAC1D,GAAM,CAAE,eAAAC,CAAe,EAAIC,EAAS,QAAQ,UAE5C,OAAID,kBAAsDE,GAAeH,GAGrEC,iBACG,CAAC,MAAO,MAAO,QAAS,OAAO,EAAE,SAASD,CAAQ,EAChDG,GAAeH,GAEZG,GAAeH,GAAU,YAAY,CACrD,CA7FA,IAyBMV,GAEAC,GAGAC,GA9BNY,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,KACAC,KACAC,KACAC,KAGMrB,GAAqC,CAAC,EAEtCC,GAAoE,CAAC,EAGrEC,GAAYoB,GAAS,SAAY,CACnC,IAAMlB,EAAM,OAAO,KAAKH,EAAY,EAC9BS,EAAW,MAAMP,GAAkBC,CAAG,EAC5C,QAAWN,KAAMM,EAEbH,GAAaH,GAAI,QAAQyB,GAAKA,EAAEb,EAASZ,EAAG,CAAC,EAC7C,OAAOG,GAAaH,EAE5B,CAAC,ICTc,SAAR0B,GAA8C,CAAE,QAAAC,CAAQ,EAA0B,CAKrF,OAHIA,EAAQ,OAAO,KAAOA,EAAQ,OAAO,QAGrC,CAACC,EAAS,QAAQ,UAAU,UAAYD,EAAQ,OAAO,KAAOE,EAAU,eAAe,EAAE,GAClF,KAEJC,EAACC,GAAA,CAAsB,QAASJ,EAAS,CACpD,CAEA,SAASI,GAAsB,CAAE,QAAAJ,CAAQ,EAA0B,CAC/D,GAAM,CAACK,EAAQ,CAAEC,CAAS,EAAIC,GAC1B,IAAMC,GAAcR,EAAQ,OAAO,EAAE,EACrC,KACAS,GAAK,QAAQ,MAAM,6BAA8BA,CAAC,CACtD,EAGA,MAAI,CAACH,GAAaD,GAAUA,IAAW,eAAiBK,GAAeL,GAE/DF,EAAC,QACG,UAAWQ,EAAQC,GAAO,gBAAiBA,GAAO,SAAS,GAC9D,UAAGC,GAAeR,CAAM,CAAE,EAI5B,IACX,CAzDA,IA2BMO,GA3BNE,GAAAC,EAAA,kBAAAC,IAoBAC,IACAC,KACAC,IACAC,IACAC,KACAC,KAEMV,GAAiCW,EAAYC,EAAQ,QAAQ,iBAAiB,CAAC,ICHtE,SAARC,GAAwCC,EAAgEC,EAAiCC,EAAgC,CAC5K,IAAMC,EAAOC,EAAU,QAAQF,EAAa,MAAM,GAAK,CAAC,EAIxD,OAFIC,EAAK,KAAOA,EAAK,QAEjB,CAACE,EAAS,QAAQ,UAAU,UAAYF,EAAK,KAAOC,EAAU,eAAe,EAAE,GACxE,KAEJE,EAACC,GAAA,CACJ,OAAQL,EAAa,OACrB,UAAWF,EACX,QAASC,EACb,CACJ,CAEA,SAASM,GACL,CAAE,OAAAC,EAAQ,UAAAC,EAAW,QAAAC,CAAQ,EAK/B,CACE,GAAM,CAACC,EAAQ,CAAEC,CAAS,EAAIC,GAC1B,IAAMC,GAAcN,CAAM,EAC1B,KACAO,GAAK,QAAQ,MAAM,6BAA8BA,CAAC,CACtD,EAGA,MAAI,CAACH,GAAaD,GAAUA,IAAW,eAAiBK,GAAeL,IAEnED,EAAQ,kBAAoBO,GAAeN,CAAM,EAC1CL,EAACG,EAAA,CAAW,GAAGC,EAAS,GAG5B,IACX,CA5DA,IAAAQ,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,KACAC,IACAC,KACAC,OCtBA,IA6BOC,GA7BPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,KACAC,KACAC,KAOOR,GAAQS,EAAa,CACxB,KAAM,YACN,QAAS,CAACC,EAAK,KAAK,EACpB,YAAa,iDACb,QAAS,CAEL,CACI,KAAM,kCACN,YAAa,CACT,MAAO,sFACP,QAAS,kEACb,CACJ,EAEA,CACI,KAAM,mBACN,IAAK,GACL,OAAQ,GACR,YAAa,CACT,MAAO,wFACP,QAAS,CAACC,EAAUC,EAAkBC,EAAcC,IAE5CD,EAAa,SAAS,kBAAkB,EAAUF,EAE/C,GAAGG,+DAAuEF,MAAqBC,MAAiBC,IAE/H,CACJ,EAEA,CACI,KAAM,mBACN,YAAa,CACT,MAAO,KACP,QAAS,IACb,CACJ,CACJ,EAEA,QAAS,CACL,eAAgB,CACZ,OACA,YAAa,4CACb,QAAS,CACL,CACI,MAAO,YACP,MAAO,YACP,QAAS,EACb,EACA,CACI,MAAO,cACP,MAAO,aACX,CACJ,CACJ,EACA,SAAU,CACN,OACA,YAAa,0DACb,QAAS,EACb,CACJ,EACA,uBAAwBC,GAExB,sBAAAC,GACA,uBAAAC,EACJ,CAAC,IC7FD,IAsBMC,GAECC,GAxBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,IAEMP,GAAoBQ,EAAYC,GAAKA,EAAE,SAAS,SAAS,WAAW,EAEnER,GAAQS,EAAa,CACxB,KAAM,eACN,QAAS,CAACC,EAAK,IAAI,EACnB,YAAa,yDAEb,QAAS,CACL,CACI,KAAM,wCACN,YAAa,CACT,MAAO,2JACP,QAAS,CAACF,EAAGG,EAAMC,EAAIC,EAAcC,EAAYC,IAAe,CAE5D,IAAMC,EACF,GAAGH;AAAA;AAAA;AAAA;AAAA,mCAIQC;AAAA,mCACAC;AAAA,qFACkDA;AAAA,wBAGjE,MAAO,GAAGJ,IAAOK,KAAeJ,GACpC,CACJ,CACJ,CACJ,EAEA,KAAM,IACFK,EAAC,OACG,UAAU,OACV,OAAO,KACP,MAAM,KACN,QAAQ,YACR,KAAK,gBAELA,EAAC,QACG,EAAE,suBACN,CACJ,EAGJ,QAAUC,GAAiBnB,GAAkB,yBAAyB,cAAe,CAAE,QAAS,KAAKmB,EAAQ,OAAO,MAAO,CAAC,CAChI,CAAC,ICPD,SAASC,GAAaC,EAAqBC,EAAY,CACnD,IAAMC,EAAMF,EAAS,UAAUG,GAAKA,EAAE,KAAOF,CAAE,EAC/C,OAAOC,IAAQ,GACTA,EACAF,EAAS,OAASE,EAAM,CAClC,CAEA,SAASE,GAAY,CAAE,UAAAC,EAAW,UAAAC,EAAW,aAAAC,CAAa,EAAQ,CAC9D,GAAIA,EAAc,OAElB,IAAMC,EAAOC,EAAU,eAAe,EAAE,GAElCT,EAAWU,GAAa,YAAYL,CAAS,EAAE,OAAO,OAAOF,GAAKA,EAAE,OAAO,KAAOK,CAAI,EAC5FG,GAAUZ,GAAaC,EAAUM,CAAS,CAC9C,CAEA,SAASM,GAAqB,CAAE,QAAAC,EAAS,cAAAC,CAAc,EAAkD,CACjGA,IAEJC,GAAWhB,GAAaW,GAAa,YAAYG,EAAQ,UAAU,EAAE,OAAQA,EAAQ,EAAE,EAC3F,CAKA,SAASG,GAAU,EAAkB,CACjC,IAAMC,EAAO,EAAE,MAAQ,UACnB,CAACA,GAAQ,EAAE,MAAQ,aACnB,CAACC,GAAO,CAAC,GAAKC,GAAY,CAAC,IAE3B,EAAE,SACFC,GAASH,CAAI,EAEbI,GAAUJ,CAAI,EACtB,CAEA,SAASK,GAAgBjB,EAAmBC,EAAmB,CAC3D,IAAMiB,EAAU,SAAS,eAAe,mBAAqBjB,CAAS,EACtE,GAAI,CAACiB,EAAS,OAEd,IAAMC,EAAK,KAAK,IAAI,SAAS,gBAAgB,aAAc,OAAO,WAAW,EACvEC,EAAOF,EAAQ,sBAAsB,GACvBE,EAAK,OAAS,KAAOA,EAAK,IAAMD,GAAM,OAGtDE,GAAS,cAAc,CACnB,UAAArB,EACA,UAAAC,EACA,MAAO,GACP,SAAU,SACd,CAAC,CAET,CAEA,SAASqB,GAAeV,EAAeW,EAAkB,CACrD,IAAI5B,EAAsBU,GAAa,YAAYmB,GAAqB,aAAa,CAAC,EAAE,OACxF,GAAI,CAACD,EAAS,CACV,IAAMpB,EAAOC,EAAU,eAAe,EAAE,GACxCT,EAAWA,EAAS,OAAOG,GAAKA,EAAE,OAAO,KAAOK,CAAI,CACxD,CAEA,IAAMsB,EAAUC,GAAcd,EACxB,KAAK,IAAIjB,EAAS,OAAS,EAAG+B,EAAI,CAAC,EACnC,KAAK,IAAI,GAAIA,EAAI,CAAC,EAEpBA,EACJ,OAAIH,EACAb,GAAWgB,EAAID,EAAOf,EAAQ,EAE9BJ,GAAUoB,EAAID,EAAOnB,EAAO,EAEzBoB,IAAM,GAAM,OAAY/B,EAASA,EAAS,OAAS+B,EAAI,EAClE,CAGA,SAASV,GAAUJ,EAAe,CAC9B,IAAMJ,EAAUc,GAAeV,EAAM,EAAI,EAEzC,GAAI,CAACJ,EACD,OAAO,KAAKmB,EAAW,SAAS,CAC5B,KAAM,uBACN,UAAWH,GAAqB,aAAa,CACjD,CAAC,EAEL,IAAMI,EAAUC,GAAa,WAAWrB,EAAQ,UAAU,EACpDL,EAAOC,EAAU,eAAe,EAAE,GACxCuB,EAAW,SAAS,CAChB,KAAM,uBACN,QAAAC,EACA,QAAApB,EACA,cAAe,GACf,kBAAmBoB,EAAQ,WAAa,MAAQpB,EAAQ,OAAO,KAAOL,EACtE,cAAe,EACnB,CAAC,EACDc,GAAgBW,EAAQ,GAAIpB,EAAQ,EAAE,CAC1C,CAGA,SAASO,GAASH,EAAe,CAC7B,IAAMJ,EAAUc,GAAeV,EAAM,EAAK,EAErCJ,GAMDmB,EAAW,SAAS,CAChB,KAAM,qBACN,UAAWnB,EAAQ,WACnB,UAAWA,EAAQ,GACnB,QAASA,EAAQ,QACjB,aAAc,EAClB,CAAC,EACDS,GAAgBT,EAAQ,WAAYA,EAAQ,EAAE,GAZ9CmB,EAAW,SAAS,CAChB,KAAM,mBACN,UAAWH,GAAqB,aAAa,CACjD,CAAC,CAWT,CAhLA,IA2BMH,GAEAS,GACFpB,GACAJ,GAIGyB,GAsBDC,GACAC,GAwBApB,GACAC,GAnFNoB,GAAAC,EAAA,kBAAAC,IAoBAC,IACAC,IACAC,IACAC,IACAC,IACAC,IAEMrB,GAAWsB,EAAYC,EAAQ,QAAQ,eAAe,CAAC,EAEvDd,GAAQ,UAAU,SAAS,SAAS,KAAK,EAC3CpB,GAAW,GACXJ,GAAU,GAEduC,EAAsB,aAAc,qBAAqB,EAElDd,GAAQe,EAAa,CACxB,KAAM,aACN,QAAS,CAACC,EAAK,UAAWA,EAAK,GAAG,EAClC,YAAa,oFAEb,OAAQ,CACJpB,EAAW,UAAU,uBAAwBK,EAAoB,EACjEL,EAAW,UAAU,mBAAoBM,EAAS,EAClDN,EAAW,UAAU,qBAAsB5B,EAAW,EACtD4B,EAAW,UAAU,uBAAwBpB,EAAoB,EACjE,SAAS,iBAAiB,UAAWI,EAAS,CAClD,EAEA,MAAO,CACHgB,EAAW,YAAY,uBAAwBK,EAAoB,EACnEL,EAAW,YAAY,mBAAoBM,EAAS,EACpDN,EAAW,YAAY,qBAAsB5B,EAAW,EACxD4B,EAAW,YAAY,uBAAwBpB,EAAoB,EACnE,SAAS,oBAAoB,UAAWI,EAAS,CACrD,CACJ,CAAC,EAEKqB,GAAuB,IAAMtB,GAAW,GACxCuB,GAAY,IAAM3B,GAAU,GAwB5BO,GAAU,GAAqBiB,GAAQ,EAAE,QAAU,EAAE,QACrDhB,GAAe,GAAqB,EAAE,QAAW,CAACgB,IAAS,EAAE,UCnFnE,IAAAkB,GAAA,GAAAC,GAAAD,GAAA,8BAAAE,GAAA,yBAAAC,GAAA,4BAAAC,GAAA,cAAAC,KA8BA,SAASC,GAAmBC,EAAoC,CAC5D,OAAOA,IAAa,EAAiCC,GAAuBC,EAChF,CAEO,SAASN,GAAqBI,EAAoCG,EAA0B,CAC/FJ,GAAmBC,CAAQ,EAAE,IAAIG,CAAc,CACnD,CAEO,SAASN,GAAwBG,EAAoCG,EAA0B,CAClGJ,GAAmBC,CAAQ,EAAE,OAAOG,CAAc,CACtD,CAxCA,IAoBMC,GAEMT,GAKNM,GACAC,GAcOJ,GA1CbO,GAAAC,EAAA,kBAAAC,IAkBAC,KAEMJ,GAAS,IAAIK,EAAO,eAAe,EAE7Bd,QACRA,IAAA,iBACAA,IAAA,WAFQA,QAAA,IAKNM,GAAuB,IAAI,IAC3BC,GAAoB,IAAI,IAcjBJ,GAAaE,GAAuC,CAC7D,IAAMU,EAA0B,CAAC,EAEjC,QAAWP,KAAkBJ,GAAmBC,CAAQ,EACpD,GAAI,CACAU,EAAI,QAAQP,EAAe,CAAC,CAChC,OAASQ,EAAP,CACEP,GAAO,MAAM,wCAAyCO,CAAC,CAC3D,CAGJ,OAAOD,CACX,IC/BA,SAASE,IAAU,CACf,IAAMC,EAAuB,CAAC,EAE9B,OAAO,OAAOC,GAAW,UAAU,CAAC,EAAE,QAAQC,GAAS,CACnDC,GAAkB,YAAYD,EAAM,EAAE,EAAE,WAAW,QAASE,GAAqC,CACzF,CAACC,GAAe,UAAUD,EAAE,QAAQ,EAAE,GAE1CJ,EAAS,KAAK,CACV,UAAWI,EAAE,QAAQ,GAErB,UAAWC,GAAe,cAAcD,EAAE,QAAQ,EAAE,EACpD,cAAe,CACnB,CAAC,CACL,CAAC,CACL,CAAC,EAEDE,EAAe,SAAS,CACpB,KAAM,WACN,QAAS,MACT,SAAUN,CACd,CAAC,CACL,CA5CA,IA8CMO,GASCC,GAvDPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IACAC,IAyBMR,GAAgB,IAClBS,EAACC,EAAA,CACG,QAASlB,GACT,KAAMkB,EAAO,MAAM,IACnB,MAAOA,EAAO,OAAO,MACrB,MAAO,CAAE,UAAW,MAAO,aAAc,MAAO,WAAY,KAAM,GACrE,UAAQ,EAGNT,GAAQU,EAAa,CACxB,KAAM,6BACN,YAAa,4DACb,QAAS,CAACC,EAAK,IAAI,EACnB,aAAc,CAAC,eAAe,EAE9B,oBAAqB,IAAMH,EAACT,GAAA,IAAc,EAE1C,OAAQ,CACJa,KAAkD,KAAK,mBAAmB,CAC9E,EAEA,MAAO,CACHC,KAAqD,KAAK,mBAAmB,CACjF,CACJ,CAAC,ICtED,IAsBMC,GAQCC,GA9BPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,IAEMP,GAAU,CACZ,OAAQ,kDACR,OAAQ,sDACR,SAAU,uCACV,KAAM,yBACN,OAAQ,oCACZ,EAEOC,GAAQO,EAAa,CACxB,KAAM,qBACN,YAAa,0CACb,QAAS,CAACC,EAAK,GAAG,EAClB,aAAc,CAAC,yBAAyB,EACxC,QAAS,CAAC,CACN,KAAM,mBACN,YAAa,CACT,MAAO,iFACP,QAAS,CAACC,EAAGC,IACT,GAAGD,yDAAyDC,kBACpE,CACJ,EAAG,CAEC,KAAM,qCACN,YAAa,CAOT,MAAO,6EACP,QAAS,oBACb,CACJ,CAAC,EAED,SAASA,EAAaC,EAAqB,CACvC,OAAIA,GAAU,EAAEA,aAAkB,mBAAqBA,EAAO,WAAW,cAAc,QAAU,MACtF,KAGPC,EAACC,GAAK,SAAL,CACG,MAAM,eACN,IAAI,eACJ,GAAG,gBAEF,OAAO,KAAKd,EAAO,EAAE,IAAIe,GAAU,CAChC,IAAMC,EAAM,gBAAkBD,EAC9B,OACIF,EAACC,GAAK,SAAL,CACG,IAAKE,EACL,GAAIA,EACJ,MAAOD,EACP,OAAQ,IAAM,KAAK,OAAOJ,EAAKX,GAAQe,EAAO,EAClD,CAER,CAAC,EACDF,EAACC,GAAK,SAAL,CACG,IAAI,mBACJ,GAAG,mBACH,MAAM,MACN,OAAQ,IAAM,OAAO,OAAOd,EAAO,EAAE,QAAQiB,GAAK,KAAK,OAAON,EAAKM,CAAC,CAAC,EACzE,CACJ,CAER,EAGA,OAAON,EAAaI,EAAgB,CAChC,KAAKA,EAAS,mBAAmBJ,CAAG,EAAG,QAAQ,CACnD,CACJ,CAAC,IClED,eAAsBO,GAAqBC,EAAgB,CACvD,MAAMC,GAAU,UAAUD,CAAM,EAEhC,MAAME,EAAe,SAAS,CAC1B,KAAM,0BACN,OAAAF,EACA,UAAWG,GAAqB,aAAa,EAC7C,kBAAmB,iBACvB,CAAC,CACL,CAEO,SAASC,GAAUC,EAAgB,CACtC,GAAM,CAAE,qBAAAC,CAAqB,EAAIC,GAAY,sBAAsB,EAEnEC,GAAWC,GACPC,EAACJ,EAAA,CACI,GAAGG,EACJ,OAAQ,CAAC,UAAU,EACnB,aAAa,OACb,YAAY,sCACZ,YAAa,GACb,SAAS,qBACT,oBAAqB,GACrB,SAAU,MAAOE,GAAc,CAC3B,GAAI,CACA,IAAMC,EAAM,IAAI,IAAID,CAAC,EACrBC,EAAI,aAAa,OAAO,aAAc,MAAM,EAC5CA,EAAI,aAAa,OAAO,YAAa,SAAS,EAC9C,IAAMC,EAAM,MAAM,MAAMD,EAAK,CACzB,QAAS,IAAI,QAAQ,CAAE,OAAQ,kBAAmB,CAAC,CACvD,CAAC,EACK,CAAE,MAAAE,EAAO,OAAAC,CAAO,EAAI,MAAMF,EAAI,KAAK,EACrCE,IAAW,GACXC,EAAS,QAAQ,SAAS,MAAQF,EAClCG,GAAU,yBAAyB,EACnCZ,IAAW,GACJQ,EAAI,SAAW,GACtBI,GAAU,qCAAqC,CAEvD,OAASC,EAAP,CACE,IAAIC,EAAO,UAAU,EAAE,MAAM,sBAAuBD,CAAC,CACzD,CACJ,EACJ,CACJ,CACJ,CAEO,SAASD,GAAUG,EAAc,CACpCC,EAAO,KAAK,CACR,KAAMA,EAAO,KAAK,QAClB,QAASD,EACT,GAAIC,EAAO,MAAM,EACjB,QAAS,CACL,SAAUA,EAAO,SAAS,MAC9B,CACJ,CAAC,CACL,CAIO,SAASC,GAAgBC,EAAgBvB,EAAgB,CAC5D,GAAIuB,EAAO,kBAAoBvB,EAAQ,MAAO,GAE9C,IAAMwB,EAAO,OAAOxB,CAAM,EAC1B,OAAOwB,IAASC,EAAK,YAAY,IAC7BD,IAASC,EAAK,IAAI,IAClBD,IAASC,EAAK,OAAO,EAC7B,CA7FA,IAAAC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,KACAC,KACAC,KACAC,IACAC,MCSA,eAAsBC,GAAWC,EAA+B,CAE5D,OAAO,MADK,MAAM,MAAMC,GAAU,oDAAsDD,CAAE,GACzE,KAAK,CAC1B,CAEA,eAAsBE,GAAUC,EAAgC,CAG5D,OAFAA,EAAO,MAAQC,GAAS,EAEnBD,EAAO,MAML,MAAMF,GAAU,iBAAkB,CACrC,OAAQ,OACR,KAAM,KAAK,UAAUE,CAAM,EAC3B,QAAS,CACL,eAAgB,kBACpB,CACJ,CAAC,EACI,KAAKE,GAAKA,EAAE,KAAK,CAAC,EAClB,KAAKC,IACFC,GAAUD,CAAG,EACNE,GAASF,IAAQ,EAC3B,GAhBDC,GAAU,mCAAmC,EAC7CE,GAAU,EACH,EAef,CAEO,SAASC,GAAaV,EAA0B,CACnD,OAAO,MAAMC,GAAU,gBAAiB,CACpC,OAAQ,OACR,QAAS,IAAI,QAAQ,CACjB,eAAgB,mBAChB,OAAQ,kBACZ,CAAC,EACD,KAAM,KAAK,UAAU,CACjB,MAAOG,GAAS,EAChB,SAAUJ,CACd,CAAC,CACL,CAAC,EAAE,KAAKK,GAAKA,EAAE,KAAK,CAAC,CACzB,CAEA,eAAsBM,GAAaX,EAAY,CAC3C,IAAMM,EAAM,MAAM,MAAML,GAAU,gBAAiB,CAC/C,OAAQ,OACR,QAAS,IAAI,QAAQ,CACjB,eAAgB,mBAChB,OAAQ,kBACZ,CAAC,EACD,KAAM,KAAK,UAAU,CACjB,SAAUD,EACV,MAAOI,GAAS,CACpB,CAAC,CACL,CAAC,EACDG,GAAU,MAAMD,EAAI,KAAK,CAAC,CAC9B,CAEO,SAASM,GAAgBZ,EAA6B,CACzD,OAAO,MAAMC,GAAU,8BAAgCD,CAAE,EACpD,KAAKK,GAAKA,EAAE,KAAK,CAAC,EAClB,KAAK,MAAM,CACpB,CA7FA,IAsBMJ,GAEAG,GAEDI,GA1BLK,GAAAC,EAAA,kBAAAC,IAkBAC,KAEAC,KAEMhB,GAAU,+BAEVG,GAAW,IAAMc,EAAS,QAAQ,SAAS,MAE5CV,QACDA,IAAA,qBAAsB,GAAtB,oBACAA,IAAA,uBAAwB,GAAxB,sBACAA,IAAA,MAAU,GAAV,QAHCA,QAAA,MC1BL,IAqBOW,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAc,IAAM,CAC/B,GAAM,CAAE,OAAAC,EAAQ,UAAAC,CAAU,EAAIC,GAAY,SAAU,UAAW,UAAU,EAEzE,OAAO,SAAuBC,EAAO,CACjC,OAAOA,EAAM,OAAS,SAEdC,EAAC,OAAI,UAAWC,EAAQL,EAAQC,CAAS,EAAG,aAAW,gBAAgB,QAASE,EAAM,UAClFC,EAAC,OAAI,cAAY,QAAQ,MAAM,KAAK,OAAO,KAAK,QAAQ,aACpDA,EAAC,QAAK,KAAK,eAAe,EAAE,2CAA2C,EACvEA,EAAC,QAAK,KAAK,eAAe,EAAE,wIAAwI,CACxK,CACJ,EAGAA,EAAC,OAAI,UAAWJ,EAAQ,aAAW,gBAAgB,QAAS,IAAMG,EAAM,SAAS,GAC7EC,EAAC,OAAI,cAAY,QAAQ,MAAM,KAAK,OAAO,KAAK,QAAQ,aACpDA,EAAC,QAAK,KAAK,eAAe,EAAE,uQAAuQ,CACvS,CACJ,CAEZ,CACJ,CAAC,IC1CD,IA0BOE,GA1BPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,IAEAC,KACAC,KACAC,KAEOT,GAAQU,EAAc,IAAM,CAE/B,IAAMC,EAAIC,EAAQ,QACZ,CACF,CAAE,YAAAC,EAAa,QAAAC,EAAS,QAAAC,EAAS,WAAAC,CAAW,EAC5C,CAAE,UAAAC,EAAW,SAAAC,CAAS,EACtB,CAAE,OAAAC,EAAQ,UAAAC,EAAW,SAAAC,EAAU,eAAAC,EAAgB,QAAAC,EAAS,KAAAC,CAAK,EAC7D,CAAE,SAAAC,CAAS,EACXC,EACA,CAAE,aAAAC,CAAa,CACnB,EAAIC,GACAjB,EAAE,aAAa,EACfA,EAAE,YAAa,UAAU,EACzBA,EAAE,SAAU,OAAO,EACnBA,EAAE,UAAU,EACZA,EAAE,SAAU,UAAW,UAAU,EACjCA,EAAE,cAAc,CACpB,EAEA,OAAO,SAAyB,CAAE,OAAAkB,EAAQ,QAAAC,CAAQ,EAAyC,CACvF,SAASC,IAAY,CACjBC,GAAqBH,EAAO,eAAe,CAC/C,CAEA,SAASI,IAAY,CACjBC,GAAO,KAAK,CACR,MAAO,gBACP,KAAM,4CACN,YAAa,SACb,WAAY,YACZ,UAAW,IAAM,CACbC,GAAaN,EAAO,EAAE,EAAE,KAAKO,IAAO,CAC5BA,GAAI,YACJN,EAAQ,EAEZO,GAAUD,GAAI,OAAO,CACzB,CAAC,CACL,CACJ,CAAC,CACL,CAEA,SAASE,IAAY,CACjBJ,GAAO,KAAK,CACR,MAAO,gBACP,KAAM,gDACN,YAAa,SACb,WAAY,YAEZ,UAAW,IAAMK,GAAaV,EAAO,EAAE,CAC3C,CAAC,CACL,CAEA,OACIW,EAAC,OAAI,UAAWC,EAAQ5B,EAAaE,EAASC,EAAYO,EAASC,EAAM,aAAa,GAClFgB,EAAC,OAAI,UAAWf,GACZe,EAAC,OACG,UAAWC,EAAQtB,EAAQC,CAAS,EACpC,MAAO,CAAE,KAAM,KAAM,EACrB,QAASW,GACT,IAAKF,EAAO,eAAiB,wDACjC,EACAW,EAAC,QACG,UAAWC,EAAQpB,EAAUD,CAAS,EACtC,MAAO,CAAE,MAAO,qBAAsB,MAAO,KAAM,EACnD,QAAS,IAAMW,GAAU,GAExBF,EAAO,QACZ,EACAW,EAAC,KACG,UAAWC,EAAQnB,EAAgBK,CAAY,EAC/C,MAAO,CAAE,SAAU,GAAI,UAAW,EAAG,MAAO,KAAM,GAEjDE,EAAO,OACZ,EACAW,EAAC,OAAI,UAAWC,EAAQxB,EAAWC,EAAUJ,CAAO,EAAG,MAAO,CAC1D,QAAS,KACb,GACI0B,EAAC,OAAI,UAAWd,EAAc,SAC1Bc,EAACE,GAAA,CAAc,KAAK,SAAS,SAAUJ,GAAW,EACjDK,GAAgBd,EAAQe,EAAU,eAAe,EAAE,EAAE,GAClDJ,EAACE,GAAA,CAAc,KAAK,SAAS,SAAUT,GAAW,CAE1D,CACJ,CACJ,CACJ,CAER,CACJ,CAAC,ICvFc,SAARY,GAA6B,CAAE,OAAAC,CAAO,EAAwB,CACjE,GAAM,CAACC,EAASC,EAAGC,EAAWC,CAAO,EAAIC,GAAW,IAAMC,GAAWN,CAAM,EAAG,CAAC,CAAC,EAEhF,GAAIG,EAAW,OAAO,KAEtB,SAASI,EAAW,CAAE,IAAAC,EAAK,OAAAC,CAAO,EAAuC,CACjED,IAAQ,SACRE,GAAU,CACN,OAAQV,EACR,QAAUS,EAA4B,MACtC,KAAM,EACV,CAAC,EAAE,KAAKE,GAAO,EACPA,IAAQ,GAAKA,IAAQ,KACpBF,EAA4B,MAAQ,GACrCL,EAAQ,EAEhB,CAAC,CAET,CAEA,OACIQ,EAAC,OAAI,UAAU,YACXA,EAAAC,EAAA,KACID,EAACE,EAAA,CACG,IAAI,KACJ,QAAQ,UACR,MAAO,CACH,YAAa,MACb,aAAc,OACd,MAAO,uBACX,GACH,cAED,EACCb,GAAS,IAAIc,GACVH,EAACI,GAAA,CACG,IAAKD,EAAO,GACZ,OAAQA,EACR,QAASX,EACb,CACJ,EACCH,GAAS,SAAW,GACjBW,EAACK,EAAM,SAAN,CAAe,MAAO,CAAE,YAAa,MAAO,aAAc,OAAQ,aAAc,MAAO,GAAG,mEAE3F,EAEJL,EAAC,YACG,UAAWM,EAAQC,GAAQ,SAAU,eAAe,EACpD,YAAa,WAAaC,EAAU,QAAQpB,CAAM,GAAG,SACrD,UAAWO,EACX,MAAO,CACH,QAAS,OACT,aAAc,OACd,MAAO,qBACP,OAAQ,sDACR,SAAU,OACV,aAAc,KAClB,EACJ,CACJ,CACJ,CAER,CAzFA,IAyBMY,GAzBNE,GAAAC,EAAA,kBAAAC,IAoBAC,IACAC,IACAC,KACAC,KAEMR,GAAUS,EAAYC,GAAK,OAAOA,EAAE,UAAa,QAAQ,ICzB/D,IA6BOC,GA7BPC,GAAAC,EAAA,kBAAAC,IAoBAC,KACAC,IACAC,IACAC,KACAC,IACAC,KACAC,KACAC,KAEOX,GAAQY,EAAa,CACxB,KAAM,WACN,YAAa,uDACb,QAAS,CAACC,EAAK,YAAaA,EAAK,GAAG,EAEpC,QAAS,CACL,CACI,KAAM,wBACN,YAAa,CACT,MAAO,gDACP,QAAS,6DACb,CACJ,CACJ,EAEA,QAAS,CACL,UAAW,CACP,OACA,YAAa,0BACb,UAAW,IACPC,EAACC,EAAA,CAAO,QAASC,IAAW,yBAE5B,CAER,EACA,cAAe,CACX,OACA,YAAa,sCACb,QAAS,EACb,CACJ,EAEA,MAAM,OAAQ,CACV,IAAMC,EAAWC,EAAS,QAAQ,SAC9B,CAACD,EAAS,cAAgB,CAACA,EAAS,eAExC,WAAW,SAAY,CACnB,IAAME,EAAK,MAAMC,GAAgBC,EAAU,eAAe,EAAE,EAAE,EAC1DJ,EAAS,aAAeE,IACxBG,GAAU,uCAAuC,EACjDL,EAAS,aAAeE,EAEhC,EAAG,GAAI,CACX,EAEA,oBAAsBI,GAClBT,EAACU,EAAA,CAAc,QAAQ,4BACnBV,EAACW,GAAA,CAAY,OAAQF,EAAK,GAAI,CAClC,CAER,CAAC,IC/ED,IAAOG,GAAPC,GAAAC,EAAA,KAAAC,IAAOH,GAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;ICsBf,eAAsBI,GAAeC,EAAc,CAC/C,GAAI,CACA,IAAIC,EAAS,KAAK,MAAMD,CAAI,CAChC,OAASE,EAAP,CACE,cAAQ,IAAIF,CAAI,EACV,IAAI,MAAM,yBAA2B,OAAOE,CAAG,CAAC,CAC1D,CAEA,GAAI,aAAcD,GAAU,aAAcA,EACtC,MAAM,cAAc,IAAI,OAAOE,EAAU,aAAc,KAAK,UAAUF,EAAO,SAAU,KAAM,CAAC,CAAC,EAC/F,MAAM,cAAc,IAAI,OAAOE,EAAU,cAAeF,EAAO,QAAQ,MAEvE,OAAM,IAAI,MAAM,yDAAyD,CACjF,CAEA,eAAsBG,IAAiB,CACnC,IAAMC,EAAW,KAAK,MAAM,cAAc,IAAI,SAASF,EAAU,YAAY,CAAC,EACxEG,EAAW,MAAM,cAAc,IAAI,OAAOH,EAAU,aAAa,EACvE,OAAO,KAAK,UAAU,CAAE,SAAAE,EAAU,SAAAC,CAAS,EAAG,KAAM,CAAC,CACzD,CAEA,eAAsBC,IAAyB,CAC3C,IAAMC,EAAW,+BACXC,EAAS,MAAML,GAAe,EAC9BJ,EAAO,IAAI,YAAY,EAAE,OAAOS,CAAM,EAexC,cAAc,YAAY,eAAeT,EAAMQ,CAAQ,CAE/D,CAcA,eAAsBE,GAAqBC,EAAY,GAAqB,CA0BjE,CACH,GAAM,CAACC,CAAI,EAAI,MAAM,cAAc,YAAY,UAAU,CACrD,QAAS,CACL,CAAE,KAAM,0BAA2B,WAAY,CAAC,MAAM,CAAE,EACxD,CAAE,KAAM,MAAO,WAAY,CAAC,GAAG,CAAE,CACrC,CACJ,CAAC,EAED,GAAIA,EACA,GAAI,CACA,QAAQ,IAAIA,CAAI,EAChB,MAAMb,GAAe,IAAI,YAAY,EAAE,OAAOa,EAAK,IAAI,CAAC,EACpDD,GAAWE,GAAa,CAChC,OAASX,EAAP,CACE,IAAIY,EAAO,cAAc,EAAE,MAAMZ,CAAG,EAChCS,GAAWI,GAAab,CAAG,CACnC,CAER,CACJ,CA1HA,IAiEMW,GAMAE,GAvENC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,KACAC,KA6CMR,GAAe,IAAMS,EAAO,KAAK,CACnC,KAAMA,EAAO,KAAK,QAClB,QAAS,4DACT,GAAIA,EAAO,MAAM,CACrB,CAAC,EAEKP,GAAgBb,GAAaoB,EAAO,KAAK,CAC3C,KAAMA,EAAO,KAAK,QAClB,QAAS,8BAA8B,OAAOpB,CAAG,IACjD,GAAIoB,EAAO,MAAM,CACrB,CAAC,ICpDD,SAASC,IAAmB,CACxB,OACIC,EAACC,EAAM,YAAN,CAAkB,MAAM,iBACrBD,EAACE,GAAA,CAAK,MAAO,CACT,gBAAiB,iCACjB,YAAa,iCACb,MAAO,2BACP,QAAS,MACT,aAAc,OAClB,GACIF,EAACG,EAAA,CAAK,cAAc,UAChBH,EAAC,cAAO,SAAO,EACfA,EAAC,YAAK,iEAA+D,CACzE,CACJ,EACAA,EAACI,EAAA,CAAK,QAAQ,iBAAiB,UAAWC,EAAQ,eAAe,qMAIjE,EACAL,EAACI,EAAA,CAAK,QAAQ,iBAAiB,UAAWC,EAAQ,eAAe,4BAE7DL,EAAC,UACGA,EAAC,UAAG,wBAAuB,EAC3BA,EAAC,UAAG,wBAAuB,CAC/B,CACJ,EACAA,EAACG,EAAA,KACGH,EAACM,EAAA,CACG,QAASC,GACT,KAAMD,EAAO,MAAM,OACtB,iBAED,EACAN,EAACM,EAAA,CACG,QAASE,GACT,KAAMF,EAAO,MAAM,OACtB,iBAED,CACJ,CACJ,CAER,CAlEA,IAoEOG,GApEPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,KACAC,KA+COP,GAAQQ,EAAc,KAAKlB,EAAgB,ICpElD,IAAAmB,GAAA,GAAAC,GAAAD,GAAA,cAAAE,GAAA,oBAAAC,GAAA,YAAAC,GAAA,YAAAC,GAAA,oBAAAC,GAAA,+BAAAC,GAAA,gBAAAC,GAAA,eAAAC,KAkCO,SAASN,GAAgBO,EAAW,CACvC,OACIC,EAAQD,IAAI,UACZC,EAAQD,IAAI,cACZE,GAASF,IAAI,UACZ,EACT,CAsCO,SAASH,GAA2BG,EAAW,CAClD,IAAIG,EAAgB,GACdC,EAAqB,CAAC,EAC5B,OAAAJ,EAAE,cAAc,QAAQK,GAAO,CAC3B,GAAI,CAACC,EAAS,QAAQD,GAAK,QAAS,CAGhC,GAFAR,GAA2BI,EAAQI,EAAI,EAEnCJ,EAAQI,GAAK,QAAS,CACtBE,GAAO,KAAK,uBAAuBF,qBAAuB,EAC1DC,EAAS,QAAQD,GAAK,QAAU,GAChCF,EAAgB,GAChB,MACJ,CACeL,GAAYG,EAAQI,EAAI,GAC1BD,EAAS,KAAKC,CAAG,CAClC,CACJ,CAAC,EACM,CAAE,cAAAF,EAAe,SAAAC,CAAS,CACrC,CAhGA,IA0BMG,GAEOf,GACAG,GACAD,GAEPQ,GAUAM,GA6BOZ,GA2BAE,GAgCAC,GAlIbU,GAAAC,EAAA,kBAAAC,IAkBAF,KAEAG,KACAC,IACAC,KACAC,KAGMR,GAAS,IAAIS,EAAO,gBAAiB,SAAS,EAEvCxB,GAAWe,GACXZ,GAAUM,EACVP,GAAU,CAAC,EAElBQ,GAAWI,EAAS,QAUpBE,GAAgB,OAAO,OAAOP,CAAO,EAG3C,QAAWD,KAAKQ,GACZR,EAAE,cAAc,QAAQiB,GAAK,CACzB,IAAMZ,EAAMJ,EAAQgB,GACpB,GAAIZ,EACAH,GAASe,GAAG,QAAU,GACtBZ,EAAI,aAAe,OAElB,CACD,IAAMa,EAAQ,IAAI,MAAM,UAAUlB,EAAE,kCAAkCiB,GAAG,EAGzEV,GAAO,KAAKW,CAAK,CACrB,CACJ,CAAC,EAGL,QAAWlB,KAAKQ,GACZ,GAAIR,EAAE,SAAWP,GAAgBO,EAAE,IAAI,EACnC,QAAWmB,KAASnB,EAAE,QAClBmB,EAAM,OAASnB,EAAE,KACZ,MAAM,QAAQmB,EAAM,WAAW,IAChCA,EAAM,YAAc,CAACA,EAAM,WAAW,GAC1CzB,GAAQ,KAAKyB,CAAK,EAIjBvB,GAAkBwB,GAAc,kBAAmB,UAA2B,CACvF,QAAWC,KAAQpB,EACXR,GAAgB4B,CAAI,GACpBvB,GAAYG,EAAQoB,EAAK,CAErC,CAAC,EAsBYvB,GAAcsB,GAAc,cAAe,SAAqBpB,EAAW,CACpF,GAAIA,EAAE,MAAO,CAET,GADAO,GAAO,KAAK,kBAAmBP,EAAE,IAAI,EACjCA,EAAE,QACF,OAAAO,GAAO,KAAK,GAAGP,EAAE,sBAAsB,EAChC,GAEX,GAAI,CACAA,EAAE,MAAM,EACRA,EAAE,QAAU,EAChB,OAASsB,EAAP,CACE,OAAAf,GAAO,MAAM,mBAAmBP,EAAE;AAAA,EAAUsB,CAAC,EACtC,EACX,CACJ,CAEA,GAAItB,EAAE,UAAU,OAAQ,CACpBO,GAAO,KAAK,iCAAkCP,EAAE,IAAI,EACpD,QAAWuB,KAAOvB,EAAE,SAChB,GAAI,CACAwB,GAAgBD,EAAKvB,EAAE,IAAI,CAC/B,OAASsB,EAAP,CACE,OAAAf,GAAO,MAAM,8BAA8BgB,EAAI;AAAA,EAAUD,CAAC,EACnD,EACX,CAGR,CAEA,MAAO,EACX,EAAGtB,GAAK,eAAeA,EAAE,MAAM,EAElBD,GAAaqB,GAAc,aAAc,SAAoBpB,EAAW,CACjF,GAAIA,EAAE,KAAM,CAER,GADAO,GAAO,KAAK,kBAAmBP,EAAE,IAAI,EACjC,CAACA,EAAE,QACH,OAAAO,GAAO,KAAK,GAAGP,EAAE,sBAAsB,EAChC,GAEX,GAAI,CACAA,EAAE,KAAK,EACPA,EAAE,QAAU,EAChB,OAASsB,EAAP,CACE,OAAAf,GAAO,MAAM,kBAAkBP,EAAE;AAAA,EAAUsB,CAAC,EACrC,EACX,CACJ,CAEA,GAAItB,EAAE,UAAU,OAAQ,CACpBO,GAAO,KAAK,mCAAoCP,EAAE,IAAI,EACtD,QAAWuB,KAAOvB,EAAE,SAChB,GAAI,CACAyB,GAAkBF,EAAI,IAAI,CAC9B,OAASD,EAAP,CACE,OAAAf,GAAO,MAAM,gCAAgCgB,EAAI;AAAA,EAAUD,CAAC,EACrD,EACX,CAER,CAEA,MAAO,EACX,EAAGtB,GAAK,cAAcA,EAAE,MAAM,IC/J9B,IAkBa0B,GAlBbC,GAAAC,EAAA,kBAAAC,IAkBaH,GAAN,KAAmB,CACd,IAAM,IAAI,IAElB,IAAW,aAAc,CACrB,OAAO,KAAK,IAAI,IACpB,CAEA,IAAW,YAAa,CACpB,OAAO,KAAK,YAAc,CAC9B,CAEO,aAAaI,EAAS,CACpB,KAAK,IAAI,OAAOA,CAAI,GACrB,KAAK,IAAI,IAAIA,CAAI,CACzB,CAEO,IAAIA,EAAS,CAChB,OAAO,KAAK,IAAI,IAAIA,CAAI,CAC5B,CAEO,OAAOA,EAAS,CACnB,OAAO,KAAK,IAAI,OAAOA,CAAI,CAC/B,CAEO,YAAa,CAChB,OAAO,KAAK,IAAI,OAAO,CAC3B,CAEO,IAAOC,EAAiD,CAC3D,MAAO,CAAC,GAAG,KAAK,WAAW,CAAC,EAAE,IAAIA,CAAM,CAC5C,CACJ,ICjDA,IAAAC,GAAA,GAAAC,GAAAD,GAAA,kBAAAE,GAAA,YAAAC,GAAA,oBAAAC,GAAA,YAAAC,GAAA,YAAAC,GAAA,eAAAC,GAAA,YAAAC,GAAA,WAAAC,GAAA,gBAAAC,KA8BA,eAAeC,GAAUC,EAAuB,CAC5C,IAAMC,EAAM,MAAMD,EAElB,GAAIC,EAAI,GAAI,OAAOA,EAAI,MAEvB,MAAAH,GAAcG,EAAI,MACZA,EAAI,KACd,CAEA,eAAsBT,IAAkB,CAEpC,OADAD,GAAU,MAAMQ,GAAO,cAAc,IAAI,OAA+BG,EAAU,WAAW,CAAC,EAC1FX,GAAQ,KAAKY,GAAKA,EAAE,OAASC,EAAO,GACpCV,GAAU,GACFC,GAAa,IAEjBA,GAAaJ,GAAQ,OAAS,CAC1C,CAEA,eAAsBM,IAAS,CAC3B,GAAI,CAACF,GAAY,MAAO,GAExB,IAAMM,EAAM,MAAMF,GAAO,cAAc,IAAI,OAAwBG,EAAU,MAAM,CAAC,EAEpF,OAAID,IACAN,GAAa,IAEVM,CACX,CAEO,SAASR,IAAU,CACtB,OAAOM,GAAO,cAAc,IAAI,OAAuBG,EAAU,QAAQ,CAAC,CAC9E,CAOA,eAAsBN,IAAU,CAC5B,IAAMS,EAAY,MAAMN,GAAO,cAAc,IAAI,OAAuBG,EAAU,UAAU,CAAC,EAE7F,GAAI,CAAC,MAAMH,GAAO,cAAc,IAAI,OAAwBG,EAAU,KAAK,CAAC,EACxE,MAAM,IAAI,MAAM,+DAA+D,EAEnF,IAAMI,EAAY,MAAMP,GAAO,cAAc,IAAI,OAAuBG,EAAU,UAAU,CAAC,EAE7F,OAAOG,EAAU,gBAAkBC,EAAU,eACzCD,EAAU,gBAAkBC,EAAU,aAC9C,CA9EA,IAwBahB,GACFK,GACAD,GACAI,GACAP,GA5BXgB,GAAAC,EAAA,kBAAAC,IAkBAC,KAEAC,KACAC,KAGatB,GAAe,IAAIuB,EAAO,UAAW,OAAO,EAC9ClB,GAAa,GACbD,GAAU,KCNrB,eAAsBoB,IAAwB,CACtCC,IACA,aAAa,SAAY,CAMrB,GALoB,QAChB,uIAGJ,EAEI,GAAI,CACA,MAAMC,GAAO,EACb,MAAMC,GAAQ,EAIV,cAAc,IAAI,SAAS,CACnC,OAASC,EAAP,CACE,QAAQ,MAAMA,CAAC,EACf,MAAM,sEAAsE,CAChF,CAER,CAAC,CAET,CA3CA,IAAAC,GAAAC,EAAA,kBAAAC,IAkBAC,OCiCA,SAASC,GAAcC,EAAqC,CACxD,IAAMC,EAAU,IAAIC,GAAW,CAC3B,SAAUF,EAAK,KACf,GAAIG,GAAW,EACf,IAAK,EACT,CAAC,EACD,OAAAC,EAAe,SAAS,CACpB,KAAM,cACN,KAAMH,CACV,CAAC,EACMA,CACX,CAYe,SAARI,GAA6B,CAAE,OAAAC,EAAQ,gBAAAC,EAAiB,QAAAC,EAAS,gBAAAC,CAAgB,EAAqB,CACzG,GAAM,CAACC,EAASC,CAAU,EAAIC,EAAM,SAA0B,CAAC,CAAC,EAE1DC,EAAiBC,GAAY,EAAE,QAAQR,EAAO,MAE9C,CAACS,EAAcC,CAAe,EAAIJ,EAAM,SAA8B,CAAC,CAAC,EAExE,CAACK,EAAQC,CAAS,EAAIN,EAAM,SAAkC,CAAC,CAAC,EAChE,CAACO,EAAWC,CAAY,EAAIR,EAAM,SAAwB,IAAI,EAE9DS,EAAY,IAAM,OAAO,OAAOJ,CAAM,EAAE,MAAMK,GAAK,CAACA,CAAC,EAE3DV,EAAM,UAAU,IAAM,EACjB,SAAY,CACT,QAAWZ,KAAQM,EAAO,QAAQ,MAAM,EAAG,CAAC,EAAG,CAC3C,IAAMiB,EAASvB,EAAK,GACd,MAAMwB,GAAU,UAAU,GAAGxB,EAAK,IAAI,EAAE,MAAM,IAAMD,GAAcC,CAAI,CAAC,EACvED,GAAcC,CAAI,EACxBW,EAAWc,IAAK,CAAC,GAAGA,GAAGF,CAAM,CAAC,CAClC,CACJ,GAAG,CACP,EAAG,CAAC,CAAC,EAEL,eAAeG,GAAe,CAC1B,GAAI,CAACpB,EAAO,QAAS,CACjBE,EAAQ,EACR,MACJ,CAEA,GAAIF,EAAO,WAAY,CACnB,IAAMqB,EAAS,MAAM,QAAQ,QAAQrB,EAAO,WAAWS,CAAY,CAAC,EACpE,GAAIY,IAAW,GAAM,CACjBP,EAAaO,CAAM,EACnB,MACJ,CACJ,CAEA,IAAIC,EAAgB,GACpB,OAAW,CAACC,EAAKC,EAAK,IAAK,OAAO,QAAQf,CAAY,EAAG,CACrD,IAAMgB,GAASzB,EAAO,QAAQuB,GAC9BhB,EAAegB,GAAOC,GACtBC,IAAQ,WAAWD,EAAK,EACpBC,IAAQ,gBAAeH,EAAgB,GAC/C,CACIA,GAAerB,EAAgB,EACnCC,EAAQ,CACZ,CAEA,SAASwB,GAAiB,CACtB,GAAI,CAACnB,GAAkB,CAACP,EAAO,QAC3B,OAAO2B,EAACC,EAAM,SAAN,KAAe,wCAAsC,EAGjE,IAAMC,EAAU,OAAO,QAAQ7B,EAAO,OAAO,EAAE,IAAI,CAAC,CAACuB,EAAKO,EAAO,IAAM,CACnE,SAASC,GAASC,GAAe,CAC7BtB,EAAgBuB,KAAM,CAAE,GAAGA,GAAG,CAACV,GAAMS,EAAS,EAAE,CACpD,CAEA,SAASE,GAAQC,GAAmB,CAChCvB,EAAUI,KAAM,CAAE,GAAGA,GAAG,CAACO,GAAMY,EAAS,EAAE,CAC9C,CAEA,IAAMC,GAAYC,GAAWP,GAAQ,MACrC,OACIH,EAACS,GAAA,CACG,GAAIb,EACJ,IAAKA,EACL,OAAQO,GACR,SAAUC,GACV,QAASG,GACT,eAAgB3B,EACpB,CAER,CAAC,EAED,OAAOoB,EAACW,EAAA,CAAK,cAAc,SAAS,MAAO,CAAE,IAAK,EAAG,GAAIT,CAAQ,CACrE,CAEA,SAASU,GAAgBC,EAAgBC,EAAe,CACpD,IAAMC,GAAa1C,EAAO,QAAQ,OAASyC,EACrCE,GAAa3C,EAAO,QAAQ,OAAS0C,GACrCE,GAAWD,GAAa3C,EAAO,QAAQ,OAASyC,EAEtD,OACId,EAACkB,GAAA,CAAQ,KAAM7C,EAAO,QAAQ,MAAM2C,GAAYC,EAAQ,EAAE,IAAIE,IAAKA,GAAE,IAAI,EAAE,KAAK,IAAI,GAC/E,CAAC,CAAE,aAAAC,GAAc,aAAAC,EAAa,IAC3BrB,EAAC,OACG,UAAWsB,GAAa,UACxB,aAAcF,GACd,aAAcC,IACjB,IACKN,EACN,CAER,CAER,CAEA,OACIf,EAACuB,GAAA,CAAU,gBAAiB/C,EAAiB,eACzCwB,EAACwB,GAAA,KACGxB,EAACyB,EAAA,CAAK,QAAQ,mBAAmBpD,EAAO,IAAK,CACjD,EACA2B,EAAC0B,GAAA,CAAa,MAAO,CAAE,aAAc,EAAG,UAAW,CAAE,GACjD1B,EAACC,EAAM,YAAN,KACGD,EAACC,EAAM,UAAN,CAAgB,IAAI,MAAK,SAAO5B,EAAO,IAAK,EAC7C2B,EAACC,EAAM,SAAN,KAAgB5B,EAAO,WAAY,EACpC2B,EAAC,OAAI,MAAO,CAAE,UAAW,EAAG,aAAc,EAAG,MAAO,aAAc,GAC9DA,EAAC2B,GAAA,CACG,MAAOlD,EACP,MAAOJ,EAAO,QAAQ,OACtB,QAAS,OACT,WAAY,GACZ,IAAK,EACL,+BAA8B,GAC9B,eAAc,GACd,gBAAiBuC,GACrB,CACJ,CACJ,EACC,CAAC,CAACvC,EAAO,wBACN2B,EAAC,OAAI,MAAO,CAAE,aAAc,CAAE,GAC1BA,EAACC,EAAM,YAAN,KACGD,EAAC4B,EAAA,CAAc,QAAQ,wEACnB5B,EAAC3B,EAAO,uBAAP,IAA8B,CACnC,CACJ,CACJ,EAEJ2B,EAACC,EAAM,YAAN,KACGD,EAACC,EAAM,UAAN,CAAgB,IAAI,MAAK,UAAQ,EACjCF,EAAe,CACpB,CACJ,EACAC,EAAC6B,GAAA,KACG7B,EAACW,EAAA,CAAK,cAAc,SAAS,MAAO,CAAE,MAAO,MAAO,GAChDX,EAACW,EAAA,CAAK,MAAO,CAAE,WAAY,MAAO,GAC9BX,EAAC8B,EAAA,CACG,QAASvD,EACT,KAAMuD,EAAO,MAAM,MACnB,MAAOA,EAAO,OAAO,KACxB,QAED,EACA9B,EAACkB,GAAA,CAAQ,KAAK,wCAAwC,WAAY,CAAC9B,EAAU,GACxE,CAAC,CAAE,aAAAgC,EAAc,aAAAC,CAAa,IAC3BrB,EAAC8B,EAAA,CACG,KAAMA,EAAO,MAAM,MACnB,MAAOA,EAAO,OAAO,MACrB,QAASrC,EACT,aAAc2B,EACd,aAAcC,EACd,SAAU,CAACjC,EAAU,GACxB,cAED,CAER,CACJ,EACCF,GAAac,EAACyB,EAAA,CAAK,QAAQ,mBAAmB,MAAO,CAAE,MAAO,oBAAqB,GAAG,uBAAqBvC,CAAU,CAC1H,CACJ,CACJ,CAER,CA9OA,IAyCMyC,GACAL,GACArD,GAqBAyC,GAhENqB,GAAAC,EAAA,kBAAAC,IAqBAC,KACAC,IACAC,IACAC,KACAC,KACAC,IACAC,IACAC,IACAC,KACAC,KACAC,KAUMjB,GAAkBkB,EAAc,IAAMC,GAAW,oBAAqB,gCAAgC,CAAC,EACvGxB,GAAeyB,EAAYC,EAAQ,QAAQ,YAAa,YAAa,kBAAmB,iBAAiB,CAAC,EAC1G/E,GAAyCgF,GAAU,IAAMC,EAAU,eAAe,EAAE,WAAW,EAqB/FxC,GAAiF,CACnF,IAAqByC,GACrB,IAAqBC,GACrB,IAAqBA,GACrB,IAAsBC,GACtB,IAAqBC,GACrB,IAAqBC,GACrB,IAAwBC,EAC5B,ICxEA,IAkBaC,GAOAC,GAWAC,GAOAC,GA3CbC,GAAAC,EAAA,kBAAAC,IAkBaN,GAAmC,CAC5C,UAAW,GACX,QAAS,OACT,QAAS,GACT,oBAAqB,uCACzB,EAEaC,GAAuC,CAChD,gBAAiB,sCACjB,MAAO,4BACP,aAAc,EACd,OAAQ,UACR,QAAS,QACT,OAAQ,cACR,QAAS,GACT,MAAO,MACX,EAEaC,GAAkC,CAC3C,IAAK,GACL,OAAQ,GACR,oBAAqB,YACrB,QAAS,MACb,EAEaC,GAAoC,CAC7C,OAAQ,OACR,MAAO,OACP,QAAS,IACT,WAAY,cACZ,YAAa,CACjB,ICLA,SAASI,GAAeC,EAAiB,CACrCC,EAAO,KAAK,CACR,QAAAD,EACA,KAAMC,EAAO,KAAK,QAClB,GAAIA,EAAO,MAAM,EACjB,QAAS,CACL,SAAUA,EAAO,SAAS,MAC9B,CACJ,CAAC,CACL,CAMA,SAASC,GAAmB,CAAE,QAAAC,KAAYC,CAAM,EAA4B,CACxE,GAAID,EAAQ,SAAW,EAAG,OAAO,KAEjC,IAAME,EAAeF,EAAQ,SAAW,EAAI,aAAe,2DACrDG,EAAeH,EAAQ,SAAW,EAAI,uCAAyC,IAErF,OACII,EAACC,GAAA,CAAW,GAAGJ,EAAO,MAAO,CAAE,QAAS,MAAO,QAAS,OAAQ,oBAAqB,WAAY,IAAK,EAAG,GAAGA,EAAM,KAAM,GACpHG,EAAC,QAAK,MAAO,CAAE,OAAQ,QAAS,GAC3BF,EAAa,IAACE,EAAC,YAAMJ,EAAQ,KAAK,IAAI,CAAE,EAAQG,CACrD,EACAC,EAACE,EAAA,CAAO,KAAMA,EAAO,MAAM,SAAU,QAAS,IAAM,SAAS,OAAO,GAAG,QAAM,CACjF,CAER,CAQA,SAASC,GAAW,CAAE,OAAAC,EAAQ,SAAAC,EAAU,gBAAAC,EAAiB,aAAAC,EAAc,aAAAC,CAAa,EAAoB,CAEpG,IAAMC,EADWC,GAAY,EACG,QAAQN,EAAO,MAEzC,CAACO,EAAWC,CAAY,EAAIC,EAAM,SAAS,EAAK,EAEtD,SAASC,GAAY,CACjB,OAAOL,GAAgB,SAAWL,EAAO,OAC7C,CAEA,SAASW,GAAY,CACjBC,GAAc,SACHC,GACIjB,EAACkB,GAAA,CAAa,GAAGD,EAAY,OAAQb,EAAQ,gBAAiB,IAAME,EAAgBF,EAAO,IAAI,EAAG,CAEhH,CACL,CAEA,SAASe,GAAgB,CACrB,IAAMC,EAAaN,EAAU,EAG7B,GAAI,CAACM,EAAY,CACb,GAAM,CAAE,cAAAC,EAAe,SAAAC,EAAS,EAAIC,GAA2BnB,CAAM,EACrE,GAAIkB,GAAS,OAAQ,CACjBE,GAAO,MAAM,oCAAoCpB,EAAO,SAASkB,GAAS,KAAK,IAAI,GAAG,EACtFG,GAAW,iCAAmCH,GAAS,KAAK,IAAI,EAAG,QAAS,IAAM,IAAI,EACtF,MACJ,SAAWD,EAAe,CAEtBZ,EAAe,QAAU,GACzBH,EAAgBF,EAAO,IAAI,EAC3B,MACJ,CACJ,CAGA,GAAIA,EAAO,QAAS,CAChBK,EAAe,QAAU,CAACW,EAC1Bd,EAAgBF,EAAO,IAAI,EAC3B,MACJ,CAGA,GAAIgB,GAAc,CAAChB,EAAO,QAAS,CAC/BK,EAAe,QAAU,CAACW,EAC1B,MACJ,CAEA,IAAMM,EAASN,EAAaO,GAAWvB,CAAM,EAAIwB,GAAYxB,CAAM,EAC7DyB,EAAST,EAAa,OAAS,QAErC,GAAI,CAACM,EAAQ,CACTF,GAAO,MAAM,aAAaK,YAAiBzB,EAAO,MAAM,EACxDZ,GAAe,aAAaqC,aAAkBzB,EAAO,MAAM,EAC3D,MACJ,CAEAK,EAAe,QAAU,CAACW,CAC9B,CAEA,OACIpB,EAAC8B,EAAA,CAAK,MAAcC,GAAiB,cAAc,SAAS,aAAcxB,EAAc,aAAcC,GAClGR,EAACgC,GAAA,CACG,SAAUb,EACV,SAAUd,EACV,MAAOS,EAAU,EACjB,KAAMd,EAACiC,EAAA,CAAK,QAAQ,iBAAiB,MAAO,CACxC,OAAQ,GACR,SAAU,SAEV,aAAc,WACd,QAAS,cACT,gBAAiB,EACjB,UAAW,EACX,gBAAiB,WACjB,UAAW,UACf,GACK7B,EAAO,WACZ,EACA,WAAY,IAEZJ,EAAC8B,EAAA,CAAK,MAAO,CAAE,UAAW,OAAQ,MAAO,OAAQ,OAAQ,OAAQ,WAAY,QAAS,GAClF9B,EAACiC,EAAA,CAAK,QAAQ,eAAe,MAAO,CAAE,SAAU,GAAI,GAAI7B,EAAO,IAAK,EACpEJ,EAAC,UAAO,KAAK,SAAS,QAAS,IAAMe,EAAU,EAAG,MAAcmB,GAAc,UAAU,iBACnF9B,EAAO,QACFJ,EAACmC,GAAA,CACC,MAAO,CAAE,MAAOxB,EAAY,GAAK,mBAAoB,EACrD,aAAc,IAAMC,EAAa,EAAI,EACrC,aAAc,IAAMA,EAAa,EAAK,EAC1C,EACEZ,EAACoC,GAAA,CACC,MAAM,KAAK,OAAO,KAClB,MAAO,CAAE,MAAOzB,EAAY,GAAK,mBAAoB,EACrD,aAAc,IAAMC,EAAa,EAAI,EACrC,aAAc,IAAMA,EAAa,EAAK,EAC1C,CACR,CACJ,CACJ,CACJ,CAER,CA4IA,SAASyB,GAAmBC,EAAgB,CACxC,OACItC,EAACa,EAAM,SAAN,KACGb,EAACuC,EAAM,SAAN,KAAe,6BAA2B,EAC1CD,EAAK,IAAKE,GAAgBxC,EAACuC,EAAM,SAAN,CAAe,MAAO,CAAE,OAAQ,QAAS,GAAIC,CAAI,CAAiB,CAClG,CAER,CAEA,SAASC,GAAgBC,EAAoBC,EAA4C,CACrF,OAAOA,EAAOD,IAAa,OAAOE,GAAKC,EAAS,QAAQD,GAAG,OAAO,GAAK,CAAC,CAC5E,CA9UA,IAqCMpB,GAEAsB,GAEAX,GACAC,GA+ICW,GAzLPC,GAAAC,EAAA,kBAAAC,IAkBAC,KAEAC,KACAC,IACAF,KACAG,KACAC,KACAC,IACAC,KAEAC,IACAC,IACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KAEMzC,GAAS,IAAI0C,EAAO,iBAAkB,SAAS,EAE/CpB,GAAcqB,EAAYC,EAAQ,QAAQ,eAAgB,cAAc,CAAC,EAEzEjC,GAAWkC,EAAc,IAAMC,GAAW,iEAAiE,CAAC,EAC5GlC,GAAWiC,EAAc,IAAMC,GAAW,wDAAwD,CAAC,EA+IlGvB,GAAQwB,EAAc,KAAK,UAAoB,CAClD,IAAMC,EAAW9D,GAAY,EACvB+D,EAAU5D,EAAM,QAAQ,IAAM,IAAI6D,GAAsB,CAAC,CAAC,EAEhE7D,EAAM,UAAU,IACL,IAAM,KAAM4D,EAAQ,YAAcE,GAAO,KAAK,CACjD,MAAO,mBACP,KACI3E,EAAA4E,EAAA,KACI5E,EAAC,SAAE,0CAAwC,EAC3CA,EAAC,WAAKyE,EAAQ,IAAI,CAACI,EAAGC,IAClB9E,EAAA4E,EAAA,KACKE,EAAI,GAAK,KACTC,GAAO,MAAM,IAAMF,EAAI,GAAG,CAC/B,CACH,CAAE,CACP,EAEJ,YAAa,cACb,WAAY,SACZ,UAAW,IAAM,SAAS,OAAO,CACrC,CAAC,GACF,CAAC,CAAC,EAEL,IAAMlC,EAAS9B,EAAM,QAAQ,IAAM,CAC/B,IAAMmE,EAAI,CAAC,EACX,QAAW5E,KAAU6E,EAAS,CAC1B,IAAM3C,EAAO2C,EAAQ7E,GAAQ,aAC7B,GAAIkC,EACA,QAAWE,KAAOF,EACd0C,EAAExC,KAAS,CAAC,EACZwC,EAAExC,GAAK,KAAKpC,CAAM,CAG9B,CACA,OAAO4E,CACX,EAAG,CAAC,CAAC,EAECE,EAAgBrE,EAAM,QAAQ,IAAM,OAAO,OAAOoE,CAAO,EAC1D,KAAK,CAACE,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAAG,CAAC,CAAC,EAE/C,CAACC,EAAaC,CAAc,EAAIzE,EAAM,SAAS,CAAE,MAAO,GAAI,OAAQ,KAAM,CAAC,EAE3E0E,EAAYC,GAAkBF,EAAeG,IAAS,CAAE,GAAGA,EAAM,MAAOD,CAAM,EAAE,EAChFE,EAAkBC,GAAmBL,EAAeG,IAAS,CAAE,GAAGA,EAAM,OAAAE,CAAO,EAAE,EAEjFC,EAAgBxF,GAAiD,CACnE,IAAMyF,EAAcR,EAAY,SAAW,WAAaA,EAAY,SAAW,MACzES,EAAeT,EAAY,SAAW,YAAcA,EAAY,SAAW,MAC3EU,EAAUvB,EAAS,QAAQpE,EAAO,OAAO,SAAWA,EAAO,QACjE,OACMyF,GAAeE,GAAaD,GAAgB,CAACC,KAE3C3F,EAAO,KAAK,YAAY,EAAE,SAASiF,EAAY,MAAM,YAAY,CAAC,GAClEjF,EAAO,YAAY,YAAY,EAAE,SAASiF,EAAY,MAAM,YAAY,CAAC,EAGrF,EAEA,OACIrF,EAACuC,EAAM,YAAN,KACGvC,EAACuC,EAAM,UAAN,CAAgB,IAAI,KAAK,UAAWyD,EAAQC,EAAQ,YAAaA,EAAQ,aAAa,GAAG,SAE1F,EAEAjG,EAACL,GAAA,CAAmB,QAAS,CAAC,GAAG8E,EAAQ,WAAW,CAAC,EAAG,MAAO,CAAE,aAAc,EAAG,EAAG,EAErFzE,EAAC,OAAI,MAAckG,IACflG,EAACmG,GAAA,CAAU,MAAOd,EAAY,MAAO,YAAa,yBAA0B,SAAUE,EAAU,MAAO,CAAE,aAAc,EAAG,EAAG,EAC7HvF,EAAC,OAAI,UAAW8C,GAAY,cACxB9C,EAACoG,GAAA,CACG,UAAWtD,GAAY,aACvB,QAAS,CACL,CAAE,MAAO,WAAY,MAAO,MAAO,QAAS,EAAK,EACjD,CAAE,MAAO,eAAgB,MAAO,SAAU,EAC1C,CAAE,MAAO,gBAAiB,MAAO,UAAW,CAChD,EACA,UAAW,OACX,OAAQ4C,EACR,WAAYW,GAAKA,IAAMhB,EAAY,OACnC,cAAe,GACnB,CACJ,CACJ,EAEArF,EAACuC,EAAM,UAAN,CAAgB,UAAW0D,EAAQ,aAAa,SAAO,EAExDjG,EAAC,OAAI,MAAcsG,IACdpB,GAAe,OAASA,EACpB,OAAOC,GAAK,CAACA,EAAE,UAAY,CAAC1C,GAAgB0C,EAAE,KAAMxC,CAAM,EAAE,QAAUiD,EAAaT,CAAC,CAAC,EACrF,IAAI/E,GAAU,CAEX,IAAMmG,EADoB5D,EAAOvC,EAAO,OAAO,OAAOwC,GAAK4B,EAAS,QAAQ5B,GAAG,OAAO,GAChD,OACtC,OAAO5C,EAACG,GAAA,CACJ,gBAAiBqG,GAAQ/B,EAAQ,IAAI+B,CAAI,EACzC,SAAUpG,EAAO,UAAY,CAAC,CAACmG,EAC/B,OAAQnG,EACR,IAAKA,EAAO,KAChB,CACJ,CAAC,EACCJ,EAACiC,EAAA,CAAK,QAAQ,kBAAiB,kCAAgC,CAEzE,EACAjC,EAACuC,EAAM,YAAN,IAAkB,EACnBvC,EAACuC,EAAM,UAAN,CAAgB,IAAI,KAAK,UAAWyD,EAAQC,EAAQ,YAAaA,EAAQ,aAAa,GAAG,kBAE1F,EACAjG,EAAC,OAAI,MAAcsG,IACdpB,GAAe,OAASA,EACpB,OAAOC,GAAKA,EAAE,UAAY1C,GAAgB0C,EAAE,KAAMxC,CAAM,EAAE,QAAUiD,EAAaT,CAAC,CAAC,EACnF,IAAI/E,GAAU,CAEX,IAAMmG,EADoB5D,EAAOvC,EAAO,OAAO,OAAOwC,GAAK4B,EAAS,QAAQ5B,GAAG,OAAO,GAChD,OAChC6D,EAAcrG,EAAO,SACrB,mDACAiC,GAAmBI,GAAgBrC,EAAO,KAAMuC,CAAM,CAAC,EAC7D,OAAO3C,EAAC0G,GAAA,CAAQ,KAAMD,EAAa,IAAKrG,EAAO,MAC1C,CAAC,CAAE,aAAAI,EAAc,aAAAD,CAAa,IAC3BP,EAACG,GAAA,CACG,aAAcK,EACd,aAAcD,EACd,gBAAiBiG,IAAQ/B,EAAQ,aAAa+B,EAAI,EAClD,SAAUpG,EAAO,UAAY,CAAC,CAACmG,EAC/B,OAAQnG,EACZ,CAER,CACJ,CAAC,EACCJ,EAACiC,EAAA,CAAK,QAAQ,kBAAiB,kCAAgC,CAEzE,CACJ,CAER,EAAG,CACC,QAAS,gGACT,QAAS0E,EACb,CAAC,ICjUD,IAqBOC,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,KAEOL,GAAQM,EAAc,KAAKC,EAAc,ICQhD,SAASC,GAAeC,EAA2DC,EAAmB,CAClG,MAAO,UAAY,CACfD,EAAW,EAAI,EACf,GAAI,CACA,MAAMC,EAAO,CACjB,OAASC,EAAP,CAEE,GADAC,GAAa,MAAM,mBAAoBD,CAAC,EACnCA,EAEE,GAAIA,EAAE,MAAQA,EAAE,IAAK,CACxB,GAAM,CAAE,KAAAE,EAAM,KAAAC,EAAM,IAAAC,EAAK,OAAAC,CAAO,EAAIL,EAEpC,GAAIE,IAAS,SACT,IAAII,EAAM,aAAaH;AAAA,qCACtB,CACD,IAAIG,EAAM,oCAAoCF;AAAA,EAC9CE,GAAOD,GAAU,UAAUH,oCAC/B,CAEJ,KACI,KAAII,EAAM,gEAZV,KAAIA,EAAM;AAAA,mBAcdC,GAAO,KAAK,CACR,MAAO,QACP,KACIC,EAACC,GAAA,KACIH,EAAI,MAAM;AAAA,CAAI,EAAE,IAAII,GAAQF,EAAC,WAAKG,GAAO,MAAMD,CAAI,CAAE,CAAM,CAChE,CAER,CAAC,CACL,QACA,CACIZ,EAAW,EAAK,CACpB,CACJ,CACJ,CAOA,SAASc,GAAQ,CAAE,QAAAC,EAAS,KAAAC,EAAM,YAAAC,CAAY,EAA+C,CACzF,OACIP,EAACQ,GAAA,CAAK,MAAO,CAAE,QAAS,MAAO,GAC1BH,EAAQ,IAAI,CAAC,CAAE,KAAAI,EAAM,OAAAC,EAAQ,QAAAC,CAAQ,IAClCX,EAAC,WACGA,EAACY,GAAA,CAAK,KAAM,GAAGN,YAAeG,IAAQ,SAAUF,GAC5CP,EAAC,YAAMS,CAAK,CAChB,EACAT,EAAC,QAAK,MAAO,CACT,WAAY,QACZ,MAAO,oBACX,GAAIW,EAAQ,MAAID,CAAO,CAC3B,CACH,CACL,CAER,CAEA,SAASG,GAAUC,EAAoB,CACnC,GAAM,CAACT,EAASU,CAAU,EAAIC,EAAM,SAASC,EAAO,EAC9C,CAACC,EAAYC,CAAa,EAAIH,EAAM,SAAS,EAAK,EAClD,CAACI,EAAYC,CAAa,EAAIL,EAAM,SAAS,EAAK,EAElDM,GAAcjB,GAAS,QAAU,GAAK,EAE5C,OACIL,EAAAuB,EAAA,KACK,CAAClB,GAAWmB,GACTxB,EAAAuB,EAAA,KACIvB,EAACyB,EAAM,SAAN,KAAe,0DAAwD,EACxEzB,EAACC,GAAA,CAAU,MAAO,CAAE,QAAS,KAAM,GAC/BD,EAAC,SAAGwB,GAAY,QAAUA,GAAY,QAAU,2BAA4B,CAChF,CACJ,EAEAxB,EAACyB,EAAM,SAAN,CAAe,UAAWC,EAAQ,eAC9BJ,EAAa,aAAajB,EAAQ,iBAAmB,aAC1D,EAGHiB,GAActB,EAACI,GAAA,CAAQ,QAASC,EAAU,GAAGS,EAAO,EAErDd,EAAC2B,EAAA,CAAK,UAAWC,EAAQF,EAAQ,cAAeA,EAAQ,UAAU,GAC7DJ,GAActB,EAAC6B,EAAA,CACZ,KAAMA,EAAO,MAAM,MACnB,SAAUT,GAAcF,EACxB,QAAS7B,GAAegC,EAAe,SAAY,CAC/C,GAAI,MAAMS,GAAO,EAAG,CAChBf,EAAW,CAAC,CAAC,EACb,IAAMgB,EAAkB,MAAMC,GAAQ,EACtC,MAAM,IAAI,QAAcC,GAAK,CACzBlC,GAAO,KAAK,CACR,MAAO,kBACP,KAAM,0DACN,YAAa,UACb,WAAY,WACZ,WAAY,CACJgC,EACA,OAAO,cAAc,IAAI,SAAS,EAElC,SAAS,OAAO,EACpBE,EAAE,CACN,EACA,SAAUA,CACd,CAAC,CACL,CAAC,CACL,CACJ,CAAC,GACJ,YAED,EACAjC,EAAC6B,EAAA,CACG,KAAMA,EAAO,MAAM,MACnB,SAAUT,GAAcF,EACxB,QAAS7B,GAAe8B,EAAe,SAAY,CAC9B,MAAMe,GAAgB,EAEnCnB,EAAWE,EAAO,GAElBF,EAAW,CAAC,CAAC,EACboB,EAAO,KAAK,CACR,QAAS,oBACT,GAAIA,EAAO,MAAM,EACjB,KAAMA,EAAO,KAAK,QAClB,QAAS,CACL,SAAUA,EAAO,SAAS,MAC9B,CACJ,CAAC,EAET,CAAC,GACJ,mBAED,CACJ,CACJ,CAER,CAEA,SAASC,GAAMtB,EAAoB,CAC/B,OACId,EAAAuB,EAAA,KACIvB,EAACyB,EAAM,SAAN,CAAe,UAAWC,EAAQ,eAAe,sEAElD,EACA1B,EAACI,GAAA,CAAS,GAAGU,EAAO,QAASG,GAAS,CAC1C,CAER,CAEA,SAASoB,IAAU,CACf,GAAM,CAAC/B,EAAMR,EAAKS,CAAW,EAAI+B,GAAWC,GAAS,YAAY,EAEjEvB,EAAM,UAAU,IAAM,CACdlB,GACAL,GAAa,MAAM,0BAA2BK,CAAG,CACzD,EAAG,CAACA,CAAG,CAAC,EAER,IAAM0C,EAA2B,CAC7B,KAAAlC,EACA,YAAAC,CACJ,EAEA,OACIP,EAACyB,EAAM,YAAN,KACGzB,EAACyB,EAAM,UAAN,CAAgB,IAAI,MAAK,MAAI,EAE9BzB,EAACyB,EAAM,SAAN,KAAgBlB,EAAcD,EAAOR,EAAM,qCACxCE,EAACY,GAAA,CAAK,KAAMN,GACPA,EAAK,MAAM,GAAG,EAAE,MAAM,EAAE,EAAE,KAAK,GAAG,CACvC,EACF,KAAGmC,GAAQ,GAAC,EAEdzC,EAACyB,EAAM,YAAN,IAAkB,EAEnBzB,EAACyB,EAAM,UAAN,CAAgB,IAAI,MAAK,SAAO,EAEhCiB,GAAU1C,EAACoC,GAAA,CAAO,GAAGI,EAAa,EAAKxC,EAACa,GAAA,CAAW,GAAG2B,EAAa,CACxE,CAER,CAlNA,IAoNOG,GApNPC,GAAAC,EAAA,kBAAAC,IAkBAC,KAEAC,IACAC,KACAC,IACAC,KACAC,KACAC,KACAC,KACAC,KAyLOZ,GAAwBa,EAAc,KAAKnB,GAAS,CACvD,QAAS,wFACT,QAASoB,EACb,CAAC,IC3LD,SAASC,IAAkB,CACvB,GAAM,CAACC,EAAa,CAAEC,CAAkB,EAAIC,GAAW,IAAM,cAAc,IAAI,OAAeC,EAAU,gBAAgB,EAAG,YAAY,EACjIC,EAAWC,GAAY,EAE7B,OACIC,EAACC,EAAM,SAAN,KACGD,EAACE,GAAA,IAAW,EACZF,EAACG,EAAM,YAAN,CAAkB,MAAM,iBACrBH,EAACI,GAAA,CAAK,UAAWC,GAAG,iBAAiB,GAS7BL,EAACC,EAAM,SAAN,KACGD,EAACM,EAAA,CACG,QAAS,IAAM,OAAO,cAAc,IAAI,SAAS,EACjD,KAAMA,EAAO,MAAM,OAAO,gBAE9B,EACAN,EAACM,EAAA,CACG,QAAS,IAAM,cAAc,IAAI,OAAOT,EAAU,kBAAkB,EACpE,KAAMS,EAAO,MAAM,MACnB,SAAUZ,IAAgB,cAAc,oBAE5C,EACAM,EAACM,EAAA,CACG,QAAS,IAAM,OAAO,cAAc,YAAY,iBAAiBZ,CAAW,EAC5E,KAAMY,EAAO,MAAM,MACnB,SAAUX,GAAoB,sBAElC,EACAK,EAACM,EAAA,CACG,QAAS,IAAM,cAAc,IAAI,OAAOT,EAAU,cAAe,uCAAuC,EACxG,KAAMS,EAAO,MAAM,MACnB,SAAUX,GAAoB,gBAElC,CACJ,CAER,CACJ,EAEAK,EAACG,EAAM,YAAN,IAAkB,EAEnBH,EAACG,EAAM,YAAN,CAAkB,MAAM,YACrBH,EAACO,GAAA,CACG,MAAOT,EAAS,YAChB,SAAWU,GAAeV,EAAS,YAAcU,EACjD,KAAK,wCAAuC,cAEhD,EAEIR,EAACC,EAAM,SAAN,KACGD,EAACO,GAAA,CACG,MAAOT,EAAS,oBAChB,SAAWU,GAAeV,EAAS,oBAAsBU,EACzD,KAAK,2BAA0B,8BAEnC,EACAR,EAACO,GAAA,CACG,MAAOT,EAAS,mBAChB,SAAWU,GAAeV,EAAS,mBAAqBU,EACxD,KAAK,4BAA2B,gCAEpC,CACJ,CAGR,CACJ,CAER,CAIA,SAASN,IAAa,CAClB,OACIF,EAACI,GAAA,CAAK,MAAO,CACT,QAAS,MACT,QAAS,OACT,cAAe,MACf,aAAc,MACd,UAAW,KACf,GACIJ,EAAC,WACGA,EAACG,EAAM,UAAN,CAAgB,IAAI,MAAK,qBAAmB,EAC7CH,EAACG,EAAM,SAAN,KAAe,oEAEhB,EACAH,EAACS,GAAA,CAAa,MAAO,CAAE,UAAW,kBAAmB,EAAG,CAC5D,EACAT,EAAC,OACG,KAAK,eACL,IAAI,4DACJ,IAAI,GACJ,MAAO,CAAE,WAAY,OAAQ,UAAW,eAAgB,EAC5D,CACJ,CAER,CAnIA,IA0BMK,GA2GCK,GArIPC,GAAAC,EAAA,kBAAAC,IAmBAC,IACAC,KACAC,IACAC,IACAC,KACAC,KAEMd,GAAMe,GAAkB,aAAaA,IA2GpCV,GAAQW,EAAc,KAAK5B,EAAe,ICrIjD,IAAA6B,GAAA,GAAAC,GAAAD,GAAA,aAAAE,KAkDA,SAASC,GAASC,EAAsB,CACpC,GAAM,CAAE,IAAAC,EAAM,iBAAkB,EAAID,EAE9BE,EAAaC,GAAaF,IAAM,WAAa,KAEnD,OAAOG,EAACC,EAAM,YAAN,KACJD,EAACE,EAAA,CAAK,QAAQ,oBAAoB,IAAI,MAAK,kBAAgB,EAE3DF,EAACG,GAAA,CACG,KAAMA,GAAO,MAAM,IACnB,KAAMA,GAAO,MAAM,MACnB,UAAWC,GAAG,QAAQ,EACtB,aAAcP,EACd,aAAcQ,GAAO,MAEpB,OAAO,QAAQN,EAAY,EAAE,IAAI,CAAC,CAACO,EAAK,CAAE,KAAAC,CAAK,CAAC,IACtCP,EAACG,GAAO,KAAP,CACJ,GAAIG,EACJ,UAAWF,GAAG,YAAY,EAC1B,IAAKE,GACJC,CACL,CACH,CACL,EACAP,EAACC,EAAM,YAAN,IAAkB,EACnBD,EAACF,EAAA,IAAW,CAChB,CACJ,CAEe,SAARJ,GAAkBE,EAAsB,CAC3C,OAAOI,EAACQ,EAAA,KACJR,EAACL,GAAA,CAAS,IAAKC,EAAM,IAAK,CAC9B,CACJ,CAnFA,IA6BMa,GAIAL,GAEAD,GAMAJ,GAzCNW,GAAAC,EAAA,kBAAAC,IAkBAC,KAEAC,IACAC,IACAC,IACAC,KACAC,KACAC,KACAC,KACAC,KAEMZ,GAAQ,SAAS,cAAc,OAAO,EAC5CA,GAAM,YAAca,GACpB,SAAS,KAAK,YAAYb,EAAK,EAEzBL,GAAMK,GAAkB,aAAaA,IAErCN,GAASoB,EAAYC,EAAQ,OAAO,qCAAqC,CAAC,EAM1EzB,GAAe,CACjB,gBAAiB,CAAE,KAAM,UAAW,UAAW,IAAMC,EAACyB,GAAA,IAAgB,CAAG,EACzE,eAAgB,CAAE,KAAM,UAAW,UAAW,IAAMzB,EAAC0B,GAAA,IAAW,CAAG,EACnE,cAAe,CAAE,KAAM,SAAU,UAAW,IAAM1B,EAACE,EAAA,CAAK,QAAQ,kBAAiB,oCAAkC,CAAQ,EAC3H,eAAgB,CAAE,KAAM,UAAW,UAAW,IAAMyB,GAAU3B,EAAC2B,GAAA,IAAQ,EAAK,IAAK,EACjF,oBAAqB,CAAE,KAAM,mBAAoB,UAAW,IAAM3B,EAAC4B,GAAA,IAAiB,CAAG,CAC3F,IC/CA,IAwBMC,GAECC,GA1BPC,GAAAC,EAAA,kBAAAC,IAkBAC,KAEAC,IACAC,IACAC,IAEMR,GAAoBS,EAAc,IAAM,cAAyC,OAAO,EAEvFR,GAAQS,EAAa,CACxB,KAAM,WACN,YAAa,kCACb,QAAS,CAACC,EAAK,IAAKA,EAAK,IAAI,EAC7B,SAAU,GACV,QAAS,CAAC,CACN,KAAM,iBACN,YAAa,CACT,CACI,MAAO,qFACP,QAAS,CAACC,EAAGC,EAAWC,KACpBA,EAAQA,EAAM,QAAQ,kBAAmB,EAAE,EACpC,GAAGF,uDAAuDC,MAAcC,KAEvF,CACJ,CACJ,EAAG,CACC,KAAM,6BACN,YAAa,CACT,MAAO,0FACP,QAAS,CAACF,EAAGG,IAAQ,CACjB,IAAMC,EAAoB,oGACpBC,EAAuH,GAC7H,MACI,YAAYF,iUAIZC,EACA,+GACAC,EACA,YAAYF,iBAAmBH,GAEvC,CACJ,CACJ,CAAC,EAED,KAAM,CACF,QAAS,IAAMM,EAAClB,GAAA,CAAkB,IAAI,kBAAkB,EACxD,QAAS,IAAMkB,EAAClB,GAAA,CAAkB,IAAI,iBAAiB,EACvD,OAAQ,IAAMkB,EAAClB,GAAA,CAAkB,IAAI,gBAAgB,EACrD,QAAS,IAAMkB,EAAClB,GAAA,CAAkB,IAAI,iBAAiB,EACvD,KAAM,IAAMkB,EAAClB,GAAA,CAAkB,IAAI,sBAAsB,CAC7D,EAEA,IAAI,iBAAkB,CAClB,OAAO,cAAc,YAAY,EAAE,UAAY,OAAO,SAAS,UAAY,IAC/E,EAEA,IAAI,iBAAkB,CAClB,GAAI,CACA,OAAO,cAAc,YAAY,EAAE,QAE5B,UAAU,eAAe,QAAQ,KAAKmB,GAAKA,EAAE,QAAU,YAAcA,EAAE,QAAU,eAAe,GAAG,SACnG,IACX,MAAE,CACE,OAAO,IACX,CACJ,EAEA,IAAI,gBAAiB,CAGE,MAAO,eAE9B,EAEA,iBAAiBC,EAAyDN,EAAgC,CACtG,GAAM,CAAE,gBAAAO,EAAiB,gBAAAC,EAAiB,eAAAC,CAAe,EAAI,KAE7D,OACIL,EAAAM,EAAA,KACIN,EAACE,EAAA,CAAW,GAAGN,GAAO,WAASW,GAASF,CAAe,EACtDF,GAAmBH,EAACE,EAAA,CAAW,GAAGN,GAAO,YAAUO,CAAgB,EACnEC,GAAmBJ,EAACE,EAAA,CAAW,GAAGN,GAAO,YAAUQ,CAAgB,CACxE,CAER,CACJ,CAAC,ICxGD,IA2BMI,GACAC,GAEFC,GAGGC,GAjCPC,GAAAC,EAAA,kBAAAC,IAmBAC,KACAC,IACAC,KACAC,IACAC,KACAC,IACAC,IAEMb,GAAU,SACVC,GAAe,MAEjBC,GAAM,CAACY,EAAYC,IAAY,GACnCC,EAAQC,GAAKA,EAAE,KAAOA,EAAE,WAAYA,IAAM,CAAE,IAAAf,EAAI,EAAIe,EAAE,EAE/Cd,GAAQe,EAAa,CACxB,KAAM,qBACN,YAAa,uBACb,QAAS,CAACC,EAAK,QAASA,EAAK,oBAAqBA,EAAK,KAAK,EAC5D,QAAS,CACL,YAAa,CACT,YAAa,eACb,OACA,QAAS,GACT,cAAe,EACnB,CACJ,EACA,QAAS,CACL,CAEI,KAAM,cACN,YAAa,CACT,MAAO,iCACP,QAAS,mIACb,CACJ,EACA,CAEI,KAAM,oBACN,YAAa,CACT,MAAO,+EACP,QAAS,oHACb,CACJ,EACA,CAEI,KAAM,+BACN,YAAa,CACT,MAAO,yCACP,QAAS,sHACb,CACJ,EACA,CAEI,KAAM,iDACN,YAAa,CACT,MAAO,wDACP,QAAS,gBACb,CACJ,EACA,CAEI,KAAM,mBACN,UAAW,IAAMC,EAAS,QAAQ,mBAAmB,cAAgB,GACrE,YAAa,CACT,MAAO,yDACP,QAAS,oGACb,CACJ,EACA,CAEI,KAAM,yCACN,YAAa,CACT,MAAO,yEACP,QAAS,4BACb,CACJ,CACJ,EACA,WAAWL,EAASM,EAAUC,EAAS,CAGnC,MAFI,CAAC,KAAK,gBAAgBP,CAAO,GAC7B,CAACM,GACDN,EAAQ,OAAS,GAAKM,EAAS,OAAO,mBAAqBC,EAAgB,GAExE,CAACD,EAAS,WACrB,EACA,gBAAgBN,EAAS,CAIrB,MAHI,CAACA,IACDA,EAAQ,YACRA,EAAUQ,GAAa,WAAWR,EAAQ,SAAS,GACnD,CAACA,GAAWA,EAAQ,KAAK,GAAKA,EAAQ,UAAU,GAAKA,EAAQ,cAAc,GACpE,IAGXA,EAAQ,iBAAmB,CAACb,GAAID,GAAcc,CAAO,GAAMA,EAAQ,OAAS,GAAK,CAACb,GAAIF,GAASe,CAAO,EAC/FA,EAAQ,iBACnB,EACA,gBAAgBA,EAAS,CACrB,GAAI,CAACA,EAAS,MAAO,GACrB,IAAMS,EAAW,KAAK,gBAAgBT,CAAO,EAE7C,GAAIA,EAAQ,OAAS,GAAKS,EAAU,CAChC,IAAMC,EAAkBV,EAAQ,oBAAsB,IAAI,KAAKA,EAAQ,mBAAmB,EAAE,eAAe,EAAI,KAC/GW,GAAUC,GACNC,EAACC,GAAA,CAAU,aAAwB,GAAGF,GAClCC,EAACE,GAAA,KACGF,EAACG,EAAA,KACGH,EAACI,EAAA,CAAK,QAAQ,mBAAmBjB,EAAQ,IAAK,EAC5CA,EAAQ,OAAO,GACba,EAACI,EAAA,CAAK,MAAO,CAAE,gBAAiB,uBAAwB,aAAc,MAAO,YAAa,EAAG,aAAc,CAAE,EAAG,QAAQ,qBAAoB,MAE5I,CAER,CACJ,EACAJ,EAACK,GAAA,CAAa,MAAO,CAAE,aAAc,GAAI,UAAW,GAAI,YAAa,EAAG,WAAY,CAAE,GAClFL,EAACI,EAAA,CAAK,QAAQ,kBAAiB,qEAAmE,GAChGjB,EAAQ,OAAS,IAAI,OAAS,GAC5Ba,EAAAM,EAAA,KACIN,EAACI,EAAA,CAAK,QAAQ,eAAe,MAAO,CAAE,UAAW,EAAG,GAAG,QAEvD,EACAJ,EAACI,EAAA,CAAK,QAAQ,QAAQjB,EAAQ,KAAM,CACxC,EAEHU,GACGG,EAAAM,EAAA,KACIN,EAACI,EAAA,CAAK,QAAQ,eAAe,MAAO,CAAE,UAAW,EAAG,GAAG,oBAEvD,EACAJ,EAACI,EAAA,CAAK,QAAQ,QAAQP,CAAgB,CAC1C,CAER,EACAG,EAACO,GAAA,KACGP,EAACG,EAAA,KACGH,EAACQ,EAAA,CACG,QAAST,EAAW,QACpB,KAAMS,EAAO,MAAM,MACnB,MAAOA,EAAO,OAAO,SACxB,OAED,CACJ,CACJ,CACJ,CACH,CACL,CACA,OAAOZ,CACX,CACJ,CAAC,ICvKD,IAqBOa,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,eACN,QAAS,CAACC,EAAK,GAAG,EAClB,YAAa,2BACb,QAAS,CAAC,CACN,KAAM,eACN,YAAa,CACT,MAAO,uBACP,QAAS,yBACb,CACJ,CAAC,CACL,CAAC,IChCD,IAAOC,GAAPC,GAAAC,EAAA,KAAAC,IAAOH,GAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;ICAf,IAuEaI,EAvEbC,GAAAC,EAAA,kBAAAC,IAkBAC,KAEAC,KACAC,IACAC,KACAC,IACAC,IA+CaT,EAAeU,GAAU,IAAM,CAExC,IAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,UAAYC,GAClB,SAAS,KAAK,YAAYD,CAAK,EAG/B,GAAM,CAAE,MAAAE,CAAM,EAAIC,GAEZC,EAAgBC,EAAYC,EAAQ,QAAQ,0BAA0B,CAAC,EACvEC,EAAaF,EAAYC,EAAQ,QAAQ,kBAAkB,CAAC,EAE5DE,EAAW,uCAEjB,MAAMnB,UAAqBa,CAAM,CAC7B,YAAYO,EAAiBC,EAAe,CACxC,MAAMD,EAAYC,CAAQ,CAC9B,CAEO,UAAY,EACX,MAAQ,EAET,MAAsB,KACtB,OAAwB,KACxB,UAAY,GACZ,OAAiB,MACjB,QAAU,GACV,OAAS,EAET,kBAAoB,GAEpB,aAAaC,EAAc,CAC9B,cAAc,IAAI,OAAOC,EAAU,cAAe,2BAA6BD,CAAI,CACvF,CAGA,IAAW,UAAmB,CAC1B,IAAIE,EAAM,KAAK,UACf,OAAI,KAAK,YACLA,GAAO,KAAK,IAAI,EAAI,KAAK,OAEtBA,CACX,CAEA,IAAW,SAASC,EAAW,CAC3B,KAAK,UAAYA,EACjB,KAAK,MAAQ,KAAK,IAAI,CAC1B,CAEA,MAAO,CACH,KAAK,IAAI,OAAQ,WAAW,CAChC,CAEA,MAAO,CACH,KAAK,IAAI,OAAQ,OAAO,CAC5B,CAEA,UAAUC,EAAiB,CACvB,KAAK,IAAI,MAAO,UAAW,CACvB,MAAO,CACH,eAAgB,KAAK,MAAMA,CAAO,CACtC,CAEJ,CAAC,EAAE,KAAK,IAAM,CACV,KAAK,OAASA,EACd,KAAK,WAAW,CACpB,CAAC,CACL,CAEA,WAAWC,EAAkB,CACzB,KAAK,IAAI,MAAOA,EAAU,QAAU,QAAQ,CAChD,CAEA,UAAUC,EAAe,CACrB,KAAK,IAAI,MAAO,UAAW,CACvB,MAAO,CAAE,MAAAA,CAAM,CACnB,CAAC,CACL,CAEA,WAAWA,EAAgB,CACvB,KAAK,IAAI,MAAO,WAAY,CACxB,MAAO,CAAE,MAAAA,CAAM,CACnB,CAAC,EAAE,KAAK,IAAM,CACV,KAAK,QAAUA,EACf,KAAK,WAAW,CACpB,CAAC,CACL,CAEA,KAAKC,EAAY,CACb,OAAI,KAAK,kBAA0B,QAAQ,QAAQ,GAEnD,KAAK,kBAAoB,GAElB,KAAK,IAAI,MAAO,QAAS,CAC5B,MAAO,CACH,YAAa,KAAK,MAAMA,CAAE,CAC9B,CACJ,CAAC,EAAE,MAAOC,GAAW,CACjB,QAAQ,MAAM,0CAA2CA,CAAC,EAC1D,KAAK,kBAAoB,EAC7B,CAAC,EACL,CAEQ,IAAIC,EAAgCC,EAAeC,EAAY,CAAC,EAAG,CACnE,KAAK,QAAQ,aACZA,EAAK,QAAU,CAAC,GAAG,UAAY,KAAK,OAAO,IAEhD,GAAM,CAAE,OAAAC,CAAO,EAAInB,EAAc,yBAAyB,EAC1D,OAAOG,EAAWa,GAAQG,EAAO,UAAWA,EAAO,YAAa,CAC5D,IAAKf,EAAWa,EAChB,GAAGC,CACP,CAAC,CACL,CACJ,CAEA,IAAME,EAAQ,IAAInC,EAAaoC,EAAgB,CAC3C,qBAAqBN,EAAgB,CACjCK,EAAM,MAAQL,EAAE,MAChBK,EAAM,OAASL,EAAE,QAAU,KAC3BK,EAAM,UAAYL,EAAE,WAAa,GACjCK,EAAM,OAASL,EAAE,eAAiB,EAClCK,EAAM,OAASL,EAAE,eAAiB,MAClCK,EAAM,SAAWL,EAAE,UAAY,EAC/BK,EAAM,kBAAoB,GAC1BA,EAAM,WAAW,CACrB,EACA,oBAAoB,CAAE,QAAAE,CAAQ,EAA2B,CACrDF,EAAM,OAASE,EAAQ,KAAKC,GAAKA,EAAE,SAAS,GAAKD,EAAQ,IAAM,KAC/DF,EAAM,WAAW,CACrB,CACJ,CAAC,EAED,OAAOA,CACX,CAAC,IC/KD,SAASI,GAAUC,EAAY,CAC3B,IAAMC,EAAUD,EAAK,IAAO,GACtBE,EAAI,KAAK,MAAMD,CAAO,EACtBE,EAAI,KAAK,OAAOF,EAAUC,GAAK,EAAE,EACvC,MAAO,GAAGA,EAAE,SAAS,EAAE,SAAS,EAAG,GAAG,KAAKC,EAAE,SAAS,EAAE,SAAS,EAAG,GAAG,GAC3E,CAUA,SAASC,GAAIC,EAAcC,EAAe,CACtC,MAAO,IACHC,EAAC,OACG,UAAWC,EAAQC,EAAG,aAAa,EAAGA,EAAGH,CAAK,CAAC,EAC/C,OAAO,KACP,MAAM,KACN,QAAQ,YACR,KAAK,eACL,aAAYA,EACZ,UAAW,IAEXC,EAAC,QAAK,EAAGF,EAAM,CACnB,CAER,CAYA,SAASK,GAAOC,EAAsD,CAClE,OACIJ,EAAC,UACG,UAAWE,EAAG,QAAQ,EACrB,GAAGE,GAEHA,EAAM,QACX,CAER,CAEA,SAASC,IAAW,CAChB,GAAM,CAACC,EAAWC,EAASC,CAAM,EAAIC,GACjC,CAACC,CAAY,EACb,IAAM,CAACA,EAAa,UAAWA,EAAa,QAASA,EAAa,MAAM,CAC5E,EAEM,CAACC,EAAYC,CAAe,GAAK,IAAM,CACzC,OAAQJ,OACC,MAAO,MAAO,CAAC,UAAW,YAAY,MACtC,UAAW,MAAO,CAAC,QAAS,gBAAgB,MAC5C,QAAS,MAAO,CAAC,MAAO,cAAc,UAClC,MAAM,IAAI,MAAM,wBAAwBA,GAAQ,EAEjE,GAAG,EAGH,OACIR,EAACa,EAAA,CAAK,UAAWX,EAAG,YAAY,EAAG,MAAO,CAAE,IAAK,CAAE,GAC/CF,EAACG,GAAA,CACG,UAAWF,EAAQC,EAAG,QAAQ,EAAGA,EAAGK,EAAU,aAAe,aAAa,CAAC,EAC3E,QAAS,IAAMG,EAAa,WAAW,CAACH,CAAO,GAE/CP,EAACc,GAAA,IAAQ,CACb,EACAd,EAACG,GAAA,CAAO,QAAS,IAAMO,EAAa,KAAK,GACrCV,EAACe,GAAA,IAAS,CACd,EACAf,EAACG,GAAA,CAAO,QAAS,IAAMO,EAAa,WAAW,CAACJ,CAAS,GACpDA,EAAYN,EAACgB,GAAA,IAAY,EAAKhB,EAACiB,GAAA,IAAW,CAC/C,EACAjB,EAACG,GAAA,CAAO,QAAS,IAAMO,EAAa,KAAK,GACrCV,EAACkB,GAAA,IAAS,CACd,EACAlB,EAACG,GAAA,CACG,UAAWF,EAAQC,EAAG,QAAQ,EAAGA,EAAGU,CAAe,CAAC,EACpD,QAAS,IAAMF,EAAa,UAAUC,CAAU,EAChD,MAAO,CAAE,SAAU,UAAW,GAE7BH,IAAW,SAAWR,EAAC,QAAK,UAAWE,EAAG,UAAU,GAAG,GAAC,EACzDF,EAACmB,GAAA,IAAO,CACZ,CACJ,CAER,CAWA,SAASC,IAAU,CACf,GAAM,CAAE,SAAAC,CAAS,EAAIX,EAAa,MAE5B,CAACY,EAAeC,EAAmBjB,CAAS,EAAIG,GAClD,CAACC,CAAY,EACb,IAAM,CAACA,EAAa,UAAWA,EAAa,kBAAmBA,EAAa,SAAS,CACzF,EAEM,CAACc,EAAUC,CAAW,EAAIC,EAAM,SAASJ,CAAa,EAG5D,OAAAI,EAAM,UAAU,IAAM,CAClB,GAAIpB,GAAa,CAACiB,EAAmB,CACjCE,EAAYf,EAAa,QAAQ,EACjC,IAAMiB,EAAW,YAAY,IAAM,CAC/BF,EAAYG,GAAKA,EAAI,GAAI,CAC7B,EAAG,GAAI,EAEP,MAAO,IAAM,cAAcD,CAAQ,CACvC,CACJ,EAAG,CAACL,EAAeC,EAAmBjB,CAAS,CAAC,EAG5CN,EAAC,OAAI,GAAIE,EAAG,cAAc,GACtBF,EAAC6B,EAAM,SAAN,CACG,QAAQ,iBACR,UAAW3B,EAAG,eAAe,EAAI,IAAMA,EAAG,WAAW,EACrD,aAAW,YAEVV,GAAUgC,CAAQ,CACvB,EACAxB,EAAC8B,GAAA,CACG,SAAU,EACV,SAAUT,EACV,MAAOG,EACP,SAAWO,GAAc,CACjBR,IACJE,EAAYM,CAAC,EACbC,GAAKD,CAAC,EACV,EACA,YAAavC,GACjB,EACAQ,EAAC6B,EAAM,SAAN,CACG,QAAQ,iBACR,UAAW3B,EAAG,eAAe,EAAI,IAAMA,EAAG,YAAY,EACtD,aAAW,kBAEVV,GAAU6B,CAAQ,CACvB,CACJ,CAER,CAGA,SAASY,GAAiB,CAAE,MAAAC,CAAM,EAAsB,CACpD,IAAMC,EAAS1B,GAAmB,CAACC,CAAY,EAAG,IAAMA,EAAa,MAAM,EAE3E,OACIV,EAACoC,GAAK,YAAL,CACG,MAAM,qBACN,QAAS,IAAMC,EAAe,SAAS,CAAE,KAAM,oBAAqB,CAAC,EACrE,aAAW,sBAEXrC,EAACoC,GAAK,SAAL,CACG,IAAI,aACJ,GAAG,aACH,MAAM,aACN,OAAQ,IAAM1B,EAAa,aAAa,UAAUwB,EAAM,MAAM,IAAI,EACtE,EACAlC,EAACoC,GAAK,SAAL,CACG,IAAI,aACJ,GAAG,aACH,MAAM,mBAEN,OAAQ,IAAO,QAAQ,QAAQ,QAAQ,UAAkB,UAAUF,EAAM,MAAM,MAAM,GAAG,EAC5F,EACAlC,EAACoC,GAAK,gBAAL,CACG,GAAG,iBACH,IAAI,iBACJ,MAAM,SACN,QAAS,CAAChC,EAAOkC,IACbtC,EAAC8B,GAAA,CACI,GAAG1B,EACJ,IAAKkC,EACL,MAAOH,EACP,SAAU,EACV,SAAU,IACV,SAAUI,GAAUR,GAAcrB,EAAa,UAAUqB,CAAC,CAAC,EAC/D,EAER,CACJ,CAER,CAEA,SAASS,GAAK,CAAE,MAAAN,CAAM,EAAsB,CACxC,IAAMO,EAAMP,GAAO,OAAO,MAEpB,CAACQ,EAAeC,CAAgB,EAAIjB,EAAM,SAAS,EAAK,EAExDkB,EACF5C,EAAA6C,EAAA,KACKJ,GACGzC,EAAC,OACG,GAAIE,EAAG,aAAa,EACpB,IAAKuC,EAAI,IACT,IAAI,cACJ,QAAS,IAAME,EAAiB,CAACD,CAAa,EAC9C,cAAeI,GAAK,CAChBC,GAAY,KAAKD,EAAG,IAAM9C,EAACiC,GAAA,CAAiB,MAAOC,EAAO,CAAE,CAChE,EACJ,CAER,EAGJ,OAAIQ,GAAiBD,EACjBzC,EAAC,OAAI,GAAIE,EAAG,wBAAwB,GAC/B0C,CACL,EAIA5C,EAAC,OAAI,GAAIE,EAAG,cAAc,GACrB0C,EACD5C,EAAC,OAAI,GAAIE,EAAG,QAAQ,GAChBF,EAAC6B,EAAM,SAAN,CACG,QAAQ,mBACR,GAAI3B,EAAG,YAAY,EACnB,UAAWA,EAAG,eAAe,EAC7B,KAAMgC,EAAM,GAAK,OAAS,OAC1B,MAAOA,EAAM,KACb,QAASA,EAAM,GAAK,IAAM,CACtBxB,EAAa,aAAa,UAAUwB,EAAM,IAAI,CAClD,EAAI,QAEHA,EAAM,IACX,EACCA,EAAM,QAAQ,KAAK,GAAK,EAAE,IAAI,GAC3BlC,EAAC6B,EAAM,SAAN,CAAe,QAAQ,iBAAiB,UAAW3B,EAAG,eAAe,GAAG,SAEpEgC,EAAM,QAAQ,IAAI,CAAC,EAAGU,IACnB5C,EAAC0B,EAAM,SAAN,CAAe,IAAK,EAAE,MACnB1B,EAACgD,GAAA,CACG,UAAW9C,EAAG,QAAQ,EACtB,SAAU,CAAC,EAAE,GACb,KAAM,mCAAmC,EAAE,KAC3C,MAAO,CAAE,SAAU,SAAU,EAC7B,MAAO,EAAE,MAER,EAAE,IACP,EACC0C,IAAMV,EAAM,QAAQ,OAAS,GAAKlC,EAAC,QAAK,UAAWE,EAAG,OAAO,GAAI,IAAK,CAC3E,CACH,CACL,EAEHgC,EAAM,MAAM,MACTlC,EAAC6B,EAAM,SAAN,CAAe,QAAQ,iBAAiB,UAAW3B,EAAG,eAAe,GAAG,SAErEF,EAACgD,GAAA,CAAK,GAAI9C,EAAG,aAAa,EACtB,KAAM,kCAAkCgC,EAAM,MAAM,KACpD,OAAO,SACP,UAAWhC,EAAG,OAAO,EACrB,SAAU,CAACgC,EAAM,MAAM,GACvB,MAAO,CAAE,SAAU,SAAU,EAC7B,MAAOA,EAAM,MAAM,MAElBA,EAAM,MAAM,IACjB,CACJ,CAER,CACJ,CAER,CAEO,SAASe,IAAS,CACrB,IAAMf,EAAQzB,GACV,CAACC,CAAY,EACb,IAAMA,EAAa,MACnB,KACA,CAACwC,EAAMC,IAASD,GAAM,GAAMA,EAAK,KAAOC,GAAM,GAAMD,GAAM,OAASC,GAAM,IAC7E,EAEMC,EAAS3C,GACX,CAACC,CAAY,EACb,IAAMA,EAAa,OACnB,KACA,CAACwC,EAAMC,IAASD,GAAM,KAAOC,GAAM,EACvC,EAEM7C,EAAYG,GAAmB,CAACC,CAAY,EAAG,IAAMA,EAAa,SAAS,EAC3E,CAAC2C,EAAYC,CAAa,EAAI5B,EAAM,SAAS,EAAK,EAYxD,OARAA,EAAM,UAAU,IAAM,CAElB,GADA4B,EAAc,EAAK,EACf,CAAChD,EAAW,CACZ,IAAMiD,EAAU,WAAW,IAAMD,EAAc,EAAI,EAAG,GAAa,EACnE,MAAO,IAAM,aAAaC,CAAO,CACrC,CACJ,EAAG,CAACjD,CAAS,CAAC,EAEV,CAAC4B,GAAS,CAACkB,GAAQ,WAAaC,EACzB,KAGPrD,EAACwD,EAAA,CAAc,SAAU,IACrBxD,EAAA6C,EAAA,KACI7C,EAAC6B,EAAM,SAAN,KAAe,mCAAiC,EACjD7B,EAAC6B,EAAM,SAAN,KAAe,8BAA4B,CAChD,GAEA7B,EAAC,OAAI,GAAIE,EAAG,QAAQ,GAChBF,EAACwC,GAAA,CAAK,MAAON,EAAO,EACpBlC,EAACoB,GAAA,IAAQ,EACTpB,EAACK,GAAA,IAAS,CACd,CACJ,CAER,CArWA,IA2BMH,EASAO,GA2BAQ,GACAD,GACAD,GACAG,GACAC,GACAL,GA0DAkB,GAIAF,GAlIN2B,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,KACAC,KACAC,KACAC,IACAC,IACAC,KACAC,KAEMjE,EAAMkE,GAAsB,cAAcA,IAS1C3D,GAMA4D,EAAYC,EAAQ,OAAO,oBAAoB,CAAC,EAqBhDrD,GAAapB,GAAI,0GAA2G,MAAM,EAClImB,GAAcnB,GAAI,+HAAgI,OAAO,EACzJkB,GAAWlB,GAAI,oLAAqL,UAAU,EAC9MqB,GAAWrB,GAAI,2KAA4K,MAAM,EACjMsB,GAAStB,GAAI,ySAA0S,QAAQ,EAC/TiB,GAAUjB,GAAI,uYAAwY,SAAS,EA0D/ZmC,GAAOO,GAAUR,GAAc,CACjCrB,EAAa,KAAKqB,CAAC,CACvB,CAAC,EAEKD,GAASyC,EAAc,IAAM,CAC/B,IAAMC,EAASF,EAAQ,OAAO,iBAAiB,EAC/C,OAAOG,GAAK9E,GAAKA,EAAE,QAAU6E,EAAO7E,EAAE,MAAM,CAAC,CACjD,CAAC,ICrID,IAsBO+E,GAtBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,KAEON,GAAQO,EAAa,CACxB,KAAM,kBACN,YAAa,mBACb,QAAS,CAACC,EAAK,IAAKA,EAAK,IAAKA,EAAK,QAAQ,EAC3C,aAAc,CAAC,yBAAyB,EACxC,QAAS,CACL,CACI,KAAM,2BACN,YAAa,CAET,MAAO,qEAEP,QAAS,oEACb,CACJ,EAEA,CACI,KAAM,kBACN,YAAa,CACT,MAAO,2CACP,QAAS,kDACb,CACJ,EAEA,CACI,KAAM,kBACN,YAAa,CACT,MAAO,2BACP,QAAS,qBACb,CACJ,CACJ,EAEA,aAAc,IAAMC,EAACC,GAAA,IAAO,CAChC,CAAC,ICxDD,IAwBOC,GAxBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,IACAC,KAEAC,EAAsB,eAAgB,KAAK,EACpCR,GAAQS,EAAa,CACxB,KAAM,eACN,YAAa,wGACb,QAAS,CACLC,EAAK,IACLA,EAAK,MACT,EAEA,QAAS,CAAC,CACN,KAAM,0CACN,YAAa,CAAC,CACV,MAAO,0EACP,QAAS,CAACC,EAAGC,EAAeC,EAAMC,IAAiB,GAAGF,IAAgBC,4BAA+BC,GACzG,CAAC,CACL,EAAG,CACC,KAAM,8BACN,UAAW,IAAMC,EAAS,QAAQ,aAAa,mBAC/C,YAAa,CACT,MAAO,8DACP,QAAS,iBACb,CACJ,EAAG,CACC,KAAM,8BACN,UAAW,IAAMA,EAAS,QAAQ,aAAa,0BAC/C,YAAa,CACT,MAAO,0EACP,QAAS,CAACJ,EAAGK,EAAkCC,IAAmB,GAAGD,IAAmCC,GAC5G,CACJ,CAAC,EAED,QAAS,CACL,mBAAoB,CAChB,YAAa,6BACb,OACA,QAAS,GACT,cAAe,EACnB,EACA,0BAA2B,CACvB,YAAa,4CACb,OACA,QAAS,GACT,cAAe,EACnB,CACJ,CACJ,CAAC,ICRD,SAASC,GAAYC,EAAWC,EAAS,CACrCA,EAAU,CAEN,cAAe,CAAC,EAChB,IAAK,GACL,uBAAwB,CAAC,EACzB,GAAGA,CACP,EACA,IAAMC,EAAQC,GAAkB,gBAAgBH,CAAS,EACzDI,GAAe,YAAYJ,EAAWC,EAAS,OAAQG,GAAe,8BAA8BF,CAAK,CAAC,EACrG,KAAK,IAAM,CACJA,GACAG,EAAe,SAAS,CAAE,KAAM,uBAAwB,UAAAL,CAAU,CAAC,CAE3E,CAAC,CACT,CA3EA,IAwDMM,GACAF,GACAD,GAoBCI,GA9EPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IAgCMX,GAAUY,EAAYC,EAAQ,QAAQ,gBAAgB,CAAC,EACvDf,GAAiBc,EAAYC,EAAQ,QAAQ,gCAAiC,aAAa,CAAC,EAC5FhB,GAAoBe,EAAYC,EAAQ,QAAQ,iBAAiB,CAAC,EAmBxEC,EAAsB,uBAAwB,SAAS,EAChDb,GAAQc,EAAa,CACxB,KAAM,uBACN,YAAa,gGACb,QAAS,CAACC,EAAK,MAAM,EACrB,aAAc,CAAC,aAAa,EAC5B,SAAU,CACN,CACI,KAAM,QACN,YAAa,0CACb,YACA,QAAS,CAAC,EACV,QAAS,CAACC,EAAGC,IAAQ,CACjB,IAAMC,EAAsBnB,GAAQ,SAAS,EAC7C,GAAImB,IAAU,KAAM,CAChBC,EAAeF,EAAI,QAAQ,GAAI,CAC3B,QAAS,oCACb,CAAC,EACD,MACJ,CAEAzB,GAAYyB,EAAI,QAAQ,GAAI,CACxB,QAAS,kCAAkCC,EAAM,IACrD,CAAC,CACL,CACJ,EACA,CACI,KAAM,QACN,YAAa,0CACb,YACA,QAAS,CAAC,EACV,QAAS,CAACF,EAAGC,IAAQ,CACjB,IAAMC,EAAsBnB,GAAQ,SAAS,EAC7C,GAAImB,IAAU,KAAM,CAChBC,EAAeF,EAAI,QAAQ,GAAI,CAC3B,QAAS,oCACb,CAAC,EACD,MACJ,CACAzB,GAAYyB,EAAI,QAAQ,GAAI,CACxB,QAAS,kCAAkCC,EAAM,MAAM,IAC3D,CAAC,CACL,CACJ,EACA,CACI,KAAM,SACN,YAAa,2CACb,YACA,QAAS,CAAC,EACV,QAAS,CAACF,EAAGC,IAAQ,CACjB,IAAMC,EAAsBnB,GAAQ,SAAS,EAC7C,GAAImB,IAAU,KAAM,CAChBC,EAAeF,EAAI,QAAQ,GAAI,CAC3B,QAAS,oCACb,CAAC,EACD,MACJ,CACAzB,GAAYyB,EAAI,QAAQ,GAAI,CACxB,QAASC,EAAM,QAAQ,GAAG,cAAc,OAC5C,CAAC,CACL,CACJ,CACJ,CACJ,CAAC,IC5ID,IAAAE,GAAA,GAAAC,GAAAD,GAAA,aAAAE,KAyDA,SAASC,GAAU,CAAE,MAAAC,EAAO,OAAAC,EAAQ,IAAAC,EAAK,MAAAC,EAAO,SAAAC,CAAS,EAAmB,CACxE,OACIC,EAACC,EAAM,SAAN,KACGD,EAAC,YAAMD,EAAS,WAAW,QAAQ,CAAC,EAAE,GAAC,EACvCC,EAAC,YAAMD,EAAS,UAAU,QAAQ,CAAC,EAAE,GAAC,EACtCC,EAAC,YAAMF,GAAO,QAAQ,CAAC,GAAK,EAAG,EAC/BE,EAAC,YAAKA,EAAC,WAAKL,EAAM,IAAEC,GAAU,IAAKC,CAAI,CAAM,CACjD,CAER,CAQA,SAASK,GAAc,CAAE,MAAAC,EAAO,KAAAC,EAAM,SAAAC,CAAS,EAAuB,CAClE,IAAMC,EAAYF,EAAK,KAAK,GAAK,EAAE,SAAS,GAAG,WAAa,EAExDG,EAAgBD,EACdE,EAAUJ,EAAK,IAAIP,GAAO,CAE5B,IAAMY,EAAYZ,EAAI,WAAaU,EAE7BG,GAAcD,EAAYH,GAAa,IACvCK,GAAaF,EAAYF,GAAiB,IAEhD,OAAAA,EAAgBE,EAET,CAAE,WAAAC,EAAY,UAAAC,CAAU,CACnC,CAAC,EAED,OACIX,EAACY,EAAM,YAAN,CAAkB,MAAOT,EAAO,IAAI,MACjCH,EAAC,YACIK,GACGL,EAAC,OAAI,MAAO,CAAE,MAAO,wBAAyB,aAAc,EAAG,WAAY,MAAO,GAAG,mBAC/D,IAAI,KAAKK,CAAQ,EAAG,aAAa,CACvD,EAEJL,EAAC,OAAI,MAAO,CAAE,MAAO,wBAAyB,QAAS,OAAQ,oBAAqB,sBAAuB,IAAK,WAAY,WAAY,MAAO,GAC3IA,EAAC,YAAK,OAAK,EACXA,EAAC,YAAK,UAAQ,EACdA,EAAC,YAAK,OAAK,EACXA,EAAC,QAAK,MAAO,CAAE,aAAc,CAAE,GAAG,OAAK,EACtCa,GAAoB,KAAK,IAAI,CAAChB,EAAKiB,IAChCd,EAACN,GAAA,CAAU,IAAKoB,EAAI,GAAGjB,EAAK,SAAUW,EAAQM,GAAI,CACrD,CACL,CACJ,CACJ,CAER,CAMA,SAASC,GAAY,CAAE,MAAAC,CAAM,EAAqB,CAC9C,IAAMC,EAAQD,EAAM,MAAM;AAAA,CAAI,EAE9B,OACIhB,EAACY,EAAM,YAAN,CAAkB,MAAM,eAAe,IAAI,MACxCZ,EAAC,YACGA,EAACkB,EAAA,CAAK,cAAc,SAAS,MAAO,CAAE,MAAO,wBAAyB,IAAK,EAAG,WAAY,MAAO,GAC5FD,EAAM,IAAIE,GACPnB,EAAC,YAAMmB,CAAK,CACf,CACL,CACJ,CACJ,CAER,CAEA,SAASC,IAAoB,CACzB,GAAI,CAACP,IAAqB,KAAM,OAAOb,EAAC,WAAI,YAAU,EAEtD,IAAMqB,EAAcR,GAAoB,UAAU,KAAKS,GAAKA,EAAE,WAAW,GAAG,YAE5E,OACItB,EAACC,EAAM,SAAN,KACGD,EAACE,GAAA,CACG,MAAM,kBACN,KAAMW,GAAoB,KAC1B,SAAUA,GAAoB,SAClC,EAEAb,EAAC,OAAI,MAAO,CAAE,UAAW,CAAE,GAAG,MAAM,EACnCqB,GAAerB,EAACe,GAAA,CAAY,MAAOM,EAAa,CACrD,CAER,CArJA,IAgDMR,GAuGCpB,GAvJP8B,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,KACAC,IACAC,IACAC,KA0BMjB,GAAsBkB,EAAYC,EAAQ,QAAQ,gBAAiB,aAAc,QAAQ,CAAC,EAuGzFvC,GAAQwC,EAAc,KAAKb,EAAiB,ICvJnD,IAuBOc,GAvBPC,GAAAC,EAAA,kBAAAC,IAmBAC,IACAC,IACAC,IAEON,GAAQO,EAAa,CACxB,KAAM,iBACN,YAAa,4CACb,QAAS,CAACC,EAAK,IAAI,EACnB,QAAS,CAAC,CACN,KAAM,gCACN,YAAa,CACT,MAAO,oDACP,QAAS,wHACb,CACJ,CAAC,EACD,kBAAmBC,EAAc,IAAM,cAA+B,OAAO,CACjF,CAAC,ICnCD,IAsBOC,GAtBPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IAEON,GAAQO,EAAa,CACxB,KAAM,WACN,YAAa,4CACb,QAAS,CAACC,EAAK,GAAG,EAClB,aAAc,CAAC,kBAAkB,EACjC,QAAS,CACL,CACI,KAAM,WACN,YAAa,CACT,MAAO,2BACP,QAAS,CAACC,EAAGC,IAAY,sDAAsDA,YACnF,CACJ,CACJ,EAEA,SAASC,EAAa,CAElBA,EAAMA,EAAI,QAAQ,MAAO,MAAM,EAC/B,IAAMC,EAAYD,EAAI,MAAM,aAAa,GACnC,OAAO,CAACE,EAAMC,IAAS,KAAK,IAAID,EAAMC,EAAK,MAAM,EAAG,GAAQ,GAAK,EAEvE,OAAKF,EACED,EAAI,QAAQ,IAAI,OAAO,MAAMC,KAAc,IAAI,EAAG,EAAE,EADpCD,CAE3B,EAEA,YAAYI,EAAoB,CAC5BA,EAAI,QAAUA,EAAI,QAAQ,QAAQ,kBAAmBC,GAAK,CACtD,IAAMC,EAAQD,EAAE,MAAM;AAAA,CAAI,EAC1B,GAAIC,EAAM,OAAS,EAAG,OAAOD,EAC7B,IAAIE,EAAS,GACb,OAAID,EAAMA,EAAM,OAAS,KAAO,QAAOC,EAASD,EAAM,IAAI,GACnD,GAAGA,EAAM;AAAA,EAAO,KAAK,SAASA,EAAM,MAAM,CAAC,EAAE,KAAK;AAAA,CAAI,CAAC;AAAA,EAAMC,GACxE,CAAC,CACL,EAEA,OAAQ,CACJ,KAAK,QAAUC,GAAmB,CAACV,EAAGM,IAAQ,KAAK,YAAYA,CAAG,CAAC,EACnE,KAAK,QAAUK,GAAmB,CAACC,EAAMC,EAAMP,IAAQ,KAAK,YAAYA,CAAG,CAAC,CAChF,EAEA,MAAO,CACHQ,GAAsB,KAAK,OAAO,EAClCC,GAAsB,KAAK,OAAO,CACtC,CACJ,CAAC,IClED,IAqBIC,GACEC,GAGCC,GAzBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAGMN,GACF,yFAEGC,GAAQM,EAAa,CACxB,KAAM,oBACN,YAAa,wDACb,QAAS,CAACC,EAAK,GAAG,EAClB,QAAS,CACL,CACI,KAAM,2DACN,YAAa,CACT,MAAO,8VACP,QAAS,CAACC,EAAGC,EAAMC,IACf,GAAGD,wHAA2HC,IACtI,CACJ,CACJ,EAEA,MAAM,OAAQ,CACVZ,GAAc,MAAM,MAAMC,EAAS,EAC9B,KAAKY,GAAOA,EAAI,KAAK,CAAC,EACtB,MAAM,GAAK,QAAQ,MAAM;AAAA,EAA2D,CAAC,CAAC,CAC/F,EAEA,MAAO,CACHb,GAAc,MAClB,EAEA,YAAYc,KAAiBC,EAAW,CACpC,IAAIC,EAAQ,EACZ,OAAOhB,KAAcc,IAAO,QAAQ,MAAO,IAAM,CAC7C,IAAMG,EAAMF,EAAKC,GACjB,OAAAA,IACOC,CACX,CAAC,CACL,CACJ,CAAC,ICXD,SAASC,GAAOC,EAAyB,CACrC,OAAOA,EACF,MAAM,GAAG,EACT,IAAIC,GAAK,CACN,IAAIC,EAAU,GACRC,EAAYF,EAAE,YAAY,EAEhC,GAAIA,EAAE,OAAS,EACX,OAAOA,EAIX,OAAW,CAACG,EAAMC,CAAO,IAAKC,GACtBL,EAAE,SAASG,CAAI,IACfH,EAAIA,EAAE,QAAQG,EAAMC,CAAO,EAC3BH,EAAU,IAmBlB,OAdIC,EAAU,SAAS,GAAG,GAAK,CAACA,EAAU,SAAS,KAAK,IACpDF,EAAIA,EAAE,QAAQ,IAAK,KAAK,EACxBC,EAAU,IAEVC,EAAU,SAAS,GAAG,GAAK,CAACA,EAAU,SAAS,KAAK,IACpDF,EAAIA,EAAE,QAAQ,IAAK,KAAK,EACxBC,EAAU,IAEVC,EAAU,SAAS,GAAG,GAAKF,EAAE,OAAS,IACtCA,EAAIA,EAAI,KAAYA,EAAE,MAAM,CAAC,EAC7BC,EAAU,IAIVA,IAKCC,EAAU,SAAS,GAAG,IACvBF,EAAIA,EAAE,QAAQ,IAAK,IAAI,GAEvB,KAAK,MAAM,KAAK,OAAO,EAAI,CAAC,IAAM,GAClCA,EAAE,QAAQ,IAAK,IAAI,EAEnB,KAAK,MAAM,KAAK,OAAO,EAAI,CAAC,IAAM,GAAK,CAACC,IACxCD,EAAIA,EAAE,GAAK,IAAMA,EAAE,GAAK,IAAMA,GAE9B,KAAK,MAAM,KAAK,OAAO,EAAI,CAAC,IAAM,IAClCA,EACIA,EACA,IACAM,GAAQ,KAAK,MAAM,KAAK,OAAO,EAAIA,GAAQ,MAAM,IAEzDN,EAAIA,EAAE,WAAW,IAAK,GAAG,EAAE,WAAW,IAAK,GAAG,GACvCA,CACX,CAAC,EAAE,KAAK,GAAG,CACnB,CAxGA,IAsBMM,GAMAD,GAiFCE,GA7GPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IAEMP,GAAU,CACZ,MAAO,MAAO,MAAO,MAAO,gBAAO,gBAAO,8BAAU,uBAAS,8BAC7D,uCAAiB,oBAAqB,MAAO,MAAO,KAAM,QAC1D,iCAAc,uBAAS,YAAa,WAAY,UACpD,EAEMD,GAAe,CACjB,CAAC,OAAQ,KAAK,EACd,CAAC,KAAM,QAAQ,EACf,CAAC,MAAO,OAAO,EACf,CAAC,MAAO,QAAQ,EAChB,CAAC,QAAS,OAAO,EACjB,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,OAAO,EAChB,CAAC,MAAO,OAAO,EACf,CAAC,OAAQ,OAAO,EAChB,CAAC,SAAU,OAAO,EAClB,CAAC,OAAQ,OAAO,EAChB,CAAC,MAAO,MAAM,EACd,CAAC,OAAQ,QAAQ,EACjB,CAAC,QAAS,OAAO,EACjB,CAAC,OAAQ,MAAM,CACnB,EAiEOE,GAAQO,EAAa,CACxB,KAAM,WACN,YAAa,yBACb,QAAS,CAACC,EAAK,IAAI,EACnB,aAAc,CAAC,aAAa,EAE5B,SAAU,CACN,CACI,KAAM,SACN,YAAa,yBACb,QAAS,CAACC,EAAqB,EAE/B,QAASC,IAAS,CACd,QAASnB,GAAOoB,GAAWD,EAAM,UAAW,EAAE,CAAC,CACnD,EACJ,CACJ,CACJ,CAAC,IC9HD,IAuBME,GAMCC,GA7BPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IACAC,IACAC,IAEMR,GAAS,CAAC,EAKhBS,EAAsB,uBAAwB,eAAe,EACtDR,GAAQS,EAAa,CACxB,KAAM,uBACN,YAAa,4DACb,QAAS,CAACC,EAAK,IAAKA,EAAK,KAAK,EAC9B,QAAS,CACL,CACI,KAAM,4BAKN,YAAa,CAET,CACI,MAAO,kDACP,QAAS,0FACb,EAEA,CACI,MAAO,uCACP,QAAS,wHACb,CACJ,CACJ,EACA,CACI,KAAM,wCACN,YAAa,CACT,MAAO,oBACP,QAAS,6FACb,CACJ,CACJ,EAEA,SAASC,EAAgBC,EAAQ,CAE7B,IAAMC,EAAKD,GAAG,IAAMA,EAAE,MAAM,QAAQ,GACpC,GAAIE,GAAqB,kBAAkB,IAAMD,EAAI,CACjDF,EAAG,EACH,MACJ,CAEA,IAAMI,EAAQhB,GAAOc,KAAQ,CAAE,QAAS,OAAQ,EAAG,CAAE,EAErD,aAAaE,EAAK,OAAO,EAGrB,EAAEA,EAAK,GAAK,GACZJ,EAAG,EACH,OAAOZ,GAAOc,IAGdE,EAAK,QAAU,WAAW,IAAM,CAC5B,OAAOhB,GAAOc,EAClB,EAAG,GAAG,CAEd,CACJ,CAAC,ICrFD,IA2BMG,GACAC,GAEAC,GAEAC,GACCC,GAjCPC,GAAAC,EAAA,kBAAAC,IAoBAC,IACAC,IACAC,KAEAC,IACAC,IAEMZ,GAAaa,EAAc,IAAMC,GAAKC,GAAKA,EAAE,WAAW,QAAQ,SAAS,EAAE,SAAS,qBAAqB,CAAC,CAAC,EAC3Gd,GAAaY,EAAc,IAAMC,GAAKC,GAAKA,EAAE,MAAM,SAAS,EAAE,SAAS,cAAc,CAAC,CAAC,EAEvFb,GAAmBc,EAAYC,EAAQ,QAAQ,mBAAmB,CAAC,EAEnEd,GAAW,+CACVC,GAAQ,IAAI,KAAqC,CACpD,KAAO,YACP,QAAU,CAACc,EAAK,GAAG,EACnB,YAAc,6GAEd,aAAe,CAAC,yBAAyB,EAEzC,UAAUC,EAAa,CACnB,IAAMC,EAAI,IAAI,IAAID,CAAG,EACrBC,EAAE,aAAa,IAAI,OAAQ,KAAK,EAChCD,EAAMC,EAAE,SAAS,EAEjBC,GAAUC,GACNC,EAACC,GAAA,CAAU,eAA0B,GAAGF,GACpCC,EAACvB,GAAA,CACG,cAAe,GACf,SAAUmB,EACV,IAAKA,EACL,oBAAqB,IAAMI,EAACtB,GAAA,IAAW,EAC3C,CACJ,CACH,CACL,CAEA,QAAU,CACN,CACI,KAAM,eACN,YAAa,CAET,MAAO,mCACP,QAAS,CAACwB,EAAGC,IAAQ,QAAQA,iBAAmBvB,KAAWuB,qBAC/D,CACJ,EAAG,CACC,KAAM,2BACN,YAAa,CACT,MAAO,+BACP,QAAS,CAACX,EAAGY,IACT,WAAWA,uBAA2BA,0BAC/BxB,KAAWwB,2CAA+CZ,GACzE,CACJ,EAAG,CACC,KAAM,qBACN,YAAa,CACT,CACI,MAAO,cACP,QAAS,cACb,EACA,CACI,MAAO,mEACP,QAAS,8EACb,CACJ,CACJ,CACJ,EAEA,6BAA6Ba,EAAc,CACvC,OACIL,EAACM,GAAK,UAAL,KACID,EAAM,QACHL,EAACM,GAAK,SAAL,CACG,GAAG,cACH,IAAI,cACJ,MAAM,cACN,OAAQ,IAAM,KAAK,UAAU3B,GAAiB,kBAAkB0B,CAAK,CAAC,EAC1E,EAEHA,EAAM,MACHL,EAACM,GAAK,SAAL,CACG,GAAG,YACH,IAAI,YACJ,MAAM,YACN,OAAQ,IAAM,KAAK,UAAUD,EAAM,WAAW,EAAG,EAAI,CAAC,EAC1D,CAER,CAER,CACJ,IC9GA,IAsBOE,GAtBPC,GAAAC,EAAA,kBAAAC,IAkBAC,KACAC,IACAC,IAEON,GAAQO,EAAa,CACxB,KAAM,gBACN,QAAS,CAACC,EAAK,MAAM,EACrB,YAAa,0EAEb,QAAS,CACL,CACI,KAAM,wBACN,YAAa,CACT,MAAO,4CACP,QAAS,CAACC,EAAGC,EAA2BC,EAAiBC,IAAmB,YAC1DF,KACRC,uDACAC,sDACd,CACJ,EACA,CACI,KAAM,iBACN,YAAa,CACT,MAAO,4CACP,QAAS,CAACH,EAAGC,EAA2BC,EAAiBC,IAAmB,YAC1DF,KACRC,uDACAC,sDACd,CACJ,CACJ,EAEA,QAAS,CACL,WAAY,CACR,YAAa,oBACb,OACA,QAASC,GAAU,EAAG,EAAG,CAAC,EAC1B,QAAS,EACT,eAAgB,EACpB,CACJ,CACJ,CAAC,IC3DD,IAqBOC,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,kBACN,YAAa,kGACb,QAAS,CAACC,EAAK,GAAG,EAClB,OAAQ,MAER,QAAS,CAAC,CAIN,KAAM,mBACN,YAAa,CACT,CAEI,MAAO,4BACP,QAAS,WACb,EAEA,CACI,MAAO,oBACP,QAAS,uCACb,CACJ,CACJ,CAAC,CACL,CAAC,IC7CD,IAqBOC,GArBPC,GAAAC,EAAA,kBAAAC,IAkBAC,IACAC,IAEOL,GAAQM,EAAa,CACxB,KAAM,eACN,YAAa,kDACb,QAAS,CAACC,EAAK,GAAG,EAClB,QAAS,CACL,CACI,KAAM,gBACN,YAAa,CACT,CACI,MAAO,yBACP,QAAS,CAACC,EAAMC,IACZ,GAAGA,KAASA,2BAA+BD,GACnD,EACA,CACI,MAAO,6BACP,QAAS,CAACA,EAAMC,EAAOC,IACnB,QAAQD,aAAiBC,qBAAwBF,GACzD,CACJ,CACJ,EACA,CACI,KAAM,yBACN,YAAa,CACT,MAAO,0DACP,QAAS,CAACA,EAAMG,EAAMC,IAClB,wEAAwED,KAAQC,qBAA0BJ,GAClH,CACJ,CACJ,CACJ,CAAC,IClDD,IAwBaK,GAxBbC,GAAAC,EAAA,kBAAAC,IAwBaH,GAAN,KAAY,CAKf,YAAmBI,EAAU,IAAU,CAApB,aAAAA,CAAsB,CAEjC,MAAQ,CAAC,EAET,QAEA,MAAO,CACX,IAAMC,EAAO,KAAK,MAAM,MAAM,EAC1BA,EACA,KAAK,QAAU,QAAQ,QAAQ,EAC1B,KAAKA,CAAI,EACT,QAAQ,IAAM,KAAK,KAAK,CAAC,EAE9B,KAAK,QAAU,MACvB,CAEQ,KAAM,CACL,KAAK,SACN,KAAK,KAAK,CAClB,CAOA,KAAQA,EAA2B,CAC3B,KAAK,MAAQ,KAAK,SAClB,KAAK,MAAM,MAAM,EAErB,KAAK,MAAM,KAAKA,CAAI,EACpB,KAAK,IAAI,CACb,CAOA,QAAWA,EAA2B,CAC9B,KAAK,MAAQ,KAAK,SAClB,KAAK,MAAM,IAAI,EAEnB,KAAK,MAAM,QAAQA,CAAI,EACvB,KAAK,IAAI,CACb,CAKA,IAAI,MAAO,CACP,OAAO,KAAK,MAAM,MACtB,CACJ,IC/CA,SAASC,GAAeC,EAAcC,EAAsB,CACxD,IAAMC,EAAMD,EAAM,MAAQA,EAAM,GAAK,IAAIA,EAAM,KAAO,IACtD,OAAOE,GAAQ,IAAI,CACf,IAAK,aAAaH,EAAI,uBAAuBA,EAAI,gBAAgBE,IACjE,MAAO,CACH,MAAO,GACX,EACA,cAAe,EACnB,CAAC,EACI,KAAKE,GAAOC,EAAe,SAAS,CACjC,KAAM,6BACN,UAAWL,EAAI,WACf,UAAWA,EAAI,GACf,MAAOI,EAAI,KACX,MAAAH,CACJ,CAAC,CAAC,EACD,MAAM,QAAQ,KAAK,EACnB,QAAQ,IAAMK,GAAM,GAAG,CAAC,CACjC,CAEA,SAASC,GAAsBP,EAAcQ,EAAkB,CAC3D,IAAMN,EAAM,GAAGF,EAAI,MAAMQ,EAAE,QAAQA,EAAE,IAAM,KACrCC,EAAQC,GAAc,eAAe,EAAE,UAAUR,KAAS,CAAE,QAAS,GAAO,MAAO,CAAC,CAAE,EAC5F,OAAKO,EAAM,UACPE,GAAM,QAAQ,IACVZ,GAAeC,EAAKQ,CAAC,CACzB,EACAC,EAAM,QAAU,IAGbA,EAAM,KACjB,CAEA,SAASG,GAAoBC,EAAe,CACxC,OAAO,SAAyBC,EAAgBC,EAAgB,CAC5D,OACIC,EAACC,GAAA,CAAQ,KAAMJ,EAAM,MAAM,CAAC,EAAE,IAAIK,GAAKA,EAAE,QAAQ,EAAE,KAAK,IAAI,GACvD,CAAC,CAAE,aAAAC,EAAc,aAAAC,CAAa,IAC3BJ,EAAC,OACG,UAAWK,GAAa,UACxB,aAAcF,EACd,aAAcC,GACjB,IACKP,EAAM,OAAS,CACrB,CAER,CAER,CACJ,CApFA,IA4BMS,GACAD,GAEAX,GAEAC,GAqDCY,GAtFPC,GAAAC,EAAA,kBAAAC,IAoBAC,KACAC,IACAC,IACAC,KACAC,IACAC,IACAC,IAEMX,GAAkBY,EAAc,IAAMC,GAAW,oBAAqB,gCAAgC,CAAC,EACvGd,GAAee,EAAYC,EAAQ,QAAQ,YAAa,YAAa,kBAAmB,iBAAiB,CAAC,EAE1G3B,GAAgB0B,EAAYC,EAAQ,QAAQ,cAAc,CAAC,EAE3D1B,GAAQ,IAAI2B,GAqDXf,GAAQgB,EAAa,CACxB,KAAM,aACN,YAAa,kCACb,QAAS,CAACC,EAAK,GAAG,EAElB,QAAS,CAAC,CACN,KAAM,gBACN,YAAa,CACT,MAAO,sDACP,QAAS,iGACb,CACJ,CAAC,EAED,YAAYC,EAAmB,CAC3B,OAAOA,EAAM,QAAQ,UAAU,OAAS,GAAK,KACzCzB,EAAC0B,EAAA,CAAc,KAAI,IACf1B,EAAC,KAAK,aAAL,CAAmB,GAAGyB,EAAO,CAClC,CAER,EAEA,aAAa,CAAE,QAAAE,EAAS,MAAA1C,CAAM,EAAe,CACzC,IAAM2C,EAAcC,GAAgB,EACpCC,EAAM,UAAU,IAAM,CAClB,IAAMC,EAAMvC,GAAW,CACfA,EAAE,YAAcmC,EAAQ,IACxBC,EAAY,CACpB,EACA,OAAAvC,EAAe,UAAU,6BAA8B0C,CAAE,EAElD,IAAM1C,EAAe,YAAY,6BAA8B0C,CAAE,CAC5E,EAAG,CAACJ,EAAQ,EAAE,CAAC,EAEf,IAAMK,EAAYzC,GAAsBoC,EAAS1C,CAAK,EAChDY,EAAQ,OAAO,OAAOmC,CAAS,EAAE,OAAO,OAAO,EAErD,OACIhC,EAAC,OACG,MAAO,CAAE,WAAY,QAAS,UAAW,YAAa,GAEtDA,EAACM,GAAA,CACG,MAAOT,EACP,QAASoC,GAAa,WAAWN,EAAQ,UAAU,GAAG,SACtD,WAAY,GACZ,IAAK,EACL,+BAA8B,GAC9B,eAAc,GACd,gBAAiB/B,GAAoBC,CAAK,EAC9C,CACJ,CAER,CACJ,CAAC,IC1ID,IA2EOqC,EA3EPC,GAAAC,EAAA,KAAAC,IAAAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACO9E,EAAQ,CACf,CAAC+E,GAAG,MAAMA,GACV,CAACC,GAAG,MAAMA,GACV,CAACC,GAAG,MAAMA,GACV,CAACC,GAAG,MAAMA,GACV,CAACC,GAAG,MAAMA,GACV,CAACC,GAAG,MAAMA,GACV,CAACC,GAAG,MAAMA,GACV,CAACC,GAAG,MAAMA,GACV,CAACC,GAAG,MAAMA,GACV,CAACC,GAAG,MAAMA,GACV,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAMA,GACX,CAACC,GAAI,MAAM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",
  "names": ["VencordFragment", "VencordCreateElement", "init_react", "__esmMin", "args", "strEnum", "obj", "o", "key", "IpcEvents_default", "init_IpcEvents", "__esmMin", "init_react", "Logger", "init_Logger", "__esmMin", "init_react", "name", "color", "title", "level", "levelColor", "args", "customFmt", "fmt", "proxyLazy", "factory", "proxyDummy", "handler", "unconfigurable", "init_proxyLazy", "__esmMin", "init_react", "method", "target", "args", "v", "keys", "key", "p", "noopTracer", "traceFunction", "init_Tracer", "__esmMin", "init_react", "init_Logger", "name", "f", "mapper", "_initWebpack", "instance", "cache", "wreq", "r", "findAll", "filter", "getDefault", "ret", "key", "mod", "nestedMod", "nested", "mapMangledModuleLazy", "code", "mappers", "proxyLazy", "mapMangledModule", "findByProps", "props", "find", "filters", "findAllByProps", "findByCode", "waitFor", "callback", "existing", "subscriptions", "addListener", "listeners", "removeListener", "search", "results", "factories", "outer", "id", "factory", "str", "extract", "logger", "_resolveReady", "onceReady", "findBulk", "findModuleId", "init_webpack", "__esmMin", "init_react", "init_Tracer", "init_Logger", "init_proxyLazy", "Logger", "m", "p", "s", "c", "traceFunction", "isWaitFor", "err", "filterFns", "length", "found", "j", "exports", "member", "newName", "common_exports", "__export", "Alerts", "Button", "Card", "ChannelStore", "Clipboard", "ContextMenu", "Flux", "FluxDispatcher", "Forms", "GuildChannelStore", "GuildStore", "Margins", "Menu", "MessageStore", "NavigationRouter", "Parser", "PermissionStore", "PresenceStore", "PrivateChannelsStore", "React", "ReactDOM", "ReadStateStore", "RestAPI", "Router", "Select", "SelectedChannelStore", "SelectedGuildStore", "Slider", "Switch", "Text", "TextInput", "Toasts", "Tooltip", "UserStore", "UserUtils", "moment", "ToastType", "ToastPosition", "init_common", "__esmMin", "init_react", "init_misc", "init_proxyLazy", "init_webpack", "lazyWebpack", "filters", "LazyComponent", "findByCode", "mapMangledModuleLazy", "x", "waitFor", "m", "cb", "_resolveReady", "s", "proxyLazy", "hasDeobfuscator", "menuItems", "map", "mapMangledModule", "webpack_exports", "__export", "common_exports", "_initWebpack", "_resolveReady", "addListener", "cache", "extract", "filters", "find", "findAll", "findAllByProps", "findBulk", "findByCode", "findByProps", "findModuleId", "listeners", "mapMangledModule", "mapMangledModuleLazy", "onceReady", "removeListener", "search", "subscriptions", "waitFor", "wreq", "init_webpack", "__esmMin", "init_react", "init_common", "makeLazy", "factory", "cache", "lazyWebpack", "filter", "proxyLazy", "find", "useAwaiter", "fallbackValue", "onError", "state", "setState", "React", "signal", "setSignal", "isAlive", "value", "error", "useForceUpdater", "set", "s", "LazyComponent", "get", "props", "Component", "VencordCreateElement", "mergeDefaults", "obj", "defaults", "key", "v", "humanFriendlyJoin", "elements", "mapper", "length", "i", "classes", "sleep", "ms", "r", "suppressErrors", "name", "func", "thisObject", "e", "makeCodeblock", "text", "language", "chars", "lazy", "init_misc", "__esmMin", "init_react", "init_webpack", "init_common", "init_proxyLazy", "definePlugin", "p", "init_types", "__esmMin", "init_react", "makeProxy", "settings", "root", "path", "target", "p", "v", "plugins_default", "plugin", "setting", "def", "o", "setPath", "subscription", "subscriptions", "IpcEvents_default", "useSettings", "forceUpdate", "React", "Settings", "addSettingsListener", "onUpdate", "migratePluginSettings", "name", "oldNames", "plugins", "oldName", "logger", "DefaultSettings", "PlainSettings", "init_settings", "__esmMin", "init_react", "init_plugins", "init_IpcEvents", "init_Logger", "init_misc", "init_types", "init_common", "Logger", "mergeDefaults", "err", "git_hash_default", "init_git_hash", "__esmMin", "init_react", "git_remote_default", "init_git_remote", "__esmMin", "init_react", "constants_exports", "__export", "Devs", "REACT_GLOBAL", "VENCORD_USER_AGENT", "WEBPACK_CHUNK", "init_constants", "__esmMin", "init_react", "init_git_hash", "init_git_remote", "git_hash_default", "git_remote_default", "BetterNotes_default", "init_BetterNotes", "__esmMin", "init_react", "init_settings", "init_constants", "init_misc", "init_types", "definePlugin", "Devs", "makeLazy", "Settings", "DataStore_exports", "__export", "clear", "createStore", "del", "delMany", "entries", "get", "getMany", "keys", "promisifyRequest", "set", "setMany", "update", "values", "request", "resolve", "reject", "dbName", "storeName", "dbp", "txMode", "callback", "db", "defaultGetStore", "defaultGetStoreFunc", "key", "customStore", "store", "value", "entry", "updater", "err", "eachCursor", "items", "cursor", "i", "init_DataStore", "__esmMin", "init_react", "style", "KEY", "ImageVisible", "ImageInvisible", "hiddenMessages", "getHiddenMessages", "saveHiddenMessages", "HideAttachments_default", "init_HideAttachments", "__esmMin", "init_react", "init_DataStore", "init_constants", "init_Logger", "init_types", "init_common", "VencordCreateElement", "get", "set", "ids", "definePlugin", "Devs", "elements", "id", "msg", "makeItem", "isHidden", "ChannelStore", "err", "Logger", "FluxDispatcher", "TimeBarAllActivities_default", "init_TimeBarAllActivities", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "anonymiseFileNames_default", "init_anonymiseFileNames", "__esmMin", "init_react", "init_constants", "init_types", "init_Vencord", "definePlugin", "Devs", "Settings", "file", "name", "extIdx", "ext", "chars", "Heart", "VencordCreateElement", "init_Heart", "__esmMin", "init_react", "DonateButton", "props", "VencordCreateElement", "Button", "IpcEvents_default", "Heart", "init_DonateButton", "__esmMin", "init_react", "init_IpcEvents", "init_common", "init_Heart", "ErrorCard", "props", "VencordCreateElement", "Card", "init_ErrorCard", "__esmMin", "init_react", "init_common", "color", "logger", "NO_ERROR", "ErrorBoundary", "ErrorBoundary_default", "init_ErrorBoundary", "__esmMin", "init_react", "init_Logger", "init_misc", "init_common", "init_ErrorCard", "Logger", "LazyComponent", "React", "error", "stack", "message", "eolIdx", "errorInfo", "VencordCreateElement", "msg", "ErrorCard", "Margins", "Component", "errorBoundaryProps", "props", "Flex", "props", "VencordCreateElement", "init_Flex", "__esmMin", "init_react", "modal_exports", "__export", "ModalCloseButton", "ModalContent", "ModalFooter", "ModalHeader", "ModalRoot", "ModalSize", "Modals", "closeModal", "openModal", "openModalLazy", "render", "options", "ModalAPI", "contextKey", "modalKey", "init_modal", "__esmMin", "init_react", "init_webpack", "mapMangledModuleLazy", "filters", "props", "VencordCreateElement", "m", "CONTRIBUTOR_BADGE", "contributorIds", "ContributorBadge", "DonorBadges", "apiBadges_default", "init_apiBadges", "__esmMin", "init_react", "init_Badges", "init_DonateButton", "init_ErrorBoundary", "init_Flex", "init_Heart", "init_constants", "init_IpcEvents", "init_Logger", "init_modal", "init_types", "init_common", "Devs", "d", "user", "IpcEvents_default", "definePlugin", "_", "m", "badgeArray", "imageMap", "badge", "lines", "r", "Logger", "line", "id", "tooltip", "image", "badges", "userId", "modalKey", "openModal", "props", "VencordCreateElement", "ErrorBoundary_default", "closeModal", "Modals", "Flex", "Forms", "Heart", "Margins", "DonateButton", "apiCommands_default", "init_apiCommands", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "_", "cmd", "args", "ctx", "nameMap", "apiMenuItemDeobfuscator_default", "init_apiMenuItemDeobfuscator", "__esmMin", "init_react", "init_settings", "init_constants", "init_types", "migratePluginSettings", "definePlugin", "Devs", "m", "mod", "nicenNames", "redefines", "typeCheckRe", "pushTypeRe", "typeMatch", "item", "type", "name", "apiMessageAccessories_default", "init_apiMessageAccessories", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "_", "pre", "accessories", "post", "apiMessageEvents_default", "init_apiMessageEvents", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "m", "message", "channel", "event", "apiNotices_default", "init_apiNotices", "__esmMin", "init_react", "init_settings", "init_constants", "init_types", "migratePluginSettings", "definePlugin", "Devs", "apiServerList_default", "init_apiServerList", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "Notices_exports", "__export", "currentNotice", "nextNotice", "noticesQueue", "popNotice", "showNotice", "NoticesModule", "message", "buttonText", "onOkClick", "init_Notices", "__esmMin", "init_react", "init_webpack", "waitFor", "m", "Link", "props", "VencordCreateElement", "init_Link", "__esmMin", "init_react", "lookupAsset", "applicationId", "key", "assetManager", "lookupApp", "socket", "rpcManager", "apps", "ws", "arRPC_default", "init_arRPC", "__esmMin", "init_react", "init_Notices", "init_Link", "init_constants", "init_misc", "init_types", "init_webpack", "init_common", "mapMangledModuleLazy", "filters", "lazyWebpack", "definePlugin", "Devs", "VencordCreateElement", "VencordFragment", "Forms", "Link", "e", "data", "appId", "app", "FluxDispatcher", "res", "showNotice", "popNotice", "Toasts", "banger_default", "init_banger", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "betterGifAltText_default", "init_betterGifAltText", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "props", "url", "name", "betterRoleDot_default", "init_betterRoleDot", "__esmMin", "init_react", "init_settings", "init_constants", "init_types", "init_common", "migratePluginSettings", "definePlugin", "Devs", "Settings", "color", "Clipboard", "Toasts", "betterUploadButton_default", "init_betterUploadButton", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "m", "onDblClick", "otherProps", "formatDuration", "ms", "human", "Settings", "format", "n", "unit", "s", "delim", "d", "h", "m", "res", "callTimer_default", "init_callTimer", "__esmMin", "init_react", "init_settings", "init_ErrorBoundary", "init_constants", "init_types", "init_common", "definePlugin", "Devs", "channelId", "VencordCreateElement", "ErrorBoundary_default", "time", "setTime", "React", "startTime", "interval", "MessageEvents_exports", "__export", "_handleClick", "_handlePreEdit", "_handlePreSend", "addClickListener", "addPreEditListener", "addPreSendListener", "removeClickListener", "removePreEditListener", "removePreSendListener", "channelId", "messageObj", "extra", "listener", "sendListeners", "result", "e", "MessageEventsLogger", "messageId", "editListeners", "message", "channel", "event", "MessageStore", "listeners", "init_MessageEvents", "__esmMin", "init_react", "init_Logger", "init_common", "Logger", "defaultRules", "init_defaultRules", "__esmMin", "init_react", "reRegExpChar", "reHasRegExpChar", "clearURLs_default", "init_clearURLs", "__esmMin", "init_react", "init_MessageEvents", "init_settings", "init_constants", "init_types", "init_defaultRules", "migratePluginSettings", "definePlugin", "Devs", "str", "rules", "defaultRules", "rule", "splitRule", "paramRule", "hostRule", "hostRuleIndex", "param", "parent", "match", "url", "_value", "regex", "hostRuleName", "msg", "addPreSendListener", "_", "addPreEditListener", "_cid", "_mid", "removePreSendListener", "removePreEditListener", "consoleShortcuts_default", "init_consoleShortcuts", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "code", "shortcuts", "key", "val", "generateId", "SnowflakeUtils", "sendBotMessage", "channelId", "message", "botMessage", "createBotMessage", "MessageSender", "mergeDefaults", "findOption", "args", "name", "fallbackValue", "a", "init_commandHelpers", "__esmMin", "init_react", "init_misc", "init_webpack", "lazyWebpack", "filters", "waitFor", "m", "ApplicationCommandOptionType", "ApplicationCommandInputType", "ApplicationCommandType", "init_types", "__esmMin", "init_react", "Commands_exports", "__export", "ApplicationCommandInputType", "ApplicationCommandOptionType", "ApplicationCommandType", "BUILT_IN", "OptionalMessageOption", "RequiredMessageOption", "_handleCommand", "_init", "commands", "findOption", "generateId", "prepareOption", "registerCommand", "sendBotMessage", "unregisterCommand", "opt", "i", "opts", "OptPlaceholder", "ReqPlaceholder", "x", "registerSubCommands", "cmd", "plugin", "o", "subCmd", "command", "c", "name", "idx", "init_Commands", "__esmMin", "init_react", "init_misc", "init_commandHelpers", "init_types", "cmds", "args", "ctx", "handleError", "err", "msg", "reason", "makeCodeblock", "res", "DRAFT_TYPE", "corruptMp4s_default", "init_corruptMp4s", "__esmMin", "init_react", "init_Commands", "init_commandHelpers", "init_types", "init_constants", "init_webpack", "definePlugin", "Devs", "args", "ctx", "video", "findByProps", "sendBotMessage", "corruption", "findOption", "buf", "found", "i", "start", "newName", "promptToUpload", "findByCode", "file", "dictionary_default", "init_dictionary", "__esmMin", "init_react", "init_Commands", "init_types", "init_constants", "definePlugin", "Devs", "args", "ctx", "definition", "sendBotMessage", "linkify", "text", "_", "word", "error", "CheckedTextInput", "initialValue", "onChange", "validate", "value", "setValue", "React", "error", "setError", "handleChange", "v", "res", "VencordCreateElement", "VencordFragment", "TextInput", "init_CheckedTextInput", "__esmMin", "init_react", "init_common", "getGuildCandidates", "isAnimated", "meId", "UserStore", "GuildStore", "g", "PermissionStore", "MANAGE_EMOJIS_AND_STICKERS", "emojiSlots", "emojis", "GuildEmojiStore", "count", "emoji", "a", "b", "doClone", "guildId", "id", "name", "data", "r", "reader", "uploadEmoji", "Toasts", "e", "Logger", "CloneModal", "emojiName", "isCloning", "setIsCloning", "React", "setName", "x", "invalidateMemo", "guilds", "VencordCreateElement", "VencordFragment", "Forms", "Margins", "CheckedTextInput", "v", "nameValidator", "Tooltip", "onMouseLeave", "onMouseEnter", "getFontSize", "emoteCloner_default", "init_emoteCloner", "__esmMin", "init_react", "init_settings", "init_CheckedTextInput", "init_constants", "init_Logger", "init_misc", "init_modal", "init_types", "init_webpack", "init_common", "lazyWebpack", "filters", "s", "migratePluginSettings", "definePlugin", "Devs", "makeLazy", "Settings", "htmlElement", "Menu", "openModal", "modalProps", "ModalRoot", "ModalHeader", "ModalContent", "KbdStyles", "experiments_default", "init_experiments", "__esmMin", "init_react", "init_constants", "init_misc", "init_types", "init_Vencord", "init_webpack", "init_common", "lazyWebpack", "filters", "definePlugin", "Devs", "Settings", "isMacOS", "modKey", "altKey", "VencordCreateElement", "React", "Forms", "getGifEncoder", "importApngJs", "init_dependencies", "__esmMin", "init_react", "init_misc", "makeLazy", "exports", "winProxy", "_", "k", "v", "r", "DRAFT_TYPE", "promptToUpload", "fakeNitro_default", "init_fakeNitro", "__esmMin", "init_react", "init_MessageEvents", "init_settings", "init_constants", "init_dependencies", "init_misc", "init_types", "init_Vencord", "init_webpack", "init_common", "lazyWebpack", "filters", "migratePluginSettings", "definePlugin", "Devs", "Settings", "func", "UserStore", "stickerId", "stickerLink", "channelId", "parseURL", "GIFEncoder", "quantize", "applyPalette", "importApngJs", "getGifEncoder", "frames", "width", "height", "gif", "resolution", "canvas", "ctx", "scale", "lastImg", "left", "top", "disposeOp", "img", "delay", "data", "palette", "index", "file", "ChannelStore", "settings", "EmojiStore", "StickerStore", "getWordBoundary", "origStr", "offset", "addPreSendListener", "messageObj", "extra", "guildId", "stickerBypass", "sticker", "link", "emoji", "emojiString", "url", "match", "addPreEditListener", "_", "__", "emojiStr", "emojiId", "removePreSendListener", "removePreEditListener", "SettingBooleanComponent", "option", "pluginSettings", "id", "onChange", "onError", "def", "state", "setState", "React", "error", "setError", "options", "handleChange", "newValue", "isValid", "VencordCreateElement", "Forms", "Select", "v", "init_SettingBooleanComponent", "__esmMin", "init_react", "init_common", "SettingCustomComponent", "option", "onChange", "onError", "init_SettingCustomComponent", "__esmMin", "init_react", "SettingNumericComponent", "option", "pluginSettings", "id", "onChange", "onError", "serialize", "value", "state", "setState", "React", "error", "setError", "handleChange", "newValue", "isValid", "MAX_SAFE_NUMBER", "VencordCreateElement", "Forms", "TextInput", "init_SettingNumericComponent", "__esmMin", "init_react", "init_types", "init_common", "SettingSelectComponent", "option", "pluginSettings", "onChange", "onError", "id", "def", "o", "state", "setState", "React", "error", "setError", "handleChange", "newValue", "isValid", "VencordCreateElement", "Forms", "Select", "v", "init_SettingSelectComponent", "__esmMin", "init_react", "init_common", "makeRange", "start", "end", "step", "ranges", "value", "SettingSliderComponent", "option", "pluginSettings", "id", "onChange", "onError", "def", "error", "setError", "React", "handleChange", "newValue", "isValid", "VencordCreateElement", "Forms", "Slider", "v", "init_SettingSliderComponent", "__esmMin", "init_react", "init_common", "SettingTextComponent", "option", "pluginSettings", "id", "onChange", "onError", "state", "setState", "React", "error", "setError", "handleChange", "newValue", "isValid", "VencordCreateElement", "Forms", "TextInput", "init_SettingTextComponent", "__esmMin", "init_react", "init_common", "init_components", "__esmMin", "init_react", "init_SettingBooleanComponent", "init_SettingCustomComponent", "init_SettingNumericComponent", "init_SettingSelectComponent", "init_SettingSliderComponent", "init_SettingTextComponent", "fart_default", "init_fart", "__esmMin", "init_react", "init_Commands", "init_components", "init_constants", "init_types", "init_Vencord", "definePlugin", "Devs", "args", "fart", "Settings", "makeRange", "GuildStore", "forceOwnerCrown_default", "init_forceOwnerCrown", "__esmMin", "init_react", "init_constants", "init_types", "init_webpack", "waitFor", "m", "definePlugin", "Devs", "props", "guildId", "userId", "guild", "friendInvites_default", "init_friendInvites", "__esmMin", "init_react", "init_Commands", "init_constants", "init_types", "init_webpack", "definePlugin", "Devs", "_", "ctx", "createInvite", "findByProps", "sendBotMessage", "friendInviteList", "i", "re", "fxTwitter_default", "init_fxTwitter", "__esmMin", "init_react", "init_MessageEvents", "init_constants", "init_types", "definePlugin", "Devs", "msg", "addPreSendListener", "_", "removePreSendListener", "iLoveSpam_default", "init_iLoveSpam", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "RunningGameStoreModule", "ignoredActivitiesCache", "ignoreActivities_default", "init_ignoreActivities", "__esmMin", "init_react", "init_api", "init_constants", "init_misc", "init_types", "init_webpack", "lazyWebpack", "filters", "definePlugin", "Devs", "_", "mod", "renderIgnoreActivitiesToggle", "current", "match", "replace", "exports", "restOfFunction", "component", "renderIgnoreActivitiesToggleOff", "renderIgnoreActivitiesToggleOn", "DataStore", "gamesSeen", "index", "ignoredActivity", "game", "props", "exePath", "id", "keepCurrentChannel_default", "init_keepCurrentChannel", "__esmMin", "init_react", "init_api", "init_constants", "init_types", "init_common", "definePlugin", "Devs", "guildId", "channelId", "ChannelStore", "NavigationRouter", "DataStore", "previousData", "SelectedGuildStore", "SelectedChannelStore", "FluxDispatcher", "getApplicationAsset", "key", "assetManager", "applicationId", "setActivity", "activity", "FluxDispatcher", "presenceStore", "lastfm_default", "init_lastfm", "__esmMin", "init_react", "init_Link", "init_constants", "init_misc", "init_types", "init_Vencord", "init_common", "lazyWebpack", "webpack_exports", "definePlugin", "Devs", "VencordCreateElement", "VencordFragment", "Forms", "Link", "Settings", "trackData", "x", "hideAlbumName", "assets", "quotes", "loadingQuotes_default", "init_loadingQuotes", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "quote", "key", "codes", "s", "i", "isDeletePressed", "keydown", "keyup", "messageActions_default", "init_messageActions", "__esmMin", "init_react", "init_MessageEvents", "init_settings", "init_constants", "init_misc", "init_types", "init_webpack", "init_common", "migratePluginSettings", "definePlugin", "Devs", "MessageActions", "lazyWebpack", "filters", "PermissionStore", "Permissions", "m", "EditStore", "addClickListener", "msg", "chan", "event", "isMe", "UserStore", "removeClickListener", "addDeleteStyleClass", "Settings", "messageLogger_default", "init_messageLogger", "__esmMin", "init_react", "init_settings", "init_ErrorBoundary", "init_constants", "init_Logger", "init_misc", "init_types", "init_webpack", "init_common", "definePlugin", "Devs", "lazyWebpack", "filters", "style", "edit", "Timestamp", "VencordCreateElement", "ErrorBoundary_default", "Parser", "newMessage", "oldMessage", "cache", "data", "isBulk", "mutate", "id", "msg", "EPHEMERAL", "ignoreBots", "ignoreSelf", "myId", "m", "a", "UserStore", "e", "Logger", "createTagCommand", "tag", "registerCommand", "_", "ctx", "getTag", "Settings", "sendBotMessage", "author", "EMOTE", "MessageTagsMarker", "DATA_KEY", "getTags", "addTag", "removeTag", "messageTags_default", "init_messageTags", "__esmMin", "init_react", "init_api", "init_Commands", "init_settings", "init_constants", "init_types", "DataStore", "t", "name", "tt", "tags", "definePlugin", "Devs", "args", "findOption", "message", "unregisterCommand", "mock", "input", "output", "i", "moreCommands_default", "init_moreCommands", "__esmMin", "init_react", "init_Commands", "init_constants", "init_types", "definePlugin", "Devs", "OptionalMessageOption", "opts", "ctx", "content", "findOption", "sendBotMessage", "RequiredMessageOption", "moreKaomoji_default", "init_moreKaomoji", "__esmMin", "init_react", "init_Commands", "init_settings", "init_constants", "init_types", "migratePluginSettings", "definePlugin", "Devs", "data", "OptionalMessageOption", "opts", "findOption", "countOccurrences", "sourceString", "subString", "i", "lastIdx", "countMatches", "pattern", "getMoyaiCount", "message", "count", "MOYAI", "customMoyaiRe", "boom", "Settings", "audioElement", "MOYAI_URL", "moyai_default", "init_moyai", "__esmMin", "init_react", "init_SettingSliderComponent", "init_constants", "init_misc", "init_types", "init_Vencord", "init_common", "definePlugin", "Devs", "SelectedChannelStore", "moyaiCount", "sleep", "UserStore", "name", "FluxDispatcher", "makeRange", "muteNewGuild_default", "init_muteNewGuild", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "RelationshipStore", "noBlockedMessages_default", "init_noBlockedMessages", "__esmMin", "init_react", "init_constants", "init_misc", "init_types", "init_Vencord", "init_webpack", "lazyWebpack", "filters", "definePlugin", "Devs", "Settings", "message", "noCanaryMessageLinks_default", "init_noCanaryMessageLinks", "__esmMin", "init_react", "init_MessageEvents", "init_constants", "init_types", "init_Vencord", "definePlugin", "Devs", "msg", "settings", "Settings", "_", "host", "path", "addPreSendListener", "removePreSendListener", "noDevtoolsWarning_default", "init_noDevtoolsWarning", "__esmMin", "init_react", "init_settings", "init_constants", "init_types", "migratePluginSettings", "definePlugin", "Devs", "noF1_default", "init_noF1", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "noRPC_default", "init_noRPC", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "noReplyMention_default", "init_noReplyMention", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "noSystemBadge_default", "init_noSystemBadge", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "noTrack_default", "init_noTrack", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "noUnblockToJump_default", "init_noUnblockToJump", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "oneko_default", "init_oneko", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "x", "s", "loadImage", "source", "isFile", "url", "resolve", "reject", "img", "event", "_source", "_lineno", "_colno", "err", "resolveImage", "options", "ctx", "noServerPfp", "opt", "upload", "UploadStore", "DRAFT_TYPE", "fetchUser", "DEFAULT_DELAY", "DEFAULT_RESOLUTION", "FRAMES", "getFrames", "promptToUpload", "petpet_default", "init_petpet", "__esmMin", "init_react", "init_Commands", "init_constants", "init_dependencies", "init_misc", "init_types", "init_webpack", "makeLazy", "_", "i", "lazyWebpack", "filters", "definePlugin", "Devs", "opts", "cmdCtx", "GIFEncoder", "quantize", "applyPalette", "getGifEncoder", "frames", "findOption", "sendBotMessage", "avatar", "delay", "resolution", "gif", "canvas", "j", "width", "height", "offsetX", "offsetY", "data", "palette", "index", "file", "plainFolderIcon_default", "init_plainFolderIcon", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "Icon", "path", "viewBox", "color", "tooltip", "VencordCreateElement", "Tooltip", "tooltipProps", "Icons", "getStatusColor", "PlatformIcon", "PlatformIndicator", "platformIndicators_default", "init_platformIndicators", "__esmMin", "init_react", "init_settings", "init_ErrorBoundary", "init_constants", "init_misc", "init_types", "init_webpack", "init_common", "lazyWebpack", "filters", "platform", "status", "user", "PresenceStore", "icons", "definePlugin", "Devs", "Settings", "ErrorBoundary_default", "PronounsAboutComponent", "VencordCreateElement", "React", "Forms", "Link", "init_PronounsAboutComponent", "__esmMin", "init_react", "init_Link", "init_common", "debounce", "func", "delay", "timeout", "args", "init_debounce", "__esmMin", "init_react", "PronounMapping", "init_types", "__esmMin", "init_react", "fetchPronouns", "id", "res", "cache", "requestQueue", "bulkFetch", "bulkFetchPronouns", "ids", "params", "VENCORD_USER_AGENT", "e", "dummyPronouns", "formatPronouns", "pronouns", "pronounsFormat", "Settings", "PronounMapping", "init_pronoundbUtils", "__esmMin", "init_react", "init_constants", "init_debounce", "init_Vencord", "init_pronoundb", "init_types", "debounce", "c", "PronounsChatComponentWrapper", "message", "Settings", "UserStore", "VencordCreateElement", "PronounsChatComponent", "result", "isPending", "useAwaiter", "fetchPronouns", "e", "PronounMapping", "classes", "styles", "formatPronouns", "init_PronounsChatComponent", "__esmMin", "init_react", "init_misc", "init_Vencord", "init_webpack", "init_common", "init_pronoundbUtils", "init_types", "lazyWebpack", "filters", "PronounsProfileWrapper", "PronounsComponent", "props", "profileProps", "user", "UserStore", "Settings", "VencordCreateElement", "ProfilePronouns", "userId", "Component", "leProps", "result", "isPending", "useAwaiter", "fetchPronouns", "e", "PronounMapping", "formatPronouns", "init_PronounsProfileWrapper", "__esmMin", "init_react", "init_misc", "init_Vencord", "init_common", "init_pronoundbUtils", "init_types", "pronoundb_default", "init_pronoundb", "__esmMin", "init_react", "init_constants", "init_types", "init_PronounsAboutComponent", "init_PronounsChatComponent", "init_PronounsProfileWrapper", "definePlugin", "Devs", "original", "PronounComponent", "pronounProps", "fullProps", "PronounsAboutComponent", "PronounsChatComponentWrapper", "PronounsProfileWrapper", "ComponentDispatch", "quickMention_default", "init_quickMention", "__esmMin", "init_react", "init_constants", "init_misc", "init_types", "lazyWebpack", "m", "definePlugin", "Devs", "post", "og", "functionName", "channelVar", "messageVar", "functionSig", "VencordCreateElement", "message", "calculateIdx", "messages", "id", "idx", "m", "onStartEdit", "channelId", "messageId", "_isQuickEdit", "meId", "UserStore", "MessageStore", "editIdx", "onCreatePendingReply", "message", "_isQuickReply", "replyIdx", "onKeydown", "isUp", "isCtrl", "isAltOrMeta", "nextEdit", "nextReply", "jumpIfOffScreen", "element", "vh", "rect", "Kangaroo", "getNextMessage", "isReply", "SelectedChannelStore", "mutate", "i", "FluxDispatcher", "channel", "ChannelStore", "isMac", "quickReply_default", "onDeletePendingReply", "onEndEdit", "init_quickReply", "__esmMin", "init_react", "init_settings", "init_constants", "init_misc", "init_types", "init_webpack", "init_common", "lazyWebpack", "filters", "migratePluginSettings", "definePlugin", "Devs", "ServerList_exports", "__export", "ServerListRenderPosition", "addServerListElement", "removeServerListElement", "renderAll", "getRenderFunctions", "position", "renderFunctionsAbove", "renderFunctionsIn", "renderFunction", "logger", "init_ServerList", "__esmMin", "init_react", "init_Logger", "Logger", "ret", "e", "onClick", "channels", "GuildStore", "guild", "GuildChannelStore", "c", "ReadStateStore", "FluxDispatcher", "ReadAllButton", "readAllNotificationsButton_default", "init_readAllNotificationsButton", "__esmMin", "init_react", "init_ServerList", "init_constants", "init_types", "init_common", "VencordCreateElement", "Button", "definePlugin", "Devs", "addServerListElement", "removeServerListElement", "Engines", "reverseImageSearch_default", "init_reverseImageSearch", "__esmMin", "init_react", "init_constants", "init_types", "init_common", "definePlugin", "Devs", "m", "src", "target", "VencordCreateElement", "Menu", "engine", "key", "e", "openUserProfileModal", "userId", "UserUtils", "FluxDispatcher", "SelectedChannelStore", "authorize", "callback", "OAuth2AuthorizeModal", "findByProps", "openModal", "props", "VencordCreateElement", "u", "url", "res", "token", "status", "Settings", "showToast", "e", "Logger", "text", "Toasts", "canDeleteReview", "review", "myId", "Devs", "init_Utils", "__esmMin", "init_react", "init_constants", "init_Logger", "init_modal", "init_Vencord", "init_webpack", "init_common", "getReviews", "id", "API_URL", "addReview", "review", "getToken", "r", "res", "showToast", "Response", "authorize", "deleteReview", "reportReview", "getLastReviewID", "init_ReviewDBAPI", "__esmMin", "init_react", "init_Vencord", "init_Utils", "Settings", "MessageButton_default", "init_MessageButton", "__esmMin", "init_react", "init_misc", "init_webpack", "LazyComponent", "button", "dangerous", "findByProps", "props", "VencordCreateElement", "classes", "ReviewComponent_default", "init_ReviewComponent", "__esmMin", "init_react", "init_misc", "init_webpack", "init_common", "init_ReviewDBAPI", "init_Utils", "init_MessageButton", "LazyComponent", "p", "filters", "cozyMessage", "buttons", "message", "groupStart", "container", "isHeader", "avatar", "clickable", "username", "messageContent", "wrapper", "cozy", "contents", "buttonClasses", "defaultColor", "findBulk", "review", "refetch", "openModal", "openUserProfileModal", "delReview", "Alerts", "deleteReview", "res", "showToast", "reportRev", "reportReview", "VencordCreateElement", "classes", "MessageButton_default", "canDeleteReview", "UserStore", "ReviewsView", "userId", "reviews", "_", "isLoading", "refetch", "useAwaiter", "getReviews", "onKeyPress", "key", "target", "addReview", "res", "VencordCreateElement", "VencordFragment", "Text", "review", "ReviewComponent_default", "Forms", "classes", "Classes", "UserStore", "init_ReviewsView", "__esmMin", "init_react", "init_misc", "init_common", "init_ReviewDBAPI", "init_ReviewComponent", "lazyWebpack", "m", "reviewDB_default", "init_reviewDB", "__esmMin", "init_react", "init_ErrorBoundary", "init_constants", "init_types", "init_Vencord", "init_common", "init_ReviewsView", "init_ReviewDBAPI", "init_Utils", "definePlugin", "Devs", "VencordCreateElement", "Button", "authorize", "settings", "Settings", "id", "getLastReviewID", "UserStore", "showToast", "user", "ErrorBoundary_default", "ReviewsView", "settingsStyles_default", "init_settingsStyles", "__esmMin", "init_react", "importSettings", "data", "parsed", "err", "IpcEvents_default", "exportSettings", "settings", "quickCss", "downloadSettingsBackup", "filename", "backup", "uploadSettingsBackup", "showToast", "file", "toastSuccess", "Logger", "toastFailure", "init_settingsSync", "__esmMin", "init_react", "init_common", "init_IpcEvents", "init_Logger", "Toasts", "BackupRestoreTab", "VencordCreateElement", "Forms", "Card", "Flex", "Text", "Margins", "Button", "uploadSettingsBackup", "downloadSettingsBackup", "BackupRestoreTab_default", "init_BackupRestoreTab", "__esmMin", "init_react", "init_settingsSync", "init_common", "init_ErrorBoundary", "init_Flex", "ErrorBoundary_default", "plugins_exports", "__export", "PMLogger", "isPluginEnabled", "patches", "plugins", "startAllPlugins", "startDependenciesRecursive", "startPlugin", "stopPlugin", "p", "plugins_default", "settings", "restartNeeded", "failures", "dep", "Settings", "logger", "pluginsValues", "init_plugins", "__esmMin", "init_react", "init_Commands", "init_settings", "init_Tracer", "init_Logger", "Logger", "d", "error", "patch", "traceFunction", "name", "e", "cmd", "registerCommand", "unregisterCommand", "ChangeList", "init_ChangeList", "__esmMin", "init_react", "item", "mapper", "updater_exports", "__export", "UpdateLogger", "changes", "checkForUpdates", "getRepo", "isNewer", "isOutdated", "rebuild", "update", "updateError", "Unwrap", "p", "res", "IpcEvents_default", "c", "git_hash_default", "oldHashes", "newHashes", "init_updater", "__esmMin", "init_react", "init_git_hash", "init_IpcEvents", "init_Logger", "Logger", "handleComponentFailed", "isOutdated", "update", "rebuild", "e", "init_handleComponentFailed", "__esmMin", "init_react", "init_updater", "makeDummyUser", "user", "newUser", "UserRecord", "generateId", "FluxDispatcher", "PluginModal", "plugin", "onRestartNeeded", "onClose", "transitionState", "authors", "setAuthors", "React", "pluginSettings", "useSettings", "tempSettings", "setTempSettings", "errors", "setErrors", "saveError", "setSaveError", "canSubmit", "e", "author", "UserUtils", "a", "saveAndClose", "result", "restartNeeded", "key", "value", "option", "renderSettings", "VencordCreateElement", "Forms", "options", "setting", "onChange", "newValue", "s", "onError", "hasError", "Component", "Components", "Flex", "renderMoreUsers", "_label", "count", "sliceCount", "sliceStart", "sliceEnd", "Tooltip", "u", "onMouseEnter", "onMouseLeave", "AvatarStyles", "ModalRoot", "ModalHeader", "Text", "ModalContent", "UserSummaryItem", "ErrorBoundary_default", "ModalFooter", "Button", "init_PluginModal", "__esmMin", "init_react", "init_Commands", "init_settings", "init_misc", "init_modal", "init_proxyLazy", "init_types", "init_webpack", "init_common", "init_ErrorBoundary", "init_Flex", "init_components", "LazyComponent", "findByCode", "lazyWebpack", "filters", "proxyLazy", "UserStore", "SettingTextComponent", "SettingNumericComponent", "SettingBooleanComponent", "SettingSelectComponent", "SettingSliderComponent", "SettingCustomComponent", "PluginsGrid", "PluginsGridItem", "FiltersBar", "SettingsIcon", "init_styles", "__esmMin", "init_react", "showErrorToast", "message", "Toasts", "ReloadRequiredCard", "plugins", "props", "pluginPrefix", "pluginSuffix", "VencordCreateElement", "ErrorCard", "Button", "PluginCard", "plugin", "disabled", "onRestartNeeded", "onMouseEnter", "onMouseLeave", "pluginSettings", "useSettings", "iconHover", "setIconHover", "React", "isEnabled", "openModal", "openModalLazy", "modalProps", "PluginModal", "toggleEnabled", "wasEnabled", "restartNeeded", "failures", "startDependenciesRecursive", "logger", "showNotice", "result", "stopPlugin", "startPlugin", "action", "Flex", "PluginsGridItem", "Switch", "Text", "SettingsIcon", "CogWheel", "InfoIcon", "makeDependencyList", "deps", "Forms", "dep", "dependencyCheck", "pluginName", "depMap", "d", "Settings", "InputStyles", "PluginSettings_default", "init_PluginSettings", "__esmMin", "init_react", "init_plugins", "init_Notices", "init_settings", "init_ChangeList", "init_Logger", "init_misc", "init_modal", "init_webpack", "init_common", "init_ErrorBoundary", "init_ErrorCard", "init_Flex", "init_handleComponentFailed", "init_PluginModal", "init_styles", "Logger", "lazyWebpack", "filters", "LazyComponent", "findByCode", "ErrorBoundary_default", "settings", "changes", "ChangeList", "Alerts", "VencordFragment", "s", "i", "Parser", "o", "plugins_default", "sortedPlugins", "a", "b", "searchValue", "setSearchValue", "onSearch", "query", "prev", "onStatusChange", "status", "pluginFilter", "showEnabled", "showDisabled", "enabled", "classes", "Margins", "FiltersBar", "TextInput", "Select", "v", "PluginsGrid", "dependency", "name", "tooltipText", "Tooltip", "handleComponentFailed", "PluginsTab_default", "init_PluginsTab", "__esmMin", "init_react", "init_ErrorBoundary", "init_PluginSettings", "ErrorBoundary_default", "PluginSettings_default", "withDispatcher", "dispatcher", "action", "e", "UpdateLogger", "code", "path", "cmd", "stderr", "err", "Alerts", "VencordCreateElement", "ErrorCard", "line", "Parser", "Changes", "updates", "repo", "repoPending", "Card", "hash", "author", "message", "Link", "Updatable", "props", "setUpdates", "React", "changes", "isChecking", "setIsChecking", "isUpdating", "setIsUpdating", "isOutdated", "VencordFragment", "updateError", "Forms", "Margins", "Flex", "classes", "Button", "update", "needFullRestart", "rebuild", "r", "checkForUpdates", "Toasts", "Newer", "Updater", "useAwaiter", "getRepo", "commonProps", "git_hash_default", "isNewer", "Updater_default", "init_Updater", "__esmMin", "init_react", "init_git_hash", "init_misc", "init_updater", "init_common", "init_ErrorBoundary", "init_ErrorCard", "init_Flex", "init_handleComponentFailed", "init_Link", "ErrorBoundary_default", "handleComponentFailed", "VencordSettings", "settingsDir", "settingsDirPending", "useAwaiter", "IpcEvents_default", "settings", "useSettings", "VencordCreateElement", "React", "DonateCard", "Forms", "Card", "st", "Button", "Switch", "v", "DonateButton", "VencordTab_default", "init_VencordTab", "__esmMin", "init_react", "init_settings", "init_IpcEvents", "init_misc", "init_common", "init_DonateButton", "init_ErrorBoundary", "style", "ErrorBoundary_default", "VencordSettings_exports", "__export", "VencordSettings_default", "Settings", "props", "tab", "CurrentTab", "SettingsTabs", "VencordCreateElement", "Forms", "Text", "TabBar", "st", "Router", "key", "name", "ErrorBoundary_default", "style", "init_VencordSettings", "__esmMin", "init_react", "init_settingsStyles", "init_misc", "init_webpack", "init_common", "init_ErrorBoundary", "init_BackupRestoreTab", "init_PluginsTab", "init_Updater", "init_VencordTab", "settingsStyles_default", "lazyWebpack", "filters", "VencordTab_default", "PluginsTab_default", "Updater_default", "BackupRestoreTab_default", "SettingsComponent", "settings_default", "init_settings", "__esmMin", "init_react", "init_git_hash", "init_constants", "init_misc", "init_types", "LazyComponent", "definePlugin", "Devs", "m", "component", "props", "mod", "updater", "patchHelper", "VencordCreateElement", "b", "Component", "electronVersion", "chromiumVersion", "additionalInfo", "VencordFragment", "git_hash_default", "CONNECT", "VIEW_CHANNEL", "can", "showHiddenChannels_default", "init_showHiddenChannels", "__esmMin", "init_react", "init_Flex", "init_constants", "init_modal", "init_types", "init_Vencord", "init_webpack", "init_common", "permission", "channel", "waitFor", "m", "definePlugin", "Devs", "Settings", "category", "isMuted", "ChannelStore", "isHidden", "lastMessageDate", "openModal", "modalProps", "VencordCreateElement", "ModalRoot", "ModalHeader", "Flex", "Text", "ModalContent", "VencordFragment", "ModalFooter", "Button", "silentTyping_default", "init_silentTyping", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "spotifyStyles_default", "init_spotifyStyles", "__esmMin", "init_react", "SpotifyStore", "init_SpotifyStore", "__esmMin", "init_react", "init_spotifyStyles", "init_IpcEvents", "init_misc", "init_proxyLazy", "init_webpack", "init_common", "proxyLazy", "style", "spotifyStyles_default", "Store", "Flux", "SpotifySocket", "lazyWebpack", "filters", "SpotifyAPI", "API_BASE", "dispatcher", "handlers", "path", "IpcEvents_default", "pos", "p", "percent", "playing", "state", "ms", "e", "method", "route", "data", "socket", "store", "FluxDispatcher", "devices", "d", "msToHuman", "ms", "minutes", "m", "s", "Svg", "path", "label", "VencordCreateElement", "classes", "cl", "Button", "props", "Controls", "isPlaying", "shuffle", "repeat", "useStateFromStores", "SpotifyStore", "nextRepeat", "repeatClassName", "Flex", "Shuffle", "SkipPrev", "PauseButton", "PlayButton", "SkipNext", "Repeat", "SeekBar", "duration", "storePosition", "isSettingPosition", "position", "setPosition", "React", "interval", "p", "Forms", "Slider", "v", "seek", "AlbumContextMenu", "track", "volume", "Menu", "FluxDispatcher", "ref", "debounce", "Info", "img", "coverExpanded", "setCoverExpanded", "i", "VencordFragment", "e", "ContextMenu", "Link", "Player", "prev", "next", "device", "shouldHide", "setShouldHide", "timeout", "ErrorBoundary_default", "init_PlayerComponent", "__esmMin", "init_react", "init_ErrorBoundary", "init_Flex", "init_Link", "init_debounce", "init_misc", "init_common", "init_webpack", "init_SpotifyStore", "className", "lazyWebpack", "filters", "LazyComponent", "filter", "find", "spotifyControls_default", "init_spotifyControls", "__esmMin", "init_react", "init_constants", "init_types", "init_PlayerComponent", "definePlugin", "Devs", "VencordCreateElement", "Player", "spotifyCrack_default", "init_spotifyCrack", "__esmMin", "init_react", "init_settings", "init_constants", "init_types", "init_Vencord", "migratePluginSettings", "definePlugin", "Devs", "_", "functionStart", "data", "functionBody", "Settings", "functionDeclarationAndExpression", "restOfFunction", "sendMessage", "channelId", "message", "reply", "PendingReplyStore", "MessageCreator", "FluxDispatcher", "Spotify", "spotifyShareCommands_default", "init_spotifyShareCommands", "__esmMin", "init_react", "init_Commands", "init_settings", "init_constants", "init_misc", "init_types", "init_webpack", "init_common", "lazyWebpack", "filters", "migratePluginSettings", "definePlugin", "Devs", "_", "ctx", "track", "sendBotMessage", "StartupTimingPage_exports", "__export", "StartupTimingPage_default", "TimerItem", "emoji", "prefix", "log", "delta", "instance", "VencordCreateElement", "React", "TimingSection", "title", "logs", "traceEnd", "startTime", "lastTimestamp", "timings", "timestamp", "sinceStart", "sinceLast", "Forms", "AppStartPerformance", "i", "ServerTrace", "trace", "lines", "Flex", "line", "StartupTimingPage", "serverTrace", "g", "init_StartupTimingPage", "__esmMin", "init_react", "init_ErrorBoundary", "init_Flex", "init_misc", "init_common", "init_webpack", "lazyWebpack", "filters", "ErrorBoundary_default", "startupTimings_default", "init_startupTimings", "__esmMin", "init_react", "init_constants", "init_misc", "init_types", "definePlugin", "Devs", "LazyComponent", "unindent_default", "init_unindent", "__esmMin", "init_react", "init_MessageEvents", "init_constants", "init_types", "definePlugin", "Devs", "_", "content", "str", "minIndent", "prev", "curr", "msg", "m", "lines", "suffix", "addPreSendListener", "addPreEditListener", "_cid", "_mid", "removePreSendListener", "removePreEditListener", "ERROR_CODES", "CODES_URL", "unminifyErrors_default", "init_unminifyErrors", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "_", "func", "original", "res", "code", "args", "index", "arg", "uwuify", "message", "w", "owofied", "lowerCase", "find", "replace", "replacements", "endings", "uwuify_default", "init_uwuify", "__esmMin", "init_react", "init_Commands", "init_constants", "init_types", "definePlugin", "Devs", "RequiredMessageOption", "opts", "findOption", "timers", "vcDoubleClick_default", "init_vcDoubleClick", "__esmMin", "init_react", "init_settings", "init_constants", "init_types", "init_common", "migratePluginSettings", "definePlugin", "Devs", "cb", "e", "id", "SelectedChannelStore", "data", "ImageModal", "MaskedLink", "GuildBannerStore", "OPEN_URL", "viewIcons_default", "init_viewIcons", "__esmMin", "init_react", "init_constants", "init_misc", "init_modal", "init_webpack", "init_common", "LazyComponent", "find", "m", "lazyWebpack", "filters", "Devs", "url", "u", "openModal", "modalProps", "VencordCreateElement", "ModalRoot", "_", "src", "style", "guild", "Menu", "volumeBooster_default", "init_volumeBooster", "__esmMin", "init_react", "init_SettingSliderComponent", "init_constants", "init_types", "definePlugin", "Devs", "_", "defaultMaxVolumePredicate", "higherMaxVolume", "minorMaxVolume", "makeRange", "webContextMenus_default", "init_webContextMenus", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "webhookTags_default", "init_webhookTags", "__esmMin", "init_react", "init_constants", "init_types", "definePlugin", "Devs", "orig", "types", "text", "type", "BotTag", "Queue", "init_Queue", "__esmMin", "init_react", "maxSize", "func", "fetchReactions", "msg", "emoji", "key", "RestAPI", "res", "FluxDispatcher", "sleep", "getReactionsWithQueue", "e", "cache", "ReactionStore", "queue", "makeRenderMoreUsers", "users", "_label", "_count", "VencordCreateElement", "Tooltip", "u", "onMouseEnter", "onMouseLeave", "AvatarStyles", "UserSummaryItem", "whoReacted_default", "init_whoReacted", "__esmMin", "init_react", "init_ErrorBoundary", "init_constants", "init_misc", "init_Queue", "init_types", "init_webpack", "init_common", "LazyComponent", "findByCode", "lazyWebpack", "filters", "Queue", "definePlugin", "Devs", "props", "ErrorBoundary_default", "message", "forceUpdate", "useForceUpdater", "React", "cb", "reactions", "ChannelStore", "plugins_default", "init_plugins", "__esmMin", "init_react", "init_BetterNotes", "init_HideAttachments", "init_TimeBarAllActivities", "init_anonymiseFileNames", "init_apiBadges", "init_apiCommands", "init_apiMenuItemDeobfuscator", "init_apiMessageAccessories", "init_apiMessageEvents", "init_apiNotices", "init_apiServerList", "init_arRPC", "init_banger", "init_betterGifAltText", "init_betterRoleDot", "init_betterUploadButton", "init_callTimer", "init_clearURLs", "init_consoleShortcuts", "init_corruptMp4s", "init_dictionary", "init_emoteCloner", "init_experiments", "init_fakeNitro", "init_fart", "init_forceOwnerCrown", "init_friendInvites", "init_fxTwitter", "init_iLoveSpam", "init_ignoreActivities", "init_keepCurrentChannel", "init_lastfm", "init_loadingQuotes", "init_messageActions", "init_messageLogger", "init_messageTags", "init_moreCommands", "init_moreKaomoji", "init_moyai", "init_muteNewGuild", "init_noBlockedMessages", "init_noCanaryMessageLinks", "init_noDevtoolsWarning", "init_noF1", "init_noRPC", "init_noReplyMention", "init_noSystemBadge", "init_noTrack", "init_noUnblockToJump", "init_oneko", "init_petpet", "init_plainFolderIcon", "init_platformIndicators", "init_pronoundb", "init_quickMention", "init_quickReply", "init_readAllNotificationsButton", "init_reverseImageSearch", "init_reviewDB", "init_settings", "init_showHiddenChannels", "init_silentTyping", "init_spotifyControls", "init_spotifyCrack", "init_spotifyShareCommands", "init_startupTimings", "init_unindent", "init_unminifyErrors", "init_uwuify", "init_vcDoubleClick", "init_viewIcons", "init_volumeBooster", "init_webContextMenus", "init_webhookTags", "init_whoReacted", "BetterNotes_default", "HideAttachments_default", "TimeBarAllActivities_default", "anonymiseFileNames_default", "apiBadges_default", "apiCommands_default", "apiMenuItemDeobfuscator_default", "apiMessageAccessories_default", "apiMessageEvents_default", "apiNotices_default", "apiServerList_default", "arRPC_default", "banger_default", "betterGifAltText_default", "betterRoleDot_default", "betterUploadButton_default", "callTimer_default", "clearURLs_default", "consoleShortcuts_default", "corruptMp4s_default", "dictionary_default", "emoteCloner_default", "experiments_default", "fakeNitro_default", "fart_default", "forceOwnerCrown_default", "friendInvites_default", "fxTwitter_default", "iLoveSpam_default", "ignoreActivities_default", "keepCurrentChannel_default", "lastfm_default", "loadingQuotes_default", "messageActions_default", "messageLogger_default", "messageTags_default", "moreCommands_default", "moreKaomoji_default", "moyai_default", "muteNewGuild_default", "noBlockedMessages_default", "noCanaryMessageLinks_default", "noDevtoolsWarning_default", "noF1_default", "noRPC_default", "noReplyMention_default", "noSystemBadge_default", "noTrack_default", "noUnblockToJump_default", "oneko_default", "petpet_default", "plainFolderIcon_default", "platformIndicators_default", "pronoundb_default", "quickMention_default", "quickReply_default", "readAllNotificationsButton_default", "reverseImageSearch_default", "reviewDB_default", "settings_default", "showHiddenChannels_default", "silentTyping_default", "spotifyControls_default", "spotifyCrack_default", "spotifyShareCommands_default", "startupTimings_default", "unindent_default", "unminifyErrors_default", "uwuify_default", "vcDoubleClick_default", "viewIcons_default", "volumeBooster_default", "webContextMenus_default", "webhookTags_default", "whoReacted_default", "Badges_exports", "__export", "BadgePosition", "addBadge", "inject", "removeBadge", "badge", "Badges", "badgeArray", "args", "plugins_default", "init_Badges", "__esmMin", "init_react", "init_plugins", "MessageAccessories_exports", "__export", "_modifyAccessories", "accessories", "addAccessory", "removeAccessory", "identifier", "callback", "position", "elements", "props", "accessory", "init_MessageAccessories", "__esmMin", "init_react", "api_exports", "__export", "Badges", "Commands", "DataStore", "MessageAccessories", "MessageEvents", "Notices", "ServerList", "init_api", "__esmMin", "init_react", "init_Badges", "init_Commands", "init_DataStore", "init_MessageAccessories", "init_MessageEvents", "init_Notices", "init_ServerList", "MessageEvents_exports", "Notices_exports", "Commands_exports", "DataStore_exports", "MessageAccessories_exports", "Badges_exports", "ServerList_exports", "discord_exports", "__export", "getCurrentChannel", "getCurrentGuild", "openPrivateChannel", "ChannelStore", "SelectedChannelStore", "GuildStore", "userId", "PrivateChannelsStore", "init_discord", "__esmMin", "init_react", "init_common", "onceDefined", "target", "property", "callback", "propertyAsAny", "v", "init_onceDefined", "__esmMin", "init_react", "utils_exports", "__export", "ChangeList", "constants_exports", "discord_exports", "IpcEvents_default", "LazyComponent", "Logger", "modal_exports", "Queue", "classes", "debounce", "humanFriendlyJoin", "lazy", "lazyWebpack", "makeCodeblock", "makeLazy", "mergeDefaults", "onceDefined", "proxyLazy", "sleep", "suppressErrors", "useAwaiter", "useForceUpdater", "init_utils", "__esmMin", "init_react", "init_ChangeList", "init_constants", "init_debounce", "init_discord", "init_IpcEvents", "init_Logger", "init_misc", "init_modal", "init_onceDefined", "init_proxyLazy", "init_Queue", "quickCss_exports", "__export", "toggle", "isEnabled", "style", "IpcEvents_default", "_", "css", "init_quickCss", "__esmMin", "init_react", "init_settings", "init_IpcEvents", "Settings", "addSettingsListener", "patchPush", "handlePush", "chunk", "modules", "subscriptions", "listeners", "patches", "id", "mod", "code", "originalMod", "patchedBy", "factory", "module", "exports", "require", "err", "logger", "callback", "filter", "nested", "i", "patch", "replacement", "lastMod", "lastCode", "newCode", "WEBPACK_CHUNK", "v", "webpackChunk", "init_patchWebpack", "__esmMin", "init_react", "init_constants", "init_Logger", "init_webpack", "Logger", "_initWebpack", "findCandidates", "PatchHelper_default", "init_PatchHelper", "__esmMin", "init_react", "init_debounce", "init_misc", "init_common", "init_webpack", "init_CheckedTextInput", "init_ErrorBoundary", "debounce", "find", "setModule", "setError", "candidates", "search", "keys", "len", "components_exports", "__export", "PatchHelper_default", "PluginSettings_default", "VencordSettings_default", "init_components", "__esmMin", "init_react", "init_PatchHelper", "init_PluginSettings", "init_VencordSettings", "Vencord_exports", "__export", "api_exports", "Components", "PlainSettings", "plugins_exports", "quickCss_exports", "Settings", "updater_exports", "utils_exports", "webpack_exports", "init", "onceReady", "startAllPlugins", "checkForUpdates", "showNotice", "popNotice", "Router", "err", "UpdateLogger", "init_Vencord", "__esmMin", "init_react", "init_api", "init_plugins", "init_utils", "init_quickCss", "init_updater", "init_webpack", "init_patchWebpack", "init_Notices", "init_settings", "init_common"]
}
